!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("google"),require("AMap"),require("turf")):"function"==typeof define&&define.amd?define(["google","AMap","turf"],e):"object"==typeof exports?exports.lm=e(require("google"),require("AMap"),require("turf")):t.lm=e(t.google,t.AMap,t.turf)}("undefined"!=typeof self?self:this,function(t,e,i){return function(t){function e(r){if(i[r])return i[r].exports;var n=i[r]={i:r,l:!1,exports:{}};return t[r].call(n.exports,n,n.exports,e),n.l=!0,n.exports}var i={};return e.m=t,e.c=i,e.d=function(t,i,r){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=297)}([function(t,e,i){"use strict";var r={};r.ASSUME_TOUCH=!1,r.DEFAULT_MAX_ZOOM=42,r.DEFAULT_MIN_ZOOM=0,r.DEFAULT_RASTER_REPROJECTION_ERROR_THRESHOLD=.5,r.DEFAULT_TILE_SIZE=256,r.DEFAULT_WMS_VERSION="1.3.0",r.ENABLE_CANVAS=!0,r.ENABLE_PROJ4JS=!0,r.ENABLE_RASTER_REPROJECTION=!0,r.ENABLE_WEBGL=!0,r.DEBUG_WEBGL=!0,r.INITIAL_ATLAS_SIZE=256,r.MAX_ATLAS_SIZE=-1,r.MOUSEWHEELZOOM_MAXDELTA=1,r.OVERVIEWMAP_MAX_RATIO=.75,r.OVERVIEWMAP_MIN_RATIO=.1,r.RASTER_REPROJECTION_MAX_SOURCE_TILES=100,r.RASTER_REPROJECTION_MAX_SUBDIVISION=10,r.RASTER_REPROJECTION_MAX_TRIANGLE_WIDTH=.25,r.SIMPLIFY_TOLERANCE=.5,r.WEBGL_TEXTURE_CACHE_HIGH_WATER_MARK=1024,r.VERSION="v4.6.5",r.WEBGL_MAX_TEXTURE_SIZE,r.WEBGL_EXTENSIONS,r.inherits=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},r.nullFunction=function(){},r.getUid=function(t){return t.ol_uid||(t.ol_uid=++r.uidCounter_)},r.uidCounter_=0,e.a=r},function(t,e,i){"use strict";var r=i(9),n=i(216),o=i(217),a={};a.boundingExtent=function(t){for(var e=a.createEmpty(),i=0,r=t.length;i<r;++i)a.extendCoordinate(e,t[i]);return e},a.boundingExtentXYs_=function(t,e,i){var r=Math.min.apply(null,t),n=Math.min.apply(null,e),o=Math.max.apply(null,t),s=Math.max.apply(null,e);return a.createOrUpdate(r,n,o,s,i)},a.buffer=function(t,e,i){return i?(i[0]=t[0]-e,i[1]=t[1]-e,i[2]=t[2]+e,i[3]=t[3]+e,i):[t[0]-e,t[1]-e,t[2]+e,t[3]+e]},a.clone=function(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t.slice()},a.closestSquaredDistanceXY=function(t,e,i){var r,n;return r=e<t[0]?t[0]-e:t[2]<e?e-t[2]:0,n=i<t[1]?t[1]-i:t[3]<i?i-t[3]:0,r*r+n*n},a.containsCoordinate=function(t,e){return a.containsXY(t,e[0],e[1])},a.containsExtent=function(t,e){return t[0]<=e[0]&&e[2]<=t[2]&&t[1]<=e[1]&&e[3]<=t[3]},a.containsXY=function(t,e,i){return t[0]<=e&&e<=t[2]&&t[1]<=i&&i<=t[3]},a.coordinateRelationship=function(t,e){var i=t[0],r=t[1],n=t[2],a=t[3],s=e[0],l=e[1],u=o.a.UNKNOWN;return s<i?u|=o.a.LEFT:s>n&&(u|=o.a.RIGHT),l<r?u|=o.a.BELOW:l>a&&(u|=o.a.ABOVE),u===o.a.UNKNOWN&&(u=o.a.INTERSECTING),u},a.createEmpty=function(){return[1/0,1/0,-1/0,-1/0]},a.createOrUpdate=function(t,e,i,r,n){return n?(n[0]=t,n[1]=e,n[2]=i,n[3]=r,n):[t,e,i,r]},a.createOrUpdateEmpty=function(t){return a.createOrUpdate(1/0,1/0,-1/0,-1/0,t)},a.createOrUpdateFromCoordinate=function(t,e){var i=t[0],r=t[1];return a.createOrUpdate(i,r,i,r,e)},a.createOrUpdateFromCoordinates=function(t,e){var i=a.createOrUpdateEmpty(e);return a.extendCoordinates(i,t)},a.createOrUpdateFromFlatCoordinates=function(t,e,i,r,n){var o=a.createOrUpdateEmpty(n);return a.extendFlatCoordinates(o,t,e,i,r)},a.createOrUpdateFromRings=function(t,e){var i=a.createOrUpdateEmpty(e);return a.extendRings(i,t)},a.equals=function(t,e){return t[0]==e[0]&&t[2]==e[2]&&t[1]==e[1]&&t[3]==e[3]},a.extend=function(t,e){return e[0]<t[0]&&(t[0]=e[0]),e[2]>t[2]&&(t[2]=e[2]),e[1]<t[1]&&(t[1]=e[1]),e[3]>t[3]&&(t[3]=e[3]),t},a.extendCoordinate=function(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])},a.extendCoordinates=function(t,e){var i,r;for(i=0,r=e.length;i<r;++i)a.extendCoordinate(t,e[i]);return t},a.extendFlatCoordinates=function(t,e,i,r,n){for(;i<r;i+=n)a.extendXY(t,e[i],e[i+1]);return t},a.extendRings=function(t,e){var i,r;for(i=0,r=e.length;i<r;++i)a.extendCoordinates(t,e[i]);return t},a.extendXY=function(t,e,i){t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],i),t[2]=Math.max(t[2],e),t[3]=Math.max(t[3],i)},a.forEachCorner=function(t,e,i){var r;return(r=e.call(i,a.getBottomLeft(t)))?r:(r=e.call(i,a.getBottomRight(t)))?r:(r=e.call(i,a.getTopRight(t)))?r:(r=e.call(i,a.getTopLeft(t)))||!1},a.getArea=function(t){var e=0;return a.isEmpty(t)||(e=a.getWidth(t)*a.getHeight(t)),e},a.getBottomLeft=function(t){return[t[0],t[1]]},a.getBottomRight=function(t){return[t[2],t[1]]},a.getCenter=function(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]},a.getCorner=function(t,e){var i;return e===n.a.BOTTOM_LEFT?i=a.getBottomLeft(t):e===n.a.BOTTOM_RIGHT?i=a.getBottomRight(t):e===n.a.TOP_LEFT?i=a.getTopLeft(t):e===n.a.TOP_RIGHT?i=a.getTopRight(t):r.a.assert(!1,13),i},a.getEnlargedArea=function(t,e){var i=Math.min(t[0],e[0]),r=Math.min(t[1],e[1]);return(Math.max(t[2],e[2])-i)*(Math.max(t[3],e[3])-r)},a.getForViewAndSize=function(t,e,i,r,n){var o=e*r[0]/2,s=e*r[1]/2,l=Math.cos(i),u=Math.sin(i),h=o*l,c=o*u,p=s*l,d=s*u,f=t[0],_=t[1],g=f-h+d,y=f-h-d,v=f+h-d,m=f+h+d,E=_-c-p,T=_-c+p,S=_+c+p,R=_+c-p;return a.createOrUpdate(Math.min(g,y,v,m),Math.min(E,T,S,R),Math.max(g,y,v,m),Math.max(E,T,S,R),n)},a.getHeight=function(t){return t[3]-t[1]},a.getIntersectionArea=function(t,e){var i=a.getIntersection(t,e);return a.getArea(i)},a.getIntersection=function(t,e,i){var r=i||a.createEmpty();return a.intersects(t,e)&&(t[0]>e[0]?r[0]=t[0]:r[0]=e[0],t[1]>e[1]?r[1]=t[1]:r[1]=e[1],t[2]<e[2]?r[2]=t[2]:r[2]=e[2],t[3]<e[3]?r[3]=t[3]:r[3]=e[3]),r},a.getMargin=function(t){return a.getWidth(t)+a.getHeight(t)},a.getSize=function(t){return[t[2]-t[0],t[3]-t[1]]},a.getTopLeft=function(t){return[t[0],t[3]]},a.getTopRight=function(t){return[t[2],t[3]]},a.getWidth=function(t){return t[2]-t[0]},a.intersects=function(t,e){return t[0]<=e[2]&&t[2]>=e[0]&&t[1]<=e[3]&&t[3]>=e[1]},a.isEmpty=function(t){return t[2]<t[0]||t[3]<t[1]},a.returnOrUpdate=function(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t},a.scaleFromCenter=function(t,e){var i=(t[2]-t[0])/2*(e-1),r=(t[3]-t[1])/2*(e-1);t[0]-=i,t[2]+=i,t[1]-=r,t[3]+=r},a.intersectsSegment=function(t,e,i){var r=!1,n=a.coordinateRelationship(t,e),s=a.coordinateRelationship(t,i);if(n===o.a.INTERSECTING||s===o.a.INTERSECTING)r=!0;else{var l,u,h=t[0],c=t[1],p=t[2],d=t[3],f=e[0],_=e[1],g=i[0],y=i[1],v=(y-_)/(g-f);s&o.a.ABOVE&&!(n&o.a.ABOVE)&&(l=g-(y-d)/v,r=l>=h&&l<=p),r||!(s&o.a.RIGHT)||n&o.a.RIGHT||(u=y-(g-p)*v,r=u>=c&&u<=d),r||!(s&o.a.BELOW)||n&o.a.BELOW||(l=g-(y-c)/v,r=l>=h&&l<=p),r||!(s&o.a.LEFT)||n&o.a.LEFT||(u=y-(g-h)*v,r=u>=c&&u<=d)}return r},a.applyTransform=function(t,e,i){var r=[t[0],t[1],t[0],t[3],t[2],t[1],t[2],t[3]];e(r,r,2);var n=[r[0],r[2],r[4],r[6]],o=[r[1],r[3],r[5],r[7]];return a.boundingExtentXYs_(n,o,i)},e.a=a},function(t,e,i){"use strict";var r={};r.assign="function"==typeof Object.assign?Object.assign:function(t,e){if(void 0===t||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var i=Object(t),r=1,n=arguments.length;r<n;++r){var o=arguments[r];if(void 0!==o&&null!==o)for(var a in o)o.hasOwnProperty(a)&&(i[a]=o[a])}return i},r.clear=function(t){for(var e in t)delete t[e]},r.getValues=function(t){var e=[];for(var i in t)e.push(t[i]);return e},r.isEmpty=function(t){var e;for(e in t)return!1;return!e},e.a=r},function(t,e,i){t.exports={default:i(322),__esModule:!0}},function(t,e,i){"use strict";var r=i(2),n={};n.bindListener_=function(t){var e=function(e){var i=t.listener,r=t.bindTo||t.target;return t.callOnce&&n.unlistenByKey(t),i.call(r,e)};return t.boundListener=e,e},n.findListener_=function(t,e,i,r){for(var n,o=0,a=t.length;o<a;++o)if(n=t[o],n.listener===e&&n.bindTo===i)return r&&(n.deleteIndex=o),n},n.getListeners=function(t,e){var i=t.ol_lm;return i?i[e]:void 0},n.getListenerMap_=function(t){var e=t.ol_lm;return e||(e=t.ol_lm={}),e},n.removeListeners_=function(t,e){var i=n.getListeners(t,e);if(i){for(var o=0,a=i.length;o<a;++o)t.removeEventListener(e,i[o].boundListener),r.a.clear(i[o]);i.length=0;var s=t.ol_lm;s&&(delete s[e],0===Object.keys(s).length&&delete t.ol_lm)}},n.listen=function(t,e,i,r,o){var a=n.getListenerMap_(t),s=a[e];s||(s=a[e]=[]);var l=n.findListener_(s,i,r,!1);return l?o||(l.callOnce=!1):(l={bindTo:r,callOnce:!!o,listener:i,target:t,type:e},t.addEventListener(e,n.bindListener_(l)),s.push(l)),l},n.listenOnce=function(t,e,i,r){return n.listen(t,e,i,r,!0)},n.unlisten=function(t,e,i,r){var o=n.getListeners(t,e);if(o){var a=n.findListener_(o,i,r,!0);a&&n.unlistenByKey(a)}},n.unlistenByKey=function(t){if(t&&t.target){t.target.removeEventListener(t.type,t.boundListener);var e=n.getListeners(t.target,t.type);if(e){var i="deleteIndex"in t?t.deleteIndex:e.indexOf(t);-1!==i&&e.splice(i,1),0===e.length&&n.removeListeners_(t.target,t.type)}r.a.clear(t)}},n.unlistenAll=function(t){var e=n.getListenerMap_(t);for(var i in e)n.removeListeners_(t,i)},e.a=n},function(t,e,i){"use strict";var r={CHANGE:"change",CLEAR:"clear",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",ERROR:"error",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",MOUSEDOWN:"mousedown",MOUSEMOVE:"mousemove",MOUSEOUT:"mouseout",MOUSEUP:"mouseup",MOUSEWHEEL:"mousewheel",MSPOINTERDOWN:"MSPointerDown",RESIZE:"resize",TOUCHSTART:"touchstart",TOUCHMOVE:"touchmove",TOUCHEND:"touchend",WHEEL:"wheel"};e.a=r},function(t,e,i){"use strict";var r={};r.binarySearch=function(t,e,i){for(var n,o,a=i||r.numberSafeCompareFunction,s=0,l=t.length,u=!1;s<l;)n=s+(l-s>>1),o=+a(t[n],e),o<0?s=n+1:(l=n,u=!o);return u?s:~s},r.numberSafeCompareFunction=function(t,e){return t>e?1:t<e?-1:0},r.includes=function(t,e){return t.indexOf(e)>=0},r.linearFindNearest=function(t,e,i){var r=t.length;if(t[0]<=e)return 0;if(e<=t[r-1])return r-1;var n;if(i>0){for(n=1;n<r;++n)if(t[n]<e)return n-1}else if(i<0){for(n=1;n<r;++n)if(t[n]<=e)return n}else for(n=1;n<r;++n){if(t[n]==e)return n;if(t[n]<e)return t[n-1]-e<e-t[n]?n-1:n}return r-1},r.reverseSubArray=function(t,e,i){for(;e<i;){var r=t[e];t[e]=t[i],t[i]=r,++e,--i}},r.extend=function(t,e){var i,r=Array.isArray(e)?e:[e],n=r.length;for(i=0;i<n;i++)t[t.length]=r[i]},r.remove=function(t,e){var i=t.indexOf(e),r=i>-1;return r&&t.splice(i,1),r},r.find=function(t,e){for(var i,r=t.length>>>0,n=0;n<r;n++)if(i=t[n],e(i,n,t))return i;return null},r.equals=function(t,e){var i=t.length;if(i!==e.length)return!1;for(var r=0;r<i;r++)if(t[r]!==e[r])return!1;return!0},r.stableSort=function(t,e){var i,r=t.length,n=Array(t.length);for(i=0;i<r;i++)n[i]={index:i,value:t[i]};for(n.sort(function(t,i){return e(t.value,i.value)||t.index-i.index}),i=0;i<t.length;i++)t[i]=n[i].value},r.findIndex=function(t,e){var i;return t.every(function(r,n){return i=n,!e(r,n,t)})?-1:i},r.isSorted=function(t,e,i){var n=e||r.numberSafeCompareFunction;return t.every(function(e,r){if(0===r)return!0;var o=n(t[r-1],e);return!(o>0||i&&0===o)})},e.a=r},function(t,e,i){"use strict";var r=i(9),n={};n.clamp=function(t,e,i){return Math.min(Math.max(t,e),i)},n.cosh=function(){return"cosh"in Math?Math.cosh:function(t){var e=Math.exp(t);return(e+1/e)/2}}(),n.roundUpToPowerOfTwo=function(t){return r.a.assert(0<t,29),Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},n.squaredSegmentDistance=function(t,e,i,r,o,a){var s=o-i,l=a-r;if(0!==s||0!==l){var u=((t-i)*s+(e-r)*l)/(s*s+l*l);u>1?(i=o,r=a):u>0&&(i+=s*u,r+=l*u)}return n.squaredDistance(t,e,i,r)},n.squaredDistance=function(t,e,i,r){var n=i-t,o=r-e;return n*n+o*o},n.solveLinearSystem=function(t){for(var e=t.length,i=0;i<e;i++){for(var r=i,n=Math.abs(t[i][i]),o=i+1;o<e;o++){var a=Math.abs(t[o][i]);a>n&&(n=a,r=o)}if(0===n)return null;var s=t[r];t[r]=t[i],t[i]=s;for(var l=i+1;l<e;l++)for(var u=-t[l][i]/t[i][i],h=i;h<e+1;h++)i==h?t[l][h]=0:t[l][h]+=u*t[i][h]}for(var c=new Array(e),p=e-1;p>=0;p--){c[p]=t[p][e]/t[p][p];for(var d=p-1;d>=0;d--)t[d][e]-=t[d][p]*c[p]}return c},n.toDegrees=function(t){return 180*t/Math.PI},n.toRadians=function(t){return t*Math.PI/180},n.modulo=function(t,e){var i=t%e;return i*e<0?i+e:i},n.lerp=function(t,e,i){return t+i*(e-t)},e.a=n},function(t,e,i){"use strict";var r=i(0),n=i(167),o=i(1),a=i(7),s=i(330),l=i(331),u=i(120),h=i(32),c=i(218),p=i(332),d=i(333),f={};f.METERS_PER_UNIT=h.a.METERS_PER_UNIT,f.SPHERE_=new n.a(n.a.DEFAULT_RADIUS),r.a.ENABLE_PROJ4JS&&(f.setProj4=function(t){c.a.set(t)}),f.getPointResolution=function(t,e,i,r){t=f.get(t);var n,o=t.getPointResolutionFunc();if(o)n=o(e,i);else{if(t.getUnits()==h.a.DEGREES&&!r||r==h.a.DEGREES)n=e;else{var a=f.getTransformFromProjections(t,f.get("EPSG:4326")),s=[i[0]-e/2,i[1],i[0]+e/2,i[1],i[0],i[1]-e/2,i[0],i[1]+e/2];s=a(s,s,2);n=(f.SPHERE_.haversineDistance(s.slice(0,2),s.slice(2,4))+f.SPHERE_.haversineDistance(s.slice(4,6),s.slice(6,8)))/2;var l=r?h.a.METERS_PER_UNIT[r]:t.getMetersPerUnit();void 0!==l&&(n/=l)}}return n},f.addEquivalentProjections=function(t){f.addProjections(t),t.forEach(function(e){t.forEach(function(t){e!==t&&d.a.add(e,t,f.cloneTransform)})})},f.addEquivalentTransforms=function(t,e,i,r){t.forEach(function(t){e.forEach(function(e){d.a.add(t,e,i),d.a.add(e,t,r)})})},f.addProjection=function(t){p.a.add(t.getCode(),t),d.a.add(t,t,f.cloneTransform)},f.addProjections=function(t){t.forEach(f.addProjection)},f.clearAllProjections=function(){p.a.clear(),d.a.clear()},f.createProjection=function(t,e){return t?"string"==typeof t?f.get(t):t:f.get(e)},f.addCoordinateTransforms=function(t,e,i,r){var n=f.get(t),o=f.get(e);d.a.add(n,o,f.createTransformFromCoordinateTransform(i)),d.a.add(o,n,f.createTransformFromCoordinateTransform(r))},f.createTransformFromCoordinateTransform=function(t){return function(e,i,r){var n,o,a,s=e.length,l=void 0!==r?r:2,u=void 0!==i?i:new Array(s);for(o=0;o<s;o+=l)for(n=t([e[o],e[o+1]]),u[o]=n[0],u[o+1]=n[1],a=l-1;a>=2;--a)u[o+a]=e[o+a];return u}},f.fromLonLat=function(t,e){return f.transform(t,"EPSG:4326",void 0!==e?e:"EPSG:3857")},f.toLonLat=function(t,e){var i=f.transform(t,void 0!==e?e:"EPSG:3857","EPSG:4326"),r=i[0];return(r<-180||r>180)&&(i[0]=a.a.modulo(r+180,360)-180),i},f.get=function(t){var e=null;if(t instanceof u.a)e=t;else if("string"==typeof t){var i=t;if(e=p.a.get(i),r.a.ENABLE_PROJ4JS&&!e){var n=c.a.get();"function"==typeof n&&void 0!==n.defs(i)&&(e=new u.a({code:i}),f.addProjection(e))}}return e},f.equivalent=function(t,e){if(t===e)return!0;var i=t.getUnits()===e.getUnits();return t.getCode()===e.getCode()?i:f.getTransformFromProjections(t,e)===f.cloneTransform&&i},f.getTransform=function(t,e){var i=f.get(t),r=f.get(e);return f.getTransformFromProjections(i,r)},f.getTransformFromProjections=function(t,e){var i=t.getCode(),n=e.getCode(),o=d.a.get(i,n);if(r.a.ENABLE_PROJ4JS&&!o){var a=c.a.get();if("function"==typeof a){var s=a.defs(i),l=a.defs(n);if(void 0!==s&&void 0!==l){if(s===l)f.addEquivalentProjections([e,t]);else{var u=a(n,i);f.addCoordinateTransforms(e,t,u.forward,u.inverse)}o=d.a.get(i,n)}}}return o||(o=f.identityTransform),o},f.identityTransform=function(t,e,i){if(void 0!==e&&t!==e){for(var r=0,n=t.length;r<n;++r)e[r]=t[r];t=e}return t},f.cloneTransform=function(t,e,i){var r;if(void 0!==e){for(var n=0,o=t.length;n<o;++n)e[n]=t[n];r=e}else r=t.slice();return r},f.transform=function(t,e,i){return f.getTransform(e,i)(t,void 0,t.length)},f.transformExtent=function(t,e,i){var r=f.getTransform(e,i);return o.a.applyTransform(t,r)},f.transformWithProjections=function(t,e,i){return f.getTransformFromProjections(e,i)(t)},f.addCommon=function(){f.addEquivalentProjections(s.a.PROJECTIONS),f.addEquivalentProjections(l.a.PROJECTIONS),f.addEquivalentTransforms(l.a.PROJECTIONS,s.a.PROJECTIONS,s.a.fromEPSG4326,s.a.toEPSG4326)},f.addCommon(),e.a=f},function(t,e,i){"use strict";var r=i(213),n={};n.assert=function(t,e){if(!t)throw new r.a(e)},e.a=n},function(t,e,i){"use strict";function r(t){for(var e=arguments.length,i=void 0,r=1;r<e;r++){i=arguments[r];for(var n in i)t[n]=i[n]}return t}function n(t,e){var i=Array.prototype.slice;if(t.bind)return t.bind.apply(t,i.call(arguments,1));var r=i.call(arguments,2);return function(){return t.apply(e,r.length?r.concat(i.call(arguments)):arguments)}}function o(t){return t._id=t._id||++O,t._id}function a(){return!1}function s(t,e){var i=Math.pow(10,void 0===e?6:e);return Math.round(t*i)/i}function l(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function u(t){return l(t).split(/\s+/)}function h(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}function c(t){var e=+new Date,i=Math.max(0,16-(e-P));return P=e+i,window.setTimeout(t,i)}function p(t){return"number"==typeof t}function d(t){return"string"==typeof t}function f(t){return"boolean"==typeof t}function _(t){return"function"==typeof t}function g(t){return"object"===(void 0===t?"undefined":C(t))}function y(t,e){if(t&&"string"==typeof t&&t.indexOf(e)>-1){return t.split(e).join()}return t}function v(t,e){var i=t,r=i.length;if(r<e){for(var n=i[0],o=e-r,a=[],s=0;s<=o;s++)n*=2,a.push(n);i=a.reverse().concat(i)}return i}function m(t,e){t.prototype=x()(e.prototype),t.prototype.constructor=t}e.b=r,e.a=n,e.o=o,e.d=a,e.e=s,e.p=l,e.n=u,i.d(e,"g",function(){return L}),e.j=p,e.l=d,e.h=f,e.i=_,e.k=g,e.m=y,e.c=v,e.f=m;var E=i(87),T=i.n(E),S=i(92),R=i.n(S),I=i(11),x=i.n(I),C="function"==typeof R.a&&"symbol"==typeof T.a?function(t){return typeof t}:function(t){return t&&"function"==typeof R.a&&t.constructor===R.a&&t!==R.a.prototype?"symbol":typeof t},O=(x.a||function(){function t(){}}(),0),P=0,L=(window.requestAnimationFrame||h("RequestAnimationFrame"),window.cancelAnimationFrame||h("CancelAnimationFrame")||h("CancelRequestAnimationFrame"),Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)})},function(t,e,i){t.exports={default:i(319),__esModule:!0}},function(t,e,i){"use strict";var r={POINT:"Point",LINE_STRING:"LineString",LINEAR_RING:"LinearRing",POLYGON:"Polygon",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon",GEOMETRY_COLLECTION:"GeometryCollection",CIRCLE:"Circle"};e.a=r},function(t,e,i){"use strict";var r={};r.createCanvasContext2D=function(t,e){var i=document.createElement("CANVAS");return t&&(i.width=t),e&&(i.height=e),i.getContext("2d")},r.outerWidth=function(t){var e=t.offsetWidth,i=getComputedStyle(t);return e+=parseInt(i.marginLeft,10)+parseInt(i.marginRight,10)},r.outerHeight=function(t){var e=t.offsetHeight,i=getComputedStyle(t);return e+=parseInt(i.marginTop,10)+parseInt(i.marginBottom,10)},r.replaceNode=function(t,e){var i=e.parentNode;i&&i.replaceChild(t,e)},r.removeNode=function(t){return t&&t.parentNode?t.parentNode.removeChild(t):null},r.removeChildren=function(t){for(;t.lastChild;)t.removeChild(t.lastChild)},e.a=r},function(t,e,i){t.exports={default:i(342),__esModule:!0}},function(t,e,i){t.exports={default:i(345),__esModule:!0}},function(t,e,i){"use strict";var r=i(9),n={};n.tmp_=new Array(6),n.create=function(){return[1,0,0,1,0,0]},n.reset=function(t){return n.set(t,1,0,0,1,0,0)},n.multiply=function(t,e){var i=t[0],r=t[1],n=t[2],o=t[3],a=t[4],s=t[5],l=e[0],u=e[1],h=e[2],c=e[3],p=e[4],d=e[5];return t[0]=i*l+n*u,t[1]=r*l+o*u,t[2]=i*h+n*c,t[3]=r*h+o*c,t[4]=i*p+n*d+a,t[5]=r*p+o*d+s,t},n.set=function(t,e,i,r,n,o,a){return t[0]=e,t[1]=i,t[2]=r,t[3]=n,t[4]=o,t[5]=a,t},n.setFromArray=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},n.apply=function(t,e){var i=e[0],r=e[1];return e[0]=t[0]*i+t[2]*r+t[4],e[1]=t[1]*i+t[3]*r+t[5],e},n.rotate=function(t,e){var i=Math.cos(e),r=Math.sin(e);return n.multiply(t,n.set(n.tmp_,i,r,-r,i,0,0))},n.scale=function(t,e,i){return n.multiply(t,n.set(n.tmp_,e,0,0,i,0,0))},n.translate=function(t,e,i){return n.multiply(t,n.set(n.tmp_,1,0,0,1,e,i))},n.compose=function(t,e,i,r,n,o,a,s){var l=Math.sin(o),u=Math.cos(o);return t[0]=r*u,t[1]=n*l,t[2]=-r*l,t[3]=n*u,t[4]=a*r*u-s*r*l+e,t[5]=a*n*l+s*n*u+i,t},n.invert=function(t){var e=n.determinant(t);r.a.assert(0!==e,32);var i=t[0],o=t[1],a=t[2],s=t[3],l=t[4],u=t[5];return t[0]=s/e,t[1]=-o/e,t[2]=-a/e,t[3]=i/e,t[4]=(a*u-s*l)/e,t[5]=-(i*u-o*l)/e,t},n.determinant=function(t){return t[0]*t[3]-t[1]*t[2]},e.a=n},function(t,e){var i=t.exports={version:"2.5.5"};"number"==typeof __e&&(__e=i)},function(t,e,i){"use strict";var r=i(0),n=i(93),o=i(165),a=i(25),s=i(2),l=function(t){o.a.call(this),r.a.getUid(this),this.values_={},void 0!==t&&this.setProperties(t)};r.a.inherits(l,o.a),l.changeEventTypeCache_={},l.getChangeEventType=function(t){return l.changeEventTypeCache_.hasOwnProperty(t)?l.changeEventTypeCache_[t]:l.changeEventTypeCache_[t]="change:"+t},l.prototype.get=function(t){var e;return this.values_.hasOwnProperty(t)&&(e=this.values_[t]),e},l.prototype.getKeys=function(){return Object.keys(this.values_)},l.prototype.getProperties=function(){return s.a.assign({},this.values_)},l.prototype.notify=function(t,e){var i;i=l.getChangeEventType(t),this.dispatchEvent(new l.Event(i,t,e)),i=n.a.PROPERTYCHANGE,this.dispatchEvent(new l.Event(i,t,e))},l.prototype.set=function(t,e,i){if(i)this.values_[t]=e;else{var r=this.values_[t];this.values_[t]=e,r!==e&&this.notify(t,r)}},l.prototype.setProperties=function(t,e){var i;for(i in t)this.set(i,t[i],e)},l.prototype.unset=function(t,e){if(t in this.values_){var i=this.values_[t];delete this.values_[t],e||this.notify(t,i)}},l.Event=function(t,e,i){a.a.call(this,t),this.key=e,this.oldValue=i},r.a.inherits(l.Event,a.a),e.a=l},function(t,e,i){"use strict";var r={};r.TRUE=function(){return!0},r.FALSE=function(){return!1},e.a=r},function(t,e,i){"use strict";var r={XY:"XY",XYZ:"XYZ",XYM:"XYM",XYZM:"XYZM"};e.a=r},function(t,e,i){"use strict";var r={};r.ONE=1,r.SRC_ALPHA=770,r.COLOR_ATTACHMENT0=36064,r.COLOR_BUFFER_BIT=16384,r.TRIANGLES=4,r.TRIANGLE_STRIP=5,r.ONE_MINUS_SRC_ALPHA=771,r.ARRAY_BUFFER=34962,r.ELEMENT_ARRAY_BUFFER=34963,r.STREAM_DRAW=35040,r.STATIC_DRAW=35044,r.DYNAMIC_DRAW=35048,r.CULL_FACE=2884,r.BLEND=3042,r.STENCIL_TEST=2960,r.DEPTH_TEST=2929,r.SCISSOR_TEST=3089,r.UNSIGNED_BYTE=5121,r.UNSIGNED_SHORT=5123,r.UNSIGNED_INT=5125,r.FLOAT=5126,r.RGBA=6408,r.FRAGMENT_SHADER=35632,r.VERTEX_SHADER=35633,r.LINK_STATUS=35714,r.LINEAR=9729,r.TEXTURE_MAG_FILTER=10240,r.TEXTURE_MIN_FILTER=10241,r.TEXTURE_WRAP_S=10242,r.TEXTURE_WRAP_T=10243,r.TEXTURE_2D=3553,r.TEXTURE0=33984,r.CLAMP_TO_EDGE=33071,r.COMPILE_STATUS=35713,r.FRAMEBUFFER=36160,r.CONTEXT_IDS_=["experimental-webgl","webgl","webkit-3d","moz-webgl"],r.getContext=function(t,e){var i,n,o=r.CONTEXT_IDS_.length;for(n=0;n<o;++n)try{if(i=t.getContext(r.CONTEXT_IDS_[n],e))return i}catch(t){}return null},e.a=r},function(t,e,i){"use strict";function r(t){a("info")&&console.info(t)}function n(t){a("warn")&&console.warn(t)}function o(t){a("error")&&console.error(t)}function a(t){return s.h(l)?!!l:!s.g(l)||l.indexOf(t)>-1}i.d(e,"b",function(){return r}),i.d(e,"c",function(){return n}),i.d(e,"a",function(){return o});var s=i(10),l=!0},function(t,e){var i=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=i)},function(t,e,i){var r=i(158)("wks"),n=i(115),o=i(23).Symbol,a="function"==typeof o;(t.exports=function(t){return r[t]||(r[t]=a&&o[t]||(a?o:n)("Symbol."+t))}).store=r},function(t,e,i){"use strict";var r=function(t){this.propagationStopped,this.type=t,this.target=null};r.prototype.preventDefault=r.prototype.stopPropagation=function(){this.propagationStopped=!0},r.stopPropagation=function(t){t.stopPropagation()},r.preventDefault=function(t){t.preventDefault()},e.a=r},function(t,e,i){"use strict";var r=i(0),n=i(1),o=i(20),a=i(12),s=i(35),l=i(55),u=i(7),h=function(t,e){s.a.call(this),this.setCoordinates(t,e)};r.a.inherits(h,s.a),h.prototype.clone=function(){var t=new h(null);return t.setFlatCoordinates(this.layout,this.flatCoordinates.slice()),t},h.prototype.closestPointXY=function(t,e,i,r){var n=this.flatCoordinates,o=u.a.squaredDistance(t,e,n[0],n[1]);if(o<r){var a,s=this.stride;for(a=0;a<s;++a)i[a]=n[a];return i.length=s,o}return r},h.prototype.getCoordinates=function(){return this.flatCoordinates?this.flatCoordinates.slice():[]},h.prototype.computeExtent=function(t){return n.a.createOrUpdateFromCoordinate(this.flatCoordinates,t)},h.prototype.getType=function(){return a.a.POINT},h.prototype.intersectsExtent=function(t){return n.a.containsXY(t,this.flatCoordinates[0],this.flatCoordinates[1])},h.prototype.setCoordinates=function(t,e){t?(this.setLayout(e,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=l.a.coordinate(this.flatCoordinates,0,t,this.stride),this.changed()):this.setFlatCoordinates(o.a.XY,null)},h.prototype.setFlatCoordinates=function(t,e){this.setFlatCoordinatesInternal(t,e),this.changed()},e.a=h},function(t,e,i){"use strict";var r=i(0),n=i(6),o=i(1),a=i(20),s=i(12),l=i(124),u=i(26),h=i(35),c=i(125),p=i(97),d=i(98),f=i(55),_=i(71),g=i(170),y=i(123),v=i(80),m=i(79),E=i(7),T=function(t,e){h.a.call(this),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,this.setCoordinates(t,e)};r.a.inherits(T,h.a),T.prototype.appendLinearRing=function(t){this.flatCoordinates?n.a.extend(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},T.prototype.clone=function(){var t=new T(null);return t.setFlatCoordinates(this.layout,this.flatCoordinates.slice(),this.ends_.slice()),t},T.prototype.closestPointXY=function(t,e,i,r){return r<o.a.closestSquaredDistanceXY(this.getExtent(),t,e)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(p.a.getsMaxSquaredDelta(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),p.a.getsClosestPoint(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,e,i,r))},T.prototype.containsXY=function(t,e){return d.a.linearRingsContainsXY(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,e)},T.prototype.getArea=function(){return c.a.linearRings(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)},T.prototype.getCoordinates=function(t){var e;return void 0!==t?(e=this.getOrientedFlatCoordinates().slice(),v.a.orientLinearRings(e,0,this.ends_,this.stride,t)):e=this.flatCoordinates,_.a.coordinatess(e,0,this.ends_,this.stride)},T.prototype.getEnds=function(){return this.ends_},T.prototype.getFlatInteriorPoint=function(){if(this.flatInteriorPointRevision_!=this.getRevision()){var t=o.a.getCenter(this.getExtent());this.flatInteriorPoint_=g.a.linearRings(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_},T.prototype.getInteriorPoint=function(){return new u.a(this.getFlatInteriorPoint(),a.a.XYM)},T.prototype.getLinearRingCount=function(){return this.ends_.length},T.prototype.getLinearRing=function(t){if(t<0||this.ends_.length<=t)return null;var e=new l.a(null);return e.setFlatCoordinates(this.layout,this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t])),e},T.prototype.getLinearRings=function(){var t,e,i=this.layout,r=this.flatCoordinates,n=this.ends_,o=[],a=0;for(t=0,e=n.length;t<e;++t){var s=n[t],u=new l.a(null);u.setFlatCoordinates(i,r.slice(a,s)),o.push(u),a=s}return o},T.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;v.a.linearRingsAreOriented(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=v.a.orientLinearRings(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},T.prototype.getSimplifiedGeometryInternal=function(t){var e=[],i=[];e.length=m.a.quantizes(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),e,0,i);var r=new T(null);return r.setFlatCoordinates(a.a.XY,e,i),r},T.prototype.getType=function(){return s.a.POLYGON},T.prototype.intersectsExtent=function(t){return y.a.linearRings(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)},T.prototype.setCoordinates=function(t,e){if(t){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var i=f.a.coordinatess(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===i.length?0:i[i.length-1],this.changed()}else this.setFlatCoordinates(a.a.XY,null,this.ends_)},T.prototype.setFlatCoordinates=function(t,e,i){this.setFlatCoordinatesInternal(t,e),this.ends_=i,this.changed()},T.circular=function(t,e,i,r){var o,s=r||32,l=[];for(o=0;o<s;++o)n.a.extend(l,t.offset(e,i,2*Math.PI*o/s));l.push(l[0],l[1]);var u=new T(null);return u.setFlatCoordinates(a.a.XY,l,[l.length]),u},T.fromExtent=function(t){var e=t[0],i=t[1],r=t[2],n=t[3],o=[e,i,e,n,r,n,r,i,e,i],s=new T(null);return s.setFlatCoordinates(a.a.XY,o,[o.length]),s},T.fromCircle=function(t,e,i){for(var r=e||32,n=t.getStride(),o=t.getLayout(),a=new T(null,o),s=n*(r+1),l=new Array(s),u=0;u<s;u++)l[u]=0;var h=[l.length];return a.setFlatCoordinates(o,l,h),T.makeRegular(a,t.getCenter(),t.getRadius(),i),a},T.makeRegular=function(t,e,i,r){for(var n,o,a=t.getFlatCoordinates(),s=t.getLayout(),l=t.getStride(),u=t.getEnds(),h=a.length/l-1,c=r||0,p=0;p<=h;++p)o=p*l,n=c+2*E.a.modulo(p,h)*Math.PI/h,a[o]=e[0]+i*Math.cos(n),a[o+1]=e[1]+i*Math.sin(n);t.setFlatCoordinates(s,a,u)},e.a=T},function(t,e,i){"use strict";var r={ANIMATING:0,INTERACTING:1};e.a=r},function(t,e,i){"use strict";var r=i(0),n=i(131),o=i(18),a=i(13),s=i(4),l=function(t){o.a.call(this),this.element=t.element?t.element:null,this.target_=null,this.map_=null,this.listenerKeys=[],this.render=t.render?t.render:r.a.nullFunction,t.target&&this.setTarget(t.target)};r.a.inherits(l,o.a),l.prototype.disposeInternal=function(){a.a.removeNode(this.element),o.a.prototype.disposeInternal.call(this)},l.prototype.getMap=function  (){return this.map_},l.prototype.setMap=function(t){this.map_&&a.a.removeNode(this.element);for(var e=0,i=this.listenerKeys.length;e<i;++e)s.a.unlistenByKey(this.listenerKeys[e]);if(this.listenerKeys.length=0,this.map_=t,this.map_){(this.target_?this.target_:t.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==r.a.nullFunction&&this.listenerKeys.push(s.a.listen(t,n.a.POSTRENDER,this.render,this)),t.render()}},l.prototype.setTarget=function(t){this.target_="string"==typeof t?document.getElementById(t):t},e.a=l},function(t,e,i){"use strict";var r=i(70),n=i(2),o=i(8),a=function(){this.defaultDataProjection=null,this.defaultFeatureProjection=null};a.prototype.getReadOptions=function(t,e){var i;return e&&(i={dataProjection:e.dataProjection?e.dataProjection:this.readProjection(t),featureProjection:e.featureProjection}),this.adaptOptions(i)},a.prototype.adaptOptions=function(t){return n.a.assign({dataProjection:this.defaultDataProjection,featureProjection:this.defaultFeatureProjection},t)},a.prototype.getLastExtent=function(){return null},a.prototype.getType=function(){},a.prototype.readFeature=function(t,e){},a.prototype.readFeatures=function(t,e){},a.prototype.readGeometry=function(t,e){},a.prototype.readProjection=function(t){},a.prototype.writeFeature=function(t,e){},a.prototype.writeFeatures=function(t,e){},a.prototype.writeGeometry=function(t,e){},a.transformWithOptions=function(t,e,i){var n,a=i?o.a.get(i.featureProjection):null,s=i?o.a.get(i.dataProjection):null;if(n=a&&s&&!o.a.equivalent(a,s)?t instanceof r.a?(e?t.clone():t).transform(e?a:s,e?s:a):o.a.transformExtent(t,s,a):t,e&&i&&void 0!==i.decimals){var l=Math.pow(10,i.decimals),u=function(t){for(var e=0,i=t.length;e<i;++e)t[e]=Math.round(t[e]*l)/l;return t};n===t&&(n=n.clone()),n.applyTransform(u)}return n},e.a=a},function(t,e,i){t.exports={default:i(324),__esModule:!0}},function(t,e,i){"use strict";var r={DEGREES:"degrees",FEET:"ft",METERS:"m",PIXELS:"pixels",TILE_PIXELS:"tile-pixels",USFEET:"us-ft"};r.METERS_PER_UNIT={},r.METERS_PER_UNIT[r.DEGREES]=2*Math.PI*6370997/360,r.METERS_PER_UNIT[r.FEET]=.3048,r.METERS_PER_UNIT[r.METERS]=1,r.METERS_PER_UNIT[r.USFEET]=1200/3937,e.a=r},function(t,e,i){"use strict";var r=i(0),n=i(21),o={},a="undefined"!=typeof navigator?navigator.userAgent.toLowerCase():"";o.FIREFOX=-1!==a.indexOf("firefox"),o.SAFARI=-1!==a.indexOf("safari")&&-1==a.indexOf("chrom"),o.WEBKIT=-1!==a.indexOf("webkit")&&-1==a.indexOf("edge"),o.MAC=-1!==a.indexOf("macintosh"),o.DEVICE_PIXEL_RATIO=window.devicePixelRatio||1,o.CANVAS_LINE_DASH=!1,o.CANVAS=r.a.ENABLE_CANVAS&&function(){if(!("HTMLCanvasElement"in window))return!1;try{var t=document.createElement("CANVAS").getContext("2d");return!!t&&(void 0!==t.setLineDash&&(o.CANVAS_LINE_DASH=!0),!0)}catch(t){return!1}}(),o.DEVICE_ORIENTATION="DeviceOrientationEvent"in window,o.GEOLOCATION="geolocation"in navigator,o.TOUCH=r.a.ASSUME_TOUCH||"ontouchstart"in window,o.POINTER="PointerEvent"in window,o.MSPOINTER=!!navigator.msPointerEnabled,o.WEBGL,function(){if(r.a.ENABLE_WEBGL){var t,e=!1,i=[];if("WebGLRenderingContext"in window)try{var a=document.createElement("CANVAS"),s=n.a.getContext(a,{failIfMajorPerformanceCaveat:!0});s&&(e=!0,t=s.getParameter(s.MAX_TEXTURE_SIZE),i=s.getSupportedExtensions())}catch(t){}o.WEBGL=e,r.a.WEBGL_EXTENSIONS=i,r.a.WEBGL_MAX_TEXTURE_SIZE=t}}(),e.a=o},function(t,e,i){"use strict";var r={};r.CLASS_HIDDEN="ol-hidden",r.CLASS_SELECTABLE="ol-selectable",r.CLASS_UNSELECTABLE="ol-unselectable",r.CLASS_UNSUPPORTED="ol-unsupported",r.CLASS_CONTROL="ol-control",r.getFontFamilies=function(){var t,e={};return function(i){if(t||(t=document.createElement("div").style),!(i in e)){t.font=i;var r=t.fontFamily;if(t.font="",!r)return null;e[i]=r.split(/,\s?/)}return e[i]}}(),e.a=r},function(t,e,i){"use strict";var r=i(0),n=i(19),o=i(1),a=i(70),s=i(20),l=i(51),u=i(2),h=function(){a.a.call(this),this.layout=s.a.XY,this.stride=2,this.flatCoordinates=null};r.a.inherits(h,a.a),h.getLayoutForStride_=function(t){var e;return 2==t?e=s.a.XY:3==t?e=s.a.XYZ:4==t&&(e=s.a.XYZM),e},h.getStrideForLayout=function(t){var e;return t==s.a.XY?e=2:t==s.a.XYZ||t==s.a.XYM?e=3:t==s.a.XYZM&&(e=4),e},h.prototype.containsXY=n.a.FALSE,h.prototype.computeExtent=function(t){return o.a.createOrUpdateFromFlatCoordinates(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},h.prototype.getCoordinates=function(){},h.prototype.getFirstCoordinate=function(){return this.flatCoordinates.slice(0,this.stride)},h.prototype.getFlatCoordinates=function(){return this.flatCoordinates},h.prototype.getLastCoordinate=function(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)},h.prototype.getLayout=function(){return this.layout},h.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!=this.getRevision()&&(u.a.clear(this.simplifiedGeometryCache),this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;var e=t.toString();if(this.simplifiedGeometryCache.hasOwnProperty(e))return this.simplifiedGeometryCache[e];var i=this.getSimplifiedGeometryInternal(t);return i.getFlatCoordinates().length<this.flatCoordinates.length?(this.simplifiedGeometryCache[e]=i,i):(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)},h.prototype.getSimplifiedGeometryInternal=function(t){return this},h.prototype.getStride=function(){return this.stride},h.prototype.setFlatCoordinatesInternal=function(t,e){this.stride=h.getStrideForLayout(t),this.layout=t,this.flatCoordinates=e},h.prototype.setCoordinates=function(t,e){},h.prototype.setLayout=function(t,e,i){var r;if(t)r=h.getStrideForLayout(t);else{var n;for(n=0;n<i;++n){if(0===e.length)return this.layout=s.a.XY,void(this.stride=2);e=e[0]}r=e.length,t=h.getLayoutForStride_(r)}this.layout=t,this.stride=r},h.prototype.applyTransform=function(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())},h.prototype.rotate=function(t,e){var i=this.getFlatCoordinates();if(i){var r=this.getStride();l.a.rotate(i,0,i.length,r,t,e,i),this.changed()}},h.prototype.scale=function(t,e,i){var r=e;void 0===r&&(r=t);var n=i;n||(n=o.a.getCenter(this.getExtent()));var a=this.getFlatCoordinates();if(a){var s=this.getStride();l.a.scale(a,0,a.length,s,t,r,n,a),this.changed()}},h.prototype.translate=function(t,e){var i=this.getFlatCoordinates();if(i){var r=this.getStride();l.a.translate(i,0,i.length,r,t,e,i),this.changed()}},h.transform2D=function(t,e,i){var r=t.getFlatCoordinates();if(r){var n=t.getStride();return l.a.transform2D(r,0,r.length,n,e,i)}return null},e.a=h},function(t,e,i){"use strict";var r=i(0),n=i(6),o=i(1),a=i(20),s=i(12),l=i(35),u=i(97),h=i(55),c=i(71),p=i(169),d=i(123),f=i(223),_=i(222),g=i(79),y=function(t,e){l.a.call(this),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.setCoordinates(t,e)};r.a.inherits(y,l.a),y.prototype.appendCoordinate=function(t){this.flatCoordinates?n.a.extend(this.flatCoordinates,t):this.flatCoordinates=t.slice(),this.changed()},y.prototype.clone=function(){var t=new y(null);return t.setFlatCoordinates(this.layout,this.flatCoordinates.slice()),t},y.prototype.closestPointXY=function(t,e,i,r){return r<o.a.closestSquaredDistanceXY(this.getExtent(),t,e)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(u.a.getMaxSquaredDelta(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),u.a.getClosestPoint(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,t,e,i,r))},y.prototype.forEachSegment=function(t,e){return _.a.forEach(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e)},y.prototype.getCoordinateAtM=function(t,e){if(this.layout!=a.a.XYM&&this.layout!=a.a.XYZM)return null;var i=void 0!==e&&e;return p.a.lineStringCoordinateAtM(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,i)},y.prototype.getCoordinates=function(){return c.a.coordinates(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},y.prototype.getCoordinateAt=function(t,e){return p.a.lineString(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e)},y.prototype.getLength=function(){return f.a.lineString(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},y.prototype.getFlatMidpoint=function(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_},y.prototype.getSimplifiedGeometryInternal=function(t){var e=[];e.length=g.a.douglasPeucker(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0);var i=new y(null);return i.setFlatCoordinates(a.a.XY,e),i},y.prototype.getType=function(){return s.a.LINE_STRING},y.prototype.intersectsExtent=function(t){return d.a.lineString(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},y.prototype.setCoordinates=function(t,e){t?(this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=h.a.coordinates(this.flatCoordinates,0,t,this.stride),this.changed()):this.setFlatCoordinates(a.a.XY,null)},y.prototype.setFlatCoordinates=function(t,e){this.setFlatCoordinatesInternal(t,e),this.changed()},e.a=y},function(t,e,i){t.exports={default:i(340),__esModule:!0}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"SystemZoom",function(){return r}),i.d(e,"SystemProj",function(){return n}),i.d(e,"MapProperty",function(){return o}),i.d(e,"MapType",function(){return a}),i.d(e,"OutMapType",function(){return s});var r={MAX:28,MIN:0},n={PROJ4326:"EPSG:4326",PROJ3857:"EPSG:3857"},o={PROJECTION:"EPSG:3857",UNITS:"metric",ZOOM:10,MIN_ZOOM:0,MAX_ZOOM:28},a={BLANK_MAP:"blank_map",OPENSTREET_MAP:"openstreet_map",BING_ROAD_MAP:"bing_road_map",BING_AERIAL_MAP:"bing_aerial_map",BING_AERIALWITHLABELS_MAP:"bing_aerialwithlabels_map",XYZ_MAP:"xyz_map",ARCGIS_MAP:"arcgis_map",WMS_MAP:"wms_map",WMTS_MAP:"wmts_map"},s={GAODE_ROAD_MAP:"gaode_road_map",GAODE_AERIAL_MAP:"gaode_aerial_map",GOOGLE_ROAD_MAP:"google_road_map",GOOGLE_SATELLITE_MAP:"google_satellite_map",GOOGLE_HYBRID_MAP:"google_hybrid_map",GOOGLE_TERRAIN_MAP:"google_terrain_map"}},function(t,e,i){"use strict";var r={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4,ABORT:5};e.a=r},function(t,e,i){var r=i(23),n=i(17),o=i(88),a=i(65),s=i(66),l=function(t,e,i){var u,h,c,p=t&l.F,d=t&l.G,f=t&l.S,_=t&l.P,g=t&l.B,y=t&l.W,v=d?n:n[e]||(n[e]={}),m=v.prototype,E=d?r:f?r[e]:(r[e]||{}).prototype;d&&(i=e);for(u in i)(h=!p&&E&&void 0!==E[u])&&s(v,u)||(c=h?E[u]:i[u],v[u]=d&&"function"!=typeof E[u]?i[u]:g&&h?o(c,r):y&&E[u]==c?function(t){var e=function(e,i,r){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,i)}return new t(e,i,r)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(c):_&&"function"==typeof c?o(Function.call,c):c,_&&((v.virtual||(v.virtual={}))[u]=c,t&l.R&&m&&!m[u]&&a(m,u,c)))};l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,t.exports=l},function(t,e,i){var r=i(59);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},function(t,e,i){"use strict";var r=i(9),n=i(4),o=i(5),a=i(0),s=i(18),l=i(70),u=i(62),h=function(t){if(s.a.call(this),this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,n.a.listen(this,s.a.getChangeEventType(this.geometryName_),this.handleGeometryChanged_,this),void 0!==t)if(t instanceof l.a||!t){var e=t;this.setGeometry(e)}else{var i=t;this.setProperties(i)}};a.a.inherits(h,s.a),h.prototype.clone=function(){var t=new h(this.getProperties());t.setGeometryName(this.getGeometryName());var e=this.getGeometry();e&&t.setGeometry(e.clone());var i=this.getStyle();return i&&t.setStyle(i),t},h.prototype.getGeometry=function(){return this.get(this.geometryName_)},h.prototype.getId=function(){return this.id_},h.prototype.getGeometryName=function(){return this.geometryName_},h.prototype.getStyle=function(){return this.style_},h.prototype.getStyleFunction=function(){return this.styleFunction_},h.prototype.handleGeometryChange_=function(){this.changed()},h.prototype.handleGeometryChanged_=function(){this.geometryChangeKey_&&(n.a.unlistenByKey(this.geometryChangeKey_),this.geometryChangeKey_=null);var t=this.getGeometry();t&&(this.geometryChangeKey_=n.a.listen(t,o.a.CHANGE,this.handleGeometryChange_,this)),this.changed()},h.prototype.setGeometry=function(t){this.set(this.geometryName_,t)},h.prototype.setStyle=function(t){this.style_=t,this.styleFunction_=t?h.createStyleFunction(t):void 0,this.changed()},h.prototype.setId=function(t){this.id_=t,this.changed()},h.prototype.setGeometryName=function(t){n.a.unlisten(this,s.a.getChangeEventType(this.geometryName_),this.handleGeometryChanged_,this),this.geometryName_=t,n.a.listen(this,s.a.getChangeEventType(this.geometryName_),this.handleGeometryChanged_,this),this.handleGeometryChanged_()},h.createStyleFunction=function(t){var e;if("function"==typeof t)e=2==t.length?function(e){return t(this,e)}:t;else{var i;Array.isArray(t)?i=t:(r.a.assert(t instanceof u.a,41),i=[t]),e=function(){return i}}return e},e.a=h},function(t,e,i){"use strict";var r={IDLE:0,LOADING:1,LOADED:2,ERROR:3};e.a=r},function(t,e,i){"use strict";var r=i(78),n=i(9),o=i(19),a=i(33),s={};s.altKeyOnly=function(t){var e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},s.altShiftKeysOnly=function(t){var e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},s.always=o.a.TRUE,s.click=function(t){return t.type==r.a.CLICK},s.mouseActionButton=function(t){var e=t.originalEvent;return 0==e.button&&!(a.a.WEBKIT&&a.a.MAC&&e.ctrlKey)},s.never=o.a.FALSE,s.pointerMove=function(t){return"pointermove"==t.type},s.singleClick=function(t){return t.type==r.a.SINGLECLICK},s.doubleClick=function(t){return t.type==r.a.DBLCLICK},s.noModifierKeys=function(t){var e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},s.platformModifierKeyOnly=function(t){var e=t.originalEvent;return!e.altKey&&(a.a.MAC?e.metaKey:e.ctrlKey)&&!e.shiftKey},s.shiftKeyOnly=function(t){var e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},s.targetNotEditable=function(t){var e=t.originalEvent.target,i=e.tagName;return"INPUT"!==i&&"SELECT"!==i&&"TEXTAREA"!==i},s.mouseOnly=function(t){return n.a.assert(t.pointerEvent,56),"mouse"==t.pointerEvent.pointerType},s.primaryAction=function(t){var e=t.pointerEvent;return e.isPrimary&&0===e.button},e.a=s},function(t,e,i){"use strict";var r=i(0),n=i(6),o=i(1),a=i(20),s=i(12),l=i(36),u=i(35),h=i(97),c=i(55),p=i(71),d=i(169),f=i(123),_=i(79),g=function(t,e){u.a.call(this),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.setCoordinates(t,e)};r.a.inherits(g,u.a),g.prototype.appendLineString=function(t){this.flatCoordinates?n.a.extend(this.flatCoordinates,t.getFlatCoordinates().slice()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},g.prototype.clone=function(){var t=new g(null);return t.setFlatCoordinates(this.layout,this.flatCoordinates.slice(),this.ends_.slice()),t},g.prototype.closestPointXY=function(t,e,i,r){return r<o.a.closestSquaredDistanceXY(this.getExtent(),t,e)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(h.a.getsMaxSquaredDelta(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),h.a.getsClosestPoint(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,t,e,i,r))},g.prototype.getCoordinateAtM=function(t,e,i){if(this.layout!=a.a.XYM&&this.layout!=a.a.XYZM||0===this.flatCoordinates.length)return null;var r=void 0!==e&&e,n=void 0!==i&&i;return d.a.lineStringsCoordinateAtM(this.flatCoordinates,0,this.ends_,this.stride,t,r,n)},g.prototype.getCoordinates=function(){return p.a.coordinatess(this.flatCoordinates,0,this.ends_,this.stride)},g.prototype.getEnds=function(){return this.ends_},g.prototype.getLineString=function(t){if(t<0||this.ends_.length<=t)return null;var e=new l.a(null);return e.setFlatCoordinates(this.layout,this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t])),e},g.prototype.getLineStrings=function(){var t,e,i=this.flatCoordinates,r=this.ends_,n=this.layout,o=[],a=0;for(t=0,e=r.length;t<e;++t){var s=r[t],u=new l.a(null);u.setFlatCoordinates(n,i.slice(a,s)),o.push(u),a=s}return o},g.prototype.getFlatMidpoints=function(){var t,e,i=[],r=this.flatCoordinates,o=0,a=this.ends_,s=this.stride;for(t=0,e=a.length;t<e;++t){var l=a[t],u=d.a.lineString(r,o,l,s,.5);n.a.extend(i,u),o=l}return i},g.prototype.getSimplifiedGeometryInternal=function(t){var e=[],i=[];e.length=_.a.douglasPeuckers(this.flatCoordinates,0,this.ends_,this.stride,t,e,0,i);var r=new g(null);return r.setFlatCoordinates(a.a.XY,e,i),r},g.prototype.getType=function(){return s.a.MULTI_LINE_STRING},g.prototype.intersectsExtent=function(t){return f.a.lineStrings(this.flatCoordinates,0,this.ends_,this.stride,t)},g.prototype.setCoordinates=function(t,e){if(t){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var i=c.a.coordinatess(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===i.length?0:i[i.length-1],this.changed()}else this.setFlatCoordinates(a.a.XY,null,this.ends_)},g.prototype.setFlatCoordinates=function(t,e,i){this.setFlatCoordinatesInternal(t,e),this.ends_=i,this.changed()},g.prototype.setLineStrings=function(t){var e,i,r=this.getLayout(),o=[],a=[];for(e=0,i=t.length;e<i;++e){var s=t[e];0===e&&(r=s.getLayout()),n.a.extend(o,s.getFlatCoordinates()),a.push(o.length)}this.setFlatCoordinates(r,o,a)},e.a=g},function(t,e,i){"use strict";var r=i(0),n=i(6),o=i(1),a=i(20),s=i(12),l=i(26),u=i(35),h=i(55),c=i(71),p=i(7),d=function(t,e){u.a.call(this),this.setCoordinates(t,e)};r.a.inherits(d,u.a),d.prototype.appendPoint=function(t){this.flatCoordinates?n.a.extend(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.changed()},d.prototype.clone=function(){var t=new d(null);return t.setFlatCoordinates(this.layout,this.flatCoordinates.slice()),t},d.prototype.closestPointXY=function(t,e,i,r){if(r<o.a.closestSquaredDistanceXY(this.getExtent(),t,e))return r;var n,a,s,l=this.flatCoordinates,u=this.stride;for(n=0,a=l.length;n<a;n+=u){var h=p.a.squaredDistance(t,e,l[n],l[n+1]);if(h<r){for(r=h,s=0;s<u;++s)i[s]=l[n+s];i.length=u}}return r},d.prototype.getCoordinates=function(){return c.a.coordinates(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},d.prototype.getPoint=function(t){var e=this.flatCoordinates?this.flatCoordinates.length/this.stride:0;if(t<0||e<=t)return null;var i=new l.a(null);return i.setFlatCoordinates(this.layout,this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride)),i},d.prototype.getPoints=function(){var t,e,i=this.flatCoordinates,r=this.layout,n=this.stride,o=[];for(t=0,e=i.length;t<e;t+=n){var a=new l.a(null);a.setFlatCoordinates(r,i.slice(t,t+n)),o.push(a)}return o},d.prototype.getType=function(){return s.a.MULTI_POINT},d.prototype.intersectsExtent=function(t){var e,i,r,n,a=this.flatCoordinates,s=this.stride;for(e=0,i=a.length;e<i;e+=s)if(r=a[e],n=a[e+1],o.a.containsXY(t,r,n))return!0;return!1},d.prototype.setCoordinates=function(t,e){t?(this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=h.a.coordinates(this.flatCoordinates,0,t,this.stride),this.changed()):this.setFlatCoordinates(a.a.XY,null)},d.prototype.setFlatCoordinates=function(t,e){this.setFlatCoordinatesInternal(t,e),this.changed()},e.a=d},function(t,e,i){"use strict";var r=i(0),n=i(6),o=i(1),a=i(20),s=i(12),l=i(46),u=i(27),h=i(35),c=i(125),p=i(224),d=i(97),f=i(98),_=i(55),g=i(71),y=i(170),v=i(123),m=i(80),E=i(79),T=function(t,e){h.a.call(this),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,this.setCoordinates(t,e)};r.a.inherits(T,h.a),T.prototype.appendPolygon=function(t){var e;if(this.flatCoordinates){var i=this.flatCoordinates.length;n.a.extend(this.flatCoordinates,t.getFlatCoordinates()),e=t.getEnds().slice();var r,o;for(r=0,o=e.length;r<o;++r)e[r]+=i}else this.flatCoordinates=t.getFlatCoordinates().slice(),e=t.getEnds().slice(),this.endss_.push();this.endss_.push(e),this.changed()},T.prototype.clone=function(){for(var t=new T(null),e=this.endss_.length,i=new Array(e),r=0;r<e;++r)i[r]=this.endss_[r].slice();return t.setFlatCoordinates(this.layout,this.flatCoordinates.slice(),i),t},T.prototype.closestPointXY=function(t,e,i,r){return r<o.a.closestSquaredDistanceXY(this.getExtent(),t,e)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(d.a.getssMaxSquaredDelta(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),d.a.getssClosestPoint(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,t,e,i,r))},T.prototype.containsXY=function(t,e){return f.a.linearRingssContainsXY(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t,e)},T.prototype.getArea=function(){return c.a.linearRingss(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)},T.prototype.getCoordinates=function(t){var e;return void 0!==t?(e=this.getOrientedFlatCoordinates().slice(),m.a.orientLinearRingss(e,0,this.endss_,this.stride,t)):e=this.flatCoordinates,g.a.coordinatesss(e,0,this.endss_,this.stride)},T.prototype.getEndss=function(){return this.endss_},T.prototype.getFlatInteriorPoints=function(){if(this.flatInteriorPointsRevision_!=this.getRevision()){var t=p.a.linearRingss(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=y.a.linearRingss(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_},T.prototype.getInteriorPoints=function(){var t=new l.a(null);return t.setFlatCoordinates(a.a.XYM,this.getFlatInteriorPoints().slice()),t},T.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;m.a.linearRingssAreOriented(t,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=m.a.orientLinearRingss(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},T.prototype.getSimplifiedGeometryInternal=function(t){var e=[],i=[];e.length=E.a.quantizess(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(t),e,0,i);var r=new T(null);return r.setFlatCoordinates(a.a.XY,e,i),r},T.prototype.getPolygon=function(t){if(t<0||this.endss_.length<=t)return null;var e;if(0===t)e=0;else{var i=this.endss_[t-1];e=i[i.length-1]}var r=this.endss_[t].slice(),n=r[r.length-1];if(0!==e){var o,a;for(o=0,a=r.length;o<a;++o)r[o]-=e}var s=new u.a(null);return s.setFlatCoordinates(this.layout,this.flatCoordinates.slice(e,n),r),s},T.prototype.getPolygons=function(){var t,e,i,r,n=this.layout,o=this.flatCoordinates,a=this.endss_,s=[],l=0;for(t=0,e=a.length;t<e;++t){var h=a[t].slice(),c=h[h.length-1];if(0!==l)for(i=0,r=h.length;i<r;++i)h[i]-=l;var p=new u.a(null);p.setFlatCoordinates(n,o.slice(l,c),h),s.push(p),l=c}return s},T.prototype.getType=function(){return s.a.MULTI_POLYGON},T.prototype.intersectsExtent=function(t){return v.a.linearRingss(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t)},T.prototype.setCoordinates=function(t,e){if(t){this.setLayout(e,t,3),this.flatCoordinates||(this.flatCoordinates=[]);var i=_.a.coordinatesss(this.flatCoordinates,0,t,this.stride,this.endss_);if(0===i.length)this.flatCoordinates.length=0;else{var r=i[i.length-1];this.flatCoordinates.length=0===r.length?0:r[r.length-1]}this.changed()}else this.setFlatCoordinates(a.a.XY,null,this.endss_)},T.prototype.setFlatCoordinates=function(t,e,i){this.setFlatCoordinatesInternal(t,e),this.endss_=i,this.changed()},T.prototype.setPolygons=function(t){var e,i,r,o=this.getLayout(),a=[],s=[];for(e=0,i=t.length;e<i;++e){var l=t[e];0===e&&(o=l.getLayout());var u=a.length;r=l.getEnds();var h,c;for(h=0,c=r.length;h<c;++h)r[h]+=u;n.a.extend(a,l.getFlatCoordinates()),s.push(r)}this.setFlatCoordinates(o,a,s)},e.a=T},function(t,e,i){"use strict";var r={IMAGE:"IMAGE",TILE:"TILE",VECTOR_TILE:"VECTOR_TILE",VECTOR:"VECTOR"};e.a=r},function(t,e,i){"use strict";var r={CANVAS:"canvas",WEBGL:"webgl"};e.a=r},function(t,e,i){"use strict";var r={};r.easeIn=function(t){return Math.pow(t,3)},r.easeOut=function(t){return 1-r.easeIn(1-t)},r.inAndOut=function(t){return 3*t*t-2*t*t*t},r.linear=function(t){return t},r.upAndDown=function(t){return t<.5?r.inAndOut(2*t):1-r.inAndOut(2*(t-.5))},e.a=r},function(t,e,i){"use strict";var r={};r.transform2D=function(t,e,i,r,n,o){var a,s=o||[],l=0;for(a=e;a<i;a+=r){var u=t[a],h=t[a+1];s[l++]=n[0]*u+n[2]*h+n[4],s[l++]=n[1]*u+n[3]*h+n[5]}return o&&s.length!=l&&(s.length=l),s},r.rotate=function(t,e,i,r,n,o,a){for(var s=a||[],l=Math.cos(n),u=Math.sin(n),h=o[0],c=o[1],p=0,d=e;d<i;d+=r){var f=t[d]-h,_=t[d+1]-c;s[p++]=h+f*l-_*u,s[p++]=c+f*u+_*l;for(var g=d+2;g<d+r;++g)s[p++]=t[g]}return a&&s.length!=p&&(s.length=p),s},r.scale=function(t,e,i,r,n,o,a,s){for(var l=s||[],u=a[0],h=a[1],c=0,p=e;p<i;p+=r){var d=t[p]-u,f=t[p+1]-h;l[c++]=u+n*d,l[c++]=h+o*f;for(var _=p+2;_<p+r;++_)l[c++]=t[_]}return s&&l.length!=c&&(l.length=c),l},r.translate=function(t,e,i,r,n,o,a){var s,l,u=a||[],h=0;for(s=e;s<i;s+=r)for(u[h++]=t[s]+n,u[h++]=t[s+1]+o,l=s+2;l<s+r;++l)u[h++]=t[l];return a&&u.length!=h&&(u.length=h),u},e.a=r},function(t,e,i){"use strict";var r=i(9),n=i(7),o={};o.HEX_COLOR_RE_=/^#(?:[0-9a-f]{3,4}){1,2}$/i,o.NAMED_COLOR_RE_=/^([a-z]*)$/i,o.asArray=function(t){return Array.isArray(t)?t:o.fromString(t)},o.asString=function(t){return"string"==typeof t?t:o.toString(t)},o.fromNamed=function(t){var e=document.createElement("div");e.style.color=t,document.body.appendChild(e);var i=getComputedStyle(e).color;return document.body.removeChild(e),i},o.fromString=function(){var t={},e=0;return function(i){var r;if(t.hasOwnProperty(i))r=t[i];else{if(e>=1024){var n,a=0;for(n in t)0==(3&a++)&&(delete t[n],--e)}r=o.fromStringInternal_(i),t[i]=r,++e}return r}}(),o.fromStringInternal_=function(t){var e,i,n,a,s,l;if(o.NAMED_COLOR_RE_.exec(t)&&(t=o.fromNamed(t)),o.HEX_COLOR_RE_.exec(t)){var u,h=t.length-1;u=h<=4?1:2;var c=4===h||8===h;e=parseInt(t.substr(1+0*u,u),16),i=parseInt(t.substr(1+1*u,u),16),n=parseInt(t.substr(1+2*u,u),16),a=c?parseInt(t.substr(1+3*u,u),16):255,1==u&&(e=(e<<4)+e,i=(i<<4)+i,n=(n<<4)+n,c&&(a=(a<<4)+a)),s=[e,i,n,a/255]}else 0==t.indexOf("rgba(")?(l=t.slice(5,-1).split(",").map(Number),s=o.normalize(l)):0==t.indexOf("rgb(")?(l=t.slice(4,-1).split(",").map(Number),l.push(1),s=o.normalize(l)):r.a.assert(!1,14);return s},o.normalize=function(t,e){var i=e||[];return i[0]=n.a.clamp(t[0]+.5|0,0,255),i[1]=n.a.clamp(t[1]+.5|0,0,255),i[2]=n.a.clamp(t[2]+.5|0,0,255),i[3]=n.a.clamp(t[3],0,1),i},o.toString=function(t){var e=t[0];e!=(0|e)&&(e=e+.5|0);var i=t[1];i!=(0|i)&&(i=i+.5|0);var r=t[2];return r!=(0|r)&&(r=r+.5|0),"rgba("+e+","+i+","+r+","+(void 0===t[3]?1:t[3])+")"},e.a=o},function(t,e,i){"use strict";var r=i(34),n=i(13),o=i(2),a=i(121),s=i(16),l={};l.defaultFont="10px sans-serif",l.defaultFillStyle=[0,0,0,1],l.defaultLineCap="round",l.defaultLineDash=[],l.defaultLineDashOffset=0,l.defaultLineJoin="round",l.defaultMiterLimit=10,l.defaultStrokeStyle=[0,0,0,1],l.defaultTextAlign="center",l.defaultTextBaseline="middle",l.defaultPadding=[0,0,0,0],l.defaultLineWidth=1,l.labelCache=new a.a,l.checkedFonts_={},l.measureContext_=null,l.textHeights_={},l.checkFont=function(){function t(t){var e=l.getMeasureContext();e.font=h,n=e.measureText(c).width;var i=!0;if("monospace"!=t){e.font="32px "+t+",monospace";i=e.measureText(c).width!=n}return i}function e(){var e=!0;for(var r in s)s[r]<a&&(t(r)?(s[r]=a,o.a.clear(l.textHeights_),l.measureContext_=null,u.clear()):(++s[r],e=!1));e&&(window.clearInterval(i),i=void 0)}var i,n,a=60,s=l.checkedFonts_,u=l.labelCache,h="32px monospace",c="wmytzilWMYTZIL@#/&?$%10";return function(n){var o=r.a.getFontFamilies(n);if(o)for(var l=0,u=o.length;l<u;++l){var h=o[l];h in s||(s[h]=a,t(h)||(s[h]=0,void 0===i&&(i=window.setInterval(e,32))))}}}(),l.getMeasureContext=function(){var t=l.measureContext_;return t||(t=l.measureContext_=n.a.createCanvasContext2D(1,1)),t},l.measureTextHeight=function(){var t,e=l.textHeights_;return function(i){var r=e[i];return void 0==r&&(t||(t=document.createElement("span"),t.textContent="M",t.style.margin=t.style.padding="0 !important",t.style.position="absolute !important",t.style.left="-99999px !important"),t.style.font=i,document.body.appendChild(t),r=e[i]=t.offsetHeight,document.body.removeChild(t)),r}}(),l.measureTextWidth=function(t,e){var i=l.getMeasureContext();return t!=i.font&&(i.font=t),i.measureText(e).width},l.rotateAtOffset=function(t,e,i,r){0!==e&&(t.translate(i,r),t.rotate(e),t.translate(-i,-r))},l.resetTransform_=s.a.create(),l.drawImage=function(t,e,i,r,n,o,a,s,u,h,c){var p;1!=i&&(p=t.globalAlpha,t.globalAlpha=p*i),e&&t.setTransform.apply(t,e),t.drawImage(r,n,o,a,s,u,h,a*c,s*c),p&&(t.globalAlpha=p),e&&t.setTransform.apply(t,l.resetTransform_)},e.a=l},function(t,e,i){"use strict";var r=i(7),n=i(122),o={};o.add=function(t,e){return t[0]+=e[0],t[1]+=e[1],t},o.closestOnCircle=function(t,e){var i=e.getRadius(),r=e.getCenter(),n=r[0],o=r[1],a=t[0],s=t[1],l=a-n,u=s-o;0===l&&0===u&&(l=1);var h,c,p=Math.sqrt(l*l+u*u);return h=n+i*l/p,c=o+i*u/p,[h,c]},o.closestOnSegment=function(t,e){var i,r,n=t[0],o=t[1],a=e[0],s=e[1],l=a[0],u=a[1],h=s[0],c=s[1],p=h-l,d=c-u,f=0===p&&0===d?0:(p*(n-l)+d*(o-u))/(p*p+d*d||0);return f<=0?(i=l,r=u):f>=1?(i=h,r=c):(i=l+f*p,r=u+f*d),[i,r]},o.createStringXY=function(t){return function(e){return o.toStringXY(e,t)}},o.degreesToStringHDMS=function(t,e,i){var o=r.a.modulo(e+180,360)-180,a=Math.abs(3600*o),s=i||0,l=Math.pow(10,s),u=Math.floor(a/3600),h=Math.floor((a-3600*u)/60),c=a-3600*u-60*h;return c=Math.ceil(c*l)/l,c>=60&&(c=0,h+=1),h>=60&&(h=0,u+=1),u+" "+n.a.padNumber(h,2)+" "+n.a.padNumber(c,2,s)+""+(0==o?"":" "+t.charAt(o<0?1:0))},o.format=function(t,e,i){return t?e.replace("{x}",t[0].toFixed(i)).replace("{y}",t[1].toFixed(i)):""},o.equals=function(t,e){for(var i=!0,r=t.length-1;r>=0;--r)if(t[r]!=e[r]){i=!1;break}return i},o.rotate=function(t,e){var i=Math.cos(e),r=Math.sin(e),n=t[0]*i-t[1]*r,o=t[1]*i+t[0]*r;return t[0]=n,t[1]=o,t},o.scale=function(t,e){return t[0]*=e,t[1]*=e,t},o.sub=function(t,e){return t[0]-=e[0],t[1]-=e[1],t},o.squaredDistance=function(t,e){var i=t[0]-e[0],r=t[1]-e[1];return i*i+r*r},o.distance=function(t,e){return Math.sqrt(o.squaredDistance(t,e))},o.squaredDistanceToSegment=function(t,e){return o.squaredDistance(t,o.closestOnSegment(t,e))},o.toStringHDMS=function(t,e){return t?o.degreesToStringHDMS("NS",t[1],e)+" "+o.degreesToStringHDMS("EW",t[0],e):""},o.toStringXY=function(t,e){return o.format(t,"{x}, {y}",e)},e.a=o},function(t,e,i){"use strict";var r={};r.coordinate=function(t,e,i,r){var n,o;for(n=0,o=i.length;n<o;++n)t[e++]=i[n];return e},r.coordinates=function(t,e,i,r){var n,o;for(n=0,o=i.length;n<o;++n){var a,s=i[n];for(a=0;a<r;++a)t[e++]=s[a]}return e},r.coordinatess=function(t,e,i,n,o){var a,s,l=o||[],u=0;for(a=0,s=i.length;a<s;++a){var h=r.coordinates(t,e,i[a],n);l[u++]=h,e=h}return l.length=u,l},r.coordinatesss=function(t,e,i,n,o){var a,s,l=o||[],u=0;for(a=0,s=i.length;a<s;++a){var h=r.coordinatess(t,e,i[a],n,l[u]);l[u++]=h,e=h[h.length-1]}return l.length=u,l},e.a=r},function(t,e,i){"use strict";var r={};r.createOrUpdate=function(t,e,i,r){return void 0!==r?(r[0]=t,r[1]=e,r[2]=i,r):[t,e,i]},r.getKeyZXY=function(t,e,i){return t+"/"+e+"/"+i},r.getKey=function(t){return r.getKeyZXY(t[0],t[1],t[2])},r.fromKey=function(t){return t.split("/").map(Number)},r.hash=function(t){return(t[1]<<t[0])+t[2]},r.quadKey=function(t){var e,i,r=t[0],n=new Array(r),o=1<<r-1;for(e=0;e<r;++e)i=48,t[1]&o&&(i+=1),t[2]&o&&(i+=2),n[e]=String.fromCharCode(i),o>>=1;return n.join("")},r.withinExtentAndZ=function(t,e){var i=t[0],r=t[1],n=t[2];if(e.getMinZoom()>i||i>e.getMaxZoom())return!1;var o,a=e.getExtent();return!(o=a?e.getTileRangeForExtentAndZ(a,i):e.getFullTileRange(i))||o.containsXY(r,n)},e.a=r},function(t,e,i){"use strict";i.d(e,"d",function(){return r}),i.d(e,"e",function(){return n}),i.d(e,"b",function(){return o}),i.d(e,"c",function(){return a}),i.d(e,"a",function(){return s});var r={ZINDEX:0,VISIBLE:!0,OPACITY:1,WRAPX:!1,IFBUBBLING:!0,INTERACTIVE:!0,EXTENT:void 0},n={RENDERMODE:"vector",STYLE:null,RENDERBUFFER:void 0,RENDERORDER:void 0,DISTANCE:8,GRADIENT:["#00f","#0ff","#0f0","#ff0","#f00"],BLUR:15,RADIUS:8,SHADOW:250},o={RATIO:1.5,IMAGELOADFUNCTION:void 0,SERVERTYPE:void 0,GUTTER:void 0,TRANSITION:void 0,PRELOAD:0,TILESIZE:void 0,TILEPIXELRATIO:void 0,OPAQUE:void 0,TILELOADFUNCTION:void 0,TILEGRID:void 0},a={IMAGESTATIC:"imageStatic",IMAGEWMS:"imageWMS"},s={click:"click",dblclick:"dblclick",mouseout:"mouseout",mouseover:"mouseover",contextmenu:"contextmenu"}},function(t,e,i){var r=i(41),n=i(200),o=i(155),a=Object.defineProperty;e.f=i(60)?Object.defineProperty:function(t,e,i){if(r(t),e=o(e,!0),r(i),n)try{return a(t,e,i)}catch(t){}if("get"in i||"set"in i)throw TypeError("Accessors not supported!");return"value"in i&&(t[e]=i.value),t}},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,i){t.exports=!i(77)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e,i){"use strict";var r=i(0),n=i(18),o=i(50),a=i(212),s=i(7),l=function(t){n.a.call(this),this.map_=null,this.setActive(!0),this.handleEvent=t.handleEvent};r.a.inherits(l,n.a),l.prototype.getActive=function(){return this.get(a.a.ACTIVE)},l.prototype.getMap=function(){return this.map_},l.prototype.setActive=function(t){this.set(a.a.ACTIVE,t)},l.prototype.setMap=function(t){this.map_=t},l.pan=function(t,e,i){var r=t.getCenter();if(r){var n=t.constrainCenter([r[0]+e[0],r[1]+e[1]]);i?t.animate({duration:i,easing:o.a.linear,center:n}):t.setCenter(n)}},l.rotate=function(t,e,i,r){e=t.constrainRotation(e,0),l.rotateWithoutConstraints(t,e,i,r)},l.rotateWithoutConstraints=function(t,e,i,r){if(void 0!==e){var n=t.getRotation(),a=t.getCenter();void 0!==n&&a&&r>0?t.animate({rotation:e,anchor:i,duration:r,easing:o.a.easeOut}):t.rotate(e,i)}},l.zoom=function(t,e,i,r,n){e=t.constrainResolution(e,0,n),l.zoomWithoutConstraints(t,e,i,r)},l.zoomByDelta=function(t,e,i,r){var n=t.getResolution(),o=t.constrainResolution(n,e,0);if(void 0!==o){var a=t.getResolutions();o=s.a.clamp(o,t.getMinResolution()||a[a.length-1],t.getMaxResolution()||a[0])}if(i&&void 0!==o&&o!==n){var u=t.getCenter(),h=t.calculateCenterZoom(o,i);h=t.constrainCenter(h),i=[(o*u[0]-n*h[0])/(o-n),(o*u[1]-n*h[1])/(o-n)]}l.zoomWithoutConstraints(t,o,i,r)},l.zoomWithoutConstraints=function(t,e,i,r){if(e){var n=t.getResolution(),a=t.getCenter();if(void 0!==n&&a&&e!==n&&r)t.animate({resolution:e,anchor:i,duration:r,easing:o.a.easeOut});else{if(i){var s=t.calculateCenterZoom(e,i);t.setCenter(s)}t.setResolution(e)}}},e.a=l},function(t,e,i){"use strict";var r=i(9),n=i(12),o=i(168),a=i(95),s=i(96),l=function(t){var e=t||{};this.geometry_=null,this.geometryFunction_=l.defaultGeometryFunction,void 0!==e.geometry&&this.setGeometry(e.geometry),this.fill_=void 0!==e.fill?e.fill:null,this.image_=void 0!==e.image?e.image:null,this.renderer_=void 0!==e.renderer?e.renderer:null,this.stroke_=void 0!==e.stroke?e.stroke:null,this.text_=void 0!==e.text?e.text:null,this.zIndex_=e.zIndex};l.prototype.clone=function(){var t=this.getGeometry();return t&&t.clone&&(t=t.clone()),new l({geometry:t,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})},l.prototype.getRenderer=function(){return this.renderer_},l.prototype.setRenderer=function(t){this.renderer_=t},l.prototype.getGeometry=function(){return this.geometry_},l.prototype.getGeometryFunction=function(){return this.geometryFunction_},l.prototype.getFill=function(){return this.fill_},l.prototype.setFill=function(t){this.fill_=t},l.prototype.getImage=function(){return this.image_},l.prototype.setImage=function(t){this.image_=t},l.prototype.getStroke=function(){return this.stroke_},l.prototype.setStroke=function(t){this.stroke_=t},l.prototype.getText=function(){return this.text_},l.prototype.setText=function(t){this.text_=t},l.prototype.getZIndex=function(){return this.zIndex_},l.prototype.setGeometry=function(t){"function"==typeof t?this.geometryFunction_=t:"string"==typeof t?this.geometryFunction_=function(e){return e.get(t)}:t?void 0!==t&&(this.geometryFunction_=function(){return t}):this.geometryFunction_=l.defaultGeometryFunction,this.geometry_=t},l.prototype.setZIndex=function(t){this.zIndex_=t},l.createFunction=function(t){var e;if("function"==typeof t)e=t;else{var i;Array.isArray(t)?i=t:(r.a.assert(t instanceof l,41),i=[t]),e=function(){return i}}return e},l.default_=null,l.defaultFunction=function(t,e){if(!l.default_){var i=new a.a({color:"rgba(255,255,255,0.4)"}),r=new s.a({color:"#3399CC",width:1.25});l.default_=[new l({image:new o.a({fill:i,stroke:r,radius:5}),fill:i,stroke:r})]}return l.default_},l.createDefaultEditing=function(){var t={},e=[255,255,255,1],i=[0,153,255,1];return t[n.a.POLYGON]=[new l({fill:new a.a({color:[255,255,255,.5]})})],t[n.a.MULTI_POLYGON]=t[n.a.POLYGON],t[n.a.LINE_STRING]=[new l({stroke:new s.a({color:e,width:5})}),new l({stroke:new s.a({color:i,width:3})})],t[n.a.MULTI_LINE_STRING]=t[n.a.LINE_STRING],t[n.a.CIRCLE]=t[n.a.POLYGON].concat(t[n.a.LINE_STRING]),t[n.a.POINT]=[new l({image:new o.a({radius:6,fill:new a.a({color:i}),stroke:new s.a({color:e,width:1.5})}),zIndex:1/0})],t[n.a.MULTI_POINT]=t[n.a.POINT],t[n.a.GEOMETRY_COLLECTION]=t[n.a.POLYGON].concat(t[n.a.LINE_STRING],t[n.a.POINT]),t},l.defaultGeometryFunction=function(t){return t.getGeometry()},e.a=l},function(t,e,i){"use strict";var r={UNDEFINED:"undefined",LOADING:"loading",READY:"ready",ERROR:"error"};e.a=r},function(t,e,i){"use strict";var r=i(6),n={};n.DOCUMENT=document.implementation.createDocument("","",null),n.createElementNS=function(t,e){return n.DOCUMENT.createElementNS(t,e)},n.getAllTextContent=function(t,e){return n.getAllTextContent_(t,e,[]).join("")},n.getAllTextContent_=function(t,e,i){if(t.nodeType==Node.CDATA_SECTION_NODE||t.nodeType==Node.TEXT_NODE)e?i.push(String(t.nodeValue).replace(/(\r\n|\r|\n)/g,"")):i.push(t.nodeValue);else{var r;for(r=t.firstChild;r;r=r.nextSibling)n.getAllTextContent_(r,e,i)}return i},n.isDocument=function(t){return t instanceof Document},n.isNode=function(t){return t instanceof Node},n.getAttributeNS=function(t,e,i){return t.getAttributeNS(e,i)||""},n.setAttributeNS=function(t,e,i,r){t.setAttributeNS(e,i,r)},n.parse=function(t){return(new DOMParser).parseFromString(t,"application/xml")},n.makeArrayExtender=function(t,e){return function(i,n){var o=t.call(e,i,n);if(void 0!==o){var a=n[n.length-1];r.a.extend(a,o)}}},n.makeArrayPusher=function(t,e){return function(i,r){var n=t.call(void 0!==e?e:this,i,r);if(void 0!==n){r[r.length-1].push(n)}}},n.makeReplacer=function(t,e){return function(i,r){var n=t.call(void 0!==e?e:this,i,r);void 0!==n&&(r[r.length-1]=n)}},n.makeObjectPropertyPusher=function(t,e,i){return function(r,n){var o=t.call(void 0!==i?i:this,r,n);if(void 0!==o){var a,s=n[n.length-1],l=void 0!==e?e:r.localName;a=l in s?s[l]:s[l]=[],a.push(o)}}},n.makeObjectPropertySetter=function(t,e,i){return function(r,n){var o=t.call(void 0!==i?i:this,r,n);if(void 0!==o){n[n.length-1][void 0!==e?e:r.localName]=o}}},n.makeChildAppender=function(t,e){return function(i,r,n){t.call(void 0!==e?e:this,i,r,n),n[n.length-1].node.appendChild(i)}},n.makeArraySerializer=function(t,e){var i,r;return function(e,o,a){if(void 0===i){i={};var s={};s[e.localName]=t,i[e.namespaceURI]=s,r=n.makeSimpleNodeFactory(e.localName)}n.serialize(i,r,o,a)}},n.makeSimpleNodeFactory=function(t,e){var i=t;return function(t,r,o){var a=r[r.length-1],s=a.node,l=i;void 0===l&&(l=o);var u=e;return void 0===e&&(u=s.namespaceURI),n.createElementNS(u,l)}},n.OBJECT_PROPERTY_NODE_FACTORY=n.makeSimpleNodeFactory(),n.makeSequence=function(t,e){for(var i=e.length,r=new Array(i),n=0;n<i;++n)r[n]=t[e[n]];return r},n.makeStructureNS=function(t,e,i){var r,n,o=void 0!==i?i:{};for(r=0,n=t.length;r<n;++r)o[t[r]]=e;return o},n.parseNode=function(t,e,i,r){var n;for(n=e.firstElementChild;n;n=n.nextElementSibling){var o=t[n.namespaceURI];if(void 0!==o){var a=o[n.localName];void 0!==a&&a.call(r,n,i)}}},n.pushParseAndPop=function(t,e,i,r,o){return r.push(t),n.parseNode(e,i,r,o),r.pop()},n.serialize=function(t,e,i,r,n,o){for(var a,s,l=(void 0!==n?n:i).length,u=0;u<l;++u)void 0!==(a=i[u])&&void 0!==(s=e.call(o,a,r,void 0!==n?n[u]:void 0))&&t[s.namespaceURI][s.localName].call(o,s,a,r)},n.pushSerializeAndPop=function(t,e,i,r,o,a,s){return o.push(t),n.serialize(e,i,r,o,a,s),o.pop()},e.a=n},function(t,e,i){var r=i(58),n=i(114);t.exports=i(60)?function(t,e,i){return r.f(t,e,n(1,i))}:function(t,e,i){return t[e]=i,t}},function(t,e){var i={}.hasOwnProperty;t.exports=function(t,e){return i.call(t,e)}},function(t,e,i){var r=i(203),n=i(153);t.exports=function(t){return r(n(t))}},function(t,e,i){"use strict";var r=i(0),n=i(19),o=i(78),a=i(209),s=i(61),l=i(2),u=function(t){var e=t||{},i=e.handleEvent?e.handleEvent:u.handleEvent;s.a.call(this,{handleEvent:i}),this.handleDownEvent_=e.handleDownEvent?e.handleDownEvent:u.handleDownEvent,this.handleDragEvent_=e.handleDragEvent?e.handleDragEvent:u.handleDragEvent,this.handleMoveEvent_=e.handleMoveEvent?e.handleMoveEvent:u.handleMoveEvent,this.handleUpEvent_=e.handleUpEvent?e.handleUpEvent:u.handleUpEvent,this.handlingDownUpSequence=!1,this.trackedPointers_={},this.targetPointers=[]};r.a.inherits(u,s.a),u.centroid=function(t){for(var e=t.length,i=0,r=0,n=0;n<e;n++)i+=t[n].clientX,r+=t[n].clientY;return[i/e,r/e]},u.prototype.isPointerDraggingEvent_=function(t){var e=t.type;return e===o.a.POINTERDOWN||e===o.a.POINTERDRAG||e===o.a.POINTERUP},u.prototype.updateTrackedPointers_=function(t){if(this.isPointerDraggingEvent_(t)){var e=t.pointerEvent,i=e.pointerId.toString();t.type==o.a.POINTERUP?delete this.trackedPointers_[i]:t.type==o.a.POINTERDOWN?this.trackedPointers_[i]=e:i in this.trackedPointers_&&(this.trackedPointers_[i]=e),this.targetPointers=l.a.getValues(this.trackedPointers_)}},u.handleDragEvent=r.a.nullFunction,u.handleUpEvent=n.a.FALSE,u.handleDownEvent=n.a.FALSE,u.handleMoveEvent=r.a.nullFunction,u.handleEvent=function(t){if(!(t instanceof a.a))return!0;var e=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==o.a.POINTERDRAG)this.handleDragEvent_(t);else if(t.type==o.a.POINTERUP){var i=this.handleUpEvent_(t);this.handlingDownUpSequence=i&&this.targetPointers.length>0}}else if(t.type==o.a.POINTERDOWN){var r=this.handleDownEvent_(t);this.handlingDownUpSequence=r,e=this.shouldStopEvent(r)}else t.type==o.a.POINTERMOVE&&this.handleMoveEvent_(t);return!e},u.prototype.shouldStopEvent=function(t){return t},e.a=u},function(t,e,i){"use strict";var r=i(0),n=i(119),o=i(4),a=i(25),s=function(){n.a.call(this),this.pendingRemovals_={},this.dispatching_={},this.listeners_={}};r.a.inherits(s,n.a),s.prototype.addEventListener=function(t,e){var i=this.listeners_[t];i||(i=this.listeners_[t]=[]),-1===i.indexOf(e)&&i.push(e)},s.prototype.dispatchEvent=function(t){var e="string"==typeof t?new a.a(t):t,i=e.type;e.target=this;var n,o=this.listeners_[i];if(o){i in this.dispatching_||(this.dispatching_[i]=0,this.pendingRemovals_[i]=0),++this.dispatching_[i];for(var s=0,l=o.length;s<l;++s)if(!1===o[s].call(this,e)||e.propagationStopped){n=!1;break}if(0===--this.dispatching_[i]){var u=this.pendingRemovals_[i];for(delete this.pendingRemovals_[i];u--;)this.removeEventListener(i,r.a.nullFunction);delete this.dispatching_[i]}return n}},s.prototype.disposeInternal=function(){o.a.unlistenAll(this)},s.prototype.getListeners=function(t){return this.listeners_[t]},s.prototype.hasListener=function(t){return t?t in this.listeners_:Object.keys(this.listeners_).length>0},s.prototype.removeEventListener=function(t,e){var i=this.listeners_[t];if(i){var n=i.indexOf(e);t in this.pendingRemovals_?(i[n]=r.a.nullFunction,++this.pendingRemovals_[t]):(i.splice(n,1),0===i.length&&delete this.listeners_[t])}},e.a=s},function(t,e,i){"use strict";var r=i(0),n=i(18),o=i(1),a=i(19),s=i(51),l=i(8),u=i(32),h=i(16),c=function(){n.a.call(this),this.extent_=o.a.createEmpty(),this.extentRevision_=-1,this.simplifiedGeometryCache={},this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.tmpTransform_=h.a.create()};r.a.inherits(c,n.a),c.prototype.clone=function(){},c.prototype.closestPointXY=function(t,e,i,r){},c.prototype.getClosestPoint=function(t,e){var i=e||[NaN,NaN];return this.closestPointXY(t[0],t[1],i,1/0),i},c.prototype.intersectsCoordinate=function(t){return this.containsXY(t[0],t[1])},c.prototype.computeExtent=function(t){},c.prototype.containsXY=a.a.FALSE,c.prototype.getExtent=function(t){return this.extentRevision_!=this.getRevision()&&(this.extent_=this.computeExtent(this.extent_),this.extentRevision_=this.getRevision()),o.a.returnOrUpdate(this.extent_,t)},c.prototype.rotate=function(t,e){},c.prototype.scale=function(t,e,i){},c.prototype.simplify=function(t){return this.getSimplifiedGeometry(t*t)},c.prototype.getSimplifiedGeometry=function(t){},c.prototype.getType=function(){},c.prototype.applyTransform=function(t){},c.prototype.intersectsExtent=function(t){},c.prototype.translate=function(t,e){},c.prototype.transform=function(t,e){var i=this.tmpTransform_;t=l.a.get(t);var r=t.getUnits()==u.a.TILE_PIXELS?function(r,n,a){var u=t.getExtent(),c=t.getWorldExtent(),p=o.a.getHeight(c)/o.a.getHeight(u);return h.a.compose(i,c[0],c[3],p,-p,0,0,0),s.a.transform2D(r,0,r.length,a,i,n),l.a.getTransform(t,e)(r,n,a)}:l.a.getTransform(t,e);return this.applyTransform(r),this},e.a=c},function(t,e,i){"use strict";var r={};r.coordinates=function(t,e,i,r,n){var o,a=void 0!==n?n:[],s=0;for(o=e;o<i;o+=r)a[s++]=t.slice(o,o+r);return a.length=s,a},r.coordinatess=function(t,e,i,n,o){var a,s,l=void 0!==o?o:[],u=0;for(a=0,s=i.length;a<s;++a){var h=i[a];l[u++]=r.coordinates(t,e,h,n,l[u]),e=h}return l.length=u,l},r.coordinatesss=function(t,e,i,n,o){var a,s,l=void 0!==o?o:[],u=0;for(a=0,s=i.length;a<s;++a){var h=i[a];l[u++]=r.coordinatess(t,e,h,n,l[u]),e=h[h.length-1]}return l.length=u,l},e.a=r},function(t,e,i){"use strict";var r=i(4),n=i(5),o=i(0),a=i(18),s=i(225),l=i(226),u=i(2),h=i(73),c=i(63),p=function(t){var e=u.a.assign({},t);delete e.source,s.a.call(this,e),this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,t.map&&this.setMap(t.map),r.a.listen(this,a.a.getChangeEventType(l.a.SOURCE),this.handleSourcePropertyChange_,this);var i=t.source?t.source:null;this.setSource(i)};o.a.inherits(p,s.a),p.visibleAtResolution=function(t,e){return t.visible&&e>=t.minResolution&&e<t.maxResolution},p.prototype.getLayersArray=function(t){var e=t||[];return e.push(this),e},p.prototype.getLayerStatesArray=function(t){var e=t||[];return e.push(this.getLayerState()),e},p.prototype.getSource=function(){return this.get(l.a.SOURCE)||null},p.prototype.getSourceState=function(){var t=this.getSource();return t?t.getState():c.a.UNDEFINED},p.prototype.handleSourceChange_=function(){this.changed()},p.prototype.handleSourcePropertyChange_=function(){this.sourceChangeKey_&&(r.a.unlistenByKey(this.sourceChangeKey_),this.sourceChangeKey_=null);var t=this.getSource();t&&(this.sourceChangeKey_=r.a.listen(t,n.a.CHANGE,this.handleSourceChange_,this)),this.changed()},p.prototype.setMap=function(t){this.mapPrecomposeKey_&&(r.a.unlistenByKey(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&(r.a.unlistenByKey(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=r.a.listen(t,h.a.PRECOMPOSE,function(t){var e=this.getLayerState();e.managed=!1,e.zIndex=1/0,t.frameState.layerStatesArray.push(e),t.frameState.layerStates[o.a.getUid(this)]=e},this),this.mapRenderKey_=r.a.listen(this,n.a.CHANGE,t.render,t),this.changed())},p.prototype.setSource=function(t){this.set(l.a.SOURCE,t)},e.a=p},function(t,e,i){"use strict";var r={POSTCOMPOSE:"postcompose",PRECOMPOSE:"precompose",RENDER:"render"};e.a=r},function(t,e,i){"use strict";var r=i(0),n=i(213),o=i(127),a=i(18),s=i(25),l=function(t,e){a.a.call(this);var i=e||{};if(this.unique_=!!i.unique,this.array_=t||[],this.unique_)for(var r=0,n=this.array_.length;r<n;++r)this.assertUnique_(this.array_[r],r);this.updateLength_()};r.a.inherits(l,a.a),l.prototype.clear=function(){for(;this.getLength()>0;)this.pop()},l.prototype.extend=function(t){var e,i;for(e=0,i=t.length;e<i;++e)this.push(t[e]);return this},l.prototype.forEach=function(t,e){for(var i=e?t.bind(e):t,r=this.array_,n=0,o=r.length;n<o;++n)i(r[n],n,r)},l.prototype.getArray=function(){return this.array_},l.prototype.item=function(t){return this.array_[t]},l.prototype.getLength=function(){return this.get(l.Property_.LENGTH)},l.prototype.insertAt=function(t,e){this.unique_&&this.assertUnique_(e),this.array_.splice(t,0,e),this.updateLength_(),this.dispatchEvent(new l.Event(o.a.ADD,e))},l.prototype.pop=function(){return this.removeAt(this.getLength()-1)},l.prototype.push=function(t){this.unique_&&this.assertUnique_(t);var e=this.getLength();return this.insertAt(e,t),this.getLength()},l.prototype.remove=function(t){var e,i,r=this.array_;for(e=0,i=r.length;e<i;++e)if(r[e]===t)return this.removeAt(e)},l.prototype.removeAt=function(t){var e=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new l.Event(o.a.REMOVE,e)),e},l.prototype.setAt=function(t,e){var i=this.getLength();if(t<i){this.unique_&&this.assertUnique_(e,t);var r=this.array_[t];this.array_[t]=e,this.dispatchEvent(new l.Event(o.a.REMOVE,r)),this.dispatchEvent(new l.Event(o.a.ADD,e))}else{var n;for(n=i;n<t;++n)this.insertAt(n,void 0);this.insertAt(t,e)}},l.prototype.updateLength_=function(){this.set(l.Property_.LENGTH,this.array_.length)},l.prototype.assertUnique_=function(t,e){for(var i=0,r=this.array_.length;i<r;++i)if(this.array_[i]===t&&i!==e)throw new n.a(58)},l.Property_={LENGTH:"length"},l.Event=function(t,e){s.a.call(this,t),this.element=e},r.a.inherits(l.Event,s.a),e.a=l},function(t,e,i){"use strict";var r={};r.buffer=function(t,e,i){return void 0===i&&(i=[0,0]),i[0]=t[0]+2*e,i[1]=t[1]+2*e,i},r.hasArea=function(t){return t[0]>0&&t[1]>0},r.scale=function(t,e,i){return void 0===i&&(i=[0,0]),i[0]=t[0]*e+.5|0,i[1]=t[1]*e+.5|0,i},r.toSize=function(t,e){return Array.isArray(t)?t:(void 0===e?e=[t,t]:e[0]=e[1]=t,e)},e.a=r},function(t,e,i){"use strict";var r=i(21),n=function(t,e){this.arr_=void 0!==t?t:[],this.usage_=void 0!==e?e:n.Usage_.STATIC_DRAW};n.prototype.getArray=function(){return this.arr_},n.prototype.getUsage=function(){return this.usage_},n.Usage_={STATIC_DRAW:r.a.STATIC_DRAW,STREAM_DRAW:r.a.STREAM_DRAW,DYNAMIC_DRAW:r.a.DYNAMIC_DRAW},e.a=n},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,i){"use strict";var r=i(5),n={SINGLECLICK:"singleclick",CLICK:r.a.CLICK,DBLCLICK:r.a.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};e.a=n},function(t,e,i){"use strict";var r=i(7),n={};n.lineString=function(t,e,i,r,o,a,s){var l=void 0!==s?s:[];return a||(i=n.radialDistance(t,e,i,r,o,l,0),t=l,e=0,r=2),l.length=n.douglasPeucker(t,e,i,r,o,l,0),l},n.douglasPeucker=function(t,e,i,n,o,a,s){var l=(i-e)/n;if(l<3){for(;e<i;e+=n)a[s++]=t[e],a[s++]=t[e+1];return s}var u=new Array(l);u[0]=1,u[l-1]=1;for(var h,c=[e,i-n],p=0;c.length>0;){var d=c.pop(),f=c.pop(),_=0,g=t[f],y=t[f+1],v=t[d],m=t[d+1];for(h=f+n;h<d;h+=n){var E=t[h],T=t[h+1],S=r.a.squaredSegmentDistance(E,T,g,y,v,m);S>_&&(p=h,_=S)}_>o&&(u[(p-e)/n]=1,f+n<p&&c.push(f,p),p+n<d&&c.push(p,d))}for(h=0;h<l;++h)u[h]&&(a[s++]=t[e+h*n],a[s++]=t[e+h*n+1]);return s},n.douglasPeuckers=function(t,e,i,r,o,a,s,l){var u,h;for(u=0,h=i.length;u<h;++u){var c=i[u];s=n.douglasPeucker(t,e,c,r,o,a,s),l.push(s),e=c}return s},n.douglasPeuckerss=function(t,e,i,r,o,a,s,l){var u,h;for(u=0,h=i.length;u<h;++u){var c=i[u],p=[];s=n.douglasPeuckers(t,e,c,r,o,a,s,p),l.push(p),e=c[c.length-1]}return s},n.radialDistance=function(t,e,i,n,o,a,s){if(i<=e+n){for(;e<i;e+=n)a[s++]=t[e],a[s++]=t[e+1];return s}var l=t[e],u=t[e+1];a[s++]=l,a[s++]=u;var h=l,c=u;for(e+=n;e<i;e+=n)h=t[e],c=t[e+1],r.a.squaredDistance(l,u,h,c)>o&&(a[s++]=h,a[s++]=c,l=h,u=c);return h==l&&c==u||(a[s++]=h,a[s++]=c),s},n.snap=function(t,e){return e*Math.round(t/e)},n.quantize=function(t,e,i,r,o,a,s){if(e==i)return s;var l=n.snap(t[e],o),u=n.snap(t[e+1],o);e+=r,a[s++]=l,a[s++]=u;var h,c;do{if(h=n.snap(t[e],o),c=n.snap(t[e+1],o),(e+=r)==i)return a[s++]=h,a[s++]=c,s}while(h==l&&c==u);for(;e<i;){var p,d;if(p=n.snap(t[e],o),d=n.snap(t[e+1],o),e+=r,p!=h||d!=c){var f=h-l,_=c-u,g=p-l,y=d-u;f*y==_*g&&(f<0&&g<f||f==g||f>0&&g>f)&&(_<0&&y<_||_==y||_>0&&y>_)?(h=p,c=d):(a[s++]=h,a[s++]=c,l=h,u=c,h=p,c=d)}}return a[s++]=h,a[s++]=c,s},n.quantizes=function(t,e,i,r,o,a,s,l){var u,h;for(u=0,h=i.length;u<h;++u){var c=i[u];s=n.quantize(t,e,c,r,o,a,s),l.push(s),e=c}return s},n.quantizess=function(t,e,i,r,o,a,s,l){var u,h;for(u=0,h=i.length;u<h;++u){var c=i[u],p=[];s=n.quantizes(t,e,c,r,o,a,s,p),l.push(p),e=c[c.length-1]}return s},e.a=n},function(t,e,i){"use strict";var r=i(334),n={};n.linearRingIsClockwise=function(t,e,i,r){for(var n=0,o=t[i-r],a=t[i-r+1];e<i;e+=r){var s=t[e],l=t[e+1];n+=(s-o)*(l+a),o=s,a=l}return n>0},n.linearRingsAreOriented=function(t,e,i,r,o){var a,s,l=void 0!==o&&o;for(a=0,s=i.length;a<s;++a){var u=i[a],h=n.linearRingIsClockwise(t,e,u,r);if(0===a){if(l&&h||!l&&!h)return!1}else if(l&&!h||!l&&h)return!1;e=u}return!0},n.linearRingssAreOriented=function(t,e,i,r,o){var a,s;for(a=0,s=i.length;a<s;++a)if(!n.linearRingsAreOriented(t,e,i[a],r,o))return!1;return!0},n.orientLinearRings=function(t,e,i,o,a){var s,l,u=void 0!==a&&a;for(s=0,l=i.length;s<l;++s){var h=i[s],c=n.linearRingIsClockwise(t,e,h,o);(0===s?u&&c||!u&&!c:u&&!c||!u&&c)&&r.a.coordinates(t,e,h,o),e=h}return e},n.orientLinearRingss=function(t,e,i,r,o){var a,s;for(a=0,s=i.length;a<s;++a)e=n.orientLinearRings(t,e,i[a],r,o);return e},e.a=n},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=c()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(u.a?u()(t,e):t.__proto__=e)}i.d(e,"a",function(){return E});var a=i(3),s=i.n(a),l=i(14),u=i.n(l),h=i(11),c=i.n(h),p=i(15),d=i.n(p),f=i(176),_=i(57),g=i(178),y=i(38),v=i(22),m=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),s()(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),E=function(t){function e(t){r(this,e);var i=n(this,(e.__proto__||d()(e)).call(this));i._zIndex=t.zIndex||_.d.ZINDEX,i._visible=void 0!==t.visible?t.visible:_.d.VISIBLE,i._opacity=void 0!==t.opacity?t.opacity:_.d.OPACITY,i._wrapX=void 0!==t.wrapX?t.wrapX:_.d.WRAPX,i._ifBubbling=void 0!==t.ifBubbling?t.ifBubbling:_.d.IFBUBBLING,i._interactive=void 0!==t.interactive?t.interactive:_.d.INTERACTIVE,i._olLayer=null,i._olSource=null,i._currMap=null,i._minZoom=t.zoomRange?t.zoomRange.minZoom||y.MapProperty.MIN_ZOOM:y.MapProperty.MIN_ZOOM,i._maxZoom=t.zoomRange?t.zoomRange.maxZoom||y.MapProperty.MAX_ZOOM:y.MapProperty.MAX_ZOOM,i._layerEvent={},i._allEventObj={};var o=i;return i._allEventObj[g.b.VISIBLECHANGE]={layerEvtKey:"change:visible",layerEvtType:"visiblechange",layerFunc:function(t){o.fire(g.b.VISIBLECHANGE,t)}},i._allEventObj[g.b.ZINDEXCHANGE]={layerEvtKey:"change:zIndex",layerEvtType:"zIndexchange",layerFunc:function(t){o.fire(g.b.ZINDEXCHANGE,t)}},i._allEventObj[g.b.OPACITYCHANGE]={layerEvtKey:"change:opacity",layerEvtType:"opacitychange",layerFunc:function(t){o.fire(g.b.OPACITYCHANGE,t)}},i}return o(e,t),m(e,[{key:"_setCurrObjToLayer",value:function(){this._olLayer.set("currLayerObj",this)}},{key:"setVisible",value:function(t){"boolean"==typeof t&&(this._visible=t,this._olLayer.setVisible(t))}},{key:"getVisible",value:function(){return this._olLayer.getVisible()}},{key:"setZIndex",value:function(t){"number"==typeof t&&(this._zIndex=t,this._olLayer.setZIndex(t))}},{key:"getZIndex",value:function(){return this._olLayer.getZIndex()}},{key:"setOpacity",value:function(t){"number"==typeof t&&(this._opacity=t,this._olLayer.setOpacity(t))}},{key:"getOpacity",value:function(){return this._olLayer.getOpacity()}},{key:"setShowZoom",value:function(t){if(this._currMap){if("number"==typeof t.minZoom){this._minZoom=t.minZoom;var e=this._currMap.getOlMap().getView(),i=e.getResolutionForZoom(this._minZoom)+1e-10;this._olLayer.setMaxResolution(i)}if("number"==typeof t.maxZoom){this._maxZoom=t.maxZoom;var r=this._currMap.getOlMap().getView(),n=r.getResolutionForZoom(this._maxZoom);this._olLayer.setMinResolution(n)}}else v.b("!")}},{key:"getShowZoom",value:function(){return this._currMap?{minZoom:this._minZoom,maxZoom:this._maxZoom}:(v.b(""),{})}},{key:"setLayerBubbling",value:function(t){"boolean"==typeof t&&(this._ifBubbling=t)}},{key:"setLayerInteractive",value:function(t){"boolean"==typeof t&&(this._interactive=t)}},{key:"getSource",value:function(){return this._olSource}},{key:"getAllfeatrue",value:function(){return this._olSource.getSource?this._olSource.getSource().getFeatures():this._olSource.getFeatures()}},{key:"_setMap",value:function(t){this._currMap=t;var e=this._currMap.getOlMap().getView(),i=e.getResolutionForZoom(this._minZoom)+1e-10,r=e.getResolutionForZoom(this._maxZoom);this._olLayer.setMinResolution(r),this._olLayer.setMaxResolution(i)}},{key:"getOlMap",value:function(){return this._currMap._currOlMap}},{key:"on",value:function(t,e){this.addEventListener(t,e),this._layerEvent.hasOwnProperty(t)||(this._layerEvent[t]=t,this._allEventObj.hasOwnProperty(t)?this._registerEvent(t):this._currMap&&g.a.hasOwnProperty(t.toLocaleUpperCase())&&this._currMap._registerEvent(t,e))}},{key:"off",value:function(t,e){this.removeEventListener(t,e),this._layerEvent.hasOwnProperty(t)&&(delete this._layerEvent[t],this._allEventObj.hasOwnProperty(t)?this._unRegisterEvent(t):this._currMap&&g.a.hasOwnProperty(t.toLocaleUpperCase())&&this._currMap._unRegisterEvent(t,e))}},{key:"_registerEvent",value:function(t){this._olLayer.on(this._allEventObj[t].layerEvtKey,this._allEventObj[t].layerFunc,this._olLayer)}},{key:"_unRegisterEvent",value:function(t){this._olLayer.un(this._allEventObj[t].layerEvtKey,this._allEventObj[t].layerFunc,this._olLayer)}},{key:"destroy",value:function(){this.off(),this._currMap=null,this._layerEvent={},this._allEventObj={},this._olLayer&&(this._olLayer.unset("currLayerObj"),this._olLayer=null),this._olSource=null}}]),e}(f.a)},function(t,e,i){"use strict";i.d(e,"a",function(){return r});var r={DT_BOOL:"bool",DT_NUMBER:"number",DT_STR:"string",DT_OBJ:"object",DT_ARRAY:"array"}},function(t,e,i){"use strict";var r=i(0),n=i(107),o=function(t,e,i,r){n.a.call(this,t,e),this.expression=i,this.matchCase=r};r.a.inherits(o,n.a),e.a=o},function(t,e,i){"use strict";var r=i(109),n={};n.ORDER=[r.a.POLYGON,r.a.CIRCLE,r.a.LINE_STRING,r.a.IMAGE,r.a.TEXT,r.a.DEFAULT],n.TEXT_ALIGN={},n.TEXT_ALIGN.left=0,n.TEXT_ALIGN.end=0,n.TEXT_ALIGN.center=.5,n.TEXT_ALIGN.right=1,n.TEXT_ALIGN.start=1,n.TEXT_ALIGN.top=0,n.TEXT_ALIGN.middle=.5,n.TEXT_ALIGN.hanging=.2,n.TEXT_ALIGN.alphabetic=.8,n.TEXT_ALIGN.ideographic=.8,n.TEXT_ALIGN.bottom=1,e.a=n},function(t,e,i){"use strict";var r=i(0),n=i(21),o=i(292),a=function(t){o.a.call(this,t)};r.a.inherits(a,o.a),a.prototype.getType=function(){return n.a.FRAGMENT_SHADER},e.a=a},function(t,e,i){"use strict";var r=i(0),n=i(21),o=i(292),a=function(t){o.a.call(this,t)};r.a.inherits(a,o.a),a.prototype.getType=function(){return n.a.VERTEX_SHADER},e.a=a},function(t,e,i){t.exports={default:i(302),__esModule:!0}},function(t,e,i){var r=i(113);t.exports=function(t,e,i){if(r(t),void 0===e)return t;switch(i){case 1:return function(i){return t.call(e,i)};case 2:return function(i,r){return t.call(e,i,r)};case 3:return function(i,r,n){return t.call(e,i,r,n)}}return function(){return t.apply(e,arguments)}}},function(t,e){t.exports={}},function(t,e,i){var r=i(202),n=i(159);t.exports=Object.keys||function(t){return r(t,n)}},function(t,e){var i={}.toString;t.exports=function(t){return i.call(t).slice(8,-1)}},function(t,e,i){t.exports={default:i(311),__esModule:!0}},function(t,e,i){"use strict";var r={PROPERTYCHANGE:"propertychange"};e.a=r},function(t,e,i){"use strict";var r=i(52),n={};n.asColorLike=function(t){return n.isColorLike(t)?t:r.a.asString(t)},n.isColorLike=function(t){return"string"==typeof t||t instanceof CanvasPattern||t instanceof CanvasGradient},e.a=n},function(t,e,i){"use strict";var r=i(0),n=i(52),o=function(t){var e=t||{};this.color_=void 0!==e.color?e.color:null,this.checksum_=void 0};o.prototype.clone=function(){var t=this.getColor();return new o({color:t&&t.slice?t.slice():t||void 0})},o.prototype.getColor=function(){return this.color_},o.prototype.setColor=function(t){this.color_=t,this.checksum_=void 0},o.prototype.getChecksum=function(){return void 0===this.checksum_&&(this.color_ instanceof CanvasPattern||this.color_ instanceof CanvasGradient?this.checksum_=r.a.getUid(this.color_).toString():this.checksum_="f"+(this.color_?n.a.asString(this.color_):"-")),this.checksum_},e.a=o},function(t,e,i){"use strict";var r=i(0),n=function(t){var e=t||{};this.color_=void 0!==e.color?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=void 0!==e.lineDash?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width,this.checksum_=void 0};n.prototype.clone=function(){var t=this.getColor();return new n({color:t&&t.slice?t.slice():t||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})},n.prototype.getColor=function(){return this.color_},n.prototype.getLineCap=function(){return this.lineCap_},n.prototype.getLineDash=function(){return this.lineDash_},n.prototype.getLineDashOffset=function(){return this.lineDashOffset_},n.prototype.getLineJoin=function(){return this.lineJoin_},n.prototype.getMiterLimit=function(){return this.miterLimit_},n.prototype.getWidth=function(){return this.width_},n.prototype.setColor=function(t){this.color_=t,this.checksum_=void 0},n.prototype.setLineCap=function(t){this.lineCap_=t,this.checksum_=void 0},n.prototype.setLineDash=function(t){this.lineDash_=t,this.checksum_=void 0},n.prototype.setLineDashOffset=function(t){this.lineDashOffset_=t,this.checksum_=void 0},n.prototype.setLineJoin=function(t){this.lineJoin_=t,this.checksum_=void 0},n.prototype.setMiterLimit=function(t){this.miterLimit_=t,this.checksum_=void 0},n.prototype.setWidth=function(t){this.width_=t,this.checksum_=void 0},n.prototype.getChecksum=function(){return void 0===this.checksum_&&(this.checksum_="s",this.color_?"string"==typeof this.color_?this.checksum_+=this.color_:this.checksum_+=r.a.getUid(this.color_).toString():this.checksum_+="-",this.checksum_+=","+(void 0!==this.lineCap_?this.lineCap_.toString():"-")+","+(this.lineDash_?this.lineDash_.toString():"-")+","+(void 0!==this.lineDashOffset_?this.lineDashOffset_:"-")+","+(void 0!==this.lineJoin_?this.lineJoin_:"-")+","+(void 0!==this.miterLimit_?this.miterLimit_.toString():"-")+","+(void 0!==this.width_?this.width_.toString():"-")),this.checksum_},e.a=n},function(t,e,i){"use strict";var r=i(7),n={};n.point=function(t,e,i,n,o,a,s){var l,u,h=t[e],c=t[e+1],p=t[i]-h,d=t[i+1]-c;if(0===p&&0===d)u=e;else{var f=((o-h)*p+(a-c)*d)/(p*p+d*d);if(f>1)u=i;else{if(f>0){for(l=0;l<n;++l)s[l]=r.a.lerp(t[e+l],t[i+l],f);return void(s.length=n)}u=e}}for(l=0;l<n;++l)s[l]=t[u+l];s.length=n},n.getMaxSquaredDelta=function(t,e,i,n,o){var a=t[e],s=t[e+1];for(e+=n;e<i;e+=n){var l=t[e],u=t[e+1],h=r.a.squaredDistance(a,s,l,u);h>o&&(o=h),a=l,s=u}return o},n.getsMaxSquaredDelta=function(t,e,i,r,o){var a,s;for(a=0,s=i.length;a<s;++a){var l=i[a];o=n.getMaxSquaredDelta(t,e,l,r,o),e=l}return o},n.getssMaxSquaredDelta=function(t,e,i,r,o){var a,s;for(a=0,s=i.length;a<s;++a){var l=i[a];o=n.getsMaxSquaredDelta(t,e,l,r,o),e=l[l.length-1]}return o},n.getClosestPoint=function(t,e,i,o,a,s,l,u,h,c,p){if(e==i)return c;var d,f;if(0===a){if((f=r.a.squaredDistance(l,u,t[e],t[e+1]))<c){for(d=0;d<o;++d)h[d]=t[e+d];return h.length=o,f}return c}for(var _=p||[NaN,NaN],g=e+o;g<i;)if(n.point(t,g-o,g,o,l,u,_),(f=r.a.squaredDistance(l,u,_[0],_[1]))<c){for(c=f,d=0;d<o;++d)h[d]=_[d];h.length=o,g+=o}else g+=o*Math.max((Math.sqrt(f)-Math.sqrt(c))/a|0,1);if(s&&(n.point(t,i-o,e,o,l,u,_),(f=r.a.squaredDistance(l,u,_[0],_[1]))<c)){for(c=f,d=0;d<o;++d)h[d]=_[d];h.length=o}return c},n.getsClosestPoint=function(t,e,i,r,o,a,s,l,u,h,c){var p,d,f=c||[NaN,NaN];for(p=0,d=i.length;p<d;++p){var _=i[p];h=n.getClosestPoint(t,e,_,r,o,a,s,l,u,h,f),e=_}return h},n.getssClosestPoint=function(t,e,i,r,o,a,s,l,u,h,c){var p,d,f=c||[NaN,NaN];for(p=0,d=i.length;p<d;++p){var _=i[p];h=n.getsClosestPoint(t,e,_,r,o,a,s,l,u,h,f),e=_[_.length-1]}return h},e.a=n},function(t,e,i){"use strict";var r=i(1),n={};n.linearRingContainsExtent=function(t,e,i,o,a){return!r.a.forEachCorner(a,function(r){return!n.linearRingContainsXY(t,e,i,o,r[0],r[1])})},n.linearRingContainsXY=function(t,e,i,r,n,o){for(var a=0,s=t[i-r],l=t[i-r+1];e<i;e+=r){var u=t[e],h=t[e+1];l<=o?h>o&&(u-s)*(o-l)-(n-s)*(h-l)>0&&a++:h<=o&&(u-s)*(o-l)-(n-s)*(h-l)<0&&a--,s=u,l=h}return 0!==a},n.linearRingsContainsXY=function(t,e,i,r,o,a){if(0===i.length)return!1;if(!n.linearRingContainsXY(t,e,i[0],r,o,a))return!1;var s,l;for(s=1,l=i.length;s<l;++s)if(n.linearRingContainsXY(t,i[s-1],i[s],r,o,a))return!1;return!0},n.linearRingssContainsXY=function(t,e,i,r,o,a){if(0===i.length)return!1;var s,l;for(s=0,l=i.length;s<l;++s){var u=i[s];if(n.linearRingsContainsXY(t,e,u,r,o,a))return!0;e=u[u.length-1]}return!1},e.a=n},function(t,e,i){"use strict";var r=i(0),n=i(74),o=i(127),a=i(93),s=i(6),l=i(9),u=i(4),h=i(25),c=i(5),p=i(1),d=i(336),f=i(19),_=i(337),g=i(2),y=i(171),v=i(63),m=i(338),E=i(229),T=function(t){var e=t||{};y.a.call(this,{attributions:e.attributions,logo:e.logo,projection:void 0,state:v.a.READY,wrapX:void 0===e.wrapX||e.wrapX}),this.loader_=r.a.nullFunction,this.format_=e.format,this.overlaps_=void 0==e.overlaps||e.overlaps,this.url_=e.url,void 0!==e.loader?this.loader_=e.loader:void 0!==this.url_&&(l.a.assert(this.format_,7),this.loader_=d.a.xhr(this.url_,this.format_)),this.strategy_=void 0!==e.strategy?e.strategy:_.a.all;var i=void 0===e.useSpatialIndex||e.useSpatialIndex;this.featuresRtree_=i?new E.a:null,this.loadedExtentsRtree_=new E.a,this.nullGeometryFeatures_={},this.idIndex_={},this.undefIdIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;var o,a;e.features instanceof n.a?(o=e.features,a=o.getArray()):Array.isArray(e.features)&&(a=e.features),i||void 0!==o||(o=new n.a(a)),void 0!==a&&this.addFeaturesInternal(a),void 0!==o&&this.bindFeaturesCollection_(o)};r.a.inherits(T,y.a),T.prototype.addFeature=function(t){this.addFeatureInternal(t),this.changed()},T.prototype.addFeatureInternal=function(t){var e=r.a.getUid(t).toString();if(this.addToIndex_(e,t)){this.setupChangeEvents_(e,t);var i=t.getGeometry();if(i){var n=i.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(n,t)}else this.nullGeometryFeatures_[e]=t;this.dispatchEvent(new T.Event(m.a.ADDFEATURE,t))}},T.prototype.setupChangeEvents_=function(t,e){this.featureChangeKeys_[t]=[u.a.listen(e,c.a.CHANGE,this.handleFeatureChange_,this),u.a.listen(e,a.a.PROPERTYCHANGE,this.handleFeatureChange_,this)]},T.prototype.addToIndex_=function(t,e){var i=!0,r=e.getId();return void 0!==r?r.toString()in this.idIndex_?i=!1:this.idIndex_[r.toString()]=e:(l.a.assert(!(t in this.undefIdIndex_),30),this.undefIdIndex_[t]=e),i},T.prototype.addFeatures=function(t){this.addFeaturesInternal(t),this.changed()},T.prototype.addFeaturesInternal=function(t){var e,i,n,o,a=[],s=[],l=[];for(i=0,n=t.length;i<n;i++)o=t[i],e=r.a.getUid(o).toString(),this.addToIndex_(e,o)&&s.push(o);for(i=0,n=s.length;i<n;i++){o=s[i],e=r.a.getUid(o).toString(),this.setupChangeEvents_(e,o);var u=o.getGeometry();if(u){var h=u.getExtent();a.push(h),l.push(o)}else this.nullGeometryFeatures_[e]=o}for(this.featuresRtree_&&this.featuresRtree_.load(a,l),i=0,n=s.length;i<n;i++)this.dispatchEvent(new T.Event(m.a.ADDFEATURE,s[i]))},T.prototype.bindFeaturesCollection_=function(t){var e=!1;u.a.listen(this,m.a.ADDFEATURE,function(i){e||(e=!0,t.push(i.feature),e=!1)}),u.a.listen(this,m.a.REMOVEFEATURE,function(i){e||(e=!0,t.remove(i.feature),e=!1)}),u.a.listen(t,o.a.ADD,function(t){e||(e=!0,this.addFeature(t.element),e=!1)},this),u.a.listen(t,o.a.REMOVE,function(t){e||(e=!0,this.removeFeature(t.element),e=!1)},this),this.featuresCollection_=t},T.prototype.clear=function(t){if(t){for(var e in this.featureChangeKeys_){this.featureChangeKeys_[e].forEach(u.a.unlistenByKey)}this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.undefIdIndex_={})}else if(this.featuresRtree_){this.featuresRtree_.forEach(this.removeFeatureInternal,this);for(var i in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[i])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.loadedExtentsRtree_.clear(),this.nullGeometryFeatures_={};var r=new T.Event(m.a.CLEAR);this.dispatchEvent(r),this.changed()},T.prototype.forEachFeature=function(t,e){return this.featuresRtree_?this.featuresRtree_.forEach(t,e):this.featuresCollection_?this.featuresCollection_.forEach(t,e):void 0},T.prototype.forEachFeatureAtCoordinateDirect=function(t,e,i){var r=[t[0],t[1],t[0],t[1]];return this.forEachFeatureInExtent(r,function(r){return r.getGeometry().intersectsCoordinate(t)?e.call(i,r):void 0})},T.prototype.forEachFeatureInExtent=function(t,e,i){return this.featuresRtree_?this.featuresRtree_.forEachInExtent(t,e,i):this.featuresCollection_?this.featuresCollection_.forEach(e,i):void 0},T.prototype.forEachFeatureIntersectingExtent=function(t,e,i){return this.forEachFeatureInExtent(t,function(r){if(r.getGeometry().intersectsExtent(t)){var n=e.call(i,r);if(n)return n}})},T.prototype.getFeaturesCollection=function(){return this.featuresCollection_},T.prototype.getFeatures=function(){var t;return this.featuresCollection_?t=this.featuresCollection_.getArray():this.featuresRtree_&&(t=this.featuresRtree_.getAll(),g.a.isEmpty(this.nullGeometryFeatures_)||s.a.extend(t,g.a.getValues(this.nullGeometryFeatures_))),t},T.prototype.getFeaturesAtCoordinate=function(t){var e=[];return this.forEachFeatureAtCoordinateDirect(t,function(t){e.push(t)}),e},T.prototype.getFeaturesInExtent=function(t){return this.featuresRtree_.getInExtent(t)},T.prototype.getClosestFeatureToCoordinate=function(t,e){var i=t[0],r=t[1],n=null,o=[NaN,NaN],a=1/0,s=[-1/0,-1/0,1/0,1/0],l=e||f.a.TRUE;return this.featuresRtree_.forEachInExtent(s,function(t){if(l(t)){var e=t.getGeometry(),u=a;if((a=e.closestPointXY(i,r,o,a))<u){n=t;var h=Math.sqrt(a);s[0]=i-h,s[1]=r-h,s[2]=i+h,s[3]=r+h}}}),n},T.prototype.getExtent=function(t){return this.featuresRtree_.getExtent(t)},T.prototype.getFeatureById=function(t){var e=this.idIndex_[t.toString()];return void 0!==e?e:null},T.prototype.getFormat=function(){return this.format_},T.prototype.getOverlaps=function(){return this.overlaps_},T.prototype.getResolutions=function(){},T.prototype.getUrl=function(){return this.url_},T.prototype.handleFeatureChange_=function(t){var e=t.target,i=r.a.getUid(e).toString(),n=e.getGeometry();if(n){var o=n.getExtent();i in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[i],this.featuresRtree_&&this.featuresRtree_.insert(o,e)):this.featuresRtree_&&this.featuresRtree_.update(o,e)}else i in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(e),this.nullGeometryFeatures_[i]=e);var a=e.getId();if(void 0!==a){var s=a.toString();i in this.undefIdIndex_?(delete this.undefIdIndex_[i],this.idIndex_[s]=e):this.idIndex_[s]!==e&&(this.removeFromIdIndex_(e),this.idIndex_[s]=e)}else i in this.undefIdIndex_||(this.removeFromIdIndex_(e),this.undefIdIndex_[i]=e);this.changed(),this.dispatchEvent(new T.Event(m.a.CHANGEFEATURE,e))},T.prototype.isEmpty=function(){return this.featuresRtree_.isEmpty()&&g.a.isEmpty(this.nullGeometryFeatures_)},T.prototype.loadFeatures=function(t,e,i){var r,n,o=this.loadedExtentsRtree_,a=this.strategy_(t,e);for(r=0,n=a.length;r<n;++r){var s=a[r];o.forEachInExtent(s,function(t){return p.a.containsExtent(t.extent,s)})||(this.loader_.call(this,s,e,i),o.insert(s,{extent:s.slice()}))}},T.prototype.removeLoadedExtent=function(t){var e,i=this.loadedExtentsRtree_;i.forEachInExtent(t,function(i){if(p.a.equals(i.extent,t))return e=i,!0}),e&&i.remove(e)},T.prototype.removeFeature=function(t){var e=r.a.getUid(t).toString();e in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[e]:this.featuresRtree_&&this.featuresRtree_.remove(t),this.removeFeatureInternal(t),this.changed()},T.prototype.removeFeatureInternal=function(t){var e=r.a.getUid(t).toString();this.featureChangeKeys_[e].forEach(u.a.unlistenByKey),delete this.featureChangeKeys_[e];var i=t.getId();void 0!==i?delete this.idIndex_[i.toString()]:delete this.undefIdIndex_[e],this.dispatchEvent(new T.Event(m.a.REMOVEFEATURE,t))},T.prototype.removeFromIdIndex_=function(t){var e=!1;for(var i in this.idIndex_)if(this.idIndex_[i]===t){delete this.idIndex_[i],e=!0;break}return e},T.prototype.setLoader=function(t){this.loader_=t},T.Event=function(t,e){h.a.call(this,t),this.feature=e},r.a.inherits(T.Event,h.a),e.a=T},function(t,e,i){"use strict";var r={ARRAY_BUFFER:"arraybuffer",JSON:"json",TEXT:"text",XML:"xml"};e.a=r},function(t,e,i){"use strict";var r=i(0),n=i(75),o=i(1),a=i(216),s=i(2),l=i(8),u=i(32),h=i(172),c={};c.getForProjection=function(t){var e=t.getDefaultTileGrid();return e||(e=c.createForProjection(t),t.setDefaultTileGrid(e)),e},c.wrapX=function(t,e,i){var r=e[0],n=t.getTileCoordCenter(e),a=c.extentFromProjection(i);if(o.a.containsCoordinate(a,n))return e;var s=o.a.getWidth(a),l=Math.ceil((a[0]-n[0])/s);return n[0]+=s*l,t.getTileCoordForCoordAndZ(n,r)},c.createForExtent=function(t,e,i,r){var n=void 0!==r?r:a.a.TOP_LEFT,s=c.resolutionsFromExtent(t,e,i);return new h.a({extent:t,origin:o.a.getCorner(t,n),resolutions:s,tileSize:i})},c.createXYZ=function(t){var e={};return s.a.assign(e,void 0!==t?t:{}),void 0===e.extent&&(e.extent=l.a.get("EPSG:3857").getExtent()),e.resolutions=c.resolutionsFromExtent(e.extent,e.maxZoom,e.tileSize),delete e.maxZoom,new h.a(e)},c.resolutionsFromExtent=function(t,e,i){for(var a=void 0!==e?e:r.a.DEFAULT_MAX_ZOOM,s=o.a.getHeight(t),l=o.a.getWidth(t),u=n.a.toSize(void 0!==i?i:r.a.DEFAULT_TILE_SIZE),h=Math.max(l/u[0],s/u[1]),c=a+1,p=new Array(c),d=0;d<c;++d)p[d]=h/Math.pow(2,d);return p},c.createForProjection=function(t,e,i,r){var n=c.extentFromProjection(t);return c.createForExtent(n,e,i,r)},c.extentFromProjection=function(t){t=l.a.get(t);var e=t.getExtent();if(!e){var i=180*l.a.METERS_PER_UNIT[u.a.DEGREES]/t.getMetersPerUnit();e=o.a.createOrUpdate(-i,-i,i,i)}return e},e.a=c},function(t,e,i){"use strict";function r(t){return"string"==typeof t?document.getElementById(t):t}function n(t,e){var i=e||document,r=null;return i.getElementsByClassName?r=i.getElementsByClassName(t)[0]:i.querySelectorAll&&i.querySelector&&(r=i.querySelector("."+t)),r||null}function o(t,e,i){var r=document.createElement(t);return e&&(r.className=e),i&&i.appendChild(r),r}function a(t){var e=t.parentNode;e&&e.removeChild(t)}function s(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function l(t,e){if(void 0!==t.classList)return t.classList.contains(e);var i=p(t);return i.length>0&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(i)}function u(t,e){if(void 0!==t.classList)for(var i=_.n(e),r=0,n=i.length;r<n;r++)t.classList.add(i[r]);else if(!l(t,e)){var o=p(t);c(t,(o?o+" ":"")+e)}}function h(t,e){void 0!==t.classList?t.classList.remove(e):c(t,_.p((" "+p(t)+" ").replace(" "+e+" "," ")))}function c(t,e){void 0===t.className.baseVal?t.className=e:t.className.baseVal=e}function p(t){return void 0===t.className.baseVal?t.className:t.className.baseVal}function d(t){for(var e=document.documentElement.style,i=0;i<t.length;i++)if(t[i]in e)return t[i];return!1}function f(t,e){e.parentNode&&e.parentNode.insertBefore(t,e)}e.d=r,e.e=n,e.b=o,e.h=a,e.c=s,e.f=l,e.a=u,e.i=h,e.j=c,e.g=f;var _=i(10);d(["transform","WebkitTransform","OTransform","MozTransform","msTransform"]),d(["webkitTransition","transition","OTransition","MozTransition","msTransition"])},function(t,e,i){"use strict";var r=i(0),n=i(377),o=i(250),a=i(39),s=i(4),l=i(5),u=i(8),h=i(378),c=i(379),p=i(56),d=i(101),f=function(t){c.a.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,extent:t.extent,logo:t.logo,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction?t.tileLoadFunction:f.defaultTileLoadFunction,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX,transition:t.transition}),this.crossOrigin=void 0!==t.crossOrigin?t.crossOrigin:null,this.tileClass=void 0!==t.tileClass?t.tileClass:n.a,this.tileCacheForProjection={},this.tileGridForProjection={},this.reprojectionErrorThreshold_=t.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1};r.a.inherits(f,c.a),f.prototype.canExpireCache=function(){if(!r.a.ENABLE_RASTER_REPROJECTION)return c.a.prototype.canExpireCache.call(this);if(this.tileCache.canExpireCache())return!0;for(var t in this.tileCacheForProjection)if(this.tileCacheForProjection[t].canExpireCache())return!0;return!1},f.prototype.expireCache=function(t,e){if(!r.a.ENABLE_RASTER_REPROJECTION)return void c.a.prototype.expireCache.call(this,t,e);var i=this.getTileCacheForProjection(t);this.tileCache.expireCache(this.tileCache==i?e:{});for(var n in this.tileCacheForProjection){var o=this.tileCacheForProjection[n];o.expireCache(o==i?e:{})}},f.prototype.getGutter=function(t){return r.a.ENABLE_RASTER_REPROJECTION&&this.getProjection()&&t&&!u.a.equivalent(this.getProjection(),t)?0:this.getGutterInternal()},f.prototype.getGutterInternal=function(){return 0},f.prototype.getOpaque=function(t){return!(r.a.ENABLE_RASTER_REPROJECTION&&this.getProjection()&&t&&!u.a.equivalent(this.getProjection(),t))&&c.a.prototype.getOpaque.call(this,t)},f.prototype.getTileGridForProjection=function(t){if(!r.a.ENABLE_RASTER_REPROJECTION)return c.a.prototype.getTileGridForProjection.call(this,t);var e=this.getProjection();if(!this.tileGrid||e&&!u.a.equivalent(e,t)){var i=r.a.getUid(t).toString();return i in this.tileGridForProjection||(this.tileGridForProjection[i]=d.a.getForProjection(t)),this.tileGridForProjection[i]}return this.tileGrid},f.prototype.getTileCacheForProjection=function(t){if(!r.a.ENABLE_RASTER_REPROJECTION)return c.a.prototype.getTileCacheForProjection.call(this,t);var e=this.getProjection();if(!e||u.a.equivalent(e,t))return this.tileCache;var i=r.a.getUid(t).toString();return i in this.tileCacheForProjection||(this.tileCacheForProjection[i]=new o.a(this.tileCache.highWaterMark)),this.tileCacheForProjection[i]},f.prototype.createTile_=function(t,e,i,r,n,o){var u=[t,e,i],h=this.getTileCoordForTileUrlFunction(u,n),c=h?this.tileUrlFunction(h,r,n):void 0,p=new this.tileClass(u,void 0!==c?a.a.IDLE:a.a.EMPTY,void 0!==c?c:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return p.key=o,s.a.listen(p,l.a.CHANGE,this.handleTileChange,this),p},f.prototype.getTile=function(t,e,i,n,o){var a=this.getProjection();if(r.a.ENABLE_RASTER_REPROJECTION&&a&&o&&!u.a.equivalent(a,o)){var s,l=this.getTileCacheForProjection(o),c=[t,e,i],d=p.a.getKey(c);l.containsKey(d)&&(s=l.get(d));var f=this.getKey();if(s&&s.key==f)return s;var _=this.getTileGridForProjection(a),g=this.getTileGridForProjection(o),y=this.getTileCoordForTileUrlFunction(c,o),v=new h.a(a,_,o,g,c,y,this.getTilePixelRatio(n),this.getGutterInternal(),function(t,e,i,r){return this.getTileInternal(t,e,i,r,a)}.bind(this),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_);return v.key=f,s?(v.interimTile=s,v.refreshInterimChain(),l.replace(d,v)):l.set(d,v),v}return this.getTileInternal(t,e,i,n,a||o)},f.prototype.getTileInternal=function(t,e,i,r,n){var o=null,s=p.a.getKeyZXY(t,e,i),l=this.getKey();if(this.tileCache.containsKey(s)){if(o=this.tileCache.get(s),o.key!=l){var u=o;o=this.createTile_(t,e,i,r,n,l),u.getState()==a.a.IDLE?o.interimTile=u.interimTile:o.interimTile=u,o.refreshInterimChain(),this.tileCache.replace(s,o)}}else o=this.createTile_(t,e,i,r,n,l),this.tileCache.set(s,o);return o},f.prototype.setRenderReprojectionEdges=function(t){if(r.a.ENABLE_RASTER_REPROJECTION&&this.renderReprojectionEdges_!=t){this.renderReprojectionEdges_=t;for(var e in this.tileCacheForProjection)this.tileCacheForProjection[e].clear();this.changed()}},f.prototype.setTileGridForProjection=function(t,e){if(r.a.ENABLE_RASTER_REPROJECTION){var i=u.a.get(t);if(i){var n=r.a.getUid(i).toString();n in this.tileGridForProjection||(this.tileGridForProjection[n]=e)}}},f.defaultTileLoadFunction=function(t,e){t.getImage().src=e},e.a=f},function(t,e,i){"use strict";function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.type,i=t.url,r=t.callback,n=void 0===r?null:r;if(!c.hasOwnProperty(e))return""===i||""===e?void a.a("loadStyleData params error!"):void Object(l.loadWithXhr)(i,"json").then(function(t){var i=new h.a;if(new u.a(i).load(t)){if(a.b("parser stylejson success!"),c[e]=i,!i.isExistAtlas())return void(n&&s.i(n)&&n(!0));i._preloadAtlas().then(function(t){a.b(t),n&&s.i(n)&&n(t)})}else a.a("parser stylejson error!"),n&&s.i(n)&&n(!1)}).catch(function(){a.a("load json style error!"),n&&s.i(n)&&n(!1)})}function n(t){return c.hasOwnProperty(t)&&c[t]instanceof h.a?c[t]:null}function o(){for(var t in c){c[t].clear()}c={}}Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"loadStyleData",function(){return r}),i.d(e,"getStyleManager",function(){return n}),i.d(e,"clear",function(){return o});var a=i(22),s=i(10),l=i(140),u=i(404),h=i(410),c={}},function(t,e,i){"use strict";function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.bdIds,i=t.url,r=t.callback,o=void 0===r?null:r;if(""===i||0===e.length)return void s.a("loadIndoorData params error!");Object(u.loadWithXhr)(i,"arraybuffer").then(function(t){var e=n(t);o&&l.i(o)&&o(e)}).catch(function(){s.a("load topojson error!"),o&&l.i(o)&&o(!1)})}function n(t){var e=new p.a(t);e.skipBytes(12);var i=e.readInt32();if(i<=0)return s.c("load buildingCount<=0"),!1;for(var r=0;r<i;r++){var n=e.readInt32(),o=e.readInt32(),a=e.readInt32();if(!(a<=0)){var l=p.a.readUtf8FromBuf(e.buf,o,o+a),u=new h.a(n);new c.a(u).load(l)?(s.b("parser "+n+" topojson success!"),f.put(n,u)):s.a("parser"+n+"topojson error!")}}return!0}function o(t){return f.get(t)}function a(){f.forEach(function(t){t.clear()}),f.clear()}Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"loadIndoorData",function(){return r}),i.d(e,"getIndoorDataManager",function(){return o}),i.d(e,"clear",function(){return a});var s=i(22),l=i(10),u=i(140),h=i(413),c=i(414),p=i(264),d=i(265),f=new d.a(5)},function(t,e,i){"use strict";var r=function(t){this.tagName_=t};r.prototype.getTagName=function(){return this.tagName_},e.a=r},function(t,e,i){"use strict";var r=i(0),n=i(106),o=function(t,e){n.a.call(this,t),this.propertyName=e};r.a.inherits(o,n.a),e.a=o},function(t,e,i){"use strict";function r(t){l=t}function n(){return l}function o(){return l===s.CHINESE?a.b:l===s.ENGLISH?a.a:null}Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"LanguageType",function(){return s}),i.d(e,"setI18n",function(){return r}),i.d(e,"getI18n",function(){return n}),i.d(e,"getLanguageInfo",function(){return o});var a=i(452),s={CHINESE:"ZH",ENGLISH:"EN"},l=s.CHINESE},function(t,e,i){"use strict";var r={CIRCLE:"Circle",DEFAULT:"Default",IMAGE:"Image",LINE_STRING:"LineString",POLYGON:"Polygon",TEXT:"Text"};e.a=r},function(t,e,i){"use strict";var r=i(0),n=i(6),o=i(94),a=i(1),s=i(217),l=i(12),u=i(71),h=i(223),c=i(488),p=i(51),d=i(33),f=i(2),_=i(147),g=i(53),y=i(111),v=i(84),m=i(16),E=function(t,e,i,r,n,o){_.a.call(this),this.declutterTree=o,this.tmpExtent_=a.a.createEmpty(),this.tolerance=t,this.maxExtent=e,this.overlaps=n,this.pixelRatio=r,this.maxLineWidth=0,this.resolution=i,this.fillOrigin_,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.coordinateCache_={},this.renderedTransform_=m.a.create(),this.hitDetectionInstructions=[],this.pixelCoordinates_=null,this.state={},this.viewRotation_=0,this.tmpLocalTransform_=m.a.create(),this.resetTransform_=m.a.create()};r.a.inherits(E,_.a),E.prototype.replayTextBackground_=function(t,e,i,r,n,o,a){t.beginPath(),t.moveTo.apply(t,e),t.lineTo.apply(t,i),t.lineTo.apply(t,r),t.lineTo.apply(t,n),t.lineTo.apply(t,e),o&&(this.fillOrigin_=o[2],this.fill_(t)),a&&(this.setStrokeStyle_(t,a),t.stroke())},E.prototype.replayImage_=function(t,e,i,r,n,o,s,l,u,h,c,p,d,f,_,y,v,E){var T=v||E,S=this.tmpLocalTransform_;n*=d,o*=d,e-=n,i-=o,f&&(e=Math.round(e),i=Math.round(i));var R,I,x,C,O=_+h>r.width?r.width-h:_,P=l+c>r.height?r.height-c:l,L=this.tmpExtent_,A=y[3]+O*d+y[1],w=y[0]+P*d+y[2],M=e-y[3],F=i-y[0];(T||0!==p)&&(R=[M,F],I=[M+A,F],x=[M+A,F+w],C=[M,F+w]);var N=null;if(0!==p){var b=e+n,D=i+o;N=m.a.compose(S,b,D,1,1,p,-b,-D),a.a.createOrUpdateEmpty(L),a.a.extendCoordinate(L,m.a.apply(S,R)),a.a.extendCoordinate(L,m.a.apply(S,I)),a.a.extendCoordinate(L,m.a.apply(S,x)),a.a.extendCoordinate(L,m.a.apply(S,C))}else a.a.createOrUpdate(M,F,M+A,F+w,L);var k=t.canvas,G=L[0]<=k.width&&L[2]>=0&&L[1]<=k.height&&L[3]>=0;if(s){if(!G&&1==s[4])return;a.a.extend(s,L);var U=G?[t,N?N.slice(0):null,u,r,h,c,O,P,e,i,d]:null;U&&T&&U.push(v,E,R,I,x,C),s.push(U)}else G&&(T&&this.replayTextBackground_(t,R,I,x,C,v,E),g.a.drawImage(t,N,u,r,h,c,O,P,e,i,d))},E.prototype.applyPixelRatio=function(t){var e=this.pixelRatio;return 1==e?t:t.map(function(t){return t*e})},E.prototype.appendFlatCoordinates=function(t,e,i,r,n,o){var l=this.coordinates.length,u=this.getBufferedMaxExtent();o&&(e+=r);var h,c,p,d=[t[e],t[e+1]],f=[NaN,NaN],_=!0;for(h=e+r;h<i;h+=r)f[0]=t[h],f[1]=t[h+1],p=a.a.coordinateRelationship(u,f),p!==c?(_&&(this.coordinates[l++]=d[0],this.coordinates[l++]=d[1]),this.coordinates[l++]=f[0],this.coordinates[l++]=f[1],_=!1):p===s.a.INTERSECTING?(this.coordinates[l++]=f[0],this.coordinates[l++]=f[1],_=!1):_=!0,d[0]=f[0],d[1]=f[1],c=p;return(n&&_||h===e+r)&&(this.coordinates[l++]=d[0],this.coordinates[l++]=d[1]),l},E.prototype.drawCustomCoordinates_=function(t,e,i,r,n){for(var o=0,a=i.length;o<a;++o){var s=i[o],l=this.appendFlatCoordinates(t,e,s,r,!1,!1);n.push(l),e=s}return e},E.prototype.drawCustom=function(t,e,i){this.beginGeometry(t,e);var r,n,o,a,s,h=t.getType(),c=t.getStride(),p=this.coordinates.length;if(h==l.a.MULTI_POLYGON){t=t,r=t.getOrientedFlatCoordinates(),a=[];var d=t.getEndss();s=0;for(var f=0,_=d.length;f<_;++f){var g=[];s=this.drawCustomCoordinates_(r,s,d[f],c,g),a.push(g)}this.instructions.push([y.a.CUSTOM,p,a,t,i,u.a.coordinatesss])}else h==l.a.POLYGON||h==l.a.MULTI_LINE_STRING?(o=[],r=h==l.a.POLYGON?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),s=this.drawCustomCoordinates_(r,0,t.getEnds(),c,o),this.instructions.push([y.a.CUSTOM,p,o,t,i,u.a.coordinatess])):h==l.a.LINE_STRING||h==l.a.MULTI_POINT?(r=t.getFlatCoordinates(),n=this.appendFlatCoordinates(r,0,r.length,c,!1,!1),this.instructions.push([y.a.CUSTOM,p,n,t,i,u.a.coordinates])):h==l.a.POINT&&(r=t.getFlatCoordinates(),this.coordinates.push(r[0],r[1]),n=this.coordinates.length,this.instructions.push([y.a.CUSTOM,p,n,t,i]));this.endGeometry(t,e)},E.prototype.beginGeometry=function(t,e){this.beginGeometryInstruction1_=[y.a.BEGIN_GEOMETRY,e,0],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[y.a.BEGIN_GEOMETRY,e,0],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)},E.prototype.fill_=function(t){if(this.fillOrigin_){var e=m.a.apply(this.renderedTransform_,this.fillOrigin_.slice());t.translate(e[0],e[1]),t.rotate(this.viewRotation_)}t.fill(),this.fillOrigin_&&t.setTransform.apply(t,g.a.resetTransform_)},E.prototype.setStrokeStyle_=function(t,e){t.strokeStyle=e[1],t.lineWidth=e[2],t.lineCap=e[3],t.lineJoin=e[4],t.miterLimit=e[5],d.a.CANVAS_LINE_DASH&&(t.lineDashOffset=e[7],t.setLineDash(e[6]))},E.prototype.renderDeclutter_=function(t,e){if(t&&t.length>5){var i=t[4];if(1==i||i==t.length-5){var r={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};if(!this.declutterTree.collides(r)){this.declutterTree.insert(r);for(var n=g.a.drawImage,o=5,s=t.length;o<s;++o){var l=t[o];l&&(l.length>11&&this.replayTextBackground_(l[0],l[13],l[14],l[15],l[16],l[11],l[12]),n.apply(void 0,l))}}t.length=5,a.a.createOrUpdateEmpty(t)}}},E.prototype.replay_=function(t,e,i,o,s,l){var u;this.pixelCoordinates_&&n.a.equals(e,this.renderedTransform_)?u=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),u=p.a.transform2D(this.coordinates,0,this.coordinates.length,2,e,this.pixelCoordinates_),m.a.setFromArray(this.renderedTransform_,e));for(var d,_,E,T,S,R,I,x,C,O=!f.a.isEmpty(i),P=0,L=o.length,A=0,w=0,M=0,F=null,N=null,b=this.coordinateCache_,D=this.viewRotation_,k={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:D},G=this.instructions!=o||this.overlaps?0:200;P<L;){var U,B,Y,j=o[P],X=j[0];switch(X){case y.a.BEGIN_GEOMETRY:U=j[1],O&&i[r.a.getUid(U).toString()]||!U.getGeometry()?P=j[2]:void 0===l||a.a.intersects(l,U.getGeometry().getExtent())?++P:P=j[2]+1;break;case y.a.BEGIN_PATH:w>G&&(this.fill_(t),w=0),M>G&&(t.stroke(),M=0),w||M||(t.beginPath(),T=S=NaN),++P;break;case y.a.CIRCLE:A=j[1];var V=u[A],z=u[A+1],W=u[A+2],Z=u[A+3],H=W-V,K=Z-z,q=Math.sqrt(H*H+K*K);t.moveTo(V+q,z),t.arc(V,z,q,0,2*Math.PI,!0),++P;break;case y.a.CLOSE_PATH:t.closePath(),++P;break;case y.a.CUSTOM:A=j[1],d=j[2];var J=j[3],Q=j[4],$=6==j.length?j[5]:void 0;k.geometry=J,k.feature=U,P in b||(b[P]=[]);var tt=b[P];$?$(u,A,d,2,tt):(tt[0]=u[A],tt[1]=u[A+1],tt.length=2),Q(tt,k),++P;break;case y.a.DRAW_IMAGE:A=j[1],d=j[2],C=j[3],_=j[4],E=j[5],x=s?null:j[6];var et,it,rt,nt=j[7],ot=j[8],at=j[9],st=j[10],lt=j[11],ut=j[12],ht=j[13],ct=j[14],pt=j[15];for(j.length>16?(et=j[16],it=j[17],rt=j[18]):(et=g.a.defaultPadding,it=rt=!1),lt&&(ut+=D);A<d;A+=2)this.replayImage_(t,u[A],u[A+1],C,_,E,x,nt,ot,at,st,ut,ht,ct,pt,et,it?F:null,rt?N:null);this.renderDeclutter_(x,U),++P;break;case y.a.DRAW_CHARS:var dt=j[1],ft=j[2],_t=j[3];x=s?null:j[4];var gt=j[5],yt=j[6],vt=j[7],mt=j[8],Et=j[9],Tt=j[10],St=j[11],Rt=j[12],It=j[13],xt=j[14],Ct=h.a.lineString(u,dt,ft,2),Ot=mt(Rt);if(gt||Ot<=Ct){var Pt=this.textStates[It].textAlign,Lt=(Ct-Ot)*v.a.TEXT_ALIGN[Pt],At=c.a.lineString(u,dt,ft,2,Rt,mt,Lt,vt);if(At){var wt,Mt,Ft,Nt,bt;if(Tt)for(wt=0,Mt=At.length;wt<Mt;++wt)bt=At[wt],Ft=bt[4],Nt=this.getImage(Ft,It,"",Tt),_=bt[2]+St,E=_t*Nt.height+2*(.5-_t)*St-Et,this.replayImage_(t,bt[0],bt[1],Nt,_,E,x,Nt.height,1,0,0,bt[3],xt,!1,Nt.width,g.a.defaultPadding,null,null);if(yt)for(wt=0,Mt=At.length;wt<Mt;++wt)bt=At[wt],Ft=bt[4],Nt=this.getImage(Ft,It,yt,""),_=bt[2],E=_t*Nt.height-Et,this.replayImage_(t,bt[0],bt[1],Nt,_,E,x,Nt.height,1,0,0,bt[3],xt,!1,Nt.width,g.a.defaultPadding,null,null)}}this.renderDeclutter_(x,U),++P;break;case y.a.END_GEOMETRY:if(void 0!==s){U=j[1];var Dt=s(U);if(Dt)return Dt}++P;break;case y.a.FILL:G?w++:this.fill_(t),++P;break;case y.a.MOVE_TO_LINE_TO:for(A=j[1],d=j[2],B=u[A],Y=u[A+1],R=B+.5|0,I=Y+.5|0,R===T&&I===S||(t.moveTo(B,Y),T=R,S=I),A+=2;A<d;A+=2)B=u[A],Y=u[A+1],R=B+.5|0,I=Y+.5|0,A!=d-2&&R===T&&I===S||(t.lineTo(B,Y),T=R,S=I);++P;break;case y.a.SET_FILL_STYLE:F=j,this.fillOrigin_=j[2],w&&(this.fill_(t),w=0,M&&(t.stroke(),M=0)),t.fillStyle=j[1],++P;break;case y.a.SET_STROKE_STYLE:N=j,M&&(t.stroke(),M=0),this.setStrokeStyle_(t,j),++P;break;case y.a.STROKE:G?M++:t.stroke(),++P;break;default:++P}}w&&this.fill_(t),M&&t.stroke()},E.prototype.replay=function(t,e,i,r){this.viewRotation_=i,this.replay_(t,e,r,this.instructions,void 0,void 0)},E.prototype.replayHitDetection=function(t,e,i,r,n,o){return this.viewRotation_=i,this.replay_(t,e,r,this.hitDetectionInstructions,n,o)},E.prototype.reverseHitDetectionInstructions=function(){var t=this.hitDetectionInstructions;t.reverse();var e,i,r,o=t.length,a=-1;for(e=0;e<o;++e)i=t[e],r=i[0],r==y.a.END_GEOMETRY?a=e:r==y.a.BEGIN_GEOMETRY&&(i[2]=e,n.a.reverseSubArray(this.hitDetectionInstructions,a,e),a=-1)},E.prototype.setFillStrokeStyle=function(t,e){var i=this.state;if(t){var r=t.getColor();i.fillStyle=o.a.asColorLike(r||g.a.defaultFillStyle)}else i.fillStyle=void 0;if(e){var n=e.getColor();i.strokeStyle=o.a.asColorLike(n||g.a.defaultStrokeStyle);var a=e.getLineCap();i.lineCap=void 0!==a?a:g.a.defaultLineCap;var s=e.getLineDash();i.lineDash=s?s.slice():g.a.defaultLineDash;var l=e.getLineDashOffset();i.lineDashOffset=l||g.a.defaultLineDashOffset;var u=e.getLineJoin();i.lineJoin=void 0!==u?u:g.a.defaultLineJoin;var h=e.getWidth();i.lineWidth=void 0!==h?h:g.a.defaultLineWidth;var c=e.getMiterLimit();i.miterLimit=void 0!==c?c:g.a.defaultMiterLimit,i.lineWidth>this.maxLineWidth&&(this.maxLineWidth=i.lineWidth,this.bufferedMaxExtent_=null)}else i.strokeStyle=void 0,i.lineCap=void 0,i.lineDash=null,i.lineDashOffset=void 0,i.lineJoin=void 0,i.lineWidth=void 0,i.miterLimit=void 0},E.prototype.applyFill=function(t,e){var i=t.fillStyle,r=[y.a.SET_FILL_STYLE,i];if("string"!=typeof i){var n=e.getExtent();r.push([n[0],n[3]])}this.instructions.push(r)},E.prototype.applyStroke=function(t){this.instructions.push([y.a.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio])},E.prototype.updateFillStyle=function(t,e,i){var r=t.fillStyle;"string"==typeof r&&t.currentFillStyle==r||(e.call(this,t,i),t.currentFillStyle=r)},E.prototype.updateStrokeStyle=function(t,e){var i=t.strokeStyle,r=t.lineCap,o=t.lineDash,a=t.lineDashOffset,s=t.lineJoin,l=t.lineWidth,u=t.miterLimit;(t.currentStrokeStyle!=i||t.currentLineCap!=r||o!=t.currentLineDash&&!n.a.equals(t.currentLineDash,o)||t.currentLineDashOffset!=a||t.currentLineJoin!=s||t.currentLineWidth!=l||t.currentMiterLimit!=u)&&(e.call(this,t),t.currentStrokeStyle=i,t.currentLineCap=r,t.currentLineDash=o,t.currentLineDashOffset=a,t.currentLineJoin=s,t.currentLineWidth=l,t.currentMiterLimit=u)},E.prototype.endGeometry=function(t,e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;var i=[y.a.END_GEOMETRY,e];this.instructions.push(i),this.hitDetectionInstructions.push(i)},E.prototype.finish=r.a.nullFunction,E.prototype.getBufferedMaxExtent=function(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=a.a.clone(this.maxExtent),this.maxLineWidth>0)){var t=this.resolution*(this.maxLineWidth+1)/2;a.a.buffer(this.bufferedMaxExtent_,t,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_},e.a=E},function(t,e,i){"use strict";var r={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12};e.a=r},function(t,e){t.exports=!0},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e){var i=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++i+r).toString(36))}},function(t,e,i){var r=i(58).f,n=i(66),o=i(24)("toStringTag");t.exports=function(t,e,i){t&&!n(t=i?t:t.prototype,o)&&r(t,o,{configurable:!0,value:e})}},function(t,e,i){var r=i(153);t.exports=function(t){return Object(r(t))}},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,i){"use strict";var r=i(0),n=function(){};n.prototype.disposed_=!1,n.prototype.dispose=function(){this.disposed_||(this.disposed_=!0,this.disposeInternal())},n.prototype.disposeInternal=r.a.nullFunction,e.a=n},function(t,e,i){"use strict";var r=i(0),n=i(32),o=i(218),a=function(t){this.code_=t.code,this.units_=t.units,this.extent_=void 0!==t.extent?t.extent:null,this.worldExtent_=void 0!==t.worldExtent?t.worldExtent:null,this.axisOrientation_=void 0!==t.axisOrientation?t.axisOrientation:"enu",this.global_=void 0!==t.global&&t.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit;var e=t.code;if(r.a.ENABLE_PROJ4JS){var i=o.a.get();if("function"==typeof i){var n=i.defs(e);void 0!==n&&(void 0!==n.axis&&void 0===t.axisOrientation&&(this.axisOrientation_=n.axis),void 0===t.metersPerUnit&&(this.metersPerUnit_=n.to_meter),void 0===t.units&&(this.units_=n.units))}}};a.prototype.canWrapX=function(){return this.canWrapX_},a.prototype.getCode=function(){return this.code_},a.prototype.getExtent=function(){return this.extent_},a.prototype.getUnits=function(){return this.units_},a.prototype.getMetersPerUnit=function(){return this.metersPerUnit_||n.a.METERS_PER_UNIT[this.units_]},a.prototype.getWorldExtent=function(){return this.worldExtent_},a.prototype.getAxisOrientation=function(){return this.axisOrientation_},a.prototype.isGlobal=function(){return this.global_},a.prototype.setGlobal=function(t){this.global_=t,this.canWrapX_=!(!t||!this.extent_)},a.prototype.getDefaultTileGrid=function(){return this.defaultTileGrid_},a.prototype.setDefaultTileGrid=function(t){this.defaultTileGrid_=t},a.prototype.setExtent=function(t){this.extent_=t,this.canWrapX_=!(!this.global_||!t)},a.prototype.setWorldExtent=function(t){this.worldExtent_=t},a.prototype.setGetPointResolution=function(t){this.getPointResolutionFunc_=t},a.prototype.getPointResolutionFunc=function(){return this.getPointResolutionFunc_},e.a=a},function(t,e,i){"use strict";var r=i(0),n=i(9),o=i(69),a=i(5),s=function(t){o.a.call(this),this.highWaterMark=void 0!==t?t:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null};r.a.inherits(s,o.a),s.prototype.canExpireCache=function(){return this.getCount()>this.highWaterMark},s.prototype.clear=function(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null,this.dispatchEvent(a.a.CLEAR)},s.prototype.containsKey=function(t){return this.entries_.hasOwnProperty(t)},s.prototype.forEach=function(t,e){for(var i=this.oldest_;i;)t.call(e,i.value_,i.key_,this),i=i.newer},s.prototype.get=function(t){var e=this.entries_[t];return n.a.assert(void 0!==e,15),e===this.newest_?e.value_:(e===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(e.newer.older=e.older,e.older.newer=e.newer),e.newer=null,e.older=this.newest_,this.newest_.newer=e,this.newest_=e,e.value_)},s.prototype.remove=function(t){var e=this.entries_[t];return n.a.assert(void 0!==e,15),e===this.newest_?(this.newest_=e.older,this.newest_&&(this.newest_.newer=null)):e===this.oldest_?(this.oldest_=e.newer,this.oldest_&&(this.oldest_.older=null)):(e.newer.older=e.older,e.older.newer=e.newer),delete this.entries_[t],--this.count_,e.value_},s.prototype.getCount=function(){return this.count_},s.prototype.getKeys=function(){var t,e=new Array(this.count_),i=0;for(t=this.newest_;t;t=t.older)e[i++]=t.key_;return e},s.prototype.getValues=function(){var t,e=new Array(this.count_),i=0;for(t=this.newest_;t;t=t.older)e[i++]=t.value_;return e},s.prototype.peekLast=function(){return this.oldest_.value_},s.prototype.peekLastKey=function(){return this.oldest_.key_},s.prototype.peekFirstKey=function(){return this.newest_.key_},s.prototype.pop=function(){var t=this.oldest_;return delete this.entries_[t.key_],t.newer&&(t.newer.older=null),this.oldest_=t.newer,this.oldest_||(this.newest_=null),--this.count_,t.value_},s.prototype.replace=function(t,e){this.get(t),this.entries_[t].value_=e},s.prototype.set=function(t,e){n.a.assert(!(t in this.entries_),16);var i={key_:t,newer:null,older:this.newest_,value_:e};this.newest_?this.newest_.newer=i:this.oldest_=i,this.newest_=i,this.entries_[t]=i,++this.count_},s.prototype.prune=function(){for(;this.canExpireCache();)this.pop()},e.a=s},function(t,e,i){"use strict";var r={};r.padNumber=function(t,e,i){var r=void 0!==i?t.toFixed(i):""+t,n=r.indexOf(".");return n=-1===n?r.length:n,n>e?r:new Array(1+e-n).join("0")+r},r.compareVersions=function(t,e){for(var i=(""+t).split("."),r=(""+e).split("."),n=0;n<Math.max(i.length,r.length);n++){var o=parseInt(i[n]||"0",10),a=parseInt(r[n]||"0",10);if(o>a)return 1;if(a>o)return-1}return 0},e.a=r},function(t,e,i){"use strict";var r=i(1),n=i(98),o=i(222),a={};a.lineString=function(t,e,i,n,a){var s=r.a.extendFlatCoordinates(r.a.createEmpty(),t,e,i,n);return!!r.a.intersects(a,s)&&(!!r.a.containsExtent(a,s)||(s[0]>=a[0]&&s[2]<=a[2]||(s[1]>=a[1]&&s[3]<=a[3]||o.a.forEach(t,e,i,n,function(t,e){return r.a.intersectsSegment(a,t,e)}))))},a.lineStrings=function(t,e,i,r,n){var o,s;for(o=0,s=i.length;o<s;++o){if(a.lineString(t,e,i[o],r,n))return!0;e=i[o]}return!1},a.linearRing=function(t,e,i,r,o){return!!a.lineString(t,e,i,r,o)||(!!n.a.linearRingContainsXY(t,e,i,r,o[0],o[1])||(!!n.a.linearRingContainsXY(t,e,i,r,o[0],o[3])||(!!n.a.linearRingContainsXY(t,e,i,r,o[2],o[1])||!!n.a.linearRingContainsXY(t,e,i,r,o[2],o[3]))))},a.linearRings=function(t,e,i,r,o){if(!a.linearRing(t,e,i[0],r,o))return!1;if(1===i.length)return!0;var s,l;for(s=1,l=i.length;s<l;++s)if(n.a.linearRingContainsExtent(t,i[s-1],i[s],r,o))return!1;return!0},a.linearRingss=function(t,e,i,r,n){var o,s;for(o=0,s=i.length;o<s;++o){var l=i[o];if(a.linearRings(t,e,l,r,n))return!0;e=l[l.length-1]}return!1},e.a=a},function(t,e,i){"use strict";var r=i(0),n=i(1),o=i(20),a=i(12),s=i(35),l=i(125),u=i(97),h=i(55),c=i(71),p=i(79),d=function(t,e){s.a.call(this),this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.setCoordinates(t,e)};r.a.inherits(d,s.a),d.prototype.clone=function(){var t=new d(null);return t.setFlatCoordinates(this.layout,this.flatCoordinates.slice()),t},d.prototype.closestPointXY=function(t,e,i,r){return r<n.a.closestSquaredDistanceXY(this.getExtent(),t,e)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(u.a.getMaxSquaredDelta(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),u.a.getClosestPoint(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,e,i,r))},d.prototype.getArea=function(){return l.a.linearRing(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},d.prototype.getCoordinates=function(){return c.a.coordinates(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},d.prototype.getSimplifiedGeometryInternal=function(t){var e=[];e.length=p.a.douglasPeucker(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0);var i=new d(null);return i.setFlatCoordinates(o.a.XY,e),i},d.prototype.getType=function(){return a.a.LINEAR_RING},d.prototype.intersectsExtent=function(t){},d.prototype.setCoordinates=function(t,e){t?(this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=h.a.coordinates(this.flatCoordinates,0,t,this.stride),this.changed()):this.setFlatCoordinates(o.a.XY,null)},d.prototype.setFlatCoordinates=function(t,e){this.setFlatCoordinatesInternal(t,e),this.changed()},e.a=d},function(t,e,i){"use strict";var r={};r.linearRing=function(t,e,i,r){for(var n=0,o=t[i-r],a=t[i-r+1];e<i;e+=r){var s=t[e],l=t[e+1];n+=a*s-o*l,o=s,a=l}return n/2},r.linearRings=function(t,e,i,n){var o,a,s=0;for(o=0,a=i.length;o<a;++o){var l=i[o];s+=r.linearRing(t,e,l,n),e=l}return s},r.linearRingss=function(t,e,i,n){var o,a,s=0;for(o=0,a=i.length;o<a;++o){var l=i[o];s+=r.linearRings(t,e,l,n),e=l[l.length-1]}return s},e.a=r},function(t,e,i){"use strict";var r=i(0),n=i(48),o=i(72),a=i(227),s=i(2),l=i(62),u=function(t){var e=t||{},i=s.a.assign({},e);delete i.style,delete i.renderBuffer,delete i.updateWhileAnimating,delete i.updateWhileInteracting,o.a.call(this,i),this.declutter_=void 0!==e.declutter&&e.declutter,this.renderBuffer_=void 0!==e.renderBuffer?e.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(e.style),this.updateWhileAnimating_=void 0!==e.updateWhileAnimating&&e.updateWhileAnimating,this.updateWhileInteracting_=void 0!==e.updateWhileInteracting&&e.updateWhileInteracting,this.renderMode_=e.renderMode||a.a.VECTOR,this.type=n.a.VECTOR};r.a.inherits(u,o.a),u.prototype.getDeclutter=function(){return this.declutter_},u.prototype.setDeclutter=function(t){this.declutter_=t},u.prototype.getRenderBuffer=function(){return this.renderBuffer_},u.prototype.getRenderOrder=function(){return this.get(u.Property_.RENDER_ORDER)},u.prototype.getSource,u.prototype.getStyle=function(){return this.style_},u.prototype.getStyleFunction=function(){return this.styleFunction_},u.prototype.getUpdateWhileAnimating=function(){return this.updateWhileAnimating_},u.prototype.getUpdateWhileInteracting=function(){return this.updateWhileInteracting_},u.prototype.setRenderOrder=function(t){this.set(u.Property_.RENDER_ORDER,t)},u.prototype.setStyle=function(t){this.style_=void 0!==t?t:l.a.defaultFunction,this.styleFunction_=null===t?void 0:l.a.createFunction(this.style_),this.changed()},u.prototype.getRenderMode=function(){return this.renderMode_},u.Property_={RENDER_ORDER:"renderOrder"},e.a=u},function(t,e,i){"use strict";var r={ADD:"add",REMOVE:"remove"};e.a=r},function(t,e,i){"use strict";var r=function(t,e,i,r){this.minX=t,this.maxX=e,this.minY=i,this.maxY=r};r.createOrUpdate=function(t,e,i,n,o){return void 0!==o?(o.minX=t,o.maxX=e,o.minY=i,o.maxY=n,o):new r(t,e,i,n)},r.prototype.contains=function(t){return this.containsXY(t[1],t[2])},r.prototype.containsTileRange=function(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY},r.prototype.containsXY=function(t,e){return this.minX<=t&&t<=this.maxX&&this.minY<=e&&e<=this.maxY},r.prototype.equals=function(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY},r.prototype.extend=function(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)},r.prototype.getHeight=function(){return this.maxY-this.minY+1},r.prototype.getSize=function(){return[this.getWidth(),this.getHeight()]},r.prototype.getWidth=function(){return this.maxX-this.minX+1},r.prototype.intersects=function(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY},e.a=r},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=d()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(c.a?c()(t,e):t.__proto__=e)}i.d(e,"a",function(){return S});var a=i(3),s=i.n(a),l=i(37),u=i.n(l),h=i(14),c=i.n(h),p=i(11),d=i.n(p),f=i(15),_=i.n(f),g=i(175),y=i(126),v=i(99),m=i(57),E=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),s()(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),T=function t(e,i,r){null===e&&(e=Function.prototype);var n=u()(e,i);if(void 0===n){var o=_()(e);return null===o?void 0:t(o,i,r)}if("value"in n)return n.value;var a=n.get;if(void 0!==a)return a.call(r)},S=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,e);var i=n(this,(e.__proto__||_()(e)).call(this,t));return i._renderMode=t.renderMode||m.e.RENDERMODE,i._style=t.style||m.e.STYLE,i._renderBuffer=t.renderBuffer||m.e.RENDERBUFFER,i._renderOrder=t.renderOrder||m.e.RENDERORDER,i._olSource=new v.a({wrapX:i._wrapX}),i._olLayer=new y.a({renderMode:i._renderMode,renderBuffer:i._renderBuffer,renderOrder:i._renderOrder,style:i._style,zIndex:i._zIndex,visible:i._visible,opacity:i._opacity,source:i._olSource}),i._setCurrObjToLayer(),i}return o(e,t),E(e,[{key:"clearAllFeature",value:function(){this._olSource.clear()}},{key:"destroy",value:function(){this._style=null,this._renderOrder=null,T(e.prototype.__proto__||_()(e.prototype),"destroy",this).call(this)}}]),e}(g.a)},function(t,e,i){"use strict";var r=i(0),n=i(131),o=i(18),a=i(234),s=i(34),l=i(13),u=i(4),h=i(1),c=function(t){o.a.call(this),this.options=t,this.id=t.id,this.insertFirst=void 0===t.insertFirst||t.insertFirst,this.stopEvent=void 0===t.stopEvent||t.stopEvent,this.element=document.createElement("DIV"),this.element.className=void 0!==t.className?t.className:"ol-overlay-container "+s.a.CLASS_SELECTABLE,this.element.style.position="absolute",this.autoPan=void 0!==t.autoPan&&t.autoPan,this.autoPanAnimation=t.autoPanAnimation||{},this.autoPanMargin=void 0!==t.autoPanMargin?t.autoPanMargin:20,this.rendered={bottom_:"",left_:"",right_:"",top_:"",visible:!0},this.mapPostrenderListenerKey=null,u.a.listen(this,o.a.getChangeEventType(c.Property.ELEMENT),this.handleElementChanged,this),u.a.listen(this,o.a.getChangeEventType(c.Property.MAP),this.handleMapChanged,this),u.a.listen(this,o.a.getChangeEventType(c.Property.OFFSET),this.handleOffsetChanged,this),u.a.listen(this,o.a.getChangeEventType(c.Property.POSITION),this.handlePositionChanged,this),u.a.listen(this,o.a.getChangeEventType(c.Property.POSITIONING),this.handlePositioningChanged,this),void 0!==t.element&&this.setElement(t.element),this.setOffset(void 0!==t.offset?t.offset:[0,0]),this.setPositioning(void 0!==t.positioning?t.positioning:a.a.TOP_LEFT),void 0!==t.position&&this.setPosition(t.position)};r.a.inherits(c,o.a),c.prototype.getElement=function(){return this.get(c.Property.ELEMENT)},c.prototype.getId=function(){return this.id},c.prototype.getMap=function(){return this.get(c.Property.MAP)},c.prototype.getOffset=function(){return this.get(c.Property.OFFSET)},c.prototype.getPosition=function(){return this.get(c.Property.POSITION)},c.prototype.getPositioning=function(){return this.get(c.Property.POSITIONING)},c.prototype.handleElementChanged=function(){l.a.removeChildren(this.element);var t=this.getElement();t&&this.element.appendChild(t)},c.prototype.handleMapChanged=function(){this.mapPostrenderListenerKey&&(l.a.removeNode(this.element),u.a.unlistenByKey(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);var t=this.getMap();if(t){this.mapPostrenderListenerKey=u.a.listen(t,n.a.POSTRENDER,this.render,this),this.updatePixelPosition();var e=this.stopEvent?t.getOverlayContainerStopEvent():t.getOverlayContainer();this.insertFirst?e.insertBefore(this.element,e.childNodes[0]||null):e.appendChild(this.element)}},c.prototype.render=function(){this.updatePixelPosition()},c.prototype.handleOffsetChanged=function(){this.updatePixelPosition()},c.prototype.handlePositionChanged=function(){this.updatePixelPosition(),this.get(c.Property.POSITION)&&this.autoPan&&this.panIntoView()},c.prototype.handlePositioningChanged=function(){this.updatePixelPosition()},c.prototype.setElement=function(t){this.set(c.Property.ELEMENT,t)},c.prototype.setMap=function(t){this.set(c.Property.MAP,t)},c.prototype.setOffset=function(t){this.set(c.Property.OFFSET,t)},c.prototype.setPosition=function(t){this.set(c.Property.POSITION,t)},c.prototype.panIntoView=function(){var t=this.getMap();if(t&&t.getTargetElement()){var e=this.getRect(t.getTargetElement(),t.getSize()),i=this.getElement(),r=this.getRect(i,[l.a.outerWidth(i),l.a.outerHeight(i)]),n=this.autoPanMargin;if(!h.a.containsExtent(e,r)){var o=r[0]-e[0],a=e[2]-r[2],s=r[1]-e[1],u=e[3]-r[3],c=[0,0];if(o<0?c[0]=o-n:a<0&&(c[0]=Math.abs(a)+n),s<0?c[1]=s-n:u<0&&(c[1]=Math.abs(u)+n),0!==c[0]||0!==c[1]){var p=t.getView().getCenter(),d=t.getPixelFromCoordinate(p),f=[d[0]+c[0],d[1]+c[1]];t.getView().animate({center:t.getCoordinateFromPixel(f),duration:this.autoPanAnimation.duration,easing:this.autoPanAnimation.easing})}}}},c.prototype.getRect=function(t,e){var i=t.getBoundingClientRect(),r=i.left+window.pageXOffset,n=i.top+window.pageYOffset;return[r,n,r+e[0],n+e[1]]},c.prototype.setPositioning=function(t){this.set(c.Property.POSITIONING,t)},c.prototype.setVisible=function(t){this.rendered.visible!==t&&(this.element.style.display=t?"":"none",this.rendered.visible=t)},c.prototype.updatePixelPosition=function(){var t=this.getMap(),e=this.getPosition();if(!t||!t.isRendered()||!e)return void this.setVisible(!1);var i=t.getPixelFromCoordinate(e),r=t.getSize();this.updateRenderedPosition(i,r)},c.prototype.updateRenderedPosition=function(t,e){var i=this.element.style,r=this.getOffset(),n=this.getPositioning();this.setVisible(!0);var o=r[0],s=r[1];if(n==a.a.BOTTOM_RIGHT||n==a.a.CENTER_RIGHT||n==a.a.TOP_RIGHT){""!==this.rendered.left_&&(this.rendered.left_=i.left="");var l=Math.round(e[0]-t[0]-o)+"px";this.rendered.right_!=l&&(this.rendered.right_=i.right=l)}else{""!==this.rendered.right_&&(this.rendered.right_=i.right=""),n!=a.a.BOTTOM_CENTER&&n!=a.a.CENTER_CENTER&&n!=a.a.TOP_CENTER||(o-=this.element.offsetWidth/2);var u=Math.round(t[0]+o)+"px";this.rendered.left_!=u&&(this.rendered.left_=i.left=u)}if(n==a.a.BOTTOM_LEFT||n==a.a.BOTTOM_CENTER||n==a.a.BOTTOM_RIGHT){""!==this.rendered.top_&&(this.rendered.top_=i.top="");var h=Math.round(e[1]-t[1]-s)+"px";this.rendered.bottom_!=h&&(this.rendered.bottom_=i.bottom=h)}else{""!==this.rendered.bottom_&&(this.rendered.bottom_=i.bottom=""),n!=a.a.CENTER_LEFT&&n!=a.a.CENTER_CENTER&&n!=a.a.CENTER_RIGHT||(s-=this.element.offsetHeight/2);var c=Math.round(t[1]+s)+"px";this.rendered.top_!=c&&(this.rendered.top_=i.top=c)}},c.prototype.getOptions=function(){return this.options},c.Property={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"},e.a=c},function(t,e,i){"use strict";var r={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend"};e.a=r},function(t,e,i){"use strict";function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.map,i=t.element,r=void 0===i?"":i,a=t.position,s=t.offset,l=void 0===s?[0,0]:s,u=t.anchor,h=void 0===u?"top-left":u,c=t.stopEvent,p=void 0===c||c,d=t.autoPan,_=void 0!==d&&d,g=t.autoPanDuration,v=void 0===g?1e3:g;if(y||(y={}),e){var m=n(e);if(y.hasOwnProperty(m))return;"string"==typeof r&&(r=o(e,r));var E=new f.a({element:r,position:a,offset:l,anchor:h,stopEvent:p,autoPan:_,autoPanDuration:v});E._setMap(e),E.getElement().style.display="block",y[m]=E}}function n(t){var e=t.getTarget();return"object"===(void 0===e?"undefined":g(e))&&(e=e.id),e}function o(t,e){var i=_.b("div","ol-popupContainer-class-radius"),r=_.b("div");return r.innerHTML=e,i.appendChild(r),t.getTargetElement&&t.getTargetElement().appendChild(i),i}function a(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.mapId,i=t.element,r=t.position,n=t.offset,o=t.anchor;if(y&&y.hasOwnProperty(e)){var a=y[e];if(i){var s=a.getElement().lastChild;"string"==typeof i?s.innerHTML=i:"object"===(void 0===i?"undefined":g(i))&&(s.innerHTML="",s.appendChild(i))}r&&a.setPosition(r),n&&a.setOffset(n),o&&a.setAnchor(o)}else console.error("tooltip has not been created")}function s(t){if(y&&y.hasOwnProperty(t)){y[t].setPosition(void 0)}else console.error("tooltip has not been created")}function l(t){if(t&&y){var e=n(t);if(!y.hasOwnProperty(e))return;y[e]._destroy(t),delete y[e]}}function u(t,e){if(y[t]){var i=y[t].getElement();i&&e&&_.j(i,e)}}i.d(e,"a",function(){return r}),i.d(e,"e",function(){return a}),i.d(e,"c",function(){return s}),i.d(e,"b",function(){return l}),i.d(e,"d",function(){return u});var h=i(87),c=i.n(h),p=i(92),d=i.n(p),f=i(233),_=i(102),g="function"==typeof d.a&&"symbol"==typeof c.a?function(t){return typeof t}:function(t){return t&&"function"==typeof d.a&&t.constructor===d.a&&t!==d.a.prototype?"symbol":typeof t},y=void 0},function(t,e,i){"use strict";var r=function(t,e){this.dispatcher=t,this.mapping_=e};r.prototype.getEvents=function(){return Object.keys(this.mapping_)},r.prototype.getHandlerForEvent=function(t){return this.mapping_[t]},e.a=r},function(t,e,i){"use strict";var r=i(243),n={};n.mapRendererPlugins_=[],n.getMapRendererPlugins=function(){return n.mapRendererPlugins_},n.layerRendererPlugins_=[],n.getLayerRendererPlugins=function(){return n.layerRendererPlugins_},n.register=function(t,e){var i;switch(t){case r.a.MAP_RENDERER:i=n.mapRendererPlugins_,i.push(e);break;case r.a.LAYER_RENDERER:i=n.layerRendererPlugins_,i.push(e);break;default:throw new Error("Unsupported plugin type: "+t)}},n.registerMultiple=function(t,e){for(var i=0,r=e.length;i<r;++i)n.register(t,e[i])},e.a=n},function(t,e,i){"use strict";var r=i(0),n=i(43),o=i(9),a=i(52),s=i(4),l=i(5),u=i(245),h=i(371),c=i(247),p=i(220),d=function(t){var e=t||{};this.anchor_=void 0!==e.anchor?e.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=void 0!==e.anchorOrigin?e.anchorOrigin:c.a.TOP_LEFT,this.anchorXUnits_=void 0!==e.anchorXUnits?e.anchorXUnits:u.a.FRACTION,this.anchorYUnits_=void 0!==e.anchorYUnits?e.anchorYUnits:u.a.FRACTION,this.crossOrigin_=void 0!==e.crossOrigin?e.crossOrigin:null;var i=void 0!==e.img?e.img:null,s=void 0!==e.imgSize?e.imgSize:null,l=e.src;o.a.assert(!(void 0!==l&&i),4),o.a.assert(!i||i&&s,5),void 0!==l&&0!==l.length||!i||(l=i.src||r.a.getUid(i).toString()),o.a.assert(void 0!==l&&l.length>0,6);var d=void 0!==e.src?n.a.IDLE:n.a.LOADED;this.color_=void 0!==e.color?a.a.asArray(e.color):null,this.iconImage_=h.a.get(i,l,s,this.crossOrigin_,d,this.color_),this.offset_=void 0!==e.offset?e.offset:[0,0],this.offsetOrigin_=void 0!==e.offsetOrigin?e.offsetOrigin:c.a.TOP_LEFT,this.origin_=null,this.size_=void 0!==e.size?e.size:null;var f=void 0!==e.opacity?e.opacity:1,_=void 0!==e.rotateWithView&&e.rotateWithView,g=void 0!==e.rotation?e.rotation:0,y=void 0!==e.scale?e.scale:1,v=void 0===e.snapToPixel||e.snapToPixel;p.a.call(this,{opacity:f,rotation:g,scale:y,snapToPixel:v,rotateWithView:_})};r.a.inherits(d,p.a),d.prototype.clone=function(){return new d({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,crossOrigin:this.crossOrigin_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,src:this.getSrc(),offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,size:null!==this.size_?this.size_.slice():void 0,opacity:this.getOpacity(),scale:this.getScale(),snapToPixel:this.getSnapToPixel(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView()})},d.prototype.getAnchor=function(){if(this.normalizedAnchor_)return this.normalizedAnchor_;var t=this.anchor_,e=this.getSize();if(this.anchorXUnits_==u.a.FRACTION||this.anchorYUnits_==u.a.FRACTION){if(!e)return null;t=this.anchor_.slice(),this.anchorXUnits_==u.a.FRACTION&&(t[0]*=e[0]),this.anchorYUnits_==u.a.FRACTION&&(t[1]*=e[1])}if(this.anchorOrigin_!=c.a.TOP_LEFT){if(!e)return null;t===this.anchor_&&(t=this.anchor_.slice()),this.anchorOrigin_!=c.a.TOP_RIGHT&&this.anchorOrigin_!=c.a.BOTTOM_RIGHT||(t[0]=-t[0]+e[0]),this.anchorOrigin_!=c.a.BOTTOM_LEFT&&this.anchorOrigin_!=c.a.BOTTOM_RIGHT||(t[1]=-t[1]+e[1])}return this.normalizedAnchor_=t,this.normalizedAnchor_},d.prototype.getColor=function(){return this.color_},d.prototype.getImage=function(t){return this.iconImage_.getImage(t)},d.prototype.getImageSize=function(){return this.iconImage_.getSize()},d.prototype.getHitDetectionImageSize=function(){return this.getImageSize()},d.prototype.getImageState=function(){return this.iconImage_.getImageState()},d.prototype.getHitDetectionImage=function(t){return this.iconImage_.getHitDetectionImage(t)},d.prototype.getOrigin=function(){if(this.origin_)return this.origin_;var t=this.offset_;if(this.offsetOrigin_!=c.a.TOP_LEFT){var e=this.getSize(),i=this.iconImage_.getSize();if(!e||!i)return null;t=t.slice(),this.offsetOrigin_!=c.a.TOP_RIGHT&&this.offsetOrigin_!=c.a.BOTTOM_RIGHT||(t[0]=i[0]-e[0]-t[0]),this.offsetOrigin_!=c.a.BOTTOM_LEFT&&this.offsetOrigin_!=c.a.BOTTOM_RIGHT||(t[1]=i[1]-e[1]-t[1])}return this.origin_=t,this.origin_},d.prototype.getSrc=function(){return this.iconImage_.getSrc()},d.prototype.getSize=function(){return this.size_?this.size_:this.iconImage_.getSize()},d.prototype.listenImageChange=function(t,e){return s.a.listen(this.iconImage_,l.a.CHANGE,t,e)},d.prototype.load=function(){this.iconImage_.load()},d.prototype.unlistenImageChange=function(t,e){s.a.unlisten(this.iconImage_,l.a.CHANGE,t,e)},e.a=d},function(t,e,i){"use strict";var r=i(0),n=i(48),o=i(72),a=i(376),s=i(2),l=function(t){var e=t||{},i=s.a.assign({},e);delete i.preload,delete i.useInterimTilesOnError,o.a.call(this,i),this.setPreload(void 0!==e.preload?e.preload:0),this.setUseInterimTilesOnError(void 0===e.useInterimTilesOnError||e.useInterimTilesOnError),this.type=n.a.TILE};r.a.inherits(l,o.a),l.prototype.getPreload=function(){return this.get(a.a.PRELOAD)},l.prototype.getSource,l.prototype.setPreload=function(t){this.set(a.a.PRELOAD,t)},l.prototype.getUseInterimTilesOnError=function(){return this.get(a.a.USE_INTERIM_TILES_ON_ERROR)},l.prototype.setUseInterimTilesOnError=function(t){this.set(a.a.USE_INTERIM_TILES_ON_ERROR,t)},e.a=l},function(t,e,i){"use strict";var r=i(13),n=i(1),o=i(7),a=i(8),s={};s.calculateSourceResolution=function(t,e,i,r){var o=a.a.transform(i,e,t),s=a.a.getPointResolution(e,r,i),l=e.getMetersPerUnit();void 0!==l&&(s*=l);var u=t.getMetersPerUnit();void 0!==u&&(s/=u);var h=t.getExtent();if(!h||n.a.containsCoordinate(h,o)){var c=a.a.getPointResolution(t,s,o)/s;isFinite(c)&&c>0&&(s/=c)}return s},s.enlargeClipPoint_=function(t,e,i,r){var n=i-t,o=r-e,a=Math.sqrt(n*n+o*o);return[Math.round(i+n/a),Math.round(r+o/a)]},s.render=function(t,e,i,a,l,u,h,c,p,d,f){var _=r.a.createCanvasContext2D(Math.round(i*t),Math.round(i*e));if(0===p.length)return _.canvas;_.scale(i,i);var g=n.a.createEmpty();p.forEach(function(t,e,i){n.a.extend(g,t.extent)});var y=n.a.getWidth(g),v=n.a.getHeight(g),m=r.a.createCanvasContext2D(Math.round(i*y/a),Math.round(i*v/a)),E=i/a;p.forEach(function(t,e,i){var r=t.extent[0]-g[0],o=-(t.extent[3]-g[3]),a=n.a.getWidth(t.extent),s=n.a.getHeight(t.extent);m.drawImage(t.image,d,d,t.image.width-2*d,t.image.height-2*d,r*E,o*E,a*E,s*E)});var T=n.a.getTopLeft(h);return c.getTriangles().forEach(function(t,e,r){var n=t.source,l=t.target,h=n[0][0],c=n[0][1],p=n[1][0],d=n[1][1],f=n[2][0],y=n[2][1],v=(l[0][0]-T[0])/u,E=-(l[0][1]-T[1])/u,S=(l[1][0]-T[0])/u,R=-(l[1][1]-T[1])/u,I=(l[2][0]-T[0])/u,x=-(l[2][1]-T[1])/u,C=h,O=c;h=0,c=0,p-=C,d-=O,f-=C,y-=O;var P=[[p,d,0,0,S-v],[f,y,0,0,I-v],[0,0,p,d,R-E],[0,0,f,y,x-E]],L=o.a.solveLinearSystem(P);if(L){_.save(),_.beginPath();var A=(v+S+I)/3,w=(E+R+x)/3,M=s.enlargeClipPoint_(A,w,v,E),F=s.enlargeClipPoint_(A,w,S,R),N=s.enlargeClipPoint_(A,w,I,x);_.moveTo(F[0],F[1]),_.lineTo(M[0],M[1]),_.lineTo(N[0],N[1]),_.clip(),_.transform(L[0],L[2],L[1],L[3],v,E),_.translate(g[0]-C,g[3]-O),_.scale(a/i,-a/i),_.drawImage(m.canvas,0,0),_.restore()}}),f&&(_.save(),_.strokeStyle="black",_.lineWidth=1,c.getTriangles().forEach(function(t,e,i){var r=t.target,n=(r[0][0]-T[0])/u,o=-(r[0][1]-T[1])/u,a=(r[1][0]-T[0])/u,s=-(r[1][1]-T[1])/u,l=(r[2][0]-T[0])/u,h=-(r[2][1]-T[1])/u;_.beginPath(),_.moveTo(a,s),_.lineTo(n,o),_.lineTo(l,h),_.closePath(),_.stroke()}),_.restore()),_.canvas},e.a=s},function(t,e,i){"use strict";var r={};r.appendParams=function(t,e){var i=[];Object.keys(e).forEach(function(t){null!==e[t]&&void 0!==e[t]&&i.push(t+"="+encodeURIComponent(e[t]))});var r=i.join("&");return t=t.replace(/[?&]$/,""),(t=-1===t.indexOf("?")?t+"?":t+"&")+r},e.a=r},function(t,e,i){"use strict";var r=i(0),n=i(103),o=i(101),a=function(t){var e=t||{},i=void 0!==e.projection?e.projection:"EPSG:3857",r=void 0!==e.tileGrid?e.tileGrid:o.a.createXYZ({extent:o.a.extentFromProjection(i),maxZoom:e.maxZoom,minZoom:e.minZoom,tileSize:e.tileSize});n.a.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,logo:e.logo,opaque:e.opaque,projection:i,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileGrid:r,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:void 0===e.wrapX||e.wrapX,transition:e.transition})};r.a.inherits(a,n.a),e.a=a},function(t,e,i){"use strict";function r(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=i.method,n=void 0===r?"get":r,a=i.data,s=i.headers,l=i.overrideMimeType;return new o.a(function(i,r){var o=new XMLHttpRequest;if(l&&o.overrideMimeType&&o.overrideMimeType(l),o.open(n,t,!0),s)for(var u in s)s.hasOwnProperty(u)&&o.setRequestHeader(u,s[u]);e&&(o.responseType=e);var h=!1;"string"==typeof t&&(h=0===t.indexOf("file://")),o.onload=function(){if((o.status<200||o.status>=300)&&(!h||0!==o.status))return void r("XMLHttpRequest fail "+t+".");var n=o.response,a=o.responseType;if(!n||e&&a!==e)if("json"===e&&"string"==typeof n)try{i(JSON.parse(n))}catch(t){r(t)}else(""===a||"document"===a)&&o.responseXML&&o.responseXML.hasChildNodes()?i(o.responseXML):""!==a&&"text"!==a||!o.responseText?r("Invalid XMLHttpRequest response type."):i(o.responseText);else i(n)},o.onerror=function(t){r(t)},o.send(a)})}Object.defineProperty(e,"__esModule",{value:!0}),e.loadWithXhr=r;var n=i(141),o=i.n(n)},function(t,e,i){t.exports={default:i(391),__esModule:!0}},function(t,e,i){"use strict";i.d(e,"d",function(){return r}),i.d(e,"a",function(){return n}),i.d(e,"c",function(){return o}),i.d(e,"b",function(){return a});var r={dark:"dark_style.json",light:"light_style.json"},n={dark:{mapbg:"#111924",regionStyle:{fillColor:"#00fcff",strokeColor:"#7c7c7c",strokeWidth:2},popupStyle:{boxFillColor:"#fffeef",boxBorderColor:"#7e7e7e",boxBorder:"1px",textColor:"#555555",textFontSize:"14px",textFontFamily:""},poiStyle:{fillColor:"#B5DBFF",textHeightColor:"#B5DBFF",defOpacity:1,highOpacity:.5},wfsStyle:{defaultStyle:{fillColor:"#3d454c",strokeColor:"#447ea5",strokeWidth:1,textFillColor:"#ffffff",textStrokeColor:"#3a71c2",textStrokeWidth:0,textFont:"bold 16px "}}},light:{mapbg:"#fcf9f2",regionStyle:{fillColor:"#00fcff",strokeColor:"#e68e00",strokeWidth:2},popupStyle:{boxFillColor:"#fffeef",boxBorderColor:"#7e7e7e",boxBorder:"1px",textColor:"#555555",textFontSize:"14px",textFontFamily:""},poiStyle:{fillColor:"#B5DBFF",textHeightColor:"#B5DBFF",defOpacity:1,highOpacity:.5}}},o={indoorZoomMax:28,indoorZoomMin:15,subMinShowLevel:20},a={flZIndex:1,regionZIndex:3,subZIndex:5,poiZIndex:7}},function(t,e,i){"use strict";i.d(e,"b",function(){return r}),i.d(e,"a",function(){return n});var r={MPoiInfo:"m_poi_info",FlInfo:"fl_info",RegionInfo:"region_info",RegionSub:"region_sub",PoiInfo:"poi_info"},n={BdId:"bd_id",FlId:"fl_id"}},function(t,e,i){"use strict";var r=i(0),n=i(4),o=i(5),a=i(1),s=i(70),l=i(12),u=i(2),h=function(t){s.a.call(this),this.geometries_=t||null,this.listenGeometriesChange_()};r.a.inherits(h,s.a),h.cloneGeometries_=function(t){var e,i,r=[];for(e=0,i=t.length;e<i;++e)r.push(t[e].clone());return r},h.prototype.unlistenGeometriesChange_=function(){var t,e;if(this.geometries_)for(t=0,e=this.geometries_.length;t<e;++t)n.a.unlisten(this.geometries_[t],o.a.CHANGE,this.changed,this)},h.prototype.listenGeometriesChange_=function(){var t,e;if(this.geometries_)for(t=0,e=this.geometries_.length;t<e;++t)n.a.listen(this.geometries_[t],o.a.CHANGE,this.changed,this)},h.prototype.clone=function(){var t=new h(null);return t.setGeometries(this.geometries_),t},h.prototype.closestPointXY=function(t,e,i,r){if(r<a.a.closestSquaredDistanceXY(this.getExtent(),t,e))return r;var n,o,s=this.geometries_;for(n=0,o=s.length;n<o;++n)r=s[n].closestPointXY(t,e,i,r);return r},h.prototype.containsXY=function(t,e){var i,r,n=this.geometries_;for(i=0,r=n.length;i<r;++i)if(n[i].containsXY(t,e))return!0;return!1},h.prototype.computeExtent=function(t){a.a.createOrUpdateEmpty(t);for(var e=this.geometries_,i=0,r=e.length;i<r;++i)a.a.extend(t,e[i].getExtent());return t},h.prototype.getGeometries=function(){return h.cloneGeometries_(this.geometries_)},h.prototype.getGeometriesArray=function(){return this.geometries_},h.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!=this.getRevision()&&(u.a.clear(this.simplifiedGeometryCache),this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<this.simplifiedGeometryMaxMinSquaredTolerance)return this;var e=t.toString();if(this.simplifiedGeometryCache.hasOwnProperty(e))return this.simplifiedGeometryCache[e];var i,r,n=[],o=this.geometries_,a=!1;for(i=0,r=o.length;i<r;++i){var s=o[i],l=s.getSimplifiedGeometry(t);n.push(l),l!==s&&(a=!0)}if(a){var c=new h(null);return c.setGeometriesArray(n),this.simplifiedGeometryCache[e]=c,c}return this.simplifiedGeometryMaxMinSquaredTolerance=t,this},h.prototype.getType=function(){return l.a.GEOMETRY_COLLECTION},h.prototype.intersectsExtent=function(t){var e,i,r=this.geometries_;for(e=0,i=r.length;e<i;++e)if(r[e].intersectsExtent(t))return!0;return!1},h.prototype.isEmpty=function(){return 0===this.geometries_.length},h.prototype.rotate=function(t,e){for(var i=this.geometries_,r=0,n=i.length;r<n;++r)i[r].rotate(t,e);this.changed()},h.prototype.scale=function(t,e,i){var r=i;r||(r=a.a.getCenter(this.getExtent()));for(var n=this.geometries_,o=0,s=n.length;o<s;++o)n[o].scale(t,e,r);this.changed()},h.prototype.setGeometries=function(t){this.setGeometriesArray(h.cloneGeometries_(t))},h.prototype.setGeometriesArray=function(t){this.unlistenGeometriesChange_(),this.geometries_=t,this.listenGeometriesChange_(),this.changed()},h.prototype.applyTransform=function(t){var e,i,r=this.geometries_;for(e=0,i=r.length;e<i;++e)r[e].applyTransform(t);this.changed()},h.prototype.translate=function(t,e){var i,r,n=this.geometries_;for(i=0,r=n.length;i<r;++i)n[i].translate(t,e);this.changed()},h.prototype.disposeInternal=function(){this.unlistenGeometriesChange_(),s.a.prototype.disposeInternal.call(this)},e.a=h},function(t,e,i){"use strict";var r=i(64),n=i(122),o={};o.NAMESPACE_URI="http://www.w3.org/2001/XMLSchema",o.readBoolean=function(t){var e=r.a.getAllTextContent(t,!1);return o.readBooleanString(e)},o.readBooleanString=function(t){var e=/^\s*(true|1)|(false|0)\s*$/.exec(t);return e?void 0!==e[1]||!1:void 0},o.readDateTime=function(t){var e=r.a.getAllTextContent(t,!1),i=Date.parse(e);return isNaN(i)?void 0:i/1e3},o.readDecimal=function(t){var e=r.a.getAllTextContent(t,!1);return o.readDecimalString(e)},o.readDecimalString=function(t){var e=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(t);return e?parseFloat(e[1]):void 0},o.readNonNegativeInteger=function(t){var e=r.a.getAllTextContent(t,!1);return o.readNonNegativeIntegerString(e)},o.readNonNegativeIntegerString=function(t){var e=/^\s*(\d+)\s*$/.exec(t);return e?parseInt(e[1],10):void 0},o.readString=function(t){return r.a.getAllTextContent(t,!1).trim()},o.writeBooleanTextNode=function(t,e){o.writeStringTextNode(t,e?"1":"0")},o.writeCDATASection=function(t,e){t.appendChild(r.a.DOCUMENT.createCDATASection(e))},o.writeDateTimeTextNode=function(t,e){var i=new Date(1e3*e),o=i.getUTCFullYear()+"-"+n.a.padNumber(i.getUTCMonth()+1,2)+"-"+n.a.padNumber(i.getUTCDate(),2)+"T"+n.a.padNumber(i.getUTCHours(),2)+":"+n.a.padNumber(i.getUTCMinutes(),2)+":"+n.a.padNumber(i.getUTCSeconds(),2)+"Z";t.appendChild(r.a.DOCUMENT.createTextNode(o))},o.writeDecimalTextNode=function(t,e){var i=e.toPrecision();t.appendChild(r.a.DOCUMENT.createTextNode(i))},o.writeNonNegativeIntegerTextNode=function(t,e){var i=e.toString();t.appendChild(r.a.DOCUMENT.createTextNode(i))},o.writeStringTextNode=function(t,e){t.appendChild(r.a.DOCUMENT.createTextNode(e))},e.a=o},function(t,e,i){"use strict";var r=i(0),n=i(25),o=function(t,e,i,r,o){n.a.call(this,t),this.vectorContext=e,this.frameState=i,this.context=r,this.glContext=o};r.a.inherits(o,n.a),e.a=o},function(t,e,i){"use strict";var r=function(){};r.prototype.drawCustom=function(t,e,i){},r.prototype.drawGeometry=function(t){},r.prototype.setStyle=function(t){},r.prototype.drawCircle=function(t,e){},r.prototype.drawFeature=function(t,e){},r.prototype.drawGeometryCollection=function(t,e){},r.prototype.drawLineString=function(t,e){},r.prototype.drawMultiLineString=function(t,e){},r.prototype.drawMultiPoint=function(t,e){},r.prototype.drawMultiPolygon=function(t,e){},r.prototype.drawPoint=function(t,e){},r.prototype.drawPolygon=function(t,e){},r.prototype.drawText=function(t,e){},r.prototype.setFillStrokeStyle=function(t,e){},r.prototype.setImageStyle=function(t,e){},r.prototype.setTextStyle=function(t,e){},e.a=r},function(t,e,i){"use strict";var r=i(0),n=i(1),o=i(147),a=i(16),s=i(293),l=i(21),u=function(t,e){o.a.call(this),this.tolerance=t,this.maxExtent=e,this.origin=n.a.getCenter(e),this.projectionMatrix_=a.a.create(),this.offsetRotateMatrix_=a.a.create(),this.offsetScaleMatrix_=a.a.create(),this.tmpMat4_=s.a.create(),this.indices=[],this.indicesBuffer=null,this.startIndices=[],this.startIndicesFeature=[],this.vertices=[],this.verticesBuffer=null,this.lineStringReplay=void 0};r.a.inherits(u,o.a),u.prototype.getDeleteResourcesFunction=function(t){},u.prototype.finish=function(t){},u.prototype.setUpProgram=function(t,e,i,r){},u.prototype.shutDownProgram=function(t,e){},u.prototype.drawReplay=function(t,e,i,r){},u.prototype.drawHitDetectionReplayOneByOne=function(t,e,i,r,n){},u.prototype.drawHitDetectionReplay=function(t,e,i,r,n,o){return n?this.drawHitDetectionReplayOneByOne(t,e,i,r,o):this.drawHitDetectionReplayAll(t,e,i,r)},u.prototype.drawHitDetectionReplayAll=function(t,e,i,r){t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),this.drawReplay(t,e,i,!0);var n=r(null);return n||void 0},u.prototype.replay=function(t,e,i,r,n,o,u,h,c,p,d){var f,_,g,y,v,m,E,T,S=t.getGL();this.lineStringReplay&&(f=S.isEnabled(S.STENCIL_TEST),_=S.getParameter(S.STENCIL_FUNC),g=S.getParameter(S.STENCIL_VALUE_MASK),y=S.getParameter(S.STENCIL_REF),v=S.getParameter(S.STENCIL_WRITEMASK),m=S.getParameter(S.STENCIL_FAIL),E=S.getParameter(S.STENCIL_PASS_DEPTH_PASS),T=S.getParameter(S.STENCIL_PASS_DEPTH_FAIL),S.enable(S.STENCIL_TEST),S.clear(S.STENCIL_BUFFER_BIT),S.stencilMask(255),S.stencilFunc(S.ALWAYS,1,255),S.stencilOp(S.KEEP,S.KEEP,S.REPLACE),this.lineStringReplay.replay(t,e,i,r,n,o,u,h,c,p,d),S.stencilMask(0),S.stencilFunc(S.NOTEQUAL,1,255)),t.bindBuffer(l.a.ARRAY_BUFFER,this.verticesBuffer),t.bindBuffer(l.a.ELEMENT_ARRAY_BUFFER,this.indicesBuffer);var R=this.setUpProgram(S,t,n,o),I=a.a.reset(this.projectionMatrix_);a.a.scale(I,2/(i*n[0]),2/(i*n[1])),a.a.rotate(I,-r),a.a.translate(I,-(e[0]-this.origin[0]),-(e[1]-this.origin[1]));var x=a.a.reset(this.offsetScaleMatrix_);a.a.scale(x,2/n[0],2/n[1]);var C=a.a.reset(this.offsetRotateMatrix_);0!==r&&a.a.rotate(C,-r),S.uniformMatrix4fv(R.u_projectionMatrix,!1,s.a.fromTransform(this.tmpMat4_,I)),S.uniformMatrix4fv(R.u_offsetScaleMatrix,!1,s.a.fromTransform(this.tmpMat4_,x)),S.uniformMatrix4fv(R.u_offsetRotateMatrix,!1,s.a.fromTransform(this.tmpMat4_,C)),S.uniform1f(R.u_opacity,u);var O;return void 0===c?this.drawReplay(S,t,h,!1):O=this.drawHitDetectionReplay(S,t,h,c,p,d),this.shutDownProgram(S,R),this.lineStringReplay&&(f||S.disable(S.STENCIL_TEST),S.clear(S.STENCIL_BUFFER_BIT),S.stencilFunc(_,y,g),S.stencilMask(v),S.stencilOp(m,T,E)),O},u.prototype.drawElements=function(t,e,i,r){var n=e.hasOESElementIndexUint?l.a.UNSIGNED_INT:l.a.UNSIGNED_SHORT,o=e.hasOESElementIndexUint?4:2,a=r-i,s=i*o;t.drawElements(l.a.TRIANGLES,a,n,s)},e.a=u},function(t,e,i){"use strict";var r={};r.defaultFont="10px sans-serif",r.defaultFillStyle=[0,0,0,1],r.defaultLineCap="round",r.defaultLineDash=[],r.defaultLineDashOffset=0,r.defaultLineJoin="round",r.defaultMiterLimit=10,r.defaultStrokeStyle=[0,0,0,1],r.defaultTextAlign=.5,r.defaultTextBaseline=.5,r.defaultLineWidth=1,r.triangleIsCounterClockwise=function(t,e,i,n,o,a){var s=(i-t)*(a-e)-(o-t)*(n-e);return s<=r.EPSILON&&s>=-r.EPSILON?void 0:s>0},r.EPSILON=Number.EPSILON||2.220446049250313e-16,e.a=r},function(t,e,i){"use strict";var r=i(0),n=i(119),o=i(6),a=i(4),s=i(2),l=i(21),u=i(295),h=function(t,e){this.canvas_=t,this.gl_=e,this.bufferCache_={},this.shaderCache_={},this.programCache_={},this.currentProgram_=null,this.hitDetectionFramebuffer_=null,this.hitDetectionTexture_=null,this.hitDetectionRenderbuffer_=null,this.hasOESElementIndexUint=o.a.includes(r.a.WEBGL_EXTENSIONS,"OES_element_index_uint"),this.hasOESElementIndexUint&&e.getExtension("OES_element_index_uint"),a.a.listen(this.canvas_,u.a.LOST,this.handleWebGLContextLost,this),a.a.listen(this.canvas_,u.a.RESTORED,this.handleWebGLContextRestored,this)};r.a.inherits(h,n.a),h.prototype.bindBuffer=function(t,e){var i=this.getGL(),n=e.getArray(),o=String(r.a.getUid(e));if(o in this.bufferCache_){var a=this.bufferCache_[o];i.bindBuffer(t,a.buffer)}else{var s=i.createBuffer();i.bindBuffer(t,s);var u;t==l.a.ARRAY_BUFFER?u=new Float32Array(n):t==l.a.ELEMENT_ARRAY_BUFFER&&(u=this.hasOESElementIndexUint?new Uint32Array(n):new Uint16Array(n)),i.bufferData(t,u,e.getUsage()),this.bufferCache_[o]={buf:e,buffer:s}}},h.prototype.deleteBuffer=function(t){var e=this.getGL(),i=String(r.a.getUid(t)),n=this.bufferCache_[i];e.isContextLost()||e.deleteBuffer(n.buffer),delete this.bufferCache_[i]},h.prototype.disposeInternal=function(){a.a.unlistenAll(this.canvas_);var t=this.getGL();if(!t.isContextLost()){var e;for(e in this.bufferCache_)t.deleteBuffer(this.bufferCache_[e].buffer);for(e in this.programCache_)t.deleteProgram(this.programCache_[e]);for(e in this.shaderCache_)t.deleteShader(this.shaderCache_[e]);t.deleteFramebuffer(this.hitDetectionFramebuffer_),t.deleteRenderbuffer(this.hitDetectionRenderbuffer_),t.deleteTexture(this.hitDetectionTexture_)}},h.prototype.getCanvas=function(){return this.canvas_},h.prototype.getGL=function(){return this.gl_},h.prototype.getHitDetectionFramebuffer=function(){return this.hitDetectionFramebuffer_||this.initHitDetectionFramebuffer_(),this.hitDetectionFramebuffer_},h.prototype.getShader=function(t){var e=String(r.a.getUid(t));if(e in this.shaderCache_)return this.shaderCache_[e];var i=this.getGL(),n=i.createShader(t.getType());return i.shaderSource(n,t.getSource()),i.compileShader(n),this.shaderCache_[e]=n,n},h.prototype.getProgram=function(t,e){var i=r.a.getUid(t)+"/"+r.a.getUid(e);if(i in this.programCache_)return this.programCache_[i];var n=this.getGL(),o=n.createProgram();return n.attachShader(o,this.getShader(t)),n.attachShader(o,this.getShader(e)),n.linkProgram(o),this.programCache_[i]=o,o},h.prototype.handleWebGLContextLost=function(){s.a.clear(this.bufferCache_),s.a.clear(this.shaderCache_),s.a.clear(this.programCache_),this.currentProgram_=null,this.hitDetectionFramebuffer_=null,this.hitDetectionTexture_=null,this.hitDetectionRenderbuffer_=null},h.prototype.handleWebGLContextRestored=function(){},h.prototype.initHitDetectionFramebuffer_=function(){var t=this.gl_,e=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,e);var i=h.createEmptyTexture(t,1,1),r=t.createRenderbuffer();t.bindRenderbuffer(t.RENDERBUFFER,r),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_COMPONENT16,1,1),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,i,0),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,r),t.bindTexture(t.TEXTURE_2D,null),t.bindRenderbuffer(t.RENDERBUFFER,null),t.bindFramebuffer(t.FRAMEBUFFER,null),this.hitDetectionFramebuffer_=e,this.hitDetectionTexture_=i,this.hitDetectionRenderbuffer_=r},h.prototype.useProgram=function(t){return t!=this.currentProgram_&&(this.getGL().useProgram(t),this.currentProgram_=t,!0)},h.createTexture_=function(t,e,i){var r=t.createTexture();return t.bindTexture(t.TEXTURE_2D,r),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),void 0!==e&&t.texParameteri(l.a.TEXTURE_2D,l.a.TEXTURE_WRAP_S,e),void 0!==i&&t.texParameteri(l.a.TEXTURE_2D,l.a.TEXTURE_WRAP_T,i),r},h.createEmptyTexture=function(t,e,i,r,n){var o=h.createTexture_(t,r,n);return t.texImage2D(t.TEXTURE_2D,0,t.RGBA,e,i,0,t.RGBA,t.UNSIGNED_BYTE,null),o},h.createTexture=function(t,e,i,r){var n=h.createTexture_(t,i,r);return t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e),n},e.a=h},function(t,e,i){"use strict";var r=i(303)(!0);i(199)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,i=this._i;return i>=e.length?{value:void 0,done:!0}:(t=r(e,i),this._i+=t.length,{value:t,done:!1})})},function(t,e){var i=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:i)(t)}},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,i){var r=i(59),n=i(23).document,o=r(n)&&r(n.createElement);t.exports=function(t){return o?n.createElement(t):{}}},function(t,e,i){var r=i(59);t.exports=function(t,e){if(!r(t))return t;var i,n;if(e&&"function"==typeof(i=t.toString)&&!r(n=i.call(t)))return n;if("function"==typeof(i=t.valueOf)&&!r(n=i.call(t)))return n;if(!e&&"function"==typeof(i=t.toString)&&!r(n=i.call(t)))return n;throw TypeError("Can't convert object to primitive value")}},function(t,e,i){var r=i(41),n=i(305),o=i(159),a=i(157)("IE_PROTO"),s=function(){},l=function(){var t,e=i(154)("iframe"),r=o.length;for(e.style.display="none",i(205).appendChild(e),e.src="javascript:",t=e.contentWindow.document,t.open(),t.write("<script>document.F=Object<\/script>"),t.close(),l=t.F;r--;)delete l.prototype[o[r]];return l()};t.exports=Object.create||function(t,e){var i;return null!==t?(s.prototype=r(t),i=new s,s.prototype=null,i[a]=t):i=l(),void 0===e?i:n(i,e)}},function(t,e,i){var r=i(158)("keys"),n=i(115);t.exports=function(t){return r[t]||(r[t]=n(t))}},function(t,e,i){var r=i(23),n=r["__core-js_shared__"]||(r["__core-js_shared__"]={});t.exports=function(t){return n[t]||(n[t]={})}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e,i){i(308);for(var r=i(23),n=i(65),o=i(89),a=i(24)("toStringTag"),s="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),l=0;l<s.length;l++){var u=s[l],h=r[u],c=h&&h.prototype;c&&!c[a]&&n(c,a,u),o[u]=o.Array}},function(t,e,i){e.f=i(24)},function(t,e,i){var r=i(23),n=i(17),o=i(112),a=i(161),s=i(58).f;t.exports=function(t){var e=n.Symbol||(n.Symbol=o?{}:r.Symbol||{});"_"==t.charAt(0)||t in e||s(e,t,{value:a.f(t)})}},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,i){var r=i(118),n=i(114),o=i(67),a=i(155),s=i(66),l=i(200),u=Object.getOwnPropertyDescriptor;e.f=i(60)?u:function(t,e){if(t=o(t),e=a(e,!0),l)try{return u(t,e)}catch(t){}if(s(t,e))return n(!r.f.call(t,e),t[e])}},function(t,e,i){"use strict";var r=i(0),n=i(4),o=i(69),a=i(5),s=function(){o.a.call(this),this.revision_=0};r.a.inherits(s,o.a),s.unByKey=function(t){if(Array.isArray(t))for(var e=0,i=t.length;e<i;++e)n.a.unlistenByKey(t[e]);else n.a.unlistenByKey(t)},s.prototype.changed=function(){++this.revision_,this.dispatchEvent(a.a.CHANGE)},s.prototype.dispatchEvent,s.prototype.getRevision=function(){return this.revision_},s.prototype.on=function(t,e,i){if(Array.isArray(t)){for(var r=t.length,o=new Array(r),a=0;a<r;++a)o[a]=n.a.listen(this,t[a],e,i);return o}return n.a.listen(this,t,e,i)},s.prototype.once=function(t,e,i){if(Array.isArray(t)){for(var r=t.length,o=new Array(r),a=0;a<r;++a)o[a]=n.a.listenOnce(this,t[a],e,i);return o}return n.a.listenOnce(this,t,e,i)},s.prototype.un=function(t,e,i){if(Array.isArray(t))for(var r=0,o=t.length;r<o;++r)n.a.unlisten(this,t[r],e,i);else n.a.unlisten(this,t,e,i)},e.a=s},function(t,e,i){t.exports={default:i(326),__esModule:!0}},function(t,e,i){"use strict";var r=i(7),n=i(12),o=function(t){this.radius=t};o.prototype.geodesicArea=function(t){return o.getArea_(t,this.radius)},o.prototype.haversineDistance=function(t,e){return o.getDistance_(t,e,this.radius)},o.prototype.offset=function(t,e,i){var n=r.a.toRadians(t[1]),o=r.a.toRadians(t[0]),a=e/this.radius,s=Math.asin(Math.sin(n)*Math.cos(a)+Math.cos(n)*Math.sin(a)*Math.cos(i)),l=o+Math.atan2(Math.sin(i)*Math.sin(a)*Math.cos(n),Math.cos(a)-Math.sin(n)*Math.sin(s));return[r.a.toDegrees(l),r.a.toDegrees(s)]},o.DEFAULT_RADIUS=6371008.8,o.getLength=function(t,e){var i=e||{},r=i.radius||o.DEFAULT_RADIUS,a=i.projection||"EPSG:3857";t=t.clone().transform(a,"EPSG:4326");var s,l,u,h,c,p,d=t.getType(),f=0;switch(d){case n.a.POINT:case n.a.MULTI_POINT:break;case n.a.LINE_STRING:case n.a.LINEAR_RING:s=t.getCoordinates(),f=o.getLength_(s,r);break;case n.a.MULTI_LINE_STRING:case n.a.POLYGON:for(s=t.getCoordinates(),u=0,h=s.length;u<h;++u)f+=o.getLength_(s[u],r);break;case n.a.MULTI_POLYGON:for(s=t.getCoordinates(),u=0,h=s.length;u<h;++u)for(l=s[u],c=0,p=l.length;c<p;++c)f+=o.getLength_(l[c],r);break;case n.a.GEOMETRY_COLLECTION:var _=t.getGeometries();for(u=0,h=_.length;u<h;++u)f+=o.getLength(_[u],e);break;default:throw new Error("Unsupported geometry type: "+d)}return f},o.getLength_=function(t,e){for(var i=0,r=0,n=t.length;r<n-1;++r)i+=o.getDistance_(t[r],t[r+1],e);return i},o.getDistance_=function(t,e,i){var n=r.a.toRadians(t[1]),o=r.a.toRadians(e[1]),a=(o-n)/2,s=r.a.toRadians(e[0]-t[0])/2,l=Math.sin(a)*Math.sin(a)+Math.sin(s)*Math.sin(s)*Math.cos(n)*Math.cos(o);return 2*i*Math.atan2(Math.sqrt(l),Math.sqrt(1-l))},o.getArea=function(t,e){var i=e||{},r=i.radius||o.DEFAULT_RADIUS,a=i.projection||"EPSG:3857";t=t.clone().transform(a,"EPSG:4326");var s,l,u,h,c,p,d=t.getType(),f=0;switch(d){case n.a.POINT:case n.a.MULTI_POINT:case n.a.LINE_STRING:case n.a.MULTI_LINE_STRING:case n.a.LINEAR_RING:break;case n.a.POLYGON:for(s=t.getCoordinates(),f=Math.abs(o.getArea_(s[0],r)),u=1,h=s.length;u<h;++u)f-=Math.abs(o.getArea_(s[u],r));break;case n.a.MULTI_POLYGON:for(s=t.getCoordinates(),u=0,h=s.length;u<h;++u)for(l=s[u],f+=Math.abs(o.getArea_(l[0],r)),c=1,p=l.length;c<p;++c)f-=Math.abs(o.getArea_(l[c],r));break;case n.a.GEOMETRY_COLLECTION:var _=t.getGeometries();for(u=0,h=_.length;u<h;++u)f+=o.getArea(_[u],e);break;default:throw new Error("Unsupported geometry type: "+d)}return f},o.getArea_=function(t,e){for(var i=0,n=t.length,o=t[n-1][0],a=t[n-1][1],s=0;s<n;s++){var l=t[s][0],u=t[s][1];i+=r.a.toRadians(l-o)*(2+Math.sin(r.a.toRadians(a))+Math.sin(r.a.toRadians(u))),o=l,a=u}return i*e*e/2},e.a=o},function(t,e,i){"use strict";var r=i(0),n=i(219),o=function(t){var e=t||{};n.a.call(this,{points:1/0,fill:e.fill,radius:e.radius,snapToPixel:e.snapToPixel,stroke:e.stroke,atlasManager:e.atlasManager})};r.a.inherits(o,n.a),o.prototype.clone=function(){var t=new o({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),snapToPixel:this.getSnapToPixel(),atlasManager:this.atlasManager_});return t.setOpacity(this.getOpacity()),t.setScale(this.getScale()),t},o.prototype.setRadius=function(t){this.radius_=t,this.render_(this.atlasManager_)},e.a=o},function(t,e,i){"use strict";var r=i(6),n=i(7),o={};o.lineString=function(t,e,i,o,a,s){var l=NaN,u=NaN,h=(i-e)/o;if(1===h)l=t[e],u=t[e+1];else if(2==h)l=(1-a)*t[e]+a*t[e+o],u=(1-a)*t[e+1]+a*t[e+o+1];else if(0!==h){var c,p=t[e],d=t[e+1],f=0,_=[0];for(c=e+o;c<i;c+=o){var g=t[c],y=t[c+1];f+=Math.sqrt((g-p)*(g-p)+(y-d)*(y-d)),_.push(f),p=g,d=y}var v=a*f,m=r.a.binarySearch(_,v);if(m<0){var E=(v-_[-m-2])/(_[-m-1]-_[-m-2]),T=e+(-m-2)*o;l=n.a.lerp(t[T],t[T+o],E),u=n.a.lerp(t[T+1],t[T+o+1],E)}else l=t[e+m*o],u=t[e+m*o+1]}return s?(s[0]=l,s[1]=u,s):[l,u]},o.lineStringCoordinateAtM=function(t,e,i,r,o,a){if(i==e)return null;var s;if(o<t[e+r-1])return a?(s=t.slice(e,e+r),s[r-1]=o,s):null;if(t[i-1]<o)return a?(s=t.slice(i-r,i),s[r-1]=o,s):null;if(o==t[e+r-1])return t.slice(e,e+r);for(var l=e/r,u=i/r;l<u;){var h=l+u>>1;o<t[(h+1)*r-1]?u=h:l=h+1}var c=t[l*r-1];if(o==c)return t.slice((l-1)*r,(l-1)*r+r);var p=t[(l+1)*r-1],d=(o-c)/(p-c);s=[];var f;for(f=0;f<r-1;++f)s.push(n.a.lerp(t[(l-1)*r+f],t[l*r+f],d));return s.push(o),s},o.lineStringsCoordinateAtM=function(t,e,i,r,n,a,s){if(s)return o.lineStringCoordinateAtM(t,e,i[i.length-1],r,n,a);var l;if(n<t[r-1])return a?(l=t.slice(0,r),l[r-1]=n,l):null;if(t[t.length-1]<n)return a?(l=t.slice(t.length-r),l[r-1]=n,l):null;var u,h;for(u=0,h=i.length;u<h;++u){var c=i[u];if(e!=c){if(n<t[e+r-1])return null;if(n<=t[c-1])return o.lineStringCoordinateAtM(t,e,c,r,n,!1);e=c}}return null},e.a=o},function(t,e,i){"use strict";var r=i(6),n=i(98),o={};o.linearRings=function(t,e,i,o,a,s,l){for(var u,h,c,p,d,f,_,g=a[s+1],y=[],v=0,m=i.length;v<m;++v){var E=i[v];for(p=t[E-o],f=t[E-o+1],u=e;u<E;u+=o)d=t[u],_=t[u+1],(g<=f&&_<=g||f<=g&&g<=_)&&(c=(g-f)/(_-f)*(d-p)+p,y.push(c)),p=d,f=_}var T=NaN,S=-1/0;for(y.sort(r.a.numberSafeCompareFunction),p=y[0],u=1,h=y.length;u<h;++u){d=y[u];var R=Math.abs(d-p);R>S&&(c=(p+d)/2,n.a.linearRingsContainsXY(t,e,i,o,c,g)&&(T=c,S=R)),p=d}return isNaN(T)&&(T=a[s]),l?(l.push(T,g,S),l):[T,g,S]},o.linearRingss=function(t,e,i,r,n){var a,s,l=[];for(a=0,s=i.length;a<s;++a){var u=i[a];l=o.linearRings(t,e,u,r,n,2*a,l),e=u[u.length-1]}return l},e.a=o},function(t,e,i){"use strict";var r=i(0),n=i(228),o=i(18),a=i(8),s=i(63),l=function(t){o.a.call(this),this.projection_=a.a.get(t.projection),this.attributions_=null,this.attributions2_=this.adaptAttributions_(t.attributions),this.logo_=t.logo,this.state_=void 0!==t.state?t.state:s.a.READY,this.wrapX_=void 0!==t.wrapX&&t.wrapX};r.a.inherits(l,o.a),l.prototype.adaptAttributions_=function(t){if(!t)return null;if(t instanceof n.a)return this.attributions_=[t],function(e){return[t.getHTML()]};if(Array.isArray(t)){if(t[0]instanceof n.a){this.attributions_=t;var e=t.map(function(t){return t.getHTML()});return function(t){return e}}return this.attributions_=t.map(function(t){return new n.a({html:t})}),function(e){return t}}return"function"==typeof t?t:(this.attributions_=[new n.a({html:t})],function(e){return[t]})},l.prototype.forEachFeatureAtCoordinate=r.a.nullFunction,l.prototype.getAttributions=function(){return this.attributions_},l.prototype.getAttributions2=function(){return this.attributions2_},l.prototype.getLogo=function(){return this.logo_},l.prototype.getProjection=function(){return this.projection_},l.prototype.getResolutions=function(){},l.prototype.getState=function(){return this.state_},l.prototype.getWrapX=function(){return this.wrapX_},l.prototype.refresh=function(){this.changed()},l.prototype.setAttributions=function(t){this.attributions2_=this.adaptAttributions_(t),this.changed()},l.prototype.setLogo=function(t){this.logo_=t},l.prototype.setState=function(t){this.state_=t,this.changed()},e.a=l},function(t,e,i){"use strict";var r=i(0),n=i(9),o=i(128),a=i(6),s=i(1),l=i(7),u=i(75),h=i(56),c=function(t){this.minZoom=void 0!==t.minZoom?t.minZoom:0,this.resolutions_=t.resolutions,n.a.assert(a.a.isSorted(this.resolutions_,function(t,e){return e-t},!0),17);var e;if(!t.origins)for(var i=0,l=this.resolutions_.length-1;i<l;++i)if(e){if(this.resolutions_[i]/this.resolutions_[i+1]!==e){e=void 0;break}}else e=this.resolutions_[i]/this.resolutions_[i+1];this.zoomFactor_=e,this.maxZoom=this.resolutions_.length-1,this.origin_=void 0!==t.origin?t.origin:null,this.origins_=null,void 0!==t.origins&&(this.origins_=t.origins,n.a.assert(this.origins_.length==this.resolutions_.length,20));var u=t.extent;void 0===u||this.origin_||this.origins_||(this.origin_=s.a.getTopLeft(u)),n.a.assert(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,void 0!==t.tileSizes&&(this.tileSizes_=t.tileSizes,n.a.assert(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=void 0!==t.tileSize?t.tileSize:this.tileSizes_?null:r.a.DEFAULT_TILE_SIZE,n.a.assert(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=void 0!==u?u:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],void 0!==t.sizes?this.fullTileRanges_=t.sizes.map(function(t,e){return new o.a(Math.min(0,t[0]),Math.max(t[0]-1,-1),Math.min(0,t[1]),Math.max(t[1]-1,-1))},this):u&&this.calculateTileRanges_(u)};c.tmpTileCoord_=[0,0,0],c.prototype.forEachTileCoord=function(t,e,i){for(var r=this.getTileRangeForExtentAndZ(t,e),n=r.minX,o=r.maxX;n<=o;++n)for(var a=r.minY,s=r.maxY;a<=s;++a)i([e,n,a])},c.prototype.forEachTileCoordParentTileRange=function(t,e,i,r,n){var a,s,l,u=null,h=t[0]-1;for(2===this.zoomFactor_?(s=t[1],l=t[2]):u=this.getTileCoordExtent(t,n);h>=this.minZoom;){if(2===this.zoomFactor_?(s=Math.floor(s/2),l=Math.floor(l/2),a=o.a.createOrUpdate(s,s,l,l,r)):a=this.getTileRangeForExtentAndZ(u,h,r),e.call(i,h,a))return!0;--h}return!1},c.prototype.getExtent=function(){return this.extent_},c.prototype.getMaxZoom=function(){return this.maxZoom},c.prototype.getMinZoom=function(){return this.minZoom},c.prototype.getOrigin=function(t){return this.origin_?this.origin_:this.origins_[t]},c.prototype.getResolution=function(t){return this.resolutions_[t]},c.prototype.getResolutions=function(){return this.resolutions_},c.prototype.getTileCoordChildTileRange=function(t,e,i){if(t[0]<this.maxZoom){if(2===this.zoomFactor_){var r=2*t[1],n=2*t[2];return o.a.createOrUpdate(r,r+1,n,n+1,e)}var a=this.getTileCoordExtent(t,i);return this.getTileRangeForExtentAndZ(a,t[0]+1,e)}return null},c.prototype.getTileRangeExtent=function(t,e,i){var r=this.getOrigin(t),n=this.getResolution(t),o=u.a.toSize(this.getTileSize(t),this.tmpSize_),a=r[0]+e.minX*o[0]*n,l=r[0]+(e.maxX+1)*o[0]*n,h=r[1]+e.minY*o[1]*n,c=r[1]+(e.maxY+1)*o[1]*n;return s.a.createOrUpdate(a,h,l,c,i)},c.prototype.getTileRangeForExtentAndZ=function(t,e,i){var r=c.tmpTileCoord_;this.getTileCoordForXYAndZ_(t[0],t[1],e,!1,r);var n=r[1],a=r[2];return this.getTileCoordForXYAndZ_(t[2],t[3],e,!0,r),o.a.createOrUpdate(n,r[1],a,r[2],i)},c.prototype.getTileCoordCenter=function(t){var e=this.getOrigin(t[0]),i=this.getResolution(t[0]),r=u.a.toSize(this.getTileSize(t[0]),this.tmpSize_);return[e[0]+(t[1]+.5)*r[0]*i,e[1]+(t[2]+.5)*r[1]*i]},c.prototype.getTileCoordExtent=function(t,e){var i=this.getOrigin(t[0]),r=this.getResolution(t[0]),n=u.a.toSize(this.getTileSize(t[0]),this.tmpSize_),o=i[0]+t[1]*n[0]*r,a=i[1]+t[2]*n[1]*r,l=o+n[0]*r,h=a+n[1]*r;return s.a.createOrUpdate(o,a,l,h,e)},c.prototype.getTileCoordForCoordAndResolution=function(t,e,i){return this.getTileCoordForXYAndResolution_(t[0],t[1],e,!1,i)},c.prototype.getTileCoordForXYAndResolution_=function(t,e,i,r,n){var o=this.getZForResolution(i),a=i/this.getResolution(o),s=this.getOrigin(o),l=u.a.toSize(this.getTileSize(o),this.tmpSize_),c=r?.5:0,p=r?0:.5,d=Math.floor((t-s[0])/i+c),f=Math.floor((e-s[1])/i+p),_=a*d/l[0],g=a*f/l[1];return r?(_=Math.ceil(_)-1,g=Math.ceil(g)-1):(_=Math.floor(_),g=Math.floor(g)),h.a.createOrUpdate(o,_,g,n)},c.prototype.getTileCoordForXYAndZ_=function(t,e,i,r,n){var o=this.getOrigin(i),a=this.getResolution(i),s=u.a.toSize(this.getTileSize(i),this.tmpSize_),l=r?.5:0,c=r?0:.5,p=Math.floor((t-o[0])/a+l),d=Math.floor((e-o[1])/a+c),f=p/s[0],_=d/s[1];return r?(f=Math.ceil(f)-1,_=Math.ceil(_)-1):(f=Math.floor(f),_=Math.floor(_)),h.a.createOrUpdate(i,f,_,n)},c.prototype.getTileCoordForCoordAndZ=function(t,e,i){return this.getTileCoordForXYAndZ_(t[0],t[1],e,!1,i)},c.prototype.getTileCoordResolution=function(t){return this.resolutions_[t[0]]},c.prototype.getTileSize=function(t){return this.tileSize_?this.tileSize_:this.tileSizes_[t]},c.prototype.getFullTileRange=function(t){return this.fullTileRanges_?this.fullTileRanges_[t]:null},c.prototype.getZForResolution=function(t,e){var i=a.a.linearFindNearest(this.resolutions_,t,e||0);return l.a.clamp(i,this.minZoom,this.maxZoom)},c.prototype.calculateTileRanges_=function(t){for(var e=this.resolutions_.length,i=new Array(e),r=this.minZoom;r<e;++r)i[r]=this.getTileRangeForExtentAndZ(t,r);this.fullTileRanges_=i},e.a=c},function(t,e,i){"use strict";function r(t,e){if(!(this instanceof r))return new r(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),this.clear()}function n(t,e,i){if(!i)return e.indexOf(t);for(var r=0;r<e.length;r++)if(i(t,e[r]))return r;return-1}function o(t,e){a(t,0,t.children.length,e,t)}function a(t,e,i,r,n){n||(n=g(null)),n.minX=1/0,n.minY=1/0,n.maxX=-1/0,n.maxY=-1/0;for(var o,a=e;a<i;a++)o=t.children[a],s(n,t.leaf?r(o):o);return n}function s(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function l(t,e){return t.minX-e.minX}function u(t,e){return t.minY-e.minY}function h(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function c(t){return t.maxX-t.minX+(t.maxY-t.minY)}function p(t,e){return(Math.max(e.maxX,t.maxX)-Math.min(e.minX,t.minX))*(Math.max(e.maxY,t.maxY)-Math.min(e.minY,t.minY))}function d(t,e){var i=Math.max(t.minX,e.minX),r=Math.max(t.minY,e.minY),n=Math.min(t.maxX,e.maxX),o=Math.min(t.maxY,e.maxY);return Math.max(0,n-i)*Math.max(0,o-r)}function f(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function _(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function g(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function y(t,e,i,r,n){for(var o,a=[e,i];a.length;)i=a.pop(),e=a.pop(),i-e<=r||(o=e+Math.ceil((i-e)/r/2)*r,v(t,o,e,i,n),a.push(e,o,o,i))}t.exports=r;var v=i(339);r.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,i=[],r=this.toBBox;if(!_(t,e))return i;for(var n,o,a,s,l=[];e;){for(n=0,o=e.children.length;n<o;n++)a=e.children[n],s=e.leaf?r(a):a,_(t,s)&&(e.leaf?i.push(a):f(t,s)?this._all(a,i):l.push(a));e=l.pop()}return i},collides:function(t){var e=this.data,i=this.toBBox;if(!_(t,e))return!1;for(var r,n,o,a,s=[];e;){for(r=0,n=e.children.length;r<n;r++)if(o=e.children[r],a=e.leaf?i(o):o,_(t,a)){if(e.leaf||f(t,a))return!0;s.push(o)}e=s.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,i=t.length;e<i;e++)this.insert(t[e]);return this}var r=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var n=this.data;this.data=r,r=n}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=g([]),this},remove:function(t,e){if(!t)return this;for(var i,r,o,a,s=this.data,l=this.toBBox(t),u=[],h=[];s||u.length;){if(s||(s=u.pop(),r=u[u.length-1],i=h.pop(),a=!0),s.leaf&&-1!==(o=n(t,s.children,e)))return s.children.splice(o,1),u.push(s),this._condense(u),this;a||s.leaf||!f(s,l)?r?(i++,s=r.children[i],a=!1):s=null:(u.push(s),h.push(i),i=0,r=s,s=s.children[0])}return this},toBBox:function(t){return t},compareMinX:l,compareMinY:u,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var i=[];t;)t.leaf?e.push.apply(e,t.children):i.push.apply(i,t.children),t=i.pop();return e},_build:function(t,e,i,r){var n,a=i-e+1,s=this._maxEntries;if(a<=s)return n=g(t.slice(e,i+1)),o(n,this.toBBox),n;r||(r=Math.ceil(Math.log(a)/Math.log(s)),s=Math.ceil(a/Math.pow(s,r-1))),n=g([]),n.leaf=!1,n.height=r;var l,u,h,c,p=Math.ceil(a/s),d=p*Math.ceil(Math.sqrt(s));for(y(t,e,i,d,this.compareMinX),l=e;l<=i;l+=d)for(h=Math.min(l+d-1,i),y(t,l,h,p,this.compareMinY),u=l;u<=h;u+=p)c=Math.min(u+p-1,h),n.children.push(this._build(t,u,c,r-1));return o(n,this.toBBox),n},_chooseSubtree:function(t,e,i,r){for(var n,o,a,s,l,u,c,d;;){if(r.push(e),e.leaf||r.length-1===i)break;for(c=d=1/0,n=0,o=e.children.length;n<o;n++)a=e.children[n],l=h(a),u=p(t,a)-l,u<d?(d=u,c=l<c?l:c,s=a):u===d&&l<c&&(c=l,s=a);e=s||e.children[0]}return e},_insert:function(t,e,i){var r=this.toBBox,n=i?t:r(t),o=[],a=this._chooseSubtree(n,this.data,e,o);for(a.children.push(t),s(a,n);e>=0&&o[e].children.length>this._maxEntries;)this._split(o,e),e--;this._adjustParentBBoxes(n,o,e)},_split:function(t,e){var i=t[e],r=i.children.length,n=this._minEntries;this._chooseSplitAxis(i,n,r);var a=this._chooseSplitIndex(i,n,r),s=g(i.children.splice(a,i.children.length-a));s.height=i.height,s.leaf=i.leaf,o(i,this.toBBox),o(s,this.toBBox),e?t[e-1].children.push(s):this._splitRoot(i,s)},_splitRoot:function(t,e){this.data=g([t,e]),this.data.height=t.height+1,this.data.leaf=!1,o(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,i){var r,n,o,s,l,u,c,p;for(u=c=1/0,r=e;r<=i-e;r++)n=a(t,0,r,this.toBBox),o=a(t,r,i,this.toBBox),s=d(n,o),l=h(n)+h(o),s<u?(u=s,p=r,c=l<c?l:c):s===u&&l<c&&(c=l,p=r);return p},_chooseSplitAxis:function(t,e,i){var r=t.leaf?this.compareMinX:l,n=t.leaf?this.compareMinY:u;this._allDistMargin(t,e,i,r)<this._allDistMargin(t,e,i,n)&&t.children.sort(r)},_allDistMargin:function(t,e,i,r){t.children.sort(r);var n,o,l=this.toBBox,u=a(t,0,e,l),h=a(t,i-e,i,l),p=c(u)+c(h);for(n=e;n<i-e;n++)o=t.children[n],s(u,t.leaf?l(o):o),p+=c(u);for(n=i-e-1;n>=e;n--)o=t.children[n],s(h,t.leaf?l(o):o),p+=c(h);return p},_adjustParentBBoxes:function(t,e,i){for(var r=i;r>=0;r--)s(e[r],t)},_condense:function(t){for(var e,i=t.length-1;i>=0;i--)0===t[i].children.length?i>0?(e=t[i-1].children,e.splice(e.indexOf(t[i]),1)):this.clear():o(t[i],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}}},function(t,e,i){var r=i(40),n=i(17),o=i(77);t.exports=function(t,e){var i=(n.Object||{})[t]||Object[t],a={};a[t]=e(i),r(r.S+r.F*o(function(){i(1)}),"Object",a)}},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=c()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(u.a?u()(t,e):t.__proto__=e)}i.d(e,"a",function(){return v});var a=i(3),s=i.n(a),l=i(14),u=i.n(l),h=i(11),c=i.n(h),p=i(31),d=i.n(p),f=i(15),_=i.n(f),g=i(81),y=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),s()(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),v=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r(this,e),n(this,(e.__proto__||_()(e)).call(this,t))}return o(e,t),y(e,[{key:"addFeature",value:function(t){t instanceof Array&&this._olSource.addFeatures(t)}},{key:"removeFeature",value:function(t){if(t instanceof Array){var e=!0,i=!1,r=void 0;try{for(var n,o=d()(t);!(e=(n=o.next()).done);e=!0){var a=n.value;this._olSource.removeFeature(a)}}catch(t){i=!0,r=t}finally{try{!e&&o.return&&o.return()}finally{if(i)throw r}}}}},{key:"queryByProperty",value:function(t){var e=this._olSource.getFeatures(),i=[],r=!0,n=!1,o=void 0;try{for(var a,s=d()(e);!(r=(a=s.next()).done);r=!0){var l=a.value,u=!0,h=!1,c=void 0;try{for(var p,f=d()(l.getKeys());!(u=(p=f.next()).done);u=!0){p.value==t&&i.push(l)}}catch(t){h=!0,c=t}finally{try{!u&&f.return&&f.return()}finally{if(h)throw c}}}}catch(t){n=!0,o=t}finally{try{!r&&s.return&&s.return()}finally{if(n)throw o}}return i}},{key:"queryByExtent",value:function(t){if(t instanceof Array)return this._olSource.getFeaturesInExtent(t)}},{key:"getFeatureById",value:function(t){return this._olSource.getFeatureById(t)}}]),e}(g.a)},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=_()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(d.a?d()(t,e):t.__proto__=e)}i.d(e,"a",function(){return S});var a=i(87),s=i.n(a),l=i(92),u=i.n(l),h=i(3),c=i.n(h),p=i(14),d=i.n(p),f=i(11),_=i.n(f),g=i(15),y=i.n(g),v=i(10),m=i(177),E="function"==typeof u.a&&"symbol"==typeof s.a?function(t){return typeof t}:function(t){return t&&"function"==typeof u.a&&t.constructor===u.a&&t!==u.a.prototype?"symbol":typeof t},T=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),c()(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),S=function(t){function e(){return r(this,e),n(this,(e.__proto__||y()(e)).call(this))}return o(e,t),T(e,[{key:"addEventListener",value:function(t,e,i){var r=[];if("object"===(void 0===t?"undefined":E(t)))for(var n in t){var o=this._on(n,t[n],e);o&&r.push(o)}else{t=v.n(t);for(var a=0,s=t.length;a<s;a++){var l=this._on(t[a],e,i);l&&r.push(l)}}return r}},{key:"_on",value:function(t,e,i){this._events=this._events||{};var r=this._events[t];r||(r=[],this._events[t]=r),i===this&&(i=void 0);for(var n={type:t,fn:e,ctx:i},o=r,a=0,s=o.length;a<s;a++)if(o[a].fn===e&&o[a].ctx===i)return null;return o.push(n),n}},{key:"removeEventListener",value:function(t,e,i){if(t)if("object"===(void 0===t?"undefined":E(t)))for(var r in t)this._off(r,t[r],e);else{t=v.n(t);for(var n=0,o=t.length;n<o;n++)this._off(t[n],e,i)}else delete this._events}},{key:"_off",value:function(t,e,i){var r=void 0,n=void 0,o=void 0;if(this._events&&(r=this._events[t])){if(!e){for(n=0,o=r.length;n<o;n++)r[n].fn=v.d;return void delete this._events[t]}if(i===this&&(i=void 0),r)for(n=0,o=r.length;n<o;n++){var a=r[n];if(a.ctx===i&&a.fn===e)return a.fn=v.d,this._firingCount&&(this._events[t]=r=r.slice()),void r.splice(n,1)}}}},{key:"fire",value:function(t,e,i){if(!this.hasOn(t,i))return this;var r=v.b({},e,{type:t,target:this});if(this._events){var n=this._events[t];if(n){this._firingCount=this._firingCount+1||1;for(var o=0,a=n.length;o<a;o++){var s=n[o];s.fn.call(s.ctx||this,r)}this._firingCount--}}i&&this._propagateEvent(r)}},{key:"hasOn",value:function(t,e){var i=this._events&&this._events[t];if(i&&i.length)return!0;if(e)for(var r in this._eventParents)if(this._eventParents[r].hasOn(t,e))return!0;return!1}},{key:"once",value:function(t,e,i){if("object"===(void 0===t?"undefined":E(t))){for(var r in t)this.once(r,t[r],e);return this}var n=v.a(function(){this.removeEventListener(t,e,i),this.removeEventListener(t,n,i)},this);this.addEventListener(t,e,i),this.addEventListener(t,n,i)}},{key:"addEventParent",value:function(t){this._eventParents=this._eventParents||{},this._eventParents[v.o(t)]=t}},{key:"removeEventParent",value:function(t){this._eventParents&&delete this._eventParents[v.o(t)]}},{key:"_propagateEvent",value:function(t){for(var e in this._eventParents)this._eventParents[e].fire(t.type,v.b({propagatedFrom:t.target},t),!0)}}]),e}(m.a)},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}i.d(e,"a",function(){return h});var n=i(3),o=i.n(n),a=i(230),s=i.n(a),l=i(10),u=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),o()(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),h=function(){function t(e){r(this,t),this._length=0,this._values={},this._maxLength=e}return u(t,[{key:"set",value:function(t,e){if(this._maxLength&&this._length===this._maxLength)return void console.log("objectNumber exceed maxLength!");this.containsKey(t)||this._length++,this._values[t]=e}},{key:"setProperties",value:function(t){for(var e in t)this.set(e,t[e])}},{key:"get",value:function(t){var e=void 0;return this._values.hasOwnProperty(t)&&(e=this._values[t]),e}},{key:"getKeys",value:function(){return s()(this._values)}},{key:"getProperties",value:function(){return l.b({},this._values)}},{key:"unset",value:function(t){t?t in this._values&&(delete this._values[t],this._length--):this.clear()}},{key:"containsKey",value:function(t){return this._values.hasOwnProperty(t)}},{key:"clear",value:function(){this._length=0,this._values={}}},{key:"isEmpty",value:function(){return 0===this._length}}]),t}()},function(t,e,i){"use strict";i.d(e,"b",function(){return n}),i.d(e,"a",function(){return o});var r=i(231),n={VISIBLECHANGE:"visiblechange",ZINDEXCHANGE:"zIndexchange",OPACITYCHANGE:"opacitychange"},o={SINGLECLICK:"singleclick",CLICK:r.a.CLICK,DBLCLICK:r.a.DBLCLICK,CONTEXTMENU:"contextmenu",KEYPRESS:r.a.KEYPRESS,POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout"}},function(t,e,i){"use strict";var r={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};e.a=r},function(t,e,i){"use strict";var r=i(9),n=i(2),o=function(t,e){this.priorityFunction_=t,this.keyFunction_=e,this.elements_=[],this.priorities_=[],this.queuedElements_={}};o.DROP=1/0,o.prototype.clear=function(){this.elements_.length=0,this.priorities_.length=0,n.a.clear(this.queuedElements_)},o.prototype.dequeue=function(){var t=this.elements_,e=this.priorities_,i=t[0];1==t.length?(t.length=0,e.length=0):(t[0]=t.pop(),e[0]=e.pop(),this.siftUp_(0));var r=this.keyFunction_(i);return delete this.queuedElements_[r],i},o.prototype.enqueue=function(t){r.a.assert(!(this.keyFunction_(t)in this.queuedElements_),31);var e=this.priorityFunction_(t);return e!=o.DROP&&(this.elements_.push(t),this.priorities_.push(e),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0)},o.prototype.getCount=function(){return this.elements_.length},o.prototype.getLeftChildIndex_=function(t){return 2*t+1},o.prototype.getRightChildIndex_=function(t){return 2*t+2},o.prototype.getParentIndex_=function(t){return t-1>>1},o.prototype.heapify_=function(){var t;for(t=(this.elements_.length>>1)-1;t>=0;t--)this.siftUp_(t)},o.prototype.isEmpty=function(){return 0===this.elements_.length},o.prototype.isKeyQueued=function(t){return t in this.queuedElements_},o.prototype.isQueued=function(t){return this.isKeyQueued(this.keyFunction_(t))},o.prototype.siftUp_=function(t){for(var e=this.elements_,i=this.priorities_,r=e.length,n=e[t],o=i[t],a=t;t<r>>1;){var s=this.getLeftChildIndex_(t),l=this.getRightChildIndex_(t),u=l<r&&i[l]<i[s]?l:s;e[t]=e[u],i[t]=i[u],t=u}e[t]=n,i[t]=o,this.siftDown_(a,t)},o.prototype.siftDown_=function(t,e){for(var i=this.elements_,r=this.priorities_,n=i[e],o=r[e];e>t;){var a=this.getParentIndex_(e);if(!(r[a]>o))break;i[e]=i[a],r[e]=r[a],e=a}i[e]=n,r[e]=o},o.prototype.reprioritize=function(){var t,e,i,r=this.priorityFunction_,n=this.elements_,a=this.priorities_,s=0,l=n.length;for(e=0;e<l;++e)t=n[e],i=r(t),i==o.DROP?delete this.queuedElements_[this.keyFunction_(t)]:(a[s]=i,n[s++]=t);n.length=s,a.length=s,this.heapify_()},e.a=o},function(t,e,i){"use strict";var r=i(0),n=i(366),o=i(18),a=i(367),s=i(182),l=i(28),u=i(241),h=i(6),c=i(9),p=i(54),d=i(50),f=i(1),_=i(12),g=i(27),y=i(35),v=i(7),m=i(2),E=i(8),T=i(32),S=function(t){o.a.call(this);var e=m.a.assign({},t);this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.updateAnimations_=this.updateAnimations_.bind(this),this.projection_=E.a.createProjection(e.projection,"EPSG:3857"),this.applyOptions_(e)};r.a.inherits(S,o.a),S.prototype.applyOptions_=function(t){var e={};e[u.a.CENTER]=void 0!==t.center?t.center:null;var i=S.createResolutionConstraint_(t);this.maxResolution_=i.maxResolution,this.minResolution_=i.minResolution,this.zoomFactor_=i.zoomFactor,this.resolutions_=t.resolutions,this.minZoom_=i.minZoom;var r=S.createCenterConstraint_(t),n=i.constraint,o=S.createRotationConstraint_(t);this.constraints_={center:r,resolution:n,rotation:o},void 0!==t.resolution?e[u.a.RESOLUTION]=t.resolution:void 0!==t.zoom&&(e[u.a.RESOLUTION]=this.constrainResolution(this.maxResolution_,t.zoom-this.minZoom_),this.resolutions_&&(e[u.a.RESOLUTION]=v.a.clamp(Number(this.getResolution()||e[u.a.RESOLUTION]),this.minResolution_,this.maxResolution_))),e[u.a.ROTATION]=void 0!==t.rotation?t.rotation:0,this.setProperties(e),this.options_=t},S.prototype.getUpdatedOptions_=function(t){var e=m.a.assign({},this.options_);return void 0!==e.resolution?e.resolution=this.getResolution():e.zoom=this.getZoom(),e.center=this.getCenter(),e.rotation=this.getRotation(),m.a.assign({},e,t)},S.prototype.animate=function(t){var e,i=arguments.length;if(i>1&&"function"==typeof arguments[i-1]&&(e=arguments[i-1],--i),!this.isDef()){var r=arguments[i-1];return r.center&&this.setCenter(r.center),void 0!==r.zoom&&this.setZoom(r.zoom),void 0!==r.rotation&&this.setRotation(r.rotation),void(e&&e(!0))}for(var n=Date.now(),o=this.getCenter().slice(),a=this.getResolution(),s=this.getRotation(),u=[],h=0;h<i;++h){var c=arguments[h],p={start:n,complete:!1,anchor:c.anchor,duration:void 0!==c.duration?c.duration:1e3,easing:c.easing||d.a.inAndOut};if(c.center&&(p.sourceCenter=o,p.targetCenter=c.center,o=p.targetCenter),void 0!==c.zoom?(p.sourceResolution=a,p.targetResolution=this.constrainResolution(this.maxResolution_,c.zoom-this.minZoom_,0),a=p.targetResolution):c.resolution&&(p.sourceResolution=a,p.targetResolution=c.resolution,a=p.targetResolution),void 0!==c.rotation){p.sourceRotation=s;var f=v.a.modulo(c.rotation-s+Math.PI,2*Math.PI)-Math.PI;p.targetRotation=s+f,s=p.targetRotation}p.callback=e,S.isNoopAnimation(p)?p.complete=!0:n+=p.duration,u.push(p)}this.animations_.push(u),this.setHint(l.a.ANIMATING,1),this.updateAnimations_()},S.prototype.getAnimating=function(){return this.hints_[l.a.ANIMATING]>0},S.prototype.getInteracting=function(){return this.hints_[l.a.INTERACTING]>0},S.prototype.cancelAnimations=function(){this.setHint(l.a.ANIMATING,-this.hints_[l.a.ANIMATING]);for(var t=0,e=this.animations_.length;t<e;++t){var i=this.animations_[t];i[0].callback&&i[0].callback(!1)}this.animations_.length=0},S.prototype.updateAnimations_=function(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),this.getAnimating()){for(var t=Date.now(),e=!1,i=this.animations_.length-1;i>=0;--i){for(var r=this.animations_[i],n=!0,o=0,a=r.length;o<a;++o){var s=r[o];if(!s.complete){var h=t-s.start,c=s.duration>0?h/s.duration:1;c>=1?(s.complete=!0,c=1):n=!1;var p=s.easing(c);if(s.sourceCenter){var d=s.sourceCenter[0],f=s.sourceCenter[1],_=s.targetCenter[0],g=s.targetCenter[1],y=d+p*(_-d),m=f+p*(g-f);this.set(u.a.CENTER,[y,m])}if(s.sourceResolution&&s.targetResolution){var E=1===p?s.targetResolution:s.sourceResolution+p*(s.targetResolution-s.sourceResolution);s.anchor&&this.set(u.a.CENTER,this.calculateCenterZoom(E,s.anchor)),this.set(u.a.RESOLUTION,E)}if(void 0!==s.sourceRotation&&void 0!==s.targetRotation){var T=1===p?v.a.modulo(s.targetRotation+Math.PI,2*Math.PI)-Math.PI:s.sourceRotation+p*(s.targetRotation-s.sourceRotation);s.anchor&&this.set(u.a.CENTER,this.calculateCenterRotate(T,s.anchor)),this.set(u.a.ROTATION,T)}if(e=!0,!s.complete)break}}if(n){this.animations_[i]=null,this.setHint(l.a.ANIMATING,-1);var S=r[0].callback;S&&S(!0)}}this.animations_=this.animations_.filter(Boolean),e&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_))}},S.prototype.calculateCenterRotate=function(t,e){var i,r=this.getCenter();return void 0!==r&&(i=[r[0]-e[0],r[1]-e[1]],p.a.rotate(i,t-this.getRotation()),p.a.add(i,e)),i},S.prototype.calculateCenterZoom=function(t,e){var i,r=this.getCenter(),n=this.getResolution();if(void 0!==r&&void 0!==n){i=[e[0]-t*(e[0]-r[0])/n,e[1]-t*(e[1]-r[1])/n]}return i},S.prototype.getSizeFromViewport_=function(){var t=[100,100],e='.ol-viewport[data-view="'+r.a.getUid(this)+'"]',i=document.querySelector(e);if(i){var n=getComputedStyle(i);t[0]=parseInt(n.width,10),t[1]=parseInt(n.height,10)}return t},S.prototype.constrainCenter=function(t){return this.constraints_.center(t)},S.prototype.constrainResolution=function(t,e,i){var r=e||0,n=i||0;return this.constraints_.resolution(t,r,n)},S.prototype.constrainRotation=function(t,e){var i=e||0;return this.constraints_.rotation(t,i)},S.prototype.getCenter=function(){return this.get(u.a.CENTER)},S.prototype.getConstraints=function(){return this.constraints_},S.prototype.getHints=function(t){return void 0!==t?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()},S.prototype.calculateExtent=function(t){var e=t||this.getSizeFromViewport_(),i=this.getCenter();c.a.assert(i,1);var r=this.getResolution();c.a.assert(void 0!==r,2);var n=this.getRotation();return c.a.assert(void 0!==n,3),f.a.getForViewAndSize(i,r,n,e)},S.prototype.getMaxResolution=function(){return this.maxResolution_},S.prototype.getMinResolution=function(){return this.minResolution_},S.prototype.getMaxZoom=function(){return this.getZoomForResolution(this.minResolution_)},S.prototype.setMaxZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))},S.prototype.getMinZoom=function(){return this.getZoomForResolution(this.maxResolution_)},S.prototype.setMinZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))},S.prototype.getProjection=function(){return this.projection_},S.prototype.getResolution=function(){return this.get(u.a.RESOLUTION)},S.prototype.getResolutions=function(){return this.resolutions_},S.prototype.getResolutionForExtent=function(t,e){var i=e||this.getSizeFromViewport_(),r=f.a.getWidth(t)/i[0],n=f.a.getHeight(t)/i[1];return Math.max(r,n)},S.prototype.getResolutionForValueFunction=function(t){var e=t||2,i=this.maxResolution_,r=this.minResolution_,n=Math.log(i/r)/Math.log(e);return function(t){return i/Math.pow(e,t*n)}},S.prototype.getRotation=function(){return this.get(u.a.ROTATION)},S.prototype.getValueForResolutionFunction=function(t){var e=t||2,i=this.maxResolution_,r=this.minResolution_,n=Math.log(i/r)/Math.log(e);return function(t){return Math.log(i/t)/Math.log(e)/n}},S.prototype.getState=function(){var t=this.getCenter(),e=this.getProjection(),i=this.getResolution(),r=this.getRotation();return{center:t.slice(),projection:void 0!==e?e:null,resolution:i,rotation:r,zoom:this.getZoom()}},S.prototype.getZoom=function(){var t,e=this.getResolution();return void 0!==e&&(t=this.getZoomForResolution(e)),t},S.prototype.getZoomForResolution=function(t){var e,i,r=this.minZoom_||0;if(this.resolutions_){var n=h.a.linearFindNearest(this.resolutions_,t,1);r=n,e=this.resolutions_[n],i=n==this.resolutions_.length-1?2:e/this.resolutions_[n+1]}else e=this.maxResolution_,i=this.zoomFactor_;return r+Math.log(e/t)/Math.log(i)},S.prototype.getResolutionForZoom=function(t){return this.constrainResolution(this.maxResolution_,t-this.minZoom_,0)},S.prototype.fit=function(t,e){var i=e||{},n=i.size;n||(n=this.getSizeFromViewport_());var o;t instanceof y.a?t.getType()===_.a.CIRCLE?(t=t.getExtent(),o=g.a.fromExtent(t),o.rotate(this.getRotation(),f.a.getCenter(t))):o=t:(c.a.assert(Array.isArray(t),24),c.a.assert(!f.a.isEmpty(t),25),o=g.a.fromExtent(t));var a,s=void 0!==i.padding?i.padding:[0,0,0,0],l=void 0===i.constrainResolution||i.constrainResolution,u=void 0!==i.nearest&&i.nearest;a=void 0!==i.minResolution?i.minResolution:void 0!==i.maxZoom?this.constrainResolution(this.maxResolution_,i.maxZoom-this.minZoom_,0):0;for(var h=o.getFlatCoordinates(),p=this.getRotation(),d=Math.cos(-p),v=Math.sin(-p),m=1/0,E=1/0,T=-1/0,S=-1/0,R=o.getStride(),I=0,x=h.length;I<x;I+=R){var C=h[I]*d-h[I+1]*v,O=h[I]*v+h[I+1]*d;m=Math.min(m,C),E=Math.min(E,O),T=Math.max(T,C),S=Math.max(S,O)}var P=this.getResolutionForExtent([m,E,T,S],[n[0]-s[1]-s[3],n[1]-s[0]-s[2]]);if(P=isNaN(P)?a:Math.max(P,a),l){var L=this.constrainResolution(P,0,0);!u&&L<P&&(L=this.constrainResolution(L,-1,0)),P=L}v=-v;var A=(m+T)/2,w=(E+S)/2;A+=(s[1]-s[3])/2*P,w+=(s[0]-s[2])/2*P;var M=A*d-w*v,F=w*d+A*v,N=[M,F],b=i.callback?i.callback:r.a.nullFunction;void 0!==i.duration?this.animate({resolution:P,center:N,duration:i.duration,easing:i.easing},b):(this.setResolution(P),this.setCenter(N),setTimeout(b.bind(void 0,!0),0))},S.prototype.centerOn=function(t,e,i){var r=this.getRotation(),n=Math.cos(-r),o=Math.sin(-r),a=t[0]*n-t[1]*o,s=t[1]*n+t[0]*o,l=this.getResolution();a+=(e[0]/2-i[0])*l,s+=(i[1]-e[1]/2)*l,o=-o;var u=a*n-s*o,h=s*n+a*o;this.setCenter([u,h])},S.prototype.isDef=function(){return!!this.getCenter()&&void 0!==this.getResolution()},S.prototype.rotate=function(t,e){if(void 0!==e){var i=this.calculateCenterRotate(t,e);this.setCenter(i)}this.setRotation(t)},S.prototype.setCenter=function(t){this.set(u.a.CENTER,t),this.getAnimating()&&this.cancelAnimations()},S.prototype.setHint=function(t,e){return this.hints_[t]+=e,this.changed(),this.hints_[t]},S.prototype.setResolution=function(t){this.set(u.a.RESOLUTION,t),this.getAnimating()&&this.cancelAnimations()},S.prototype.setRotation=function(t){this.set(u.a.ROTATION,t),this.getAnimating()&&this.cancelAnimations()},S.prototype.setZoom=function(t){this.setResolution(this.getResolutionForZoom(t))},S.createCenterConstraint_=function(t){return void 0!==t.extent?n.a.createExtent(t.extent):n.a.none},S.createResolutionConstraint_=function(t){var e,i,n,o=void 0!==t.minZoom?t.minZoom:r.a.DEFAULT_MIN_ZOOM,s=void 0!==t.maxZoom?t.maxZoom:28,l=void 0!==t.zoomFactor?t.zoomFactor:2;if(void 0!==t.resolutions){var u=t.resolutions;i=u[o],n=void 0!==u[s]?u[s]:u[u.length-1],e=a.a.createSnapToResolutions(u)}else{var h=E.a.createProjection(t.projection,"EPSG:3857"),c=h.getExtent(),p=c?Math.max(f.a.getWidth(c),f.a.getHeight(c)):360*E.a.METERS_PER_UNIT[T.a.DEGREES]/h.getMetersPerUnit(),d=p/r.a.DEFAULT_TILE_SIZE/Math.pow(2,r.a.DEFAULT_MIN_ZOOM),_=d/Math.pow(2,28-r.a.DEFAULT_MIN_ZOOM);i=t.maxResolution,void 0!==i?o=0:i=d/Math.pow(l,o),n=t.minResolution,void 0===n&&(n=void 0!==t.maxZoom?void 0!==t.maxResolution?i/Math.pow(l,s):d/Math.pow(l,s):_),s=o+Math.floor(Math.log(i/n)/Math.log(l)),n=i/Math.pow(l,s-o),e=a.a.createSnapToPower(l,i,s-o)}return{constraint:e,maxResolution:i,minResolution:n,minZoom:o,zoomFactor:l}},S.createRotationConstraint_=function(t){if(void 0===t.enableRotation||t.enableRotation){var e=t.constrainRotation;return void 0===e||!0===e?s.a.createSnapToZero():!1===e?s.a.none:"number"==typeof e?s.a.createSnapToN(e):s.a.none}return s.a.disable},S.isNoopAnimation=function(t){return!(t.sourceCenter&&t.targetCenter&&!p.a.equals(t.sourceCenter,t.targetCenter))&&(t.sourceResolution===t.targetResolution&&t.sourceRotation===t.targetRotation)},e.a=S},function(t,e,i){"use strict";var r=i(7),n={};n.disable=function(t,e){return void 0!==t?0:void 0},n.none=function(t,e){return void 0!==t?t+e:void 0},n.createSnapToN=function(t){var e=2*Math.PI/t;return function(t,i){return void 0!==t?t=Math.floor((t+i)/e+.5)*e:void 0}},n.createSnapToZero=function(t){var e=t||r.a.toRadians(5);return function(t,i){return void 0!==t?Math.abs(t+i)<=e?0:t+i:void 0}},e.a=n},function(t,e,i){"use strict";var r=i(9),n=i(7),o=i(56),a={};a.createFromTemplate=function(t,e){var i=/\{z\}/g,n=/\{x\}/g,o=/\{y\}/g,a=/\{-y\}/g;return function(s,l,u){return s?t.replace(i,s[0].toString()).replace(n,s[1].toString()).replace(o,function(){return(-s[2]-1).toString()}).replace(a,function(){var t=s[0],i=e.getFullTileRange(t);return r.a.assert(i,55),(i.getHeight()+s[2]).toString()}):void 0}},a.createFromTemplates=function(t,e){for(var i=t.length,r=new Array(i),n=0;n<i;++n)r[n]=a.createFromTemplate(t[n],e);return a.createFromTileUrlFunctions(r)},a.createFromTileUrlFunctions=function(t){return 1===t.length?t[0]:function(e,i,r){if(e){var a=o.a.hash(e),s=n.a.modulo(a,t.length);return t[s](e,i,r)}}},a.nullTileUrlFunction=function(t,e,i){},a.expandUrl=function(t){var e=[],i=/\{([a-z])-([a-z])\}/.exec(t);if(i){var r,n=i[1].charCodeAt(0),o=i[2].charCodeAt(0);for(r=n;r<=o;++r)e.push(t.replace(i[0],String.fromCharCode(r)));return e}if(i=i=/\{(\d+)-(\d+)\}/.exec(t)){for(var a=parseInt(i[2],10),s=parseInt(i[1],10);s<=a;s++)e.push(t.replace(i[0],s.toString()));return e}return e.push(t),e},e.a=a},function(t,e,i){"use strict";var r=i(0),n=i(69),o=i(5),a=function(t,e,i,r){n.a.call(this),this.extent=t,this.pixelRatio_=i,this.resolution=e,this.state=r};r.a.inherits(a,n.a),a.prototype.changed=function(){this.dispatchEvent(o.a.CHANGE)},a.prototype.getExtent=function(){return this.extent},a.prototype.getImage=function(){},a.prototype.getPixelRatio=function(){return this.pixelRatio_},a.prototype.getResolution=function(){return this.resolution},a.prototype.getState=function(){return this.state},a.prototype.load=function(){},e.a=a},function(t,e,i){"use strict";function r(t){var e,i;this.promise=new t(function(t,r){if(void 0!==e||void 0!==i)throw TypeError("Bad Promise constructor");e=t,i=r}),this.resolve=n(e),this.reject=n(i)}var n=i(113);t.exports.f=function(t){return new r(t)}},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=c()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(u.a?u()(t,e):t.__proto__=e)}i.d(e,"a",function(){return E});var a=i(3),s=i.n(a),l=i(14),u=i.n(l),h=i(11),c=i.n(h),p=i(15),d=i.n(p),f=i(262),_=i(10),g=i(22),y=i(38),v=i(82),m=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),s()(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),E=function(t){function e(t){r(this,e);var i=n(this,(e.__proto__||d()(e)).call(this));return i._style=t,i._layoutParsers=[],i._paintParsers=[],i.addParsers(e.parsersArray_),i.addLayoutParser(e.layoutParser_),i.addPaintParser(e.paintParser_),i}return o(e,t),m(e,[{key:"getStyle",value:function(){return this._style}},{key:"addLayoutParser",value:function(t){this._layoutParsers.push(t)}},{key:"addPaintParser",value:function(t){this._paintParsers.push(t)}}],[{key:"setLayout",value:function(t,e){for(var i=0;i<t._layoutParsers.length;i++)if(!t.callParsers(t,e,t._layoutParsers[i]))return!1;return!0}},{key:"setPaint",value:function(t,e){for(var i=0;i<t._paintParsers.length;i++)if(!t.callParsers(t,e,t._paintParsers[i]))return!1;return!0}},{key:"setId",value:function(t,e){return null!==t._style&&(t._style.set("id",e),!0)}},{key:"setFilter",value:function(t,e){return null!==t._style&&(t._style.setFilter(e),!0)}},{key:"setMaxZoom",value:function(t,e){return null!==t._style&&(t._style.set("maxZoom",e),!0)}},{key:"setMinZoom",value:function(t,e){return null!==t._style&&(t._style.set("minZoom",e),!0)}},{key:"setInteractive",value:function(t,e){return null!==t._style&&(t._style.set("interactive",e),!0)}},{key:"setSourceLayer",value:function(t,e){return null!==t._style&&(t._style.set("sourceLayer",e),!0)}},{key:"setTextMinZoom",value:function(t,e){return null!==t._style&&(_.j(e)?e<y.SystemZoom.MIN||e>y.SystemZoom.MAX?(g.a("setTextMinZoom error!"),!1):(t._style.set("minTextZ",e),!0):(g.a("setTextMinZoom error!"),!1))}},{key:"setTextMaxZoom",value:function(t,e){return null!==t._style&&(_.j(e)?e<y.SystemZoom.MIN||e>y.SystemZoom.MAX?(g.a("setTextMaxZoom error!"),!1):(t._style.set("maxTextZ",e,!0),!0):(g.a("setTextMaxZoom error!"),!1))}},{key:"setTextStrokeWidth",value:function(t,e){return null!==t._style&&(t._style.set("textStrokeWidth",e),!0)}},{key:"setTextStrokecolor",value:function(t,e){return null!==t._style&&(t._style.set("textStrokeColor",e),!0)}},{key:"setTextFillColor",value:function(t,e){return null!==t._style&&(t._style.set("textFillColor",e),!0)}},{key:"setTextFillAlpha",value:function(t,e){return null!==t._style&&(t._style.set("textFillOpacity",e),!0)}},{key:"setTextStrokeAlpha",value:function(t,e){return null!==t._style&&(t._style.set("textStrokeOpacity",e),!0)}},{key:"setTextVisibility",value:function(t,e){return null!==t._style&&(_.h(e)?(t._style.set("textVisibility",e),!0):(g.a("value is not bool!"),!1))}},{key:"setVisibility",value:function(t,e){return null!==t._style&&(_.h(e)?(t._style.set("visibility",e),!0):(g.a("value is not bool!"),!1))}},{key:"setTextSize",value:function(t,e){return null!==t._style&&(_.k(e)&&e.hasOwnProperty("base")?(t._style.set("textSize",e.base),!0):(g.a("style setTextSize error!"),!1))}},{key:"setTextStyle",value:function(t,e){return null!==t._style&&(t._style.set("textStyle",e),!0)}},{key:"setTextOutlineSize",value:function(t,e){return null!==t._style&&(_.j(e)?(t._style.set("textOutlineSize",e),!0):(g.a("setTextOutlineSize error!"),!1))}}]),e}(f.a);E.parsersArray_=[{must:!0,key:"id",type:v.a.DT_STR,parserHandler:E.setId},{must:!1,key:"interactive",type:v.a.DT_BOOL,parserHandler:E.setInteractive},{must:!1,key:"minzoom",type:v.a.DT_NUMBER,parserHandler:E.setMinZoom},{must:!1,key:"maxzoom",type:v.a.DT_NUMBER,parserHandler:E.setMaxZoom},{must:!1,key:"layout",type:v.a.DT_OBJ,parserHandler:E.setLayout},{must:!1,key:"paint",type:v.a.DT_OBJ,parserHandler:E.setPaint},{must:!1,key:"filter",type:v.a.DT_ARRAY,parserHandler:E.setFilter},{must:!1,key:"source-layer",type:v.a.DT_STR,parserHandler:E.setSourceLayer},{must:!1,key:"text-minzoom",type:v.a.DT_NUMBER,parserHandler:E.setTextMinZoom},{must:!1,key:"text-maxzoom",type:v.a.DT_NUMBER,parserHandler:E.setTextMaxZoom}],E.paintParser_=[{must:!1,key:"text-stroke-width",type:v.a.DT_NUMBER,parserHandler:E.setTextStrokeWidth},{must:!1,key:"text-stroke-color",type:v.a.DT_STR,parserHandler:E.setTextStrokecolor},{must:!1,key:"text-fill-color",type:v.a.DT_STR,parserHandler:E.setTextFillColor},{must:!1,key:"text-fill-opacity",type:v.a.DT_NUMBER,parserHandler:E.setTextFillAlpha},{must:!1,key:"text-stroke-opacity",type:v.a.DT_NUMBER,parserHandler:E.setTextStrokeAlpha},{must:!1,key:"text-visibility",type:v.a.DT_BOOL,parserHandler:E.setTextVisibility}],E.layoutParser_=[{must:!1,key:"visibility",type:v.a.DT_BOOL,parserHandler:E.setVisibility},{must:!1,key:"text-size",type:v.a.DT_OBJ,parserHandler:E.setTextSize},{must:!1,key:"text-style",type:v.a.DT_STR,parserHandler:E.setTextStyle},{must:!1,key:"text-outline-size",type:v.a.DT_NUMBER,parserHandler:E.setTextOutlineSize}]},function(t,e,i){"use strict";i.d(e,"a",function(){return r});var r={FILL:"fill",LINE:"line",SYMBOL:"symbol",BACKGROUND:"background",BUILDING:"building"}},function(t,e,i){"use strict";function r(){if(!p){var t=n(),e=void 0;e=t?"":window.INDOOR_IP||"",e=""+e+window.INDOOR_RESOURCE,d=""+e+c.STYLE,f=""+e+c.IMAGE,p=!0}}function n(){var t=document.location.hostname;if("127.0.0.1"===t||"localhost"===t)return!0;if(-1!==t.indexOf(".")){t.split(".").length<4&&console.log("ip address error")}return!1}function o(t){return u.d.hasOwnProperty(t)?(r(),d+"/"+u.d[t]):""}function a(){return r(),f}function s(t){return""+window.INDOOR_IP+h.INDOOR_DATA_ROOTURL+t+"&apikey=5ca3029553574cbb83a170bece7a5daa&c=1.0.1"}function l(){return""+window.INDOOR_IP+h.INDOOR_SERVER_ROOTURL}i.d(e,"b",function(){return l}),i.d(e,"c",function(){return o}),i.d(e,"a",function(){return a}),i.d(e,"d",function(){return s});var u=i(142),h={INDOOR_SERVER_ROOTURL:"/indoor?bf=",INDOOR_DATA_ROOTURL:"/IndoorPullMapServer/V1.1.0?indoorid="},c={STYLE:"/style",IMAGE:"/image"},p=!1,d=void 0,f=void 0},function(t,e,i){"use strict";var r=i(0),n=i(30),o=i(100),a=function(){n.a.call(this)};r.a.inherits(a,n.a),a.prototype.getObject_=function(t){if("string"==typeof t){var e=JSON.parse(t);return e||null}return null!==t?t:null},a.prototype.getType=function(){return o.a.JSON},a.prototype.readFeature=function(t,e){return this.readFeatureFromObject(this.getObject_(t),this.getReadOptions(t,e))},a.prototype.readFeatures=function(t,e){return this.readFeaturesFromObject(this.getObject_(t),this.getReadOptions(t,e))},a.prototype.readFeatureFromObject=function(t,e){},a.prototype.readFeaturesFromObject=function(t,e){},a.prototype.readGeometry=function(t,e){return this.readGeometryFromObject(this.getObject_(t),this.getReadOptions(t,e))},a.prototype.readGeometryFromObject=function(t,e){},a.prototype.readProjection=function(t){return this.readProjectionFromObject(this.getObject_(t))},a.prototype.readProjectionFromObject=function(t){},a.prototype.writeFeature=function(t,e){return JSON.stringify(this.writeFeatureObject(t,e))},a.prototype.writeFeatureObject=function(t,e){},a.prototype.writeFeatures=function(t,e){return JSON.stringify(this.writeFeaturesObject(t,e))},a.prototype.writeFeaturesObject=function(t,e){},a.prototype.writeGeometry=function(t,e){return JSON.stringify(this.writeGeometryObject(t,e))},a.prototype.writeGeometryObject=function(t,e){},e.a=a},function(t,e,i){"use strict";var r=i(0),n=i(6),o=i(30),a=i(100),s=i(64),l=function(){this.xmlSerializer_=new XMLSerializer,o.a.call(this)};r.a.inherits(l,o.a),l.prototype.getType=function(){return a.a.XML},l.prototype.readFeature=function(t,e){if(s.a.isDocument(t))return this.readFeatureFromDocument(t,e);if(s.a.isNode(t))return this.readFeatureFromNode(t,e);if("string"==typeof t){var i=s.a.parse(t);return this.readFeatureFromDocument(i,e)}return null},l.prototype.readFeatureFromDocument=function(t,e){var i=this.readFeaturesFromDocument(t,e);return i.length>0?i[0]:null},l.prototype.readFeatureFromNode=function(t,e){return null},l.prototype.readFeatures=function(t,e){if(s.a.isDocument(t))return this.readFeaturesFromDocument(t,e);if(s.a.isNode(t))return this.readFeaturesFromNode(t,e);if("string"==typeof t){var i=s.a.parse(t);return this.readFeaturesFromDocument(i,e)}return[]},l.prototype.readFeaturesFromDocument=function(t,e){var i,r=[];for(i=t.firstChild;i;i=i.nextSibling)i.nodeType==Node.ELEMENT_NODE&&n.a.extend(r,this.readFeaturesFromNode(i,e));return r},l.prototype.readFeaturesFromNode=function(t,e){},l.prototype.readGeometry=function(t,e){if(s.a.isDocument(t))return this.readGeometryFromDocument(t,e);if(s.a.isNode(t))return this.readGeometryFromNode(t,e);if("string"==typeof t){var i=s.a.parse(t);return this.readGeometryFromDocument(i,e)}return null},l.prototype.readGeometryFromDocument=function(t,e){return null},l.prototype.readGeometryFromNode=function(t,e){return null},l.prototype.readProjection=function(t){if(s.a.isDocument(t))return this.readProjectionFromDocument(t);if(s.a.isNode(t))return this.readProjectionFromNode(t);if("string"==typeof t){var e=s.a.parse(t);return this.readProjectionFromDocument(e)}return null},l.prototype.readProjectionFromDocument=function(t){return this.defaultDataProjection},l.prototype.readProjectionFromNode=function(t){return this.defaultDataProjection},l.prototype.writeFeature=function(t,e){var i=this.writeFeatureNode(t,e);return this.xmlSerializer_.serializeToString(i)},l.prototype.writeFeatureNode=function(t,e){return null},l.prototype.writeFeatures=function(t,e){var i=this.writeFeaturesNode(t,e);return this.xmlSerializer_.serializeToString(i)},l.prototype.writeFeaturesNode=function(t,e){return null},l.prototype.writeGeometry=function(t,e){var i=this.writeGeometryNode(t,e);return this.xmlSerializer_.serializeToString(i)},l.prototype.writeGeometryNode=function(t,e){return null},e.a=l},function(t,e,i){"use strict";var r=i(0),n=i(6),o=i(1),a=i(30),s=i(192),l=i(145),u=i(70),h=i(20),c=i(36),p=i(45),d=i(47),f=i(27),_=i(2),g=i(8),y=i(64),v=function(t){var e=t||{};s.a.call(this,e),this.surface_=void 0!==e.surface&&e.surface,this.curve_=void 0!==e.curve&&e.curve,this.multiCurve_=void 0===e.multiCurve||e.multiCurve,this.multiSurface_=void 0===e.multiSurface||e.multiSurface,this.schemaLocation=e.schemaLocation?e.schemaLocation:v.schemaLocation_,this.hasZ=void 0!==e.hasZ&&e.hasZ};r.a.inherits(v,s.a),v.schemaLocation_=s.a.GMLNS+" http://schemas.opengis.net/gml/3.1.1/profiles/gmlsfProfile/1.0.0/gmlsf.xsd",v.prototype.readMultiCurve_=function(t,e){var i=y.a.pushParseAndPop([],this.MULTICURVE_PARSERS_,t,e,this);if(i){var r=new p.a(null);return r.setLineStrings(i),r}},v.prototype.readMultiSurface_=function(t,e){var i=y.a.pushParseAndPop([],this.MULTISURFACE_PARSERS_,t,e,this);if(i){var r=new d.a(null);return r.setPolygons(i),r}},v.prototype.curveMemberParser_=function(t,e){y.a.parseNode(this.CURVEMEMBER_PARSERS_,t,e,this)},v.prototype.surfaceMemberParser_=function(t,e){y.a.parseNode(this.SURFACEMEMBER_PARSERS_,t,e,this)},v.prototype.readPatch_=function(t,e){return y.a.pushParseAndPop([null],this.PATCHES_PARSERS_,t,e,this)},v.prototype.readSegment_=function(t,e){return y.a.pushParseAndPop([null],this.SEGMENTS_PARSERS_,t,e,this)},v.prototype.readPolygonPatch_=function(t,e){return y.a.pushParseAndPop([null],this.FLAT_LINEAR_RINGS_PARSERS_,t,e,this)},v.prototype.readLineStringSegment_=function(t,e){return y.a.pushParseAndPop([null],this.GEOMETRY_FLAT_COORDINATES_PARSERS_,t,e,this)},v.prototype.interiorParser_=function(t,e){var i=y.a.pushParseAndPop(void 0,this.RING_PARSERS,t,e,this);if(i){e[e.length-1].push(i)}},v.prototype.exteriorParser_=function(t,e){var i=y.a.pushParseAndPop(void 0,this.RING_PARSERS,t,e,this);if(i){e[e.length-1][0]=i}},v.prototype.readSurface_=function(t,e){var i=y.a.pushParseAndPop([null],this.SURFACE_PARSERS_,t,e,this);if(i&&i[0]){var r,o,a=new f.a(null),s=i[0],l=[s.length];for(r=1,o=i.length;r<o;++r)n.a.extend(s,i[r]),l.push(s.length);return a.setFlatCoordinates(h.a.XYZ,s,l),a}},v.prototype.readCurve_=function(t,e){var i=y.a.pushParseAndPop([null],this.CURVE_PARSERS_,t,e,this);if(i){var r=new c.a(null);return r.setFlatCoordinates(h.a.XYZ,i),r}},v.prototype.readEnvelope_=function(t,e){var i=y.a.pushParseAndPop([null],this.ENVELOPE_PARSERS_,t,e,this);return o.a.createOrUpdate(i[1][0],i[1][1],i[2][0],i[2][1])},v.prototype.readFlatPos_=function(t,e){for(var i,r=y.a.getAllTextContent(t,!1),n=/^\s*([+\-]?\d*\.?\d+(?:[eE][+\-]?\d+)?)\s*/,o=[];i=n.exec(r);)o.push(parseFloat(i[1])),r=r.substr(i[0].length);if(""===r){var a=e[0],s=a.srsName,l="enu";if(s){l=g.a.get(s).getAxisOrientation()}if("neu"===l){var u,h;for(u=0,h=o.length;u<h;u+=3){var c=o[u],p=o[u+1];o[u]=p,o[u+1]=c}}var d=o.length;if(2==d&&o.push(0),0!==d)return o}},v.prototype.readFlatPosList_=function(t,e){var i=y.a.getAllTextContent(t,!1).replace(/^\s*|\s*$/g,""),r=e[0],n=r.srsName,o=r.srsDimension,a="enu";if(n){a=g.a.get(n).getAxisOrientation()}var s=i.split(/\s+/),u=2;t.getAttribute("srsDimension")?u=l.a.readNonNegativeIntegerString(t.getAttribute("srsDimension")):t.getAttribute("dimension")?u=l.a.readNonNegativeIntegerString(t.getAttribute("dimension")):t.parentNode.getAttribute("srsDimension")?u=l.a.readNonNegativeIntegerString(t.parentNode.getAttribute("srsDimension")):o&&(u=l.a.readNonNegativeIntegerString(o));for(var h,c,p,d=[],f=0,_=s.length;f<_;f+=u)h=parseFloat(s[f]),c=parseFloat(s[f+1]),p=3===u?parseFloat(s[f+2]):0,"en"===a.substr(0,2)?d.push(h,c,p):d.push(c,h,p);return d},v.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS_={"http://www.opengis.net/gml":{pos:y.a.makeReplacer(v.prototype.readFlatPos_),posList:y.a.makeReplacer(v.prototype.readFlatPosList_)}},v.prototype.FLAT_LINEAR_RINGS_PARSERS_={"http://www.opengis.net/gml":{interior:v.prototype.interiorParser_,exterior:v.prototype.exteriorParser_}},v.prototype.GEOMETRY_PARSERS_={"http://www.opengis.net/gml":{Point:y.a.makeReplacer(s.a.prototype.readPoint),MultiPoint:y.a.makeReplacer(s.a.prototype.readMultiPoint),LineString:y.a.makeReplacer(s.a.prototype.readLineString),MultiLineString:y.a.makeReplacer(s.a.prototype.readMultiLineString),LinearRing:y.a.makeReplacer(s.a.prototype.readLinearRing),Polygon:y.a.makeReplacer(s.a.prototype.readPolygon),MultiPolygon:y.a.makeReplacer(s.a.prototype.readMultiPolygon),Surface:y.a.makeReplacer(v.prototype.readSurface_),MultiSurface:y.a.makeReplacer(v.prototype.readMultiSurface_),Curve:y.a.makeReplacer(v.prototype.readCurve_),MultiCurve:y.a.makeReplacer(v.prototype.readMultiCurve_),Envelope:y.a.makeReplacer(v.prototype.readEnvelope_)}},v.prototype.MULTICURVE_PARSERS_={"http://www.opengis.net/gml":{curveMember:y.a.makeArrayPusher(v.prototype.curveMemberParser_),curveMembers:y.a.makeArrayPusher(v.prototype.curveMemberParser_)}},v.prototype.MULTISURFACE_PARSERS_={"http://www.opengis.net/gml":{surfaceMember:y.a.makeArrayPusher(v.prototype.surfaceMemberParser_),surfaceMembers:y.a.makeArrayPusher(v.prototype.surfaceMemberParser_)}},v.prototype.CURVEMEMBER_PARSERS_={"http://www.opengis.net/gml":{LineString:y.a.makeArrayPusher(s.a.prototype.readLineString),Curve:y.a.makeArrayPusher(v.prototype.readCurve_)}},v.prototype.SURFACEMEMBER_PARSERS_={"http://www.opengis.net/gml":{Polygon:y.a.makeArrayPusher(s.a.prototype.readPolygon),Surface:y.a.makeArrayPusher(v.prototype.readSurface_)}},v.prototype.SURFACE_PARSERS_={"http://www.opengis.net/gml":{patches:y.a.makeReplacer(v.prototype.readPatch_)}},v.prototype.CURVE_PARSERS_={"http://www.opengis.net/gml":{segments:y.a.makeReplacer(v.prototype.readSegment_)}},v.prototype.ENVELOPE_PARSERS_={"http://www.opengis.net/gml":{lowerCorner:y.a.makeArrayPusher(v.prototype.readFlatPosList_),upperCorner:y.a.makeArrayPusher(v.prototype.readFlatPosList_)}},v.prototype.PATCHES_PARSERS_={"http://www.opengis.net/gml":{PolygonPatch:y.a.makeReplacer(v.prototype.readPolygonPatch_)}},v.prototype.SEGMENTS_PARSERS_={"http://www.opengis.net/gml":{LineStringSegment:y.a.makeReplacer(v.prototype.readLineStringSegment_)}},v.prototype.writePos_=function(t,e,i){var r=i[i.length-1],n=r.hasZ,o=n?3:2;t.setAttribute("srsDimension",o);var a=r.srsName,s="enu";a&&(s=g.a.get(a).getAxisOrientation());var u,h=e.getCoordinates();if(u="en"===s.substr(0,2)?h[0]+" "+h[1]:h[1]+" "+h[0],n){u+=" "+(h[2]||0)}l.a.writeStringTextNode(t,u)},v.prototype.getCoords_=function(t,e,i){var r="enu";e&&(r=g.a.get(e).getAxisOrientation());var n="en"===r.substr(0,2)?t[0]+" "+t[1]:t[1]+" "+t[0];if(i){n+=" "+(t[2]||0)}return n},v.prototype.writePosList_=function(t,e,i){var r=i[i.length-1],n=r.hasZ,o=n?3:2;t.setAttribute("srsDimension",o);for(var a,s=r.srsName,u=e.getCoordinates(),h=u.length,c=new Array(h),p=0;p<h;++p)a=u[p],c[p]=this.getCoords_(a,s,n);l.a.writeStringTextNode(t,c.join(" "))},v.prototype.writePoint_=function(t,e,i){var r=i[i.length-1],n=r.srsName;n&&t.setAttribute("srsName",n);var o=y.a.createElementNS(t.namespaceURI,"pos");t.appendChild(o),this.writePos_(o,e,i)},v.ENVELOPE_SERIALIZERS_={"http://www.opengis.net/gml":{lowerCorner:y.a.makeChildAppender(l.a.writeStringTextNode),upperCorner:y.a.makeChildAppender(l.a.writeStringTextNode)}},v.prototype.writeEnvelope=function(t,e,i){var r=i[i.length-1],n=r.srsName;n&&t.setAttribute("srsName",n);var o=["lowerCorner","upperCorner"],a=[e[0]+" "+e[1],e[2]+" "+e[3]];y.a.pushSerializeAndPop({node:t},v.ENVELOPE_SERIALIZERS_,y.a.OBJECT_PROPERTY_NODE_FACTORY,a,i,o,this)},v.prototype.writeLinearRing_=function(t,e,i){var r=i[i.length-1],n=r.srsName;n&&t.setAttribute("srsName",n);var o=y.a.createElementNS(t.namespaceURI,"posList");t.appendChild(o),this.writePosList_(o,e,i)},v.prototype.RING_NODE_FACTORY_=function(t,e,i){var r=e[e.length-1],n=r.node,o=r.exteriorWritten;return void 0===o&&(r.exteriorWritten=!0),y.a.createElementNS(n.namespaceURI,void 0!==o?"interior":"exterior")},v.prototype.writeSurfaceOrPolygon_=function(t,e,i){var r=i[i.length-1],n=r.hasZ,o=r.srsName;if("PolygonPatch"!==t.nodeName&&o&&t.setAttribute("srsName",o),"Polygon"===t.nodeName||"PolygonPatch"===t.nodeName){var a=e.getLinearRings();y.a.pushSerializeAndPop({node:t,hasZ:n,srsName:o},v.RING_SERIALIZERS_,this.RING_NODE_FACTORY_,a,i,void 0,this)}else if("Surface"===t.nodeName){var s=y.a.createElementNS(t.namespaceURI,"patches");t.appendChild(s),this.writeSurfacePatches_(s,e,i)}},v.prototype.writeCurveOrLineString_=function(t,e,i){var r=i[i.length-1],n=r.srsName;if("LineStringSegment"!==t.nodeName&&n&&t.setAttribute("srsName",n),"LineString"===t.nodeName||"LineStringSegment"===t.nodeName){var o=y.a.createElementNS(t.namespaceURI,"posList");t.appendChild(o),this.writePosList_(o,e,i)}else if("Curve"===t.nodeName){var a=y.a.createElementNS(t.namespaceURI,"segments");t.appendChild(a),this.writeCurveSegments_(a,e,i)}},v.prototype.writeMultiSurfaceOrPolygon_=function(t,e,i){var r=i[i.length-1],n=r.hasZ,o=r.srsName,a=r.surface;o&&t.setAttribute("srsName",o);var s=e.getPolygons();y.a.pushSerializeAndPop({node:t,hasZ:n,srsName:o,surface:a},v.SURFACEORPOLYGONMEMBER_SERIALIZERS_,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,s,i,void 0,this)},v.prototype.writeMultiPoint_=function(t,e,i){var r=i[i.length-1],n=r.srsName,o=r.hasZ;n&&t.setAttribute("srsName",n);var a=e.getPoints();y.a.pushSerializeAndPop({node:t,hasZ:o,srsName:n},v.POINTMEMBER_SERIALIZERS_,y.a.makeSimpleNodeFactory("pointMember"),a,i,void 0,this)},v.prototype.writeMultiCurveOrLineString_=function(t,e,i){var r=i[i.length-1],n=r.hasZ,o=r.srsName,a=r.curve;o&&t.setAttribute("srsName",o);var s=e.getLineStrings();y.a.pushSerializeAndPop({node:t,hasZ:n,srsName:o,curve:a},v.LINESTRINGORCURVEMEMBER_SERIALIZERS_,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,s,i,void 0,this)},v.prototype.writeRing_=function(t,e,i){var r=y.a.createElementNS(t.namespaceURI,"LinearRing");t.appendChild(r),this.writeLinearRing_(r,e,i)},v.prototype.writeSurfaceOrPolygonMember_=function(t,e,i){var r=this.GEOMETRY_NODE_FACTORY_(e,i);r&&(t.appendChild(r),this.writeSurfaceOrPolygon_(r,e,i))},v.prototype.writePointMember_=function(t,e,i){var r=y.a.createElementNS(t.namespaceURI,"Point");t.appendChild(r),this.writePoint_(r,e,i)},v.prototype.writeLineStringOrCurveMember_=function(t,e,i){var r=this.GEOMETRY_NODE_FACTORY_(e,i);r&&(t.appendChild(r),this.writeCurveOrLineString_(r,e,i))},v.prototype.writeSurfacePatches_=function(t,e,i){var r=y.a.createElementNS(t.namespaceURI,"PolygonPatch");t.appendChild(r),this.writeSurfaceOrPolygon_(r,e,i)},v.prototype.writeCurveSegments_=function(t,e,i){var r=y.a.createElementNS(t.namespaceURI,"LineStringSegment");t.appendChild(r),this.writeCurveOrLineString_(r,e,i)},v.prototype.writeGeometryElement=function(t,e,i){var r=i[i.length-1],n=_.a.assign({},r);n.node=t;var o;o=Array.isArray(e)?r.dataProjection?g.a.transformExtent(e,r.featureProjection,r.dataProjection):e:a.a.transformWithOptions(e,!0,r),y.a.pushSerializeAndPop(n,v.GEOMETRY_SERIALIZERS_,this.GEOMETRY_NODE_FACTORY_,[o],i,void 0,this)},v.prototype.writeFeatureElement=function(t,e,i){var r=e.getId();r&&t.setAttribute("fid",r);var n=i[i.length-1],o=n.featureNS,a=e.getGeometryName();n.serializers||(n.serializers={},n.serializers[o]={});var s=e.getProperties(),h=[],c=[];for(var p in s){var d=s[p];null!==d&&(h.push(p),c.push(d),p==a||d instanceof u.a?p in n.serializers[o]||(n.serializers[o][p]=y.a.makeChildAppender(this.writeGeometryElement,this)):p in n.serializers[o]||(n.serializers[o][p]=y.a.makeChildAppender(l.a.writeStringTextNode)))}var f=_.a.assign({},n);f.node=t,y.a.pushSerializeAndPop(f,n.serializers,y.a.makeSimpleNodeFactory(void 0,o),c,i,h)},v.prototype.writeFeatureMembers_=function(t,e,i){var r=i[i.length-1],n=r.featureType,o=r.featureNS,a={};a[o]={},a[o][n]=y.a.makeChildAppender(this.writeFeatureElement,this);var s=_.a.assign({},r);s.node=t,y.a.pushSerializeAndPop(s,a,y.a.makeSimpleNodeFactory(n,o),e,i)},v.SURFACEORPOLYGONMEMBER_SERIALIZERS_={"http://www.opengis.net/gml":{surfaceMember:y.a.makeChildAppender(v.prototype.writeSurfaceOrPolygonMember_),polygonMember:y.a.makeChildAppender(v.prototype.writeSurfaceOrPolygonMember_)}},v.POINTMEMBER_SERIALIZERS_={"http://www.opengis.net/gml":{pointMember:y.a.makeChildAppender(v.prototype.writePointMember_)}},v.LINESTRINGORCURVEMEMBER_SERIALIZERS_={"http://www.opengis.net/gml":{lineStringMember:y.a.makeChildAppender(v.prototype.writeLineStringOrCurveMember_),curveMember:y.a.makeChildAppender(v.prototype.writeLineStringOrCurveMember_)}},v.RING_SERIALIZERS_={"http://www.opengis.net/gml":{exterior:y.a.makeChildAppender(v.prototype.writeRing_),interior:y.a.makeChildAppender(v.prototype.writeRing_)}},v.GEOMETRY_SERIALIZERS_={"http://www.opengis.net/gml":{Curve:y.a.makeChildAppender(v.prototype.writeCurveOrLineString_),MultiCurve:y.a.makeChildAppender(v.prototype.writeMultiCurveOrLineString_),Point:y.a.makeChildAppender(v.prototype.writePoint_),MultiPoint:y.a.makeChildAppender(v.prototype.writeMultiPoint_),LineString:y.a.makeChildAppender(v.prototype.writeCurveOrLineString_),MultiLineString:y.a.makeChildAppender(v.prototype.writeMultiCurveOrLineString_),LinearRing:y.a.makeChildAppender(v.prototype.writeLinearRing_),Polygon:y.a.makeChildAppender(v.prototype.writeSurfaceOrPolygon_),MultiPolygon:y.a.makeChildAppender(v.prototype.writeMultiSurfaceOrPolygon_),Surface:y.a.makeChildAppender(v.prototype.writeSurfaceOrPolygon_),MultiSurface:y.a.makeChildAppender(v.prototype.writeMultiSurfaceOrPolygon_),Envelope:y.a.makeChildAppender(v.prototype.writeEnvelope)}},v.MULTIGEOMETRY_TO_MEMBER_NODENAME_={MultiLineString:"lineStringMember",MultiCurve:"curveMember",MultiPolygon:"polygonMember",MultiSurface:"surfaceMember"},v.prototype.MULTIGEOMETRY_MEMBER_NODE_FACTORY_=function(t,e,i){var r=e[e.length-1].node;return y.a.createElementNS("http://www.opengis.net/gml",v.MULTIGEOMETRY_TO_MEMBER_NODENAME_[r.nodeName])},v.prototype.GEOMETRY_NODE_FACTORY_=function(t,e,i){var r,n=e[e.length-1],o=n.multiSurface,a=n.surface,s=n.curve,l=n.multiCurve;return Array.isArray(t)?r="Envelope":(r=t.getType(),"MultiPolygon"===r&&!0===o?r="MultiSurface":"Polygon"===r&&!0===a?r="Surface":"LineString"===r&&!0===s?r="Curve":"MultiLineString"===r&&!0===l&&(r="MultiCurve")),y.a.createElementNS("http://www.opengis.net/gml",r)},v.prototype.writeGeometryNode=function(t,e){e=this.adaptOptions(e);var i=y.a.createElementNS("http://www.opengis.net/gml","geom"),r={node:i,hasZ:this.hasZ,srsName:this.srsName,curve:this.curve_,surface:this.surface_,multiSurface:this.multiSurface_,multiCurve:this.multiCurve_};return e&&_.a.assign(r,e),this.writeGeometryElement(i,t,[r]),i},v.prototype.writeFeatures,v.prototype.writeFeaturesNode=function(t,e){e=this.adaptOptions(e);var i=y.a.createElementNS("http://www.opengis.net/gml","featureMembers");y.a.setAttributeNS(i,"http://www.w3.org/2001/XMLSchema-instance","xsi:schemaLocation",this.schemaLocation);var r={srsName:this.srsName,hasZ:this.hasZ,curve:this.curve_,surface:this.surface_,multiSurface:this.multiSurface_,multiCurve:this.multiCurve_,featureNS:this.featureNS,featureType:this.featureType};return e&&_.a.assign(r,e),this.writeFeatureMembers_(i,t,[r]),i},e.a=v},function(t,e,i){"use strict";var r=i(0),n=i(6),o=i(42),a=i(30),s=i(190),l=i(20),u=i(36),h=i(124),c=i(45),p=i(46),d=i(47),f=i(26),_=i(27),g=i(2),y=i(8),v=i(64),m=function(t){var e=t||{};this.featureType=e.featureType,this.featureNS=e.featureNS,this.srsName=e.srsName,this.schemaLocation="",this.FEATURE_COLLECTION_PARSERS={},this.FEATURE_COLLECTION_PARSERS[m.GMLNS]={featureMember:v.a.makeReplacer(m.prototype.readFeaturesInternal),featureMembers:v.a.makeReplacer(m.prototype.readFeaturesInternal)},s.a.call(this)};r.a.inherits(m,s.a),m.GMLNS="http://www.opengis.net/gml",m.ONLY_WHITESPACE_RE_=/^[\s\xa0]*$/,m.prototype.readFeaturesInternal=function(t,e){var i=t.localName,r=null;if("FeatureCollection"==i)r="http://www.opengis.net/wfs"===t.namespaceURI?v.a.pushParseAndPop([],this.FEATURE_COLLECTION_PARSERS,t,e,this):v.a.pushParseAndPop(null,this.FEATURE_COLLECTION_PARSERS,t,e,this);else if("featureMembers"==i||"featureMember"==i){var n,o,a=e[0],s=a.featureType,l=a.featureNS;if(!s&&t.childNodes){for(s=[],l={},n=0,o=t.childNodes.length;n<o;++n){var u=t.childNodes[n];if(1===u.nodeType){var h=u.nodeName.split(":").pop();if(-1===s.indexOf(h)){var c="",p=0,d=u.namespaceURI;for(var f in l){if(l[f]===d){c=f;break}++p}c||(c="p"+p,l[c]=d),s.push(c+":"+h)}}}"featureMember"!=i&&(a.featureType=s,a.featureNS=l)}if("string"==typeof l){var _=l;l={},l.p0=_}var g={},y=Array.isArray(s)?s:[s];for(var m in l){var E={};for(n=0,o=y.length;n<o;++n){var T=-1===y[n].indexOf(":")?"p0":y[n].split(":")[0];T===m&&(E[y[n].split(":").pop()]="featureMembers"==i?v.a.makeArrayPusher(this.readFeatureElement,this):v.a.makeReplacer(this.readFeatureElement,this))}g[l[m]]=E}r="featureMember"==i?v.a.pushParseAndPop(void 0,g,t,e):v.a.pushParseAndPop([],g,t,e)}return null===r&&(r=[]),r},m.prototype.readGeometryElement=function(t,e){var i=e[0];i.srsName=t.firstElementChild.getAttribute("srsName"),i.srsDimension=t.firstElementChild.getAttribute("srsDimension");var r=v.a.pushParseAndPop(null,this.GEOMETRY_PARSERS_,t,e,this);return r?a.a.transformWithOptions(r,!1,i):void 0},m.prototype.readFeatureElement=function(t,e){var i,r,n=t.getAttribute("fid")||v.a.getAttributeNS(t,m.GMLNS,"id"),a={};for(i=t.firstElementChild;i;i=i.nextElementSibling){var s=i.localName;if(0===i.childNodes.length||1===i.childNodes.length&&(3===i.firstChild.nodeType||4===i.firstChild.nodeType)){var l=v.a.getAllTextContent(i,!1);m.ONLY_WHITESPACE_RE_.test(l)&&(l=void 0),a[s]=l}else"boundedBy"!==s&&(r=s),a[s]=this.readGeometryElement(i,e)}var u=new o.a(a);return r&&u.setGeometryName(r),n&&u.setId(n),u},m.prototype.readPoint=function(t,e){var i=this.readFlatCoordinatesFromNode_(t,e);if(i){var r=new f.a(null);return r.setFlatCoordinates(l.a.XYZ,i),r}},m.prototype.readMultiPoint=function(t,e){var i=v.a.pushParseAndPop([],this.MULTIPOINT_PARSERS_,t,e,this);return i?new p.a(i):void 0},m.prototype.readMultiLineString=function(t,e){var i=v.a.pushParseAndPop([],this.MULTILINESTRING_PARSERS_,t,e,this);if(i){var r=new c.a(null);return r.setLineStrings(i),r}},m.prototype.readMultiPolygon=function(t,e){var i=v.a.pushParseAndPop([],this.MULTIPOLYGON_PARSERS_,t,e,this);if(i){var r=new d.a(null);return r.setPolygons(i),r}},m.prototype.pointMemberParser_=function(t,e){v.a.parseNode(this.POINTMEMBER_PARSERS_,t,e,this)},m.prototype.lineStringMemberParser_=function(t,e){v.a.parseNode(this.LINESTRINGMEMBER_PARSERS_,t,e,this)},m.prototype.polygonMemberParser_=function(t,e){v.a.parseNode(this.POLYGONMEMBER_PARSERS_,t,e,this)},m.prototype.readLineString=function(t,e){var i=this.readFlatCoordinatesFromNode_(t,e);if(i){var r=new u.a(null);return r.setFlatCoordinates(l.a.XYZ,i),r}},m.prototype.readFlatLinearRing_=function(t,e){var i=v.a.pushParseAndPop(null,this.GEOMETRY_FLAT_COORDINATES_PARSERS_,t,e,this);return i||void 0},m.prototype.readLinearRing=function(t,e){var i=this.readFlatCoordinatesFromNode_(t,e);if(i){var r=new h.a(null);return r.setFlatCoordinates(l.a.XYZ,i),r}},m.prototype.readPolygon=function(t,e){var i=v.a.pushParseAndPop([null],this.FLAT_LINEAR_RINGS_PARSERS_,t,e,this);if(i&&i[0]){var r,o,a=new _.a(null),s=i[0],u=[s.length];for(r=1,o=i.length;r<o;++r)n.a.extend(s,i[r]),u.push(s.length);return a.setFlatCoordinates(l.a.XYZ,s,u),a}},m.prototype.readFlatCoordinatesFromNode_=function(t,e){return v.a.pushParseAndPop(null,this.GEOMETRY_FLAT_COORDINATES_PARSERS_,t,e,this)},m.prototype.MULTIPOINT_PARSERS_={"http://www.opengis.net/gml":{pointMember:v.a.makeArrayPusher(m.prototype.pointMemberParser_),pointMembers:v.a.makeArrayPusher(m.prototype.pointMemberParser_)}},m.prototype.MULTILINESTRING_PARSERS_={"http://www.opengis.net/gml":{lineStringMember:v.a.makeArrayPusher(m.prototype.lineStringMemberParser_),lineStringMembers:v.a.makeArrayPusher(m.prototype.lineStringMemberParser_)}},m.prototype.MULTIPOLYGON_PARSERS_={"http://www.opengis.net/gml":{polygonMember:v.a.makeArrayPusher(m.prototype.polygonMemberParser_),polygonMembers:v.a.makeArrayPusher(m.prototype.polygonMemberParser_)}},m.prototype.POINTMEMBER_PARSERS_={"http://www.opengis.net/gml":{Point:v.a.makeArrayPusher(m.prototype.readFlatCoordinatesFromNode_)}},m.prototype.LINESTRINGMEMBER_PARSERS_={"http://www.opengis.net/gml":{LineString:v.a.makeArrayPusher(m.prototype.readLineString)}},m.prototype.POLYGONMEMBER_PARSERS_={"http://www.opengis.net/gml":{Polygon:v.a.makeArrayPusher(m.prototype.readPolygon)}},m.prototype.RING_PARSERS={"http://www.opengis.net/gml":{LinearRing:v.a.makeReplacer(m.prototype.readFlatLinearRing_)}},m.prototype.readGeometryFromNode=function(t,e){var i=this.readGeometryElement(t,[this.getReadOptions(t,e||{})]);return i||null},m.prototype.readFeatures,m.prototype.readFeaturesFromNode=function(t,e){var i={featureType:this.featureType,featureNS:this.featureNS};return e&&g.a.assign(i,this.getReadOptions(t,e)),this.readFeaturesInternal(t,[i])||[]},m.prototype.readProjectionFromNode=function(t){return y.a.get(this.srsName?this.srsName:t.firstElementChild.getAttribute("srsName"))},e.a=m},function(t,e,i){"use strict";var r=i(0),n=i(106),o=function(t,e,i,r){n.a.call(this,t),this.geometryName=e||"the_geom",this.geometry=i,this.srsName=r};r.a.inherits(o,n.a),e.a=o},function(t,e,i){"use strict";function r(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e?h.a.transform(t,"EPSG:3857","EPSG:4326"):h.a.transform(t,"EPSG:4326","EPSG:3857")}function n(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e?h.a.transformExtent(t,"EPSG:3857","EPSG:4326"):h.a.transformExtent(t,"EPSG:4326","EPSG:3857")}function o(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=[];if(e){var r=Object(c.gcjToWgs84)(t[1],t[0]);i.push(r.lon),i.push(r.lat)}else{var n=Object(c.wgs84ToGcj)(t[1],t[0]);i.push(n.lon),i.push(n.lat)}return i}function a(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=[];if("Polygon"===e){var n=!0,a=!1,s=void 0;try{for(var l,h=u()(t);!(n=(l=h.next()).done);n=!0){for(var c=l.value,p=[],d=0;d<c.length;d++)p.push(o(c[d],i));r.push(p)}}catch(t){a=!0,s=t}finally{try{!n&&h.return&&h.return()}finally{if(a)throw s}}}else if("LineString"===e)for(var f=0;f<t.length;f++)r.push(o(t[f],i));else"Point"===e&&(r=o(t,i));return r}function s(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return i?h.a.transform(t,e,"EPSG:4326"):h.a.transform(t,"EPSG:4326",e)}Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"normalTransform",function(){return r}),i.d(e,"normalExtentTransform",function(){return n}),i.d(e,"gcjTransform",function(){return o}),i.d(e,"definedProjTransform",function(){return s}),i.d(e,"geomGcjTransform",function(){return a});var l=i(31),u=i.n(l),h=i(8),c=i(275)},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}i.d(e,"a",function(){return u});var n=i(3),o=i.n(n),a=i(188),s=i(108),l=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),o()(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),u=function(){function t(){r(this,t)}return l(t,null,[{key:"getPoiImagesUrlByStyleType",value:function(e,i){var r=a.a();if(i){if("dark"===e)return r+t.poiImagesStyleType.dark+i+".png";if("light"===e)return r+t.poiImagesStyleType.light+i+".png"}return""}},{key:"getIndoorServerUrl",value:function(t,e,i){for(var r=a.b(),n=r+(t[0].buildId+",")+t[0].floorId,o=1;o<t.length;++o)n+="&bf="+t[o].buildId+","+t[o].floorId;return"dark"==e?n+="&style=dark_style":"light"==e&&(n+="&style=light_style"),i!=s.LanguageType.CHINESE&&(n=n+"&language="+i),n}}]),t}();u.POI_FRAME_MARGIN=20,u.POI_IMG_TXT_MARGIN=2,u.POI_ICON_SIZE=56,u.poiImagesStyleType={dark:"/darkImages/",light:"/lightImages/"}},function(t,e,i){"use strict";i.d(e,"b",function(){return n}),i.d(e,"c",function(){return o}),i.d(e,"a",function(){return a});var r=i(231),n={LAYERADD:"layeradd",LAYERREMOVE:"layerremove"},o={RESIZE:r.a.RESIZE,ZOOMCHANGE:"zoomchange",CENTERCHANGE:"centerchange",LOAD:r.a.LOAD,UNLOAD:r.a.UNLOAD,MOVESTART:"movestart",MOVEEND:"moveend"},a={SINGLECLICK:"singleclick",CLICK:r.a.CLICK,DBLCLICK:r.a.DBLCLICK,CONTEXTMENU:"contextmenu",KEYPRESS:r.a.KEYPRESS,POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout"}},function(t,e,i){"use strict";var r=i(0),n=i(43),o=i(12),a=i(109),s={};s.defaultOrder=function(t,e){return r.a.getUid(t)-r.a.getUid(e)},s.getSquaredTolerance=function(t,e){var i=s.getTolerance(t,e);return i*i},s.getTolerance=function(t,e){return r.a.SIMPLIFY_TOLERANCE*t/e},s.renderCircleGeometry_=function(t,e,i,r){var n=i.getFill(),o=i.getStroke();if(n||o){var s=t.getReplay(i.getZIndex(),a.a.CIRCLE);s.setFillStrokeStyle(n,o),s.drawCircle(e,r)}var l=i.getText();if(l){var u=t.getReplay(i.getZIndex(),a.a.TEXT);u.setTextStyle(l,t.addDeclutter(!1)),u.drawText(e,r)}},s.renderFeature=function(t,e,i,r,o,a){var l,u,h=!1;return l=i.getImage(),l&&(u=l.getImageState(),u==n.a.LOADED||u==n.a.ERROR?l.unlistenImageChange(o,a):(u==n.a.IDLE&&l.load(),u=l.getImageState(),l.listenImageChange(o,a),h=!0)),s.renderFeature_(t,e,i,r),h},s.renderFeature_=function(t,e,i,r){var n=i.getGeometryFunction()(e);if(n){var o=n.getSimplifiedGeometry(r);if(i.getRenderer())s.renderGeometry_(t,o,i,e);else{(0,s.GEOMETRY_RENDERERS_[o.getType()])(t,o,i,e)}}},s.renderGeometry_=function(t,e,i,r){if(e.getType()!=o.a.GEOMETRY_COLLECTION){t.getReplay(i.getZIndex(),a.a.DEFAULT).drawCustom(e,r,i.getRenderer())}else for(var n=e.getGeometries(),l=0,u=n.length;l<u;++l)s.renderGeometry_(t,n[l],i,r)},s.renderGeometryCollectionGeometry_=function(t,e,i,r){var n,o,a=e.getGeometriesArray();for(n=0,o=a.length;n<o;++n){(0,s.GEOMETRY_RENDERERS_[a[n].getType()])(t,a[n],i,r)}},s.renderLineStringGeometry_=function(t,e,i,r){var n=i.getStroke();if(n){var o=t.getReplay(i.getZIndex(),a.a.LINE_STRING);o.setFillStrokeStyle(null,n),o.drawLineString(e,r)}var s=i.getText();if(s){var l=t.getReplay(i.getZIndex(),a.a.TEXT);l.setTextStyle(s,t.addDeclutter(!1)),l.drawText(e,r)}},s.renderMultiLineStringGeometry_=function(t,e,i,r){var n=i.getStroke();if(n){var o=t.getReplay(i.getZIndex(),a.a.LINE_STRING);o.setFillStrokeStyle(null,n),o.drawMultiLineString(e,r)}var s=i.getText();if(s){var l=t.getReplay(i.getZIndex(),a.a.TEXT);l.setTextStyle(s,t.addDeclutter(!1)),l.drawText(e,r)}},s.renderMultiPolygonGeometry_=function(t,e,i,r){var n=i.getFill(),o=i.getStroke();if(o||n){var s=t.getReplay(i.getZIndex(),a.a.POLYGON);s.setFillStrokeStyle(n,o),s.drawMultiPolygon(e,r)}var l=i.getText();if(l){var u=t.getReplay(i.getZIndex(),a.a.TEXT);u.setTextStyle(l,t.addDeclutter(!1)),u.drawText(e,r)}},s.renderPointGeometry_=function(t,e,i,r){var o=i.getImage();if(o){if(o.getImageState()!=n.a.LOADED)return;var s=t.getReplay(i.getZIndex(),a.a.IMAGE);s.setImageStyle(o,t.addDeclutter(!1)),s.drawPoint(e,r)}var l=i.getText();if(l){var u=t.getReplay(i.getZIndex(),a.a.TEXT);u.setTextStyle(l,t.addDeclutter(!!o)),u.drawText(e,r)}},s.renderMultiPointGeometry_=function(t,e,i,r){var o=i.getImage();if(o){if(o.getImageState()!=n.a.LOADED)return;var s=t.getReplay(i.getZIndex(),a.a.IMAGE);s.setImageStyle(o,t.addDeclutter(!1)),s.drawMultiPoint(e,r)}var l=i.getText();if(l){var u=t.getReplay(i.getZIndex(),a.a.TEXT);u.setTextStyle(l,t.addDeclutter(!!o)),u.drawText(e,r)}},s.renderPolygonGeometry_=function(t,e,i,r){var n=i.getFill(),o=i.getStroke();if(n||o){var s=t.getReplay(i.getZIndex(),a.a.POLYGON);s.setFillStrokeStyle(n,o),s.drawPolygon(e,r)}var l=i.getText();if(l){var u=t.getReplay(i.getZIndex(),a.a.TEXT);u.setTextStyle(l,t.addDeclutter(!1)),u.drawText(e,r)}},s.GEOMETRY_RENDERERS_={Point:s.renderPointGeometry_,LineString:s.renderLineStringGeometry_,Polygon:s.renderPolygonGeometry_,MultiPoint:s.renderMultiPointGeometry_,MultiLineString:s.renderMultiLineStringGeometry_,MultiPolygon:s.renderMultiPolygonGeometry_,GeometryCollection:s.renderGeometryCollectionGeometry_,Circle:s.renderCircleGeometry_},e.a=s},function(t,e,i){"use strict";var r=i(0),n=i(146),o=i(73),a=i(290),s=i(285),l=i(513),u=i(514),h=i(16),c=i(293),p=i(21),d=i(76),f=i(150),_=function(t,e){s.a.call(this,e),this.mapRenderer=t,this.arrayBuffer_=new d.a([-1,-1,0,0,1,-1,1,0,-1,1,0,1,1,1,1,1]),this.texture=null,this.framebuffer=null,this.framebufferDimension=void 0,this.texCoordMatrix=h.a.create(),this.projectionMatrix=h.a.create(),this.tmpMat4_=c.a.create(),this.defaultLocations_=null};r.a.inherits(_,s.a),_.prototype.bindFramebuffer=function(t,e){var i=this.mapRenderer.getGL();if(void 0===this.framebufferDimension||this.framebufferDimension!=e){var r=function(t,e,i){t.isContextLost()||(t.deleteFramebuffer(e),t.deleteTexture(i))}.bind(null,i,this.framebuffer,this.texture);t.postRenderFunctions.push(r);var n=f.a.createEmptyTexture(i,e,e),o=i.createFramebuffer();i.bindFramebuffer(p.a.FRAMEBUFFER,o),i.framebufferTexture2D(p.a.FRAMEBUFFER,p.a.COLOR_ATTACHMENT0,p.a.TEXTURE_2D,n,0),this.texture=n,this.framebuffer=o,this.framebufferDimension=e}else i.bindFramebuffer(p.a.FRAMEBUFFER,this.framebuffer)},_.prototype.composeFrame=function(t,e,i){this.dispatchComposeEvent_(o.a.PRECOMPOSE,i,t),i.bindBuffer(p.a.ARRAY_BUFFER,this.arrayBuffer_);var r,n=i.getGL(),a=l.a.fragment,s=l.a.vertex,h=i.getProgram(a,s);this.defaultLocations_?r=this.defaultLocations_:(r=new u.a(n,h),this.defaultLocations_=r),i.useProgram(h)&&(n.enableVertexAttribArray(r.a_position),n.vertexAttribPointer(r.a_position,2,p.a.FLOAT,!1,16,0),n.enableVertexAttribArray(r.a_texCoord),n.vertexAttribPointer(r.a_texCoord,2,p.a.FLOAT,!1,16,8),n.uniform1i(r.u_texture,0)),n.uniformMatrix4fv(r.u_texCoordMatrix,!1,c.a.fromTransform(this.tmpMat4_,this.getTexCoordMatrix())),n.uniformMatrix4fv(r.u_projectionMatrix,!1,c.a.fromTransform(this.tmpMat4_,this.getProjectionMatrix())),n.uniform1f(r.u_opacity,e.opacity),n.bindTexture(p.a.TEXTURE_2D,this.getTexture()),n.drawArrays(p.a.TRIANGLE_STRIP,0,4),this.dispatchComposeEvent_(o.a.POSTCOMPOSE,i,t)},_.prototype.dispatchComposeEvent_=function(t,e,i){var r=this.getLayer();if(r.hasListener(t)){var o=i.viewState,s=o.resolution,l=i.pixelRatio,u=i.extent,h=o.center,c=o.rotation,p=i.size,d=new a.a(e,h,s,c,p,u,l),f=new n.a(t,d,i,null,e);r.dispatchEvent(f)}},_.prototype.getTexCoordMatrix=function(){return this.texCoordMatrix},_.prototype.getTexture=function(){return this.texture},_.prototype.getProjectionMatrix=function(){return this.projectionMatrix},_.prototype.handleWebGLContextLost=function(){this.texture=null,this.framebuffer=null,this.framebufferDimension=void 0},_.prototype.prepareFrame=function(t,e,i){},_.prototype.forEachLayerAtPixel=function(t,e,i,r){},e.a=_},function(t,e,i){"use strict";var r=i(112),n=i(40),o=i(201),a=i(65),s=i(89),l=i(304),u=i(116),h=i(206),c=i(24)("iterator"),p=!([].keys&&"next"in[].keys()),d=function(){return this};t.exports=function(t,e,i,f,_,g,y){l(i,e,f);var v,m,E,T=function(t){if(!p&&t in x)return x[t];switch(t){case"keys":case"values":return function(){return new i(this,t)}}return function(){return new i(this,t)}},S=e+" Iterator",R="values"==_,I=!1,x=t.prototype,C=x[c]||x["@@iterator"]||_&&x[_],O=C||T(_),P=_?R?T("entries"):O:void 0,L="Array"==e?x.entries||C:C;if(L&&(E=h(L.call(new t)))!==Object.prototype&&E.next&&(u(E,S,!0),r||"function"==typeof E[c]||a(E,c,d)),R&&C&&"values"!==C.name&&(I=!0,O=function(){return C.call(this)}),r&&!y||!p&&!I&&x[c]||a(x,c,O),s[e]=O,s[S]=d,_)if(v={values:R?O:T("values"),keys:g?O:T("keys"),entries:P},y)for(m in v)m in x||o(x,m,v[m]);else n(n.P+n.F*(p||I),e,v);return v}},function(t,e,i){t.exports=!i(60)&&!i(77)(function(){return 7!=Object.defineProperty(i(154)("div"),"a",{get:function(){return 7}}).a})},function(t,e,i){t.exports=i(65)},function(t,e,i){var r=i(66),n=i(67),o=i(306)(!1),a=i(157)("IE_PROTO");t.exports=function(t,e){var i,s=n(t),l=0,u=[];for(i in s)i!=a&&r(s,i)&&u.push(i);for(;e.length>l;)r(s,i=e[l++])&&(~o(u,i)||u.push(i));return u}},function(t,e,i){var r=i(91);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},function(t,e,i){var r=i(152),n=Math.min;t.exports=function(t){return t>0?n(r(t),9007199254740991):0}},function(t,e,i){var r=i(23).document;t.exports=r&&r.documentElement},function(t,e,i){var r=i(66),n=i(117),o=i(157)("IE_PROTO"),a=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=n(t),r(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?a:null}},function(t,e,i){var r=i(202),n=i(159).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,n)}},function(t,e){},function(t,e,i){"use strict";var r=i(0),n=i(210),o=function(t,e,i,r,o){n.a.call(this,t,e,i.originalEvent,r,o),this.pointerEvent=i};r.a.inherits(o,n.a),e.a=o},function(t,e,i){"use strict";var r=i(0),n=i(211),o=function(t,e,i,r,o){n.a.call(this,t,e,o),this.originalEvent=i,this.pixel=e.getEventPixel(i),this.coordinate=e.getCoordinateFromPixel(this.pixel),this.dragging=void 0!==r&&r};r.a.inherits(o,n.a),o.prototype.preventDefault=function(){n.a.prototype.preventDefault.call(this),this.originalEvent.preventDefault()},o.prototype.stopPropagation=function(){n.a.prototype.stopPropagation.call(this),this.originalEvent.stopPropagation()},e.a=o},function(t,e,i){"use strict";var r=i(0),n=i(25),o=function(t,e,i){n.a.call(this,t),this.map=e,this.frameState=void 0!==i?i:null};r.a.inherits(o,n.a),e.a=o},function(t,e,i){"use strict";var r={ACTIVE:"active"};e.a=r},function(t,e,i){"use strict";var r=i(0),n=function(t){var e=r.a.VERSION?r.a.VERSION.split("-")[0]:"latest";this.message="Assertion failed. See https://openlayers.org/en/"+e+"/doc/errors/#"+t+" for details.",this.code=t,this.name="AssertionError"};r.a.inherits(n,Error),e.a=n},function(t,e,i){var r=i(215),n=i(24)("iterator"),o=i(89);t.exports=i(17).getIteratorMethod=function(t){if(void 0!=t)return t[n]||t["@@iterator"]||o[r(t)]}},function(t,e,i){var r=i(91),n=i(24)("toStringTag"),o="Arguments"==r(function(){return arguments}()),a=function(t,e){try{return t[e]}catch(t){}};t.exports=function(t){var e,i,s;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(i=a(e=Object(t),n))?i:o?r(e):"Object"==(s=r(e))&&"function"==typeof e.callee?"Arguments":s}},function(t,e,i){"use strict";var r={BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",TOP_LEFT:"top-left",TOP_RIGHT:"top-right"};e.a=r},function(t,e,i){"use strict";var r={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};e.a=r},function(t,e,i){"use strict";var r={};r.cache_=null,r.set=function(t){r.cache_=t},r.get=function(){return r.cache_||window.proj4},e.a=r},function(t,e,i){"use strict";var r=i(0),n=i(94),o=i(13),a=i(33),s=i(43),l=i(53),u=i(220),h=function(t){this.checksums_=null,this.canvas_=null,this.hitDetectionCanvas_=null,this.fill_=void 0!==t.fill?t.fill:null,this.origin_=[0,0],this.points_=t.points,this.radius_=void 0!==t.radius?t.radius:t.radius1,this.radius2_=t.radius2,this.angle_=void 0!==t.angle?t.angle:0,this.stroke_=void 0!==t.stroke?t.stroke:null,this.anchor_=null,this.size_=null,this.imageSize_=null,this.hitDetectionImageSize_=null,this.atlasManager_=t.atlasManager,this.render_(this.atlasManager_);var e=void 0===t.snapToPixel||t.snapToPixel,i=void 0!==t.rotateWithView&&t.rotateWithView;u.a.call(this,{opacity:1,rotateWithView:i,rotation:void 0!==t.rotation?t.rotation:0,scale:1,snapToPixel:e})};r.a.inherits(h,u.a),h.prototype.clone=function(){var t=new h({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),snapToPixel:this.getSnapToPixel(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),atlasManager:this.atlasManager_});return t.setOpacity(this.getOpacity()),t.setScale(this.getScale()),t},h.prototype.getAnchor=function(){return this.anchor_},h.prototype.getAngle=function(){return this.angle_},h.prototype.getFill=function(){return this.fill_},h.prototype.getHitDetectionImage=function(t){return this.hitDetectionCanvas_},h.prototype.getImage=function(t){return this.canvas_},h.prototype.getImageSize=function(){return this.imageSize_},h.prototype.getHitDetectionImageSize=function(){return this.hitDetectionImageSize_},h.prototype.getImageState=function(){return s.a.LOADED},h.prototype.getOrigin=function(){return this.origin_},h.prototype.getPoints=function(){return this.points_},h.prototype.getRadius=function(){return this.radius_},h.prototype.getRadius2=function(){return this.radius2_},h.prototype.getSize=function(){return this.size_},h.prototype.getStroke=function(){return this.stroke_},h.prototype.listenImageChange=function(t,e){},h.prototype.load=function(){},h.prototype.unlistenImageChange=function(t,e){},h.prototype.render_=function(t){var e,i,r="",s="",u=0,h=null,c=0,p=0;this.stroke_&&(i=this.stroke_.getColor(),null===i&&(i=l.a.defaultStrokeStyle),i=n.a.asColorLike(i),p=this.stroke_.getWidth(),void 0===p&&(p=l.a.defaultLineWidth),h=this.stroke_.getLineDash(),c=this.stroke_.getLineDashOffset(),a.a.CANVAS_LINE_DASH||(h=null,c=0),s=this.stroke_.getLineJoin(),void 0===s&&(s=l.a.defaultLineJoin),r=this.stroke_.getLineCap(),void 0===r&&(r=l.a.defaultLineCap),void 0===(u=this.stroke_.getMiterLimit())&&(u=l.a.defaultMiterLimit));var d=2*(this.radius_+p)+1,f={strokeStyle:i,strokeWidth:p,size:d,lineCap:r,lineDash:h,lineDashOffset:c,lineJoin:s,miterLimit:u};if(void 0===t){var _=o.a.createCanvasContext2D(d,d);this.canvas_=_.canvas,d=this.canvas_.width,e=d,this.draw_(f,_,0,0),this.createHitDetectionCanvas_(f)}else{d=Math.round(d);var g,y=!this.fill_;y&&(g=this.drawHitDetectionCanvas_.bind(this,f));var v=this.getChecksum(),m=t.add(v,d,d,this.draw_.bind(this,f),g);this.canvas_=m.image,this.origin_=[m.offsetX,m.offsetY],e=m.image.width,y?(this.hitDetectionCanvas_=m.hitImage,this.hitDetectionImageSize_=[m.hitImage.width,m.hitImage.height]):(this.hitDetectionCanvas_=this.canvas_,this.hitDetectionImageSize_=[e,e])}this.anchor_=[d/2,d/2],this.size_=[d,d],this.imageSize_=[e,e]},h.prototype.draw_=function(t,e,i,r){var o,a,s;e.setTransform(1,0,0,1,0,0),e.translate(i,r),e.beginPath();var u=this.points_;if(u===1/0)e.arc(t.size/2,t.size/2,this.radius_,0,2*Math.PI,!0);else{var h=void 0!==this.radius2_?this.radius2_:this.radius_;for(h!==this.radius_&&(u*=2),o=0;o<=u;o++)a=2*o*Math.PI/u-Math.PI/2+this.angle_,s=o%2==0?this.radius_:h,e.lineTo(t.size/2+s*Math.cos(a),t.size/2+s*Math.sin(a))}if(this.fill_){var c=this.fill_.getColor();null===c&&(c=l.a.defaultFillStyle),e.fillStyle=n.a.asColorLike(c),e.fill()}this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineCap=t.lineCap,e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke()),e.closePath()},h.prototype.createHitDetectionCanvas_=function(t){if(this.hitDetectionImageSize_=[t.size,t.size],this.fill_)return void(this.hitDetectionCanvas_=this.canvas_);var e=o.a.createCanvasContext2D(t.size,t.size);this.hitDetectionCanvas_=e.canvas,this.drawHitDetectionCanvas_(t,e,0,0)},h.prototype.drawHitDetectionCanvas_=function(t,e,i,r){e.setTransform(1,0,0,1,0,0),e.translate(i,r),e.beginPath();var n=this.points_;if(n===1/0)e.arc(t.size/2,t.size/2,this.radius_,0,2*Math.PI,!0);else{var o=void 0!==this.radius2_?this.radius2_:this.radius_;o!==this.radius_&&(n*=2);var a,s,u;for(a=0;a<=n;a++)u=2*a*Math.PI/n-Math.PI/2+this.angle_,s=a%2==0?this.radius_:o,e.lineTo(t.size/2+s*Math.cos(u),t.size/2+s*Math.sin(u))}e.fillStyle=l.a.defaultFillStyle,e.fill(),this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.stroke()),e.closePath()},h.prototype.getChecksum=function(){var t=this.stroke_?this.stroke_.getChecksum():"-",e=this.fill_?this.fill_.getChecksum():"-";if(!this.checksums_||t!=this.checksums_[1]||e!=this.checksums_[2]||this.radius_!=this.checksums_[3]||this.radius2_!=this.checksums_[4]||this.angle_!=this.checksums_[5]||this.points_!=this.checksums_[6]){var i="r"+t+e+(void 0!==this.radius_?this.radius_.toString():"-")+(void 0!==this.radius2_?this.radius2_.toString():"-")+(void 0!==this.angle_?this.angle_.toString():"-")+(void 0!==this.points_?this.points_.toString():"-");this.checksums_=[i,t,e,this.radius_,this.radius2_,this.angle_,this.points_]}return this.checksums_[0]},e.a=h},function(t,e,i){"use strict";var r=function(t){this.opacity_=t.opacity,this.rotateWithView_=t.rotateWithView,this.rotation_=t.rotation,this.scale_=t.scale,this.snapToPixel_=t.snapToPixel};r.prototype.getOpacity=function(){return this.opacity_},r.prototype.getRotateWithView=function(){return this.rotateWithView_},r.prototype.getRotation=function(){return this.rotation_},r.prototype.getScale=function(){return this.scale_},r.prototype.getSnapToPixel=function(){return this.snapToPixel_},r.prototype.getAnchor=function(){},r.prototype.getImage=function(t){},r.prototype.getHitDetectionImage=function(t){},r.prototype.getImageState=function(){},r.prototype.getImageSize=function(){},r.prototype.getHitDetectionImageSize=function(){},r.prototype.getOrigin=function(){},r.prototype.getSize=function(){},r.prototype.setOpacity=function(t){this.opacity_=t},r.prototype.setRotateWithView=function(t){this.rotateWithView_=t},r.prototype.setRotation=function(t){this.rotation_=t},r.prototype.setScale=function(t){this.scale_=t},r.prototype.setSnapToPixel=function(t){this.snapToPixel_=t},r.prototype.listenImageChange=function(t,e){},r.prototype.load=function(){},r.prototype.unlistenImageChange=function(t,e){},e.a=r},function(t,e,i){"use strict";var r=i(0),n=i(1),o=i(20),a=i(12),s=i(35),l=i(55),u=function(t,e,i){s.a.call(this);var r=e||0;this.setCenterAndRadius(t,r,i)};r.a.inherits(u,s.a),u.prototype.clone=function(){var t=new u(null);return t.setFlatCoordinates(this.layout,this.flatCoordinates.slice()),t},u.prototype.closestPointXY=function(t,e,i,r){var n=this.flatCoordinates,o=t-n[0],a=e-n[1],s=o*o+a*a;if(s<r){var l;if(0===s)for(l=0;l<this.stride;++l)i[l]=n[l];else{var u=this.getRadius()/Math.sqrt(s);for(i[0]=n[0]+u*o,i[1]=n[1]+u*a,l=2;l<this.stride;++l)i[l]=n[l]}return i.length=this.stride,s}return r},u.prototype.containsXY=function(t,e){var i=this.flatCoordinates,r=t-i[0],n=e-i[1];return r*r+n*n<=this.getRadiusSquared_()},u.prototype.getCenter=function(){return this.flatCoordinates.slice(0,this.stride)},u.prototype.computeExtent=function(t){var e=this.flatCoordinates,i=e[this.stride]-e[0];return n.a.createOrUpdate(e[0]-i,e[1]-i,e[0]+i,e[1]+i,t)},u.prototype.getRadius=function(){return Math.sqrt(this.getRadiusSquared_())},u.prototype.getRadiusSquared_=function(){var t=this.flatCoordinates[this.stride]-this.flatCoordinates[0],e=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return t*t+e*e},u.prototype.getType=function(){return a.a.CIRCLE},u.prototype.intersectsExtent=function(t){var e=this.getExtent();if(n.a.intersects(t,e)){var i=this.getCenter();return t[0]<=i[0]&&t[2]>=i[0]||(t[1]<=i[1]&&t[3]>=i[1]||n.a.forEachCorner(t,this.intersectsCoordinate,this))}return!1},u.prototype.setCenter=function(t){var e=this.stride,i=this.flatCoordinates[e]-this.flatCoordinates[0],r=t.slice();r[e]=r[0]+i;var n;for(n=1;n<e;++n)r[e+n]=t[n];this.setFlatCoordinates(this.layout,r)},u.prototype.setCenterAndRadius=function(t,e,i){if(t){this.setLayout(i,t,0),this.flatCoordinates||(this.flatCoordinates=[]);var r=this.flatCoordinates,n=l.a.coordinate(r,0,t,this.stride);r[n++]=r[0]+e;var a,s;for(a=1,s=this.stride;a<s;++a)r[n++]=r[a];r.length=n,this.changed()}else this.setFlatCoordinates(o.a.XY,null)},u.prototype.getCoordinates=function(){},u.prototype.setCoordinates=function(t,e){},u.prototype.setFlatCoordinates=function(t,e){this.setFlatCoordinatesInternal(t,e),this.changed()},u.prototype.setRadius=function(t){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+t,this.changed()},u.prototype.transform,e.a=u},function(t,e,i){"use strict";var r={};r.forEach=function(t,e,i,r,n,o){for(var a,s=[t[e],t[e+1]],l=[];e+r<i;e+=r){if(l[0]=t[e+r],l[1]=t[e+r+1],a=n.call(o,s,l))return a;s[0]=l[0],s[1]=l[1]}return!1},e.a=r},function(t,e,i){"use strict";var r={};r.lineString=function(t,e,i,r){var n,o=t[e],a=t[e+1],s=0;for(n=e+r;n<i;n+=r){var l=t[n],u=t[n+1];s+=Math.sqrt((l-o)*(l-o)+(u-a)*(u-a)),o=l,a=u}return s},r.linearRing=function(t,e,i,n){var o=r.lineString(t,e,i,n),a=t[i-n]-t[e],s=t[i-n+1]-t[e+1];return o+=Math.sqrt(a*a+s*s)},e.a=r},function(t,e,i){"use strict";var r=i(1),n={};n.linearRingss=function(t,e,i,n){var o,a,s=[],l=r.a.createEmpty();for(o=0,a=i.length;o<a;++o){var u=i[o];l=r.a.createOrUpdateFromFlatCoordinates(t,e,u[0],n),s.push((l[0]+l[2])/2,(l[1]+l[3])/2),e=u[u.length-1]}return s},e.a=n},function(t,e,i){"use strict";var r=i(0),n=i(18),o=i(226),a=i(7),s=i(2),l=function(t){n.a.call(this);var e=s.a.assign({},t);e[o.a.OPACITY]=void 0!==t.opacity?t.opacity:1,e[o.a.VISIBLE]=void 0===t.visible||t.visible,e[o.a.Z_INDEX]=void 0!==t.zIndex?t.zIndex:0,e[o.a.MAX_RESOLUTION]=void 0!==t.maxResolution?t.maxResolution:1/0,e[o.a.MIN_RESOLUTION]=void 0!==t.minResolution?t.minResolution:0,this.setProperties(e),this.state_={layer:this,managed:!0},this.type};r.a.inherits(l,n.a),l.prototype.getType=function(){return this.type},l.prototype.getLayerState=function(){return this.state_.opacity=a.a.clamp(this.getOpacity(),0,1),this.state_.sourceState=this.getSourceState(),this.state_.visible=this.getVisible(),this.state_.extent=this.getExtent(),this.state_.zIndex=this.getZIndex(),this.state_.maxResolution=this.getMaxResolution(),this.state_.minResolution=Math.max(this.getMinResolution(),0),this.state_},l.prototype.getLayersArray=function(t){},l.prototype.getLayerStatesArray=function(t){},l.prototype.getExtent=function(){return this.get(o.a.EXTENT)},l.prototype.getMaxResolution=function(){return this.get(o.a.MAX_RESOLUTION)},l.prototype.getMinResolution=function(){return this.get(o.a.MIN_RESOLUTION)},l.prototype.getOpacity=function(){return this.get(o.a.OPACITY)},l.prototype.getSourceState=function(){},l.prototype.getVisible=function(){return this.get(o.a.VISIBLE)},l.prototype.getZIndex=function(){return this.get(o.a.Z_INDEX)},l.prototype.setExtent=function(t){this.set(o.a.EXTENT,t)},l.prototype.setMaxResolution=function(t){this.set(o.a.MAX_RESOLUTION,t)},l.prototype.setMinResolution=function(t){this.set(o.a.MIN_RESOLUTION,t)},l.prototype.setOpacity=function(t){this.set(o.a.OPACITY,t)},l.prototype.setVisible=function(t){this.set(o.a.VISIBLE,t)},l.prototype.setZIndex=function(t){this.set(o.a.Z_INDEX,t)},e.a=l},function(t,e,i){"use strict";var r={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",SOURCE:"source"};e.a=r},function(t,e,i){"use strict";var r={IMAGE:"image",VECTOR:"vector"};e.a=r},function(t,e,i){"use strict";var r=i(128),n=i(7),o=i(101),a=function(t){this.html_=t.html,this.tileRanges_=t.tileRanges?t.tileRanges:null};a.prototype.getHTML=function(){return this.html_},a.prototype.intersectsAnyTileRange=function(t,e,i){if(!this.tileRanges_)return!0;var a,s,l,u;for(u in t)if(u in this.tileRanges_){l=t[u];var h;for(a=0,s=this.tileRanges_[u].length;a<s;++a){if(h=this.tileRanges_[u][a],h.intersects(l))return!0;var c=e.getTileRangeForExtentAndZ(o.a.extentFromProjection(i),parseInt(u,10)),p=c.getWidth();if(l.minX<c.minX||l.maxX>c.maxX){if(h.intersects(new r.a(n.a.modulo(l.minX,p),n.a.modulo(l.maxX,p),l.minY,l.maxY)))return!0;if(l.getWidth()>p&&h.intersects(c))return!0}}}return!1},e.a=a},function(t,e,i){"use strict";var r=i(0),n=i(173),o=i.n(n),a=i(1),s=i(2),l=function(t){this.rbush_=o()(t),this.items_={}};l.prototype.insert=function(t,e){var i={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};this.rbush_.insert(i),this.items_[r.a.getUid(e)]=i},l.prototype.load=function(t,e){for(var i=new Array(e.length),n=0,o=e.length;n<o;n++){var a=t[n],s=e[n],l={minX:a[0],minY:a[1],maxX:a[2],maxY:a[3],value:s};i[n]=l,this.items_[r.a.getUid(s)]=l}this.rbush_.load(i)},l.prototype.remove=function(t){var e=r.a.getUid(t),i=this.items_[e];return delete this.items_[e],null!==this.rbush_.remove(i)},l.prototype.update=function(t,e){var i=this.items_[r.a.getUid(e)],n=[i.minX,i.minY,i.maxX,i.maxY];a.a.equals(n,t)||(this.remove(e),this.insert(t,e))},l.prototype.getAll=function(){return this.rbush_.all().map(function(t){return t.value})},l.prototype.getInExtent=function(t){var e={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]};return this.rbush_.search(e).map(function(t){return t.value})},l.prototype.forEach=function(t,e){return this.forEach_(this.getAll(),t,e)},l.prototype.forEachInExtent=function(t,e,i){return this.forEach_(this.getInExtent(t),e,i)},l.prototype.forEach_=function(t,e,i){for(var r,n=0,o=t.length;n<o;n++)if(r=e.call(i,t[n]))return r;return r},l.prototype.isEmpty=function(){return s.a.isEmpty(this.items_)},l.prototype.clear=function(){this.rbush_.clear(),this.items_={}},l.prototype.getExtent=function(t){var e=this.rbush_.data;return a.a.createOrUpdate(e.minX,e.minY,e.maxX,e.maxY,t)},l.prototype.concat=function(t){this.rbush_.load(t.rbush_.all());for(var e in t.items_)this.items_[0|e]=t.items_[0|e]},e.a=l},function(t,e,i){t.exports={default:i(347),__esModule:!0}},function(t,e,i){"use strict";i.d(e,"a",function(){return r});var r={CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",ERROR:"error",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",UNLOAD:"unload",MOUSEDOWN:"mousedown",MOUSEUP:"mouseup",MOUSEMOVE:"mousemove",MOUSEOVER:"mouseover",MOUSEOUT:"mouseout",MOUSEWHEEL:"mousewheel",MSPOINTERDOWN:"MSPointerDown",RESIZE:"resize",TOUCHSTART:"touchstart",TOUCHMOVE:"touchmove",TOUCHEND:"touchend",WHEEL:"wheel"}},function(t,e,i){"use strict";i.d(e,"b",function(){return n}),i.d(e,"a",function(){return o}),i.d(e,"c",function(){return a});var r=i(44),n={POINT:"Point",CIRCLE:"Circle",LINESTRING:"LineString",POLYGON:"Polygon",RECTANGLE:"Rectangle",SQUARE:"Square"},o={TRANSLATE:"translate",MODIFY:"snapModify"},a={SINGLECLICK:r.a.singleClick,POINTERMOVE:r.a.pointerMove}},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=c()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(u.a?u()(t,e):t.__proto__=e)}i.d(e,"a",function(){return y});var a=i(3),s=i.n(a),l=i(14),u=i.n(l),h=i(11),c=i.n(h),p=i(15),d=i.n(p),f=i(130),_=i(177),g=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),s()(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),y=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=t.element,o=t.position,a=t.offset,s=void 0===a?[0,0]:a,l=t.anchor,u=void 0===l?"top-left":l,h=t.stopEvent,c=void 0===h||h,p=t.autoPan,_=void 0!==p&&p,g=t.autoPanDuration,y=void 0===g?1e3:g,v=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;r(this,e);var m=n(this,(e.__proto__||d()(e)).call(this));return m._element=i,m._position=o,m._olOverlay=new f.a({element:m._element,offset:s,position:m._position,positioning:u,stopEvent:c,autoPan:_,autoPanMargin:v,autoPanAnimation:{duration:y}}),m}return o(e,t),g(e,[{key:"_setMap",value:function(t){t.addOverlay(this._olOverlay)}},{key:"setElement",value:function(t){this._olOverlay.setElement(t)}},{key:"getElement",value:function(){return this._olOverlay.getElement()}},{key:"setOffset",value:function(t){this._olOverlay.setOffset(t)}},{key:"setPosition",value:function(t){this._olOverlay&&this._olOverlay.setPosition(t)}},{key:"setAnchor",value:function(t){this._olOverlay.setPositioning(t)}},{key:"_destroy",value:function(t){t.removeOverlay(this._olOverlay),this._olOverlay=null,this._element=null,this._position=null}}]),e}(_.a)},function(t,e,i){"use strict";var r={BOTTOM_LEFT:"bottom-left",BOTTOM_CENTER:"bottom-center",BOTTOM_RIGHT:"bottom-right",CENTER_LEFT:"center-left",CENTER_CENTER:"center-center",CENTER_RIGHT:"center-right",TOP_LEFT:"top-left",TOP_CENTER:"top-center",TOP_RIGHT:"top-right"};e.a=r},function(t,e,i){"use strict";var r=i(0),n=i(4),o=i(69),a=i(33),s=i(179),l=i(236),u=i(353),h=i(354),c=i(355),p=i(356),d=function(t){o.a.call(this),this.element_=t,this.pointerMap={},this.eventMap_={},this.eventSourceList_=[],this.registerSources()};r.a.inherits(d,o.a),d.prototype.registerSources=function(){if(a.a.POINTER)this.registerSource("native",new h.a(this));else if(a.a.MSPOINTER)this.registerSource("ms",new u.a(this));else{var t=new l.a(this);this.registerSource("mouse",t),a.a.TOUCH&&this.registerSource("touch",new p.a(this,t))}this.register_()},d.prototype.registerSource=function(t,e){var i=e,r=i.getEvents();r&&(r.forEach(function(t){var e=i.getHandlerForEvent(t);e&&(this.eventMap_[t]=e.bind(i))},this),this.eventSourceList_.push(i))},d.prototype.register_=function(){for(var t,e=this.eventSourceList_.length,i=0;i<e;i++)t=this.eventSourceList_[i],this.addEvents_(t.getEvents())},d.prototype.unregister_=function(){for(var t,e=this.eventSourceList_.length,i=0;i<e;i++)t=this.eventSourceList_[i],this.removeEvents_(t.getEvents())},d.prototype.eventHandler_=function(t){var e=t.type,i=this.eventMap_[e];i&&i(t)},d.prototype.addEvents_=function(t){t.forEach(function(t){n.a.listen(this.element_,t,this.eventHandler_,this)},this)},d.prototype.removeEvents_=function(t){t.forEach(function(t){n.a.unlisten(this.element_,t,this.eventHandler_,this)},this)},d.prototype.cloneEvent=function(t,e){for(var i,r={},n=0,o=d.CLONE_PROPS.length;n<o;n++)i=d.CLONE_PROPS[n][0],r[i]=t[i]||e[i]||d.CLONE_PROPS[n][1];return r},d.prototype.down=function(t,e){this.fireEvent(s.a.POINTERDOWN,t,e)},d.prototype.move=function(t,e){this.fireEvent(s.a.POINTERMOVE,t,e)},d.prototype.up=function(t,e){this.fireEvent(s.a.POINTERUP,t,e)},d.prototype.enter=function(t,e){t.bubbles=!1,this.fireEvent(s.a.POINTERENTER,t,e)},d.prototype.leave=function(t,e){t.bubbles=!1,this.fireEvent(s.a.POINTERLEAVE,t,e)},d.prototype.over=function(t,e){t.bubbles=!0,this.fireEvent(s.a.POINTEROVER,t,e)},d.prototype.out=function(t,e){t.bubbles=!0,this.fireEvent(s.a.POINTEROUT,t,e)},d.prototype.cancel=function(t,e){this.fireEvent(s.a.POINTERCANCEL,t,e)},d.prototype.leaveOut=function(t,e){this.out(t,e),this.contains_(t.target,t.relatedTarget)||this.leave(t,e)},d.prototype.enterOver=function(t,e){this.over(t,e),this.contains_(t.target,t.relatedTarget)||this.enter(t,e)},d.prototype.contains_=function(t,e){return!(!t||!e)&&t.contains(e)},d.prototype.makeEvent=function(t,e,i){return new c.a(t,i,e)},d.prototype.fireEvent=function(t,e,i){var r=this.makeEvent(t,e,i);this.dispatchEvent(r)},d.prototype.fireNativeEvent=function(t){var e=this.makeEvent(t.type,t,t);this.dispatchEvent(e)},d.prototype.wrapMouseEvent=function(t,e){return this.makeEvent(t,l.a.prepareEvent(e,this),e)},d.prototype.disposeInternal=function(){this.unregister_(),o.a.prototype.disposeInternal.call(this)},d.CLONE_PROPS=[["bubbles",!1],["cancelable",!1],["view",null],["detail",null],["screenX",0],["screenY",0],["clientX",0],["clientY",0],["ctrlKey",!1],["altKey",!1],["shiftKey",!1],["metaKey",!1],["button",0],["relatedTarget",null],["buttons",0],["pointerId",0],["width",0],["height",0],["pressure",0],["tiltX",0],["tiltY",0],["pointerType",""],["hwTimestamp",0],["isPrimary",!1],["type",""],["target",null],["currentTarget",null],["which",0]],e.a=d},function(t,e,i){"use strict";var r=i(0),n=i(133),o=function(t){var e={mousedown:this.mousedown,mousemove:this.mousemove,mouseup:this.mouseup,mouseover:this.mouseover,mouseout:this.mouseout};n.a.call(this,t,e),this.pointerMap=t.pointerMap,this.lastTouches=[]};r.a.inherits(o,n.a),o.POINTER_ID=1,o.POINTER_TYPE="mouse",o.DEDUP_DIST=25,o.prototype.isEventSimulatedFromTouch_=function(t){for(var e,i=this.lastTouches,r=t.clientX,n=t.clientY,a=0,s=i.length;a<s&&(e=i[a]);a++){var l=Math.abs(r-e[0]),u=Math.abs(n-e[1]);if(l<=o.DEDUP_DIST&&u<=o.DEDUP_DIST)return!0}return!1},o.prepareEvent=function(t,e){var i=e.cloneEvent(t,t),r=i.preventDefault;return i.preventDefault=function(){t.preventDefault(),r()},i.pointerId=o.POINTER_ID,i.isPrimary=!0,i.pointerType=o.POINTER_TYPE,i},o.prototype.mousedown=function(t){if(!this.isEventSimulatedFromTouch_(t)){o.POINTER_ID.toString()in this.pointerMap&&this.cancel(t);var e=o.prepareEvent(t,this.dispatcher);this.pointerMap[o.POINTER_ID.toString()]=t,this.dispatcher.down(e,t)}},o.prototype.mousemove=function(t){if(!this.isEventSimulatedFromTouch_(t)){var e=o.prepareEvent(t,this.dispatcher);this.dispatcher.move(e,t)}},o.prototype.mouseup=function(t){if(!this.isEventSimulatedFromTouch_(t)){var e=this.pointerMap[o.POINTER_ID.toString()];if(e&&e.button===t.button){var i=o.prepareEvent(t,this.dispatcher);this.dispatcher.up(i,t),this.cleanupMouse()}}},o.prototype.mouseover=function(t){if(!this.isEventSimulatedFromTouch_(t)){var e=o.prepareEvent(t,this.dispatcher);this.dispatcher.enterOver(e,t)}},o.prototype.mouseout=function(t){if(!this.isEventSimulatedFromTouch_(t)){var e=o.prepareEvent(t,this.dispatcher);this.dispatcher.leaveOut(e,t)}},o.prototype.cancel=function(t){var e=o.prepareEvent(t,this.dispatcher);this.dispatcher.cancel(e,t),this.cleanupMouse()},o.prototype.cleanupMouse=function(){delete this.pointerMap[o.POINTER_ID.toString()]},e.a=o},function(t,e,i){"use strict";var r=i(0),n=i(4),o=i(5),a=i(29),s=i(34),l=i(50),u=function(t){var e=t||{},i=void 0!==e.className?e.className:"ol-zoom",r=void 0!==e.delta?e.delta:1,l=void 0!==e.zoomInLabel?e.zoomInLabel:"+",h=void 0!==e.zoomOutLabel?e.zoomOutLabel:"",c=void 0!==e.zoomInTipLabel?e.zoomInTipLabel:"Zoom in",p=void 0!==e.zoomOutTipLabel?e.zoomOutTipLabel:"Zoom out",d=document.createElement("button");d.className=i+"-in",d.setAttribute("type","button"),d.title=c,d.appendChild("string"==typeof l?document.createTextNode(l):l),n.a.listen(d,o.a.CLICK,u.prototype.handleClick_.bind(this,r));var f=document.createElement("button");f.className=i+"-out",f.setAttribute("type","button"),f.title=p,f.appendChild("string"==typeof h?document.createTextNode(h):h),n.a.listen(f,o.a.CLICK,u.prototype.handleClick_.bind(this,-r));var _=i+" "+s.a.CLASS_UNSELECTABLE+" "+s.a.CLASS_CONTROL,g=document.createElement("div");g.className=_,g.appendChild(d),g.appendChild(f),a.a.call(this,{element:g,target:e.target}),this.duration_=void 0!==e.duration?e.duration:250};r.a.inherits(u,a.a),u.prototype.handleClick_=function(t,e){e.preventDefault(),this.zoomByDelta_(t)},u.prototype.zoomByDelta_=function(t){var e=this.getMap(),i=e.getView();if(i){var r=i.getResolution();if(r){var n=i.constrainResolution(r,t);this.duration_>0?(i.getAnimating()&&i.cancelAnimations(),i.animate({resolution:n,duration:this.duration_,easing:l.a.easeOut})):i.setResolution(n)}}},e.a=u},function(t,e,i){"use strict";var r={DEGREES:"degrees",IMPERIAL:"imperial",NAUTICAL:"nautical",METRIC:"metric",US:"us"};e.a=r},function(t,e,i){"use strict";var r=i(0),n=i(74),o=i(127),a=i(210),s=i(364),l=i(78),u=i(211),h=i(131),c=i(240),p=i(18),d=i(93),f=i(365),_=i(181),g=i(28),y=i(9),v=i(13),m=i(4),E=i(25),T=i(5),S=i(1),R=i(19),I=i(33),x=i(242),C=i(2),O=i(134),P=i(49),L=i(75),A=i(180),w=i(16),M=function(t){p.a.call(this);var e=M.createOptionsInternal(t);this.loadTilesWhileAnimating_=void 0!==t.loadTilesWhileAnimating&&t.loadTilesWhileAnimating,this.loadTilesWhileInteracting_=void 0!==t.loadTilesWhileInteracting&&t.loadTilesWhileInteracting,this.pixelRatio_=void 0!==t.pixelRatio?t.pixelRatio:I.a.DEVICE_PIXEL_RATIO,this.logos_=e.logos,this.animationDelayKey_,this.animationDelay_=function(){this.animationDelayKey_=void 0,this.renderFrame_.call(this,Date.now())}.bind(this),this.coordinateToPixelTransform_=w.a.create(),this.pixelToCoordinateTransform_=w.a.create(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("DIV"),this.viewport_.className="ol-viewport"+(I.a.TOUCH?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.viewport_.style.msTouchAction="none",this.viewport_.style.touchAction="none",this.overlayContainer_=document.createElement("DIV"),this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("DIV"),this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent";for(var i=[T.a.CLICK,T.a.DBLCLICK,T.a.MOUSEDOWN,T.a.TOUCHSTART,T.a.MSPOINTERDOWN,l.a.POINTERDOWN,T.a.MOUSEWHEEL,T.a.WHEEL],r=0,a=i.length;r<a;++r)m.a.listen(this.overlayContainerStopEvent_,i[r],E.a.stopPropagation);this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=new s.a(this,t.moveTolerance);for(var u in l.a)m.a.listen(this.mapBrowserEventHandler_,l.a[u],this.handleMapBrowserEvent,this);this.keyboardEventTarget_=e.keyboardEventTarget,this.keyHandlerKeys_=null,m.a.listen(this.viewport_,T.a.WHEEL,this.handleBrowserEvent,this),m.a.listen(this.viewport_,T.a.MOUSEWHEEL,this.handleBrowserEvent,this),this.controls=e.controls||new n.a,this.interactions=e.interactions||new n.a,this.overlays_=e.overlays,this.overlayIdIndex_={},this.renderer_=e.mapRendererPlugin.create(this.viewport_,this),this.handleResize_,this.focus_=null,this.postRenderFunctions_=[],this.tileQueue_=new f.a(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.skippedFeatureUids_={},m.a.listen(this,p.a.getChangeEventType(c.a.LAYERGROUP),this.handleLayerGroupChanged_,this),m.a.listen(this,p.a.getChangeEventType(c.a.VIEW),this.handleViewChanged_,this),m.a.listen(this,p.a.getChangeEventType(c.a.SIZE),this.handleSizeChanged_,this),m.a.listen(this,p.a.getChangeEventType(c.a.TARGET),this.handleTargetChanged_,this),this.setProperties(e.values),this.controls.forEach(function(t){t.setMap(this)},this),m.a.listen(this.controls,o.a.ADD,function(t){t.element.setMap(this)},this),m.a.listen(this.controls,o.a.REMOVE,function(t){t.element.setMap(null)},this),this.interactions.forEach(function(t){t.setMap(this)},this),m.a.listen(this.interactions,o.a.ADD,function(t){t.element.setMap(this)},this),m.a.listen(this.interactions,o.a.REMOVE,function(t){t.element.setMap(null)},this),this.overlays_.forEach(this.addOverlayInternal_,this),m.a.listen(this.overlays_,o.a.ADD,function(t){this.addOverlayInternal_(t.element)},this),m.a.listen(this.overlays_,o.a.REMOVE,function(t){var e=t.element,i=e.getId();void 0!==i&&delete this.overlayIdIndex_[i.toString()],t.element.setMap(null)},this)};r.a.inherits(M,p.a),M.prototype.addControl=function(t){this.getControls().push(t)},M.prototype.addInteraction=function(t){this.getInteractions().push(t)},M.prototype.addLayer=function(t){this.getLayerGroup().getLayers().push(t)},M.prototype.addOverlay=function(t){this.getOverlays().push(t)},M.prototype.addOverlayInternal_=function(t){var e=t.getId();void 0!==e&&(this.overlayIdIndex_[e.toString()]=t),t.setMap(this)},M.prototype.disposeInternal=function(){this.mapBrowserEventHandler_.dispose(),m.a.unlisten(this.viewport_,T.a.WHEEL,this.handleBrowserEvent,this),m.a.unlisten(this.viewport_,T.a.MOUSEWHEEL,this.handleBrowserEvent,this),void 0!==this.handleResize_&&(window.removeEventListener(T.a.RESIZE,this.handleResize_,!1),this.handleResize_=void 0),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0),this.setTarget(null),p.a.prototype.disposeInternal.call(this)},M.prototype.forEachFeatureAtPixel=function(t,e,i){if(this.frameState_){var r=this.getCoordinateFromPixel(t);i=void 0!==i?i:{};var n=void 0!==i.hitTolerance?i.hitTolerance*this.frameState_.pixelRatio:0,o=void 0!==i.layerFilter?i.layerFilter:R.a.TRUE;return this.renderer_.forEachFeatureAtCoordinate(r,this.frameState_,n,e,null,o,null)}},M.prototype.getFeaturesAtPixel=function(t,e){var i=null;return this.forEachFeatureAtPixel(t,function(t){i||(i=[]),i.push(t)},e),i},M.prototype.forEachLayerAtPixel=function(t,e,i,r,n){if(this.frameState_){var o=void 0!==i?i:null,a=void 0!==r?r:R.a.TRUE,s=void 0!==n?n:null;return this.renderer_.forEachLayerAtPixel(t,this.frameState_,e,o,a,s)}},M.prototype.hasFeatureAtPixel=function(t,e){if(!this.frameState_)return!1;var i=this.getCoordinateFromPixel(t);e=void 0!==e?e:{};var r=void 0!==e.layerFilter?e.layerFilter:R.a.TRUE,n=void 0!==e.hitTolerance?e.hitTolerance*this.frameState_.pixelRatio:0;return this.renderer_.hasFeatureAtCoordinate(i,this.frameState_,n,r,null)},M.prototype.getEventCoordinate=function(t){return this.getCoordinateFromPixel(this.getEventPixel(t))},M.prototype.getEventPixel=function(t){var e=this.viewport_.getBoundingClientRect(),i=t.changedTouches?t.changedTouches[0]:t;return[i.clientX-e.left,i.clientY-e.top]},M.prototype.getTarget=function(){return this.get(c.a.TARGET)},M.prototype.getTargetElement=function(){var t=this.getTarget();return void 0!==t?"string"==typeof t?document.getElementById(t):t:null},M.prototype.getCoordinateFromPixel=function(t){var e=this.frameState_;return e?w.a.apply(e.pixelToCoordinateTransform,t.slice()):null},M.prototype.getControls=function(){return this.controls},M.prototype.getOverlays=function(){return this.overlays_},M.prototype.getOverlayById=function(t){var e=this.overlayIdIndex_[t.toString()];return void 0!==e?e:null},M.prototype.getInteractions=function(){return this.interactions},M.prototype.getLayerGroup=function(){return this.get(c.a.LAYERGROUP)},M.prototype.getLayers=function(){return this.getLayerGroup().getLayers()},M.prototype.getPixelFromCoordinate=function(t){var e=this.frameState_;return e?w.a.apply(e.coordinateToPixelTransform,t.slice(0,2)):null},M.prototype.getRenderer=function(){return this.renderer_},M.prototype.getSize=function(){return this.get(c.a.SIZE)},M.prototype.getView=function(){return this.get(c.a.VIEW)},M.prototype.getViewport=function(){return this.viewport_},M.prototype.getOverlayContainer=function(){return this.overlayContainer_},M.prototype.getOverlayContainerStopEvent=function(){return this.overlayContainerStopEvent_},M.prototype.getTilePriority=function(t,e,i,r){var n=this.frameState_;if(!(n&&e in n.wantedTiles))return A.a.DROP;if(!n.wantedTiles[e][t.getKey()])return A.a.DROP;var o=i[0]-n.focus[0],a=i[1]-n.focus[1];return 65536*Math.log(r)+Math.sqrt(o*o+a*a)/r},M.prototype.handleBrowserEvent=function(t,e){var i=e||t.type,r=new a.a(i,this,t);this.handleMapBrowserEvent(r)},M.prototype.handleMapBrowserEvent=function(t){if(this.frameState_){this.focus_=t.coordinate,t.frameState=this.frameState_;var e,i=this.getInteractions().getArray();if(!1!==this.dispatchEvent(t))for(e=i.length-1;e>=0;e--){var r=i[e];if(r.getActive()){var n=r.handleEvent(t);if(!n)break}}}},M.prototype.handlePostRender=function(){var t=this.frameState_,e=this.tileQueue_;if(!e.isEmpty()){var i=16,r=i;if(t){var n=t.viewHints;n[g.a.ANIMATING]&&(i=this.loadTilesWhileAnimating_?8:0,r=2),n[g.a.INTERACTING]&&(i=this.loadTilesWhileInteracting_?8:0,r=2)}e.getTilesLoading()<i&&(e.reprioritize(),e.loadMoreTiles(i,r))}var o,a,s=this.postRenderFunctions_;for(o=0,a=s.length;o<a;++o)s[o](this,t);s.length=0},M.prototype.handleSizeChanged_=function(){this.render()},M.prototype.handleTargetChanged_=function(){var t;if(this.getTarget()&&(t=this.getTargetElement()),this.keyHandlerKeys_){for(var e=0,i=this.keyHandlerKeys_.length;e<i;++e)m.a.unlistenByKey(this.keyHandlerKeys_[e]);this.keyHandlerKeys_=null}if(t){t.appendChild(this.viewport_);var r=this.keyboardEventTarget_?this.keyboardEventTarget_:t;this.keyHandlerKeys_=[m.a.listen(r,T.a.KEYDOWN,this.handleBrowserEvent,this),m.a.listen(r,T.a.KEYPRESS,this.handleBrowserEvent,this)],this.handleResize_||(this.handleResize_=this.updateSize.bind(this),window.addEventListener(T.a.RESIZE,this.handleResize_,!1))}else this.renderer_.removeLayerRenderers(),v.a.removeNode(this.viewport_),void 0!==this.handleResize_&&(window.removeEventListener(T.a.RESIZE,this.handleResize_,!1),this.handleResize_=void 0);this.updateSize()},M.prototype.handleTileChange_=function(){this.render()},M.prototype.handleViewPropertyChanged_=function(){this.render()},M.prototype.handleViewChanged_=function(){this.viewPropertyListenerKey_&&(m.a.unlistenByKey(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(m.a.unlistenByKey(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);var t=this.getView();t&&(this.viewport_.setAttribute("data-view",r.a.getUid(t)),this.viewPropertyListenerKey_=m.a.listen(t,d.a.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=m.a.listen(t,T.a.CHANGE,this.handleViewPropertyChanged_,this)),this.render()},M.prototype.handleLayerGroupChanged_=function(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(m.a.unlistenByKey),this.layerGroupPropertyListenerKeys_=null);var t=this.getLayerGroup();t&&(this.layerGroupPropertyListenerKeys_=[m.a.listen(t,d.a.PROPERTYCHANGE,this.render,this),m.a.listen(t,T.a.CHANGE,this.render,this)]),this.render()},M.prototype.isRendered=function(){return!!this.frameState_},M.prototype.renderSync=function(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()},M.prototype.render=function(){void 0===this.animationDelayKey_&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))},M.prototype.removeControl=function(t){return this.getControls().remove(t)},M.prototype.removeInteraction=function(t){return this.getInteractions().remove(t)},M.prototype.removeLayer=function(t){return this.getLayerGroup().getLayers().remove(t)},M.prototype.removeOverlay=function(t){return this.getOverlays().remove(t)},M.prototype.renderFrame_=function(t){var e,i,n,o=this.getSize(),a=this.getView(),s=S.a.createEmpty(),l=this.frameState_,c=null;if(void 0!==o&&L.a.hasArea(o)&&a&&a.isDef()){var p=a.getHints(this.frameState_?this.frameState_.viewHints:void 0),d=this.getLayerGroup().getLayerStatesArray(),f={};for(e=0,i=d.length;e<i;++e)f[r.a.getUid(d[e].layer)]=d[e];n=a.getState();var _=n.center,y=n.resolution/this.pixelRatio_;_[0]=Math.round(_[0]/y)*y,_[1]=Math.round(_[1]/y)*y,c={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,extent:s,focus:this.focus_?this.focus_:_,index:this.frameIndex_++,layerStates:f,layerStatesArray:d,logos:C.a.assign({},this.logos_),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:o,skippedFeatureUids:this.skippedFeatureUids_,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:n,viewHints:p,wantedTiles:{}}}if(c&&(c.extent=S.a.getForViewAndSize(n.center,n.resolution,n.rotation,c.size,s)),this.frameState_=c,this.renderer_.renderFrame(c),c){if(c.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,c.postRenderFunctions),l){(!this.previousExtent_||!S.a.isEmpty(this.previousExtent_)&&!S.a.equals(c.extent,this.previousExtent_))&&(this.dispatchEvent(new u.a(h.a.MOVESTART,this,l)),this.previousExtent_=S.a.createOrUpdateEmpty(this.previousExtent_))}this.previousExtent_&&!c.viewHints[g.a.ANIMATING]&&!c.viewHints[g.a.INTERACTING]&&!S.a.equals(c.extent,this.previousExtent_)&&(this.dispatchEvent(new u.a(h.a.MOVEEND,this,c)),S.a.clone(c.extent,this.previousExtent_))}this.dispatchEvent(new u.a(h.a.POSTRENDER,this,c)),setTimeout(this.handlePostRender.bind(this),0)},M.prototype.setLayerGroup=function(t){this.set(c.a.LAYERGROUP,t)},M.prototype.setSize=function(t){this.set(c.a.SIZE,t)},M.prototype.setTarget=function(t){this.set(c.a.TARGET,t)},M.prototype.setView=function(t){this.set(c.a.VIEW,t)},M.prototype.skipFeature=function(t){var e=r.a.getUid(t).toString();this.skippedFeatureUids_[e]=!0,this.render()},M.prototype.updateSize=function(){var t=this.getTargetElement();if(t){var e=getComputedStyle(t);this.setSize([t.offsetWidth-parseFloat(e.borderLeftWidth)-parseFloat(e.paddingLeft)-parseFloat(e.paddingRight)-parseFloat(e.borderRightWidth),t.offsetHeight-parseFloat(e.borderTopWidth)-parseFloat(e.paddingTop)-parseFloat(e.paddingBottom)-parseFloat(e.borderBottomWidth)])}else this.setSize(void 0)},M.prototype.unskipFeature=function(t){var e=r.a.getUid(t).toString();delete this.skippedFeatureUids_[e],this.render()},M.DEFAULT_RENDERER_TYPES=[P.a.CANVAS,P.a.WEBGL],M.LOGO_URL="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAA3NCSVQICAjb4U/gAAAACXBIWXMAAAHGAAABxgEXwfpGAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAhNQTFRF////AP//AICAgP//AFVVQECA////K1VVSbbbYL/fJ05idsTYJFtbbcjbJllmZszWWMTOIFhoHlNiZszTa9DdUcHNHlNlV8XRIVdiasrUHlZjIVZjaMnVH1RlIFRkH1RkH1ZlasvYasvXVsPQH1VkacnVa8vWIVZjIFRjVMPQa8rXIVVkXsXRsNveIFVkIFZlIVVj3eDeh6GmbMvXH1ZkIFRka8rWbMvXIFVkIFVjIFVkbMvWH1VjbMvWIFVlbcvWIFVla8vVIFVkbMvWbMvVH1VkbMvWIFVlbcvWIFVkbcvVbMvWjNPbIFVkU8LPwMzNIFVkbczWIFVkbsvWbMvXIFVkRnB8bcvW2+TkW8XRIFVkIlZlJVloJlpoKlxrLl9tMmJwOWd0Omh1RXF8TneCT3iDUHiDU8LPVMLPVcLPVcPQVsPPVsPQV8PQWMTQWsTQW8TQXMXSXsXRX4SNX8bSYMfTYcfTYsfTY8jUZcfSZsnUaIqTacrVasrVa8jTa8rWbI2VbMvWbcvWdJObdcvUdszUd8vVeJaee87Yfc3WgJyjhqGnitDYjaarldPZnrK2oNbborW5o9bbo9fbpLa6q9ndrL3ArtndscDDutzfu8fJwN7gwt7gxc/QyuHhy+HizeHi0NfX0+Pj19zb1+Tj2uXk29/e3uLg3+Lh3+bl4uXj4ufl4+fl5Ofl5ufl5ujm5+jmySDnBAAAAFp0Uk5TAAECAgMEBAYHCA0NDg4UGRogIiMmKSssLzU7PkJJT1JTVFliY2hrdHZ3foSFhYeJjY2QkpugqbG1tre5w8zQ09XY3uXn6+zx8vT09vf4+Pj5+fr6/P39/f3+gz7SsAAAAVVJREFUOMtjYKA7EBDnwCPLrObS1BRiLoJLnte6CQy8FLHLCzs2QUG4FjZ5GbcmBDDjxJBXDWxCBrb8aM4zbkIDzpLYnAcE9VXlJSWlZRU13koIeW57mGx5XjoMZEUqwxWYQaQbSzLSkYGfKFSe0QMsX5WbjgY0YS4MBplemI4BdGBW+DQ11eZiymfqQuXZIjqwyadPNoSZ4L+0FVM6e+oGI6g8a9iKNT3o8kVzNkzRg5lgl7p4wyRUL9Yt2jAxVh6mQCogae6GmflI8p0r13VFWTHBQ0rWPW7ahgWVcPm+9cuLoyy4kCJDzCm6d8PSFoh0zvQNC5OjDJhQopPPJqph1doJBUD5tnkbZiUEqaCnB3bTqLTFG1bPn71kw4b+GFdpLElKIzRxxgYgWNYc5SCENVHKeUaltHdXx0dZ8uBI1hJ2UUDgq82CM2MwKeibqAvSO7MCABq0wXEPiqWEAAAAAElFTkSuQmCC",M.createOptionsInternal=function(t){var e=null;void 0!==t.keyboardEventTarget&&(e="string"==typeof t.keyboardEventTarget?document.getElementById(t.keyboardEventTarget):t.keyboardEventTarget);var i={},o={};if(void 0===t.logo||"boolean"==typeof t.logo&&t.logo)o[M.LOGO_URL]="https://openlayers.org/";else{var a=t.logo;"string"==typeof a?o[a]="":a instanceof HTMLElement?o[r.a.getUid(a).toString()]=a:a&&(y.a.assert("string"==typeof a.href,44),y.a.assert("string"==typeof a.src,45),o[a.src]=a.href)}var s=t.layers instanceof x.a?t.layers:new x.a({layers:t.layers});i[c.a.LAYERGROUP]=s,i[c.a.TARGET]=t.target,i[c.a.VIEW]=void 0!==t.view?t.view:new _.a;var l;void 0!==t.renderer?(Array.isArray(t.renderer)?l=t.renderer:"string"==typeof t.renderer?l=[t.renderer]:y.a.assert(!1,46),l.indexOf("dom")>=0&&(l=l.concat(M.DEFAULT_RENDERER_TYPES))):l=M.DEFAULT_RENDERER_TYPES;var u,h=O.a.getMapRendererPlugins();t:for(var p=0,d=l.length;p<d;++p)for(var f=l[p],g=0,v=h.length;g<v;++g){var m=h[g];if(m.handles(f)){u=m;break t}}if(!u)throw new Error("Unable to create a map renderer for types: "+l.join(", "));var E;void 0!==t.controls&&(Array.isArray(t.controls)?E=new n.a(t.controls.slice()):(y.a.assert(t.controls instanceof n.a,47),E=t.controls));var T;void 0!==t.interactions&&(Array.isArray(t.interactions)?T=new n.a(t.interactions.slice()):(y.a.assert(t.interactions instanceof n.a,48),T=t.interactions));var S;return void 0!==t.overlays?Array.isArray(t.overlays)?S=new n.a(t.overlays.slice()):(y.a.assert(t.overlays instanceof n.a,49),S=t.overlays):S=new n.a,{controls:E,interactions:T,keyboardEventTarget:e,logos:o,overlays:S,mapRendererPlugin:u,values:i}},e.a=M},function(t,e,i){"use strict";var r={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"};e.a=r},function(t,e,i){"use strict";var r={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};e.a=r},function(t,e,i){"use strict";var r=i(0),n=i(74),o=i(127),a=i(18),s=i(93),l=i(9),u=i(4),h=i(5),c=i(1),p=i(225),d=i(2),f=i(63),_=function(t){var e=t||{},i=d.a.assign({},e);delete i.layers;var r=e.layers;p.a.call(this,i),this.layersListenerKeys_=[],this.listenerKeys_={},u.a.listen(this,a.a.getChangeEventType(_.Property_.LAYERS),this.handleLayersChanged_,this),r?Array.isArray(r)?r=new n.a(r.slice(),{unique:!0}):(l.a.assert(r instanceof n.a,43),r=r):r=new n.a(void 0,{unique:!0}),this.setLayers(r)};r.a.inherits(_,p.a),_.prototype.handleLayerChange_=function(){this.changed()},_.prototype.handleLayersChanged_=function(t){this.layersListenerKeys_.forEach(u.a.unlistenByKey),this.layersListenerKeys_.length=0;var e=this.getLayers();this.layersListenerKeys_.push(u.a.listen(e,o.a.ADD,this.handleLayersAdd_,this),u.a.listen(e,o.a.REMOVE,this.handleLayersRemove_,this));for(var i in this.listenerKeys_)this.listenerKeys_[i].forEach(u.a.unlistenByKey);d.a.clear(this.listenerKeys_);var n,a,l,c=e.getArray();for(n=0,a=c.length;n<a;n++)l=c[n],this.listenerKeys_[r.a.getUid(l).toString()]=[u.a.listen(l,s.a.PROPERTYCHANGE,this.handleLayerChange_,this),u.a.listen(l,h.a.CHANGE,this.handleLayerChange_,this)];this.changed()},_.prototype.handleLayersAdd_=function(t){var e=t.element,i=r.a.getUid(e).toString();this.listenerKeys_[i]=[u.a.listen(e,s.a.PROPERTYCHANGE,this.handleLayerChange_,this),u.a.listen(e,h.a.CHANGE,this.handleLayerChange_,this)],this.changed()},_.prototype.handleLayersRemove_=function(t){var e=t.element,i=r.a.getUid(e).toString();this.listenerKeys_[i].forEach(u.a.unlistenByKey),delete this.listenerKeys_[i],this.changed()},_.prototype.getLayers=function(){return this.get(_.Property_.LAYERS)},_.prototype.setLayers=function(t){this.set(_.Property_.LAYERS,t)},_.prototype.getLayersArray=function(t){var e=void 0!==t?t:[];return this.getLayers().forEach(function(t){t.getLayersArray(e)}),e},_.prototype.getLayerStatesArray=function(t){var e=void 0!==t?t:[],i=e.length;this.getLayers().forEach(function(t){t.getLayerStatesArray(e)});var r,n,o,a=this.getLayerState();for(r=i,n=e.length;r<n;r++)o=e[r],o.opacity*=a.opacity,o.visible=o.visible&&a.visible,o.maxResolution=Math.min(o.maxResolution,a.maxResolution),o.minResolution=Math.max(o.minResolution,a.minResolution),void 0!==a.extent&&(void 0!==o.extent?o.extent=c.a.getIntersection(o.extent,a.extent):o.extent=a.extent);return e},_.prototype.getSourceState=function(){return f.a.READY},_.Property_={LAYERS:"layers"},e.a=_},function(t,e,i){"use strict";var r={MAP_RENDERER:"MAP_RENDERER",LAYER_RENDERER:"LAYER_RENDERER"};e.a=r},function(t,e,i){"use strict";var r=i(4),n=i(5),o=i(0),a=i(29),s=i(34),l=i(50),u=function(t){var e=t||{},i=void 0!==e.className?e.className:"ol-rotate",o=void 0!==e.label?e.label:"";this.label_=null,"string"==typeof o?(this.label_=document.createElement("span"),this.label_.className="ol-compass",this.label_.textContent=o):(this.label_=o,this.label_.classList.add("ol-compass"));var l=e.tipLabel?e.tipLabel:"Reset rotation",h=document.createElement("button");h.className=i+"-reset",h.setAttribute("type","button"),h.title=l,h.appendChild(this.label_),r.a.listen(h,n.a.CLICK,u.prototype.handleClick_,this);var c=i+" "+s.a.CLASS_UNSELECTABLE+" "+s.a.CLASS_CONTROL,p=document.createElement("div");p.className=c,p.appendChild(h);var d=e.render?e.render:u.render;this.callResetNorth_=e.resetNorth?e.resetNorth:void 0,a.a.call(this,{element:p,render:d,target:e.target}),this.duration_=void 0!==e.duration?e.duration:250,this.autoHide_=void 0===e.autoHide||e.autoHide,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(s.a.CLASS_HIDDEN)};o.a.inherits(u,a.a),u.prototype.handleClick_=function(t){t.preventDefault(),void 0!==this.callResetNorth_?this.callResetNorth_():this.resetNorth_()},u.prototype.resetNorth_=function(){var t=this.getMap(),e=t.getView();e&&void 0!==e.getRotation()&&(this.duration_>0?e.animate({rotation:0,duration:this.duration_,easing:l.a.easeOut}):e.setRotation(0))},u.render=function(t){var e=t.frameState;if(e){var i=e.viewState.rotation;if(i!=this.rotation_){var r="rotate("+i+"rad)";if(this.autoHide_){var n=this.element.classList.contains(s.a.CLASS_HIDDEN);n||0!==i?n&&0!==i&&this.element.classList.remove(s.a.CLASS_HIDDEN):this.element.classList.add(s.a.CLASS_HIDDEN)}this.label_.style.msTransform=r,this.label_.style.webkitTransform=r,this.label_.style.transform=r}this.rotation_=i}},e.a=u},function(t,e,i){"use strict";var r={FRACTION:"fraction",PIXELS:"pixels"};e.a=r},function(t,e,i){"use strict";var r=i(372),n={};n.iconImageCache=new r.a,e.a=n},function(t,e,i){"use strict";var r={BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",TOP_LEFT:"top-left",TOP_RIGHT:"top-right"};e.a=r},function(t,e,i){"use strict";var r=i(0),n=i(9),o=i(1),a=i(2),s=i(7),l=i(8),u=i(137),h=i(75),c=i(103),p=i(252),d=i(56),f=i(122),_=i(138),g=function(t){var e=t||{},i=e.params||{},r=!("TRANSPARENT"in i)||i.TRANSPARENT;c.a.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,logo:e.logo,opaque:!r,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileClass:e.tileClass,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction,url:e.url,urls:e.urls,wrapX:void 0===e.wrapX||e.wrapX,transition:e.transition}),this.gutter_=void 0!==e.gutter?e.gutter:0,this.params_=i,this.v13_=!0,this.serverType_=e.serverType,this.hidpi_=void 0===e.hidpi||e.hidpi,this.tmpExtent_=o.a.createEmpty(),this.updateV13_(),this.setKey(this.getKeyForParams_())};r.a.inherits(g,c.a),g.prototype.getGetFeatureInfoUrl=function(t,e,i,n){var s=l.a.get(i),c=this.getProjection(),p=this.getTileGrid();p||(p=this.getTileGridForProjection(s));var d=p.getTileCoordForCoordAndResolution(t,e);if(!(p.getResolutions().length<=d[0])){var f=p.getResolution(d[0]),_=p.getTileCoordExtent(d,this.tmpExtent_),g=h.a.toSize(p.getTileSize(d[0]),this.tmpSize),y=this.gutter_;0!==y&&(g=h.a.buffer(g,y,this.tmpSize),_=o.a.buffer(_,f*y,_)),c&&c!==s&&(f=u.a.calculateSourceResolution(c,s,t,f),_=l.a.transformExtent(_,s,c),t=l.a.transform(t,s,c));var v={SERVICE:"WMS",VERSION:r.a.DEFAULT_WMS_VERSION,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.params_.LAYERS};a.a.assign(v,this.params_,n);var m=Math.floor((t[0]-_[0])/f),E=Math.floor((_[3]-t[1])/f);return v[this.v13_?"I":"X"]=m,v[this.v13_?"J":"Y"]=E,this.getRequestUrl_(d,g,_,1,c||s,v)}},g.prototype.getGutterInternal=function(){return this.gutter_},g.prototype.getParams=function(){return this.params_},g.prototype.getRequestUrl_=function(t,e,i,r,o,a){var l=this.urls;if(l){if(a.WIDTH=e[0],a.HEIGHT=e[1],a[this.v13_?"CRS":"SRS"]=o.getCode(),"STYLES"in this.params_||(a.STYLES=""),1!=r)switch(this.serverType_){case p.a.GEOSERVER:var u=90*r+.5|0;"FORMAT_OPTIONS"in a?a.FORMAT_OPTIONS+=";dpi:"+u:a.FORMAT_OPTIONS="dpi:"+u;break;case p.a.MAPSERVER:a.MAP_RESOLUTION=90*r;break;case p.a.CARMENTA_SERVER:case p.a.QGIS:a.DPI=90*r;break;default:n.a.assert(!1,52)}var h=o.getAxisOrientation(),c=i;if(this.v13_&&"ne"==h.substr(0,2)){var f;f=i[0],c[0]=i[1],c[1]=f,f=i[2],c[2]=i[3],c[3]=f}a.BBOX=c.join(",");var g;if(1==l.length)g=l[0];else{g=l[s.a.modulo(d.a.hash(t),l.length)]}return _.a.appendParams(g,a)}},g.prototype.getTilePixelRatio=function(t){return this.hidpi_&&void 0!==this.serverType_?t:1},g.prototype.getKeyForParams_=function(){var t=0,e=[];for(var i in this.params_)e[t++]=i+"-"+this.params_[i];return e.join("/")},g.prototype.fixedTileUrlFunction=function(t,e,i){var n=this.getTileGrid();if(n||(n=this.getTileGridForProjection(i)),!(n.getResolutions().length<=t[0])){1==e||this.hidpi_&&void 0!==this.serverType_||(e=1);var s=n.getResolution(t[0]),l=n.getTileCoordExtent(t,this.tmpExtent_),u=h.a.toSize(n.getTileSize(t[0]),this.tmpSize),c=this.gutter_;0!==c&&(u=h.a.buffer(u,c,this.tmpSize),l=o.a.buffer(l,s*c,l)),1!=e&&(u=h.a.scale(u,e,this.tmpSize));var p={SERVICE:"WMS",VERSION:r.a.DEFAULT_WMS_VERSION,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};return a.a.assign(p,this.params_),this.getRequestUrl_(t,u,l,e,i,p)}},g.prototype.updateParams=function(t){a.a.assign(this.params_,t),this.updateV13_(),this.setKey(this.getKeyForParams_())},g.prototype.updateV13_=function(){var t=this.params_.VERSION||r.a.DEFAULT_WMS_VERSION;this.v13_=f.a.compareVersions(t,"1.3")>=0},e.a=g},function(t,e,i){"use strict";var r=i(0),n=i(39),o=i(50),a=i(69),s=i(5),l=function(t,e,i){a.a.call(this);var r=i||{};this.tileCoord=t,this.state=e,this.interimTile=null,this.key="",this.transition_=void 0===r.transition?250:r.transition,this.transitionStarts_={}};r.a.inherits(l,a.a),l.prototype.changed=function(){this.dispatchEvent(s.a.CHANGE)},l.prototype.getKey=function(){return this.key+"/"+this.tileCoord},l.prototype.getInterimTile=function(){if(!this.interimTile)return this;var t=this.interimTile;do{if(t.getState()==n.a.LOADED)return t;t=t.interimTile}while(t);return this},l.prototype.refreshInterimChain=function(){if(this.interimTile){var t=this.interimTile,e=this;do{if(t.getState()==n.a.LOADED){t.interimTile=null;break}t.getState()==n.a.LOADING?e=t:t.getState()==n.a.IDLE?e.interimTile=t.interimTile:e=t,t=e.interimTile}while(t)}},l.prototype.getTileCoord=function(){return this.tileCoord},l.prototype.getState=function(){return this.state},l.prototype.setState=function(t){this.state=t,this.changed()},l.prototype.load=function(){},l.prototype.getAlpha=function(t,e){if(!this.transition_)return 1;var i=this.transitionStarts_[t];if(i){if(-1===i)return 1}else i=e,this.transitionStarts_[t]=i;var r=e-i+1e3/60;return r>=this.transition_?1:o.a.easeIn(r/this.transition_)},l.prototype.inTransition=function(t){return!!this.transition_&&-1!==this.transitionStarts_[t]},l.prototype.endTransition=function(t){this.transition_&&(this.transitionStarts_[t]=-1)},e.a=l},function(t,e,i){"use strict";var r=i(0),n=i(121),o=i(56),a=function(t){n.a.call(this,t)};r.a.inherits(a,n.a),a.prototype.expireCache=function(t){for(var e,i;this.canExpireCache()&&(e=this.peekLast(),!((i=e.tileCoord[0].toString())in t&&t[i].contains(e.tileCoord)));)this.pop().dispose()},a.prototype.pruneExceptNewestZ=function(){if(0!==this.getCount()){var t=this.peekFirstKey(),e=o.a.fromKey(t),i=e[0];this.forEach(function(t){t.tileCoord[0]!==i&&(this.remove(o.a.getKey(t.tileCoord)),t.dispose())},this)}},e.a=a},function(t,e,i){"use strict";var r=i(0),n=i(1),o=i(7),a=i(8),s=function(t,e,i,o,s){this.sourceProj_=t,this.targetProj_=e;var l={},u=a.a.getTransform(this.targetProj_,this.sourceProj_);this.transformInv_=function(t){var e=t[0]+"/"+t[1];return l[e]||(l[e]=u(t)),l[e]},this.maxSourceExtent_=o,this.errorThresholdSquared_=s*s,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!o&&!!this.sourceProj_.getExtent()&&n.a.getWidth(o)==n.a.getWidth(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?n.a.getWidth(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?n.a.getWidth(this.targetProj_.getExtent()):null;var h=n.a.getTopLeft(i),c=n.a.getTopRight(i),p=n.a.getBottomRight(i),d=n.a.getBottomLeft(i),f=this.transformInv_(h),_=this.transformInv_(c),g=this.transformInv_(p),y=this.transformInv_(d);if(this.addQuad_(h,c,p,d,f,_,g,y,r.a.RASTER_REPROJECTION_MAX_SUBDIVISION),this.wrapsXInSource_){var v=1/0;this.triangles_.forEach(function(t,e,i){v=Math.min(v,t.source[0][0],t.source[1][0],t.source[2][0])}),this.triangles_.forEach(function(t){if(Math.max(t.source[0][0],t.source[1][0],t.source[2][0])-v>this.sourceWorldWidth_/2){var e=[[t.source[0][0],t.source[0][1]],[t.source[1][0],t.source[1][1]],[t.source[2][0],t.source[2][1]]];e[0][0]-v>this.sourceWorldWidth_/2&&(e[0][0]-=this.sourceWorldWidth_),e[1][0]-v>this.sourceWorldWidth_/2&&(e[1][0]-=this.sourceWorldWidth_),e[2][0]-v>this.sourceWorldWidth_/2&&(e[2][0]-=this.sourceWorldWidth_);var i=Math.min(e[0][0],e[1][0],e[2][0]);Math.max(e[0][0],e[1][0],e[2][0])-i<this.sourceWorldWidth_/2&&(t.source=e)}},this)}l={}};s.prototype.addTriangle_=function(t,e,i,r,n,o){this.triangles_.push({source:[r,n,o],target:[t,e,i]})},s.prototype.addQuad_=function(t,e,i,a,s,l,u,h,c){var p=n.a.boundingExtent([s,l,u,h]),d=this.sourceWorldWidth_?n.a.getWidth(p)/this.sourceWorldWidth_:null,f=this.sourceWorldWidth_,_=this.sourceProj_.canWrapX()&&d>.5&&d<1,g=!1;if(c>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){var y=n.a.boundingExtent([t,e,i,a]);g|=n.a.getWidth(y)/this.targetWorldWidth_>r.a.RASTER_REPROJECTION_MAX_TRIANGLE_WIDTH}!_&&this.sourceProj_.isGlobal()&&d&&(g|=d>r.a.RASTER_REPROJECTION_MAX_TRIANGLE_WIDTH)}if(g||!this.maxSourceExtent_||n.a.intersects(p,this.maxSourceExtent_)){if(!(g||isFinite(s[0])&&isFinite(s[1])&&isFinite(l[0])&&isFinite(l[1])&&isFinite(u[0])&&isFinite(u[1])&&isFinite(h[0])&&isFinite(h[1]))){if(!(c>0))return;g=!0}if(c>0){if(!g){var v,m=[(t[0]+i[0])/2,(t[1]+i[1])/2],E=this.transformInv_(m);if(_){v=(o.a.modulo(s[0],f)+o.a.modulo(u[0],f))/2-o.a.modulo(E[0],f)}else v=(s[0]+u[0])/2-E[0];var T=(s[1]+u[1])/2-E[1];g=v*v+T*T>this.errorThresholdSquared_}if(g){if(Math.abs(t[0]-i[0])<=Math.abs(t[1]-i[1])){var S=[(e[0]+i[0])/2,(e[1]+i[1])/2],R=this.transformInv_(S),I=[(a[0]+t[0])/2,(a[1]+t[1])/2],x=this.transformInv_(I);this.addQuad_(t,e,S,I,s,l,R,x,c-1),this.addQuad_(I,S,i,a,x,R,u,h,c-1)}else{var C=[(t[0]+e[0])/2,(t[1]+e[1])/2],O=this.transformInv_(C),P=[(i[0]+a[0])/2,(i[1]+a[1])/2],L=this.transformInv_(P);this.addQuad_(t,C,P,a,s,O,L,h,c-1),this.addQuad_(C,e,i,P,O,l,u,L,c-1)}return}}if(_){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}this.addTriangle_(t,i,a,s,u,h),this.addTriangle_(t,e,i,s,l,u)}},s.prototype.calculateSourceExtent=function(){var t=n.a.createEmpty();return this.triangles_.forEach(function(e,i,r){var o=e.source;n.a.extendCoordinate(t,o[0]),n.a.extendCoordinate(t,o[1]),n.a.extendCoordinate(t,o[2])}),t},s.prototype.getTriangles=function(){return this.triangles_},e.a=s},function(t,e,i){"use strict";var r={CARMENTA_SERVER:"carmentaserver",GEOSERVER:"geoserver",MAPSERVER:"mapserver",QGIS:"qgis"};e.a=r},function(t,e,i){"use strict";var r=i(0),n=i(184),o=i(43),a=i(4),s=i(5),l=i(1),u=function(t,e,i,r,a,s){n.a.call(this,t,e,i,o.a.IDLE),this.src_=r,this.image_=new Image,null!==a&&(this.image_.crossOrigin=a),this.imageListenerKeys_=null,this.state=o.a.IDLE,this.imageLoadFunction_=s};r.a.inherits(u,n.a),u.prototype.getImage=function(){return this.image_},u.prototype.handleImageError_=function(){this.state=o.a.ERROR,this.unlistenImage_(),this.changed()},u.prototype.handleImageLoad_=function(){void 0===this.resolution&&(this.resolution=l.a.getHeight(this.extent)/this.image_.height),this.state=o.a.LOADED,this.unlistenImage_(),this.changed()},u.prototype.load=function(){this.state!=o.a.IDLE&&this.state!=o.a.ERROR||(this.state=o.a.LOADING,this.changed(),this.imageListenerKeys_=[a.a.listenOnce(this.image_,s.a.ERROR,this.handleImageError_,this),a.a.listenOnce(this.image_,s.a.LOAD,this.handleImageLoad_,this)],this.imageLoadFunction_(this,this.src_))},u.prototype.setImage=function(t){this.image_=t},u.prototype.unlistenImage_=function(){this.imageListenerKeys_.forEach(a.a.unlistenByKey),this.imageListenerKeys_=null},e.a=u},function(t,e,i){"use strict";var r=i(0),n=i(43),o=i(6),a=i(25),s=i(1),l=i(8),u=i(385),h=i(171),c=function(t){h.a.call(this,{attributions:t.attributions,extent:t.extent,logo:t.logo,projection:t.projection,state:t.state}),this.resolutions_=void 0!==t.resolutions?t.resolutions:null,this.reprojectedImage_=null,this.reprojectedRevision_=0};r.a.inherits(c,h.a),c.prototype.getResolutions=function(){return this.resolutions_},c.prototype.findNearestResolution=function(t){if(this.resolutions_){var e=o.a.linearFindNearest(this.resolutions_,t,0);t=this.resolutions_[e]}return t},c.prototype.getImage=function(t,e,i,n){var o=this.getProjection();if(r.a.ENABLE_RASTER_REPROJECTION&&o&&n&&!l.a.equivalent(o,n)){if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&l.a.equivalent(this.reprojectedImage_.getProjection(),n)&&this.reprojectedImage_.getResolution()==e&&s.a.equals(this.reprojectedImage_.getExtent(),t))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new u.a(o,n,t,e,i,function(t,e,i){return this.getImageInternal(t,e,i,o)}.bind(this)),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}return o&&(n=o),this.getImageInternal(t,e,i,n)},c.prototype.getImageInternal=function(t,e,i,r){},c.prototype.handleImageChange=function(t){var e=t.target;switch(e.getState()){case n.a.LOADING:this.dispatchEvent(new c.Event(c.EventType_.IMAGELOADSTART,e));break;case n.a.LOADED:this.dispatchEvent(new c.Event(c.EventType_.IMAGELOADEND,e));break;case n.a.ERROR:this.dispatchEvent(new c.Event(c.EventType_.IMAGELOADERROR,e))}},c.defaultImageLoadFunction=function(t,e){t.getImage().src=e},c.Event=function(t,e){a.a.call(this,t),this.image=e},r.a.inherits(c.Event,a.a),c.EventType_={IMAGELOADSTART:"imageloadstart",IMAGELOADEND:"imageloadend",IMAGELOADERROR:"imageloaderror"},e.a=c},function(t,e,i){"use strict";var r=i(0),n=i(183),o=i(6),a=i(1),s=i(2),l=i(8),u=i(103),h=i(389),c=i(256),p=i(138),d=function(t){this.version_=void 0!==t.version?t.version:"1.0.0",this.format_=void 0!==t.format?t.format:"image/jpeg",this.dimensions_=void 0!==t.dimensions?t.dimensions:{},this.layer_=t.layer,this.matrixSet_=t.matrixSet,this.style_=t.style;var e=t.urls;void 0===e&&void 0!==t.url&&(e=n.a.expandUrl(t.url)),this.requestEncoding_=void 0!==t.requestEncoding?t.requestEncoding:h.a.KVP;var i=this.requestEncoding_,r=t.tileGrid,o={layer:this.layer_,style:this.style_,tilematrixset:this.matrixSet_};i==h.a.KVP&&s.a.assign(o,{Service:"WMTS",Request:"GetTile",Version:this.version_,Format:this.format_});var a=this.dimensions_;this.createFromWMTSTemplate_=function(t){return t=i==h.a.KVP?p.a.appendParams(t,o):t.replace(/\{(\w+?)\}/g,function(t,e){return e.toLowerCase()in o?o[e.toLowerCase()]:t}),function(e,n,o){if(e){var l={TileMatrix:r.getMatrixId(e[0]),TileCol:e[1],TileRow:-e[2]-1};s.a.assign(l,a);var u=t;return u=i==h.a.KVP?p.a.appendParams(u,l):u.replace(/\{(\w+?)\}/g,function(t,e){return l[e]})}}};var l=e&&e.length>0?n.a.createFromTileUrlFunctions(e.map(this.createFromWMTSTemplate_)):n.a.nullTileUrlFunction;u.a.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,logo:t.logo,projection:t.projection,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileClass:t.tileClass,tileGrid:r,tileLoadFunction:t.tileLoadFunction,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:l,urls:e,wrapX:void 0!==t.wrapX&&t.wrapX,transition:t.transition}),this.setKey(this.getKeyForDimensions_())};r.a.inherits(d,u.a),d.prototype.setUrls=function(t){this.urls=t;var e=t.join("\n");this.setTileUrlFunction(this.fixedTileUrlFunction?this.fixedTileUrlFunction.bind(this):n.a.createFromTileUrlFunctions(t.map(this.createFromWMTSTemplate_.bind(this))),e)},d.prototype.getDimensions=function(){return this.dimensions_},d.prototype.getFormat=function(){return this.format_},d.prototype.getLayer=function(){return this.layer_},d.prototype.getMatrixSet=function(){return this.matrixSet_},d.prototype.getRequestEncoding=function(){return this.requestEncoding_},d.prototype.getStyle=function(){return this.style_},d.prototype.getVersion=function(){return this.version_},d.prototype.getKeyForDimensions_=function(){var t=0,e=[];for(var i in this.dimensions_)e[t++]=i+"-"+this.dimensions_[i];return e.join("/")},d.prototype.updateDimensions=function(t){s.a.assign(this.dimensions_,t),this.setKey(this.getKeyForDimensions_())},d.optionsFromCapabilities=function(t,e){var i=t.Contents.Layer,r=o.a.find(i,function(t,i,r){return t.Identifier==e.layer});if(null===r)return null;var n,s,u,p=t.Contents.TileMatrixSet;n=r.TileMatrixSetLink.length>1?"projection"in e?o.a.findIndex(r.TileMatrixSetLink,function(t,i,r){var n=o.a.find(p,function(e){return e.Identifier==t.TileMatrixSet}),a=n.SupportedCRS,s=l.a.get(a.replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,"$1:$3"))||l.a.get(a),u=l.a.get(e.projection);return s&&u?l.a.equivalent(s,u):a==e.projection}):o.a.findIndex(r.TileMatrixSetLink,function(t,i,r){return t.TileMatrixSet==e.matrixSet}):0,n<0&&(n=0),s=r.TileMatrixSetLink[n].TileMatrixSet,u=r.TileMatrixSetLink[n].TileMatrixSetLimits;var d=r.Format[0];"format"in e&&(d=e.format),(n=o.a.findIndex(r.Style,function(t,i,r){return"style"in e?t.Title==e.style:t.isDefault}))<0&&(n=0);var f=r.Style[n].Identifier,_={};"Dimension"in r&&r.Dimension.forEach(function(t,e,i){var r=t.Identifier,n=t.Default;void 0===n&&(n=t.Value[0]),_[r]=n});var g,y=t.Contents.TileMatrixSet,v=o.a.find(y,function(t,e,i){return t.Identifier==s}),m=v.SupportedCRS;if(m&&(g=l.a.get(m.replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,"$1:$3"))||l.a.get(m)),"projection"in e){var E=l.a.get(e.projection);E&&(g&&!l.a.equivalent(E,g)||(g=E))}var T,S,R=r.WGS84BoundingBox;if(void 0!==R){var I=l.a.get("EPSG:4326").getExtent();S=R[0]==I[0]&&R[2]==I[2],T=l.a.transformExtent(R,"EPSG:4326",g);var x=g.getExtent();x&&(a.a.containsExtent(x,T)||(T=void 0))}var C=c.a.createFromCapabilitiesMatrixSet(v,T,u),O=[],P=e.requestEncoding;if(P=void 0!==P?P:"","OperationsMetadata"in t&&"GetTile"in t.OperationsMetadata)for(var L=t.OperationsMetadata.GetTile.DCP.HTTP.Get,A=0,w=L.length;A<w;++A)if(L[A].Constraint){var M=o.a.find(L[A].Constraint,function(t){return"GetEncoding"==t.name}),F=M.AllowedValues.Value;if(""===P&&(P=F[0]),P!==h.a.KVP)break;o.a.includes(F,h.a.KVP)&&O.push(L[A].href)}else L[A].href&&(P=h.a.KVP,O.push(L[A].href));return 0===O.length&&(P=h.a.REST,r.ResourceURL.forEach(function(t){"tile"===t.resourceType&&(d=t.format,O.push(t.template))})),{urls:O,layer:e.layer,matrixSet:s,format:d,projection:g,requestEncoding:P,tileGrid:C,style:f,dimensions:_,wrapX:S,crossOrigin:e.crossOrigin}},e.a=d},function(t,e,i){"use strict";var r=i(0),n=i(6),o=i(8),a=i(172),s=function(t){this.matrixIds_=t.matrixIds,a.a.call(this,{extent:t.extent,origin:t.origin,origins:t.origins,resolutions:t.resolutions,tileSize:t.tileSize,tileSizes:t.tileSizes,sizes:t.sizes})};r.a.inherits(s,a.a),s.prototype.getMatrixId=function(t){return this.matrixIds_[t]},s.prototype.getMatrixIds=function(){return this.matrixIds_},s.createFromCapabilitiesMatrixSet=function(t,e,i){var r=[],a=[],l=[],u=[],h=[],c=void 0!==i?i:[],p=t.SupportedCRS,d=o.a.get(p.replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,"$1:$3"))||o.a.get(p),f=d.getMetersPerUnit(),_="ne"==d.getAxisOrientation().substr(0,2);return t.TileMatrix.sort(function(t,e){return e.ScaleDenominator-t.ScaleDenominator}),t.TileMatrix.forEach(function(t,e,i){if(!(c.length>0)||n.a.find(c,function(e,i,r){return t.Identifier==e.TileMatrix})){a.push(t.Identifier);var o=28e-5*t.ScaleDenominator/f,s=t.TileWidth,p=t.TileHeight;_?l.push([t.TopLeftCorner[1],t.TopLeftCorner[0]]):l.push(t.TopLeftCorner),r.push(o),u.push(s==p?s:[s,p]),h.push([t.MatrixWidth,-t.MatrixHeight])}}),new s({extent:e,origins:l,resolutions:r,matrixIds:a,tileSizes:u,sizes:h})},e.a=s},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}i.d(e,"a",function(){return d});var n=i(3),o=i.n(n),a=i(31),s=i.n(a),l=i(102),u=i(130),h=i(57),c=i(38),p=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),o()(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),d=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,t),this._option=e,this._overlayMap={},this._allEvent={},this._currMap=null,this._olMap=null,this._visible=!0}return p(t,[{key:"setVisible",value:function(t){if("boolean"==typeof t)if(this._visible=t,this._visible)for(var e in this._overlayMap)this._overlayMap[e].getElement().style.display="block";else for(var i in this._overlayMap)this._overlayMap[i].getElement().style.display="none"}},{key:"_setMap",value:function(t){this._currMap=t,this._olMap=t._currOlMap,this._addZoomRange()}},{key:"_addOverlayToMap",value:function(t){var e=l.b("div");e.innerHTML='<img src = "'+t.src+'" id="'+t.id+'" style="cursor: pointer;"/>';var i=new u.a({element:e,offset:t.offset||[0,0],position:this._currMap.transform4326ToMap(t.coordinate),positioning:"center-center"});i.set("gifData",t),this._currMap&&this._olMap.addOverlay(i),this._overlayMap[t.id]=i}},{key:"addFeature",value:function(t){if(t instanceof Array){var e=!0,i=!1,r=void 0;try{for(var n,o=s()(t);!(e=(n=o.next()).done);e=!0){var a=n.value;this._addOverlayToMap(a)}}catch(t){i=!0,r=t}finally{try{!e&&o.return&&o.return()}finally{if(i)throw r}}}}},{key:"removeFeature",value:function(t){if(t instanceof Array){var e=!0,i=!1,r=void 0;try{for(var n,o=s()(t);!(e=(n=o.next()).done);e=!0){var a=n.value;this._olMap.removeOverlay(this._overlayMap[a]),delete this._overlayMap[a]}}catch(t){i=!0,r=t}finally{try{!e&&o.return&&o.return()}finally{if(i)throw r}}}}},{key:"destroy",value:function(){if(this._allEvent=null,this._overlayMap&&this._currMap){for(var t in this._overlayMap)this._overlayMap.hasOwnProperty(t)&&this._olMap.removeOverlay(this._overlayMap[t]);this._overlayMap=null,this._currMap=null}}},{key:"on",value:function(t,e){if(h.a.hasOwnProperty(t)&&!this._allEvent.hasOwnProperty(t)){var i=this;this._allEvent[t]=function(t){"contextmenu"===t.type&&t.preventDefault();var r=null;i._overlayMap[t.target.id]&&(r=i._overlayMap[t.target.id].get("gifData"));var n={e:t,data:r,target:t.target,type:t.type};e(n)};for(var r in this._overlayMap)this._overlayMap[r].getElement().children[0].addEventListener(t,this._allEvent[t])}}},{key:"off",value:function(t){if(h.a.hasOwnProperty(t)&&this._allEvent.hasOwnProperty(t)){for(var e in this._overlayMap)this._overlayMap[e].getElement().children[0].removeEventListener(t,this._allEvent[t]);delete this._allEvent[t]}}},{key:"_addZoomRange",value:function(){var t=this._option.zoomRange,e=t?t.minZoom||c.MapProperty.MIN_ZOOM:c.MapProperty.MIN_ZOOM,i=t?t.maxZoom||c.MapProperty.MAX_ZOOM:c.MapProperty.MAX_ZOOM;if(this._olMap){var r=this._olMap.getView(),n=void 0,o=this;r&&r.on("change:resolution",function(){n=Math.floor(r.getZoom()),n<e||n>i?o.setVisible(!1):o.setVisible(!0)})}}}]),t}()},function(t,e,i){var r=i(41),n=i(113),o=i(24)("species");t.exports=function(t,e){var i,a=r(t).constructor;return void 0===a||void 0==(i=r(a)[o])?e:n(i)}},function(t,e,i){var r,n,o,a=i(88),s=i(397),l=i(205),u=i(154),h=i(23),c=h.process,p=h.setImmediate,d=h.clearImmediate,f=h.MessageChannel,_=h.Dispatch,g=0,y={},v=function(){var t=+this;if(y.hasOwnProperty(t)){var e=y[t];delete y[t],e()}},m=function(t){v.call(t.data)};p&&d||(p=function(t){for(var e=[],i=1;arguments.length>i;)e.push(arguments[i++]);return y[++g]=function(){s("function"==typeof t?t:Function(t),e)},r(g),g},d=function(t){delete y[t]},"process"==i(91)(c)?r=function(t){c.nextTick(a(v,t,1))}:_&&_.now?r=function(t){_.now(a(v,t,1))}:f?(n=new f,o=n.port2,n.port1.onmessage=m,r=a(o.postMessage,o,1)):h.addEventListener&&"function"==typeof postMessage&&!h.importScripts?(r=function(t){h.postMessage(t+"","*")},h.addEventListener("message",m,!1)):r="onreadystatechange"in u("script")?function(t){l.appendChild(u("script")).onreadystatechange=function(){l.removeChild(this),v.call(t)}}:function(t){setTimeout(a(v,t,1),0)}),t.exports={set:p,clear:d}},function(t,e){t.exports=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}}},function(t,e,i){var r=i(41),n=i(59),o=i(185);t.exports=function(t,e){if(r(t),n(e)&&e.constructor===t)return e;var i=o.f(t);return(0,i.resolve)(e),i.promise}},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}i.d(e,"a",function(){return f});var n=i(87),o=i.n(n),a=i(92),s=i.n(a),l=i(3),u=i.n(l),h=i(82),c=i(10),p="function"==typeof s.a&&"symbol"==typeof o.a?function(t){return typeof t}:function(t){return t&&"function"==typeof s.a&&t.constructor===s.a&&t!==s.a.prototype?"symbol":typeof t},d=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),u()(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),f=function(){function t(){r(this,t),this._parsers=[]}return d(t,[{key:"parser",value:function(t){for(var e=0;e<this._parsers.length;e++)if(!this.callParsers(this,t,this._parsers[e]))return!1;return!0}},{key:"callParsers",value:function(e,i,r){for(var n=r.length,o=0;o<n;o++){var a=r[o];if(a.must){if(!i.hasOwnProperty(a.key))continue;var s=i[a.key];if(!t.checkJsonValueType(a.type,s))return!1}}for(var l=0;l<n;l++){var u=r[l];if(i.hasOwnProperty(u.key)){var h=i[u.key];if(t.checkJsonValueType(u.type,h)){var c=u.parserHandler;if(null!==c&&!c(e,h))return!1}}}return!0}},{key:"addParsers",value:function(t){c.g(t)&&this._parsers.push(t)}}],[{key:"checkJsonValueType",value:function(t,e){switch(t){case h.a.DT_NUMBER:return c.j(e);case h.a.DT_STR:return c.l(e);case h.a.DT_ARRAY:return c.g(e);case h.a.DT_BOOL:return c.h(e);case h.a.DT_OBJ:return"object"===(void 0===e?"undefined":p(e))}return!1}}]),t}()},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=c()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(u.a?u()(t,e):t.__proto__=e)}i.d(e,"a",function(){return y});var a=i(3),s=i.n(a),l=i(14),u=i.n(l),h=i(11),c=i.n(h),p=i(15),d=i.n(p),f=i(177),_=i(38),g=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),s()(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),y=function(t){function e(){r(this,e);var t=n(this,(e.__proto__||d()(e)).call(this,null));return t.set("id",""),t.set("interactive",!0),t.set("visibility",!0),t.set("minZoom",_.SystemZoom.MIN),t.set("maxZoom",_.SystemZoom.MAX),t.set("sourceLayer",""),t._filter=null,t.set("textFillColor",""),t.set("textFillOpacity",1),t.set("textStrokeColor",""),t.set("textStrokeWidth",0),t.set("textStrokeOpacity",1),t.set("textSize",0),t.set("textVisibility",!0),t.set("textStyle","regular"),t.set("minTextZ",_.SystemZoom.MIN),t.set("maxTextZ",_.SystemZoom.MAX),t.set("textOutlineSize",0),t}return o(e,t),g(e,[{key:"setFilter",value:function(t){this._filter=t}},{key:"getFilter",value:function(){return this._filter}},{key:"getType",value:function(){return!1}}]),e}(f.a)},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}i.d(e,"a",function(){return l});var n=i(3),o=i.n(n),a=i(10),s=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),o()(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),l=function(){function t(e){r(this,t),this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.length=this.buf.length}return s(t,[{key:"readString",value:function(e){var i=e+this.pos,r=t.readUtf8FromBuf(this.buf,this.pos,i);return this.pos=i,r}},{key:"readBytes",value:function(t){var e=t+this.pos,i=this.buf.subarray(this.pos,e);return this.pos=e,i}},{key:"readUInt32",value:function(){return(this.buf[this.pos++]|this.buf[this.pos++]<<8|this.buf[this.pos++]<<16)+16777216*this.buf[this.pos++]}},{key:"readInt32",value:function(){return(this.buf[this.pos++]|this.buf[this.pos++]<<8|this.buf[this.pos++]<<16)+(this.buf[this.pos++]<<24)}},{key:"readUInt64",value:function(){return this.readUInt32()+4294967296*this.readUInt32()}},{key:"readInt64",value:function(){return(this.buf[this.pos++]|this.buf[this.pos++]<<8|this.buf[this.pos++]<<16|this.buf[this.pos++]<<24|this.buf[this.pos++]<<32|this.buf[this.pos++]<<40|this.buf[this.pos++]<<48)+(this.buf[this.pos++]<<56)}},{key:"readUShort",value:function(){return this.buf[this.pos++]|this.buf[this.pos++]<<8}},{key:"skipBytes",value:function(t){this.pos+=t}},{key:"destroy",value:function(){this.buf=null}}],[{key:"isUint8Array",value:function(t){return!!t&&"[object Uint8Array]"===Object.prototype.toString.call(t)}},{key:"readInt32FromBuf",value:function(e,i){return t.isUint8Array(e)&&a.j(i)&&i<e.length?(e[i]|e[i+1]<<8|e[i+2]<<16)+(e[i+3]<<24):null}},{key:"readUtf8FromBuf",value:function(e,i,r){var n="";if(t.isUint8Array(e)&&a.j(i)&&a.j(r)&&e.length>i&&e.length>=r)for(var o=i;o<r;){var s=e[o],l=null,u=s>239?4:s>223?3:s>191?2:1;if(o+u>r)break;var h=void 0,c=void 0,p=void 0;1===u?s<128&&(l=s):2===u?128==(192&(h=e[o+1]))&&(l=(31&s)<<6|63&h)<=127&&(l=null):3===u?(h=e[o+1],c=e[o+2],128==(192&h)&&128==(192&c)&&((l=(15&s)<<12|(63&h)<<6|63&c)<=2047||l>=55296&&l<=57343)&&(l=null)):4===u&&(h=e[o+1],c=e[o+2],p=e[o+3],128==(192&h)&&128==(192&c)&&128==(192&p)&&((l=(15&s)<<18|(63&h)<<12|(63&c)<<6|63&p)<=65535||l>=1114112)&&(l=null)),null===l?(l=65533,u=1):l>65535&&(l-=65536,n+=String.fromCharCode(l>>>10&1023|55296),l=56320|1023&l),n+=String.fromCharCode(l),o+=u}return n}},{key:"readUInt32FromBuf",value:function(e,i){return t.isUint8Array(e)&&a.j(i)&&i<e.length?(e[i]|e[i+1]<<8|e[i+2]<<16)+16777216*e[i+3]:null}}]),t}()},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=d()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(c.a?c()(t,e):t.__proto__=e)}i.d(e,"a",function(){return m});var a=i(3),s=i.n(a),l=i(37),u=i.n(l),h=i(14),c=i.n(h),p=i(11),d=i.n(p),f=i(15),_=i.n(f),g=i(121),y=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),s()(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),v=function t(e,i,r){null===e&&(e=Function.prototype);var n=u()(e,i);if(void 0===n){var o=_()(e);return null===o?void 0:t(o,i,r)}if("value"in n)return n.value;var a=n.get;if(void 0!==a)return a.call(r)},m=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500;return r(this,e),n(this,(e.__proto__||_()(e)).call(this,t))}return o(e,t),y(e,[{key:"get",value:function(t){return v(e.prototype.__proto__||_()(e.prototype),"containsKey",this).call(this,t)?v(e.prototype.__proto__||_()(e.prototype),"get",this).call(this,t):null}},{key:"put",value:function(t,i){v(e.prototype.__proto__||_()(e.prototype),"containsKey",this).call(this,t)?v(e.prototype.__proto__||_()(e.prototype),"replace",this).call(this,t,i):v(e.prototype.__proto__||_()(e.prototype),"set",this).call(this,t,i)}}]),e}(g.a)},function(t,e,i){"use strict";function r(t,e){var i=t.bdId,r=t.buildingUrl,a=e.type,l=e.styleUrl,u=[];return u.push(n({bdId:i,buildingUrl:r})),u.push(o({type:a,styleUrl:l})),s.a.all(u)}function n(t){var e=t.bdId,i=t.buildingUrl;return new s.a(function(t){l.getIndoorDataManager(e)?t(!0):l.loadIndoorData({bdIds:[e],url:i,callback:function(e){t(e)}})})}function o(t){var e=t.type,i=t.styleUrl;return new s.a(function(t){u.getStyleManager(e)?t(!0):u.loadStyleData({type:e,url:i,callback:function(e){t(e)}})})}Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"loadIndoorData",function(){return r});var a=i(141),s=i.n(a),l=i(105),u=i(104)},function(t,e,i){"use strict";i.d(e,"r",function(){return z}),i.d(e,"s",function(){return W}),i.d(e,"q",function(){return Z});var r=i(42),n=i(221),o=i(124),a=i(36),s=i(45),l=i(46),u=i(47),h=i(26),c=i(27),p=i(144),d=i(54),f=i(62),_=i(95),g=i(135),y=i(219),v=i(168),m=i(96),E=i(268),T=i(419),S=i(420),R=i(421),I=i(422),x=i(426),C=i(428),O=i(429),P=i(270),L=i(191),A=i(430),w=i(1),M=i(130),F=i(167),N=i(272),b=i(44),D=i(172),k=i(256),G=i(181),U=i(8),B=i(29),Y=i(74),j=i(242),X=i(273),V=i(451);i.d(e,"f",function(){return r.a}),i.d(e,"p",function(){return w.a}),i.d(e,"i",function(){return G.a}),i.d(e,"h",function(){return U.a}),i.d(e,"e",function(){return N.a}),i.d(e,"o",function(){return b.a}),i.d(e,"m",function(){return D.a}),i.d(e,"n",function(){return k.a}),i.d(e,"c",function(){return d.a}),i.d(e,"b",function(){return B.a}),i.d(e,"a",function(){return Y.a}),i.d(e,"g",function(){return j.a}),i.d(e,"j",function(){return M.a}),i.d(e,"k",function(){return F.a}),i.d(e,"d",function(){return X.a}),i.d(e,"l",function(){return V.a});var z={Circle:n.a,LinearRing:o.a,LineString:a.a,MultiLineString:s.a,MultiPoint:l.a,MultiPolygon:u.a,Point:h.a,Polygon:c.a,GeometryCollection:p.a},W={Style:f.a,Fill:_.a,Icon:g.a,RegularShape:y.a,Stroke:m.a,Text:E.a,Circle:v.a},Z={EsriJSON:T.a,GeoJSON:S.a,TopoJSON:R.a,MVT:I.a,WKT:x.a,KML:C.a,GML:O.a,GML2:P.a,GML3:L.a,WFS:A.a}},function(t,e,i){"use strict";var r=i(95),n=i(269),o=function(t){var e=t||{};this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.scale_=e.scale,this.text_=e.text,this.textAlign_=e.textAlign,this.textBaseline_=e.textBaseline,this.fill_=void 0!==e.fill?e.fill:new r.a({color:o.DEFAULT_FILL_COLOR_}),this.maxAngle_=void 0!==e.maxAngle?e.maxAngle:Math.PI/4,this.placement_=void 0!==e.placement?e.placement:n.a.POINT;var i=void 0===e.overflow?e.exceedLength:e.overflow;this.overflow_=void 0!==i&&i,this.stroke_=void 0!==e.stroke?e.stroke:null,this.offsetX_=void 0!==e.offsetX?e.offsetX:0,this.offsetY_=void 0!==e.offsetY?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=void 0===e.padding?null:e.padding};o.DEFAULT_FILL_COLOR_="#333",o.prototype.clone=function(){return new o({font:this.getFont(),placement:this.getPlacement(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:this.getScale(),text:this.getText(),textAlign:this.getTextAlign(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY()})},o.prototype.getOverflow=function(){return this.overflow_},o.prototype.getFont=function(){return this.font_},o.prototype.getMaxAngle=function(){return this.maxAngle_},o.prototype.getPlacement=function(){return this.placement_},o.prototype.getOffsetX=function(){return this.offsetX_},o.prototype.getOffsetY=function(){return this.offsetY_},o.prototype.getFill=function(){return this.fill_},o.prototype.getRotateWithView=function(){return this.rotateWithView_},o.prototype.getRotation=function(){return this.rotation_},o.prototype.getScale=function(){return this.scale_},o.prototype.getStroke=function(){return this.stroke_},o.prototype.getText=function(){return this.text_},o.prototype.getTextAlign=function(){return this.textAlign_},o.prototype.getTextBaseline=function(){return this.textBaseline_},o.prototype.getBackgroundFill=function(){return this.backgroundFill_},o.prototype.getBackgroundStroke=function(){return this.backgroundStroke_},o.prototype.getPadding=function(){return this.padding_},o.prototype.setOverflow=function(t){this.overflow_=t},o.prototype.setFont=function(t){this.font_=t},o.prototype.setMaxAngle=function(t){this.maxAngle_=t},o.prototype.setOffsetX=function(t){this.offsetX_=t},o.prototype.setOffsetY=function(t){this.offsetY_=t},o.prototype.setPlacement=function(t){this.placement_=t},o.prototype.setFill=function(t){this.fill_=t},o.prototype.setRotation=function(t){this.rotation_=t},o.prototype.setScale=function(t){this.scale_=t},o.prototype.setStroke=function(t){this.stroke_=t},o.prototype.setText=function(t){this.text_=t},o.prototype.setTextAlign=function(t){this.textAlign_=t},o.prototype.setTextBaseline=function(t){this.textBaseline_=t},o.prototype.setBackgroundFill=function(t){this.backgroundFill_=t},o.prototype.setBackgroundStroke=function(t){this.backgroundStroke_=t},o.prototype.setPadding=function(t){this.padding_=t},e.a=o},function(t,e,i){"use strict";var r={POINT:"point",LINE:"line"};e.a=r},function(t,e,i){"use strict";var r=i(0),n=i(1),o=i(30),a=i(192),s=i(145),l=i(70),u=i(2),h=i(8),c=i(64),p=function(t){var e=t||{};a.a.call(this,e),this.FEATURE_COLLECTION_PARSERS[a.a.GMLNS].featureMember=c.a.makeArrayPusher(a.a.prototype.readFeaturesInternal),this.schemaLocation=e.schemaLocation?e.schemaLocation:p.schemaLocation_};r.a.inherits(p,a.a),p.schemaLocation_=a.a.GMLNS+" http://schemas.opengis.net/gml/2.1.2/feature.xsd",p.prototype.readFlatCoordinates_=function(t,e){var i=c.a.getAllTextContent(t,!1).replace(/^\s*|\s*$/g,""),r=e[0],n=r.srsName,o="enu";if(n){var a=h.a.get(n);a&&(o=a.getAxisOrientation())}for(var s,l,u,p=i.trim().split(/\s+/),d=[],f=0,_=p.length;f<_;f++){var g=p[f].split(/,+/);s=parseFloat(g[0]),l=parseFloat(g[1]),u=3===g.length?parseFloat(g[2]):0,"en"===o.substr(0,2)?d.push(s,l,u):d.push(l,s,u)}return d},p.prototype.readBox_=function(t,e){var i=c.a.pushParseAndPop([null],this.BOX_PARSERS_,t,e,this);return n.a.createOrUpdate(i[1][0],i[1][1],i[1][3],i[1][4])},p.prototype.innerBoundaryIsParser_=function(t,e){var i=c.a.pushParseAndPop(void 0,this.RING_PARSERS,t,e,this);if(i){e[e.length-1].push(i)}},p.prototype.outerBoundaryIsParser_=function(t,e){var i=c.a.pushParseAndPop(void 0,this.RING_PARSERS,t,e,this);if(i){e[e.length-1][0]=i}},p.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS_={"http://www.opengis.net/gml":{coordinates:c.a.makeReplacer(p.prototype.readFlatCoordinates_)}},p.prototype.FLAT_LINEAR_RINGS_PARSERS_={"http://www.opengis.net/gml":{innerBoundaryIs:p.prototype.innerBoundaryIsParser_,outerBoundaryIs:p.prototype.outerBoundaryIsParser_}},p.prototype.BOX_PARSERS_={"http://www.opengis.net/gml":{coordinates:c.a.makeArrayPusher(p.prototype.readFlatCoordinates_)}},p.prototype.GEOMETRY_PARSERS_={"http://www.opengis.net/gml":{Point:c.a.makeReplacer(a.a.prototype.readPoint),MultiPoint:c.a.makeReplacer(a.a.prototype.readMultiPoint),LineString:c.a.makeReplacer(a.a.prototype.readLineString),MultiLineString:c.a.makeReplacer(a.a.prototype.readMultiLineString),LinearRing:c.a.makeReplacer(a.a.prototype.readLinearRing),Polygon:c.a.makeReplacer(a.a.prototype.readPolygon),MultiPolygon:c.a.makeReplacer(a.a.prototype.readMultiPolygon),Box:c.a.makeReplacer(p.prototype.readBox_)}},p.prototype.GEOMETRY_NODE_FACTORY_=function(t,e,i){var r,n=e[e.length-1],o=n.multiSurface,a=n.surface,s=n.multiCurve;return Array.isArray(t)?r="Envelope":(r=t.getType(),"MultiPolygon"===r&&!0===o?r="MultiSurface":"Polygon"===r&&!0===a?r="Surface":"MultiLineString"===r&&!0===s&&(r="MultiCurve")),c.a.createElementNS("http://www.opengis.net/gml",r)},p.prototype.writeFeatureElement=function(t,e,i){var r=e.getId();r&&t.setAttribute("fid",r);var n=i[i.length-1],o=n.featureNS,a=e.getGeometryName();n.serializers||(n.serializers={},n.serializers[o]={});var h=e.getProperties(),p=[],d=[];for(var f in h){var _=h[f];null!==_&&(p.push(f),d.push(_),f==a||_ instanceof l.a?f in n.serializers[o]||(n.serializers[o][f]=c.a.makeChildAppender(this.writeGeometryElement,this)):f in n.serializers[o]||(n.serializers[o][f]=c.a.makeChildAppender(s.a.writeStringTextNode)))}var g=u.a.assign({},n);g.node=t,c.a.pushSerializeAndPop(g,n.serializers,c.a.makeSimpleNodeFactory(void 0,o),d,i,p)},p.prototype.writeGeometryElement=function(t,e,i){var r=i[i.length-1],n=u.a.assign({},r);n.node=t;var a;a=Array.isArray(e)?r.dataProjection?h.a.transformExtent(e,r.featureProjection,r.dataProjection):e:o.a.transformWithOptions(e,!0,r),c.a.pushSerializeAndPop(n,p.GEOMETRY_SERIALIZERS_,this.GEOMETRY_NODE_FACTORY_,[a],i,void 0,this)},p.prototype.writeCurveOrLineString_=function(t,e,i){var r=i[i.length-1],n=r.srsName;if("LineStringSegment"!==t.nodeName&&n&&t.setAttribute("srsName",n),"LineString"===t.nodeName||"LineStringSegment"===t.nodeName){var o=this.createCoordinatesNode_(t.namespaceURI);t.appendChild(o),this.writeCoordinates_(o,e,i)}else if("Curve"===t.nodeName){var a=c.a.createElementNS(t.namespaceURI,"segments");t.appendChild(a),this.writeCurveSegments_(a,e,i)}},p.prototype.createCoordinatesNode_=function(t){var e=c.a.createElementNS(t,"coordinates");return e.setAttribute("decimal","."),e.setAttribute("cs",","),e.setAttribute("ts"," "),e},p.prototype.writeCoordinates_=function(t,e,i){for(var r,n=i[i.length-1],o=n.hasZ,a=n.srsName,l=e.getCoordinates(),u=l.length,h=new Array(u),c=0;c<u;++c)r=l[c],h[c]=this.getCoords_(r,a,o);s.a.writeStringTextNode(t,h.join(" "))},p.prototype.writeCurveSegments_=function(t,e,i){var r=c.a.createElementNS(t.namespaceURI,"LineStringSegment");t.appendChild(r),this.writeCurveOrLineString_(r,e,i)},p.prototype.writeSurfaceOrPolygon_=function(t,e,i){var r=i[i.length-1],n=r.hasZ,o=r.srsName;if("PolygonPatch"!==t.nodeName&&o&&t.setAttribute("srsName",o),"Polygon"===t.nodeName||"PolygonPatch"===t.nodeName){var a=e.getLinearRings();c.a.pushSerializeAndPop({node:t,hasZ:n,srsName:o},p.RING_SERIALIZERS_,this.RING_NODE_FACTORY_,a,i,void 0,this)}else if("Surface"===t.nodeName){var s=c.a.createElementNS(t.namespaceURI,"patches");t.appendChild(s),this.writeSurfacePatches_(s,e,i)}},p.prototype.RING_NODE_FACTORY_=function(t,e,i){var r=e[e.length-1],n=r.node,o=r.exteriorWritten;return void 0===o&&(r.exteriorWritten=!0),c.a.createElementNS(n.namespaceURI,void 0!==o?"innerBoundaryIs":"outerBoundaryIs")},p.prototype.writeSurfacePatches_=function(t,e,i){var r=c.a.createElementNS(t.namespaceURI,"PolygonPatch");t.appendChild(r),this.writeSurfaceOrPolygon_(r,e,i)},p.prototype.writeRing_=function(t,e,i){var r=c.a.createElementNS(t.namespaceURI,"LinearRing");t.appendChild(r),this.writeLinearRing_(r,e,i)},p.prototype.getCoords_=function(t,e,i){var r="enu";e&&(r=h.a.get(e).getAxisOrientation());var n="en"===r.substr(0,2)?t[0]+","+t[1]:t[1]+","+t[0];if(i){n+=","+(t[2]||0)}return n},p.prototype.writeMultiCurveOrLineString_=function(t,e,i){var r=i[i.length-1],n=r.hasZ,o=r.srsName,a=r.curve;o&&t.setAttribute("srsName",o);var s=e.getLineStrings();c.a.pushSerializeAndPop({node:t,hasZ:n,srsName:o,curve:a},p.LINESTRINGORCURVEMEMBER_SERIALIZERS_,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,s,i,void 0,this)},p.prototype.writePoint_=function(t,e,i){var r=i[i.length-1],n=r.hasZ,o=r.srsName;o&&t.setAttribute("srsName",o);var a=this.createCoordinatesNode_(t.namespaceURI);t.appendChild(a);var l=e.getCoordinates(),u=this.getCoords_(l,o,n);s.a.writeStringTextNode(a,u)},p.prototype.writeMultiPoint_=function(t,e,i){var r=i[i.length-1],n=r.hasZ,o=r.srsName;o&&t.setAttribute("srsName",o);var a=e.getPoints();c.a.pushSerializeAndPop({node:t,hasZ:n,srsName:o},p.POINTMEMBER_SERIALIZERS_,c.a.makeSimpleNodeFactory("pointMember"),a,i,void 0,this)},p.prototype.writePointMember_=function(t,e,i){var r=c.a.createElementNS(t.namespaceURI,"Point");t.appendChild(r),this.writePoint_(r,e,i)},p.prototype.writeLineStringOrCurveMember_=function(t,e,i){var r=this.GEOMETRY_NODE_FACTORY_(e,i);r&&(t.appendChild(r),this.writeCurveOrLineString_(r,e,i))},p.prototype.writeLinearRing_=function(t,e,i){var r=i[i.length-1],n=r.srsName;n&&t.setAttribute("srsName",n);var o=this.createCoordinatesNode_(t.namespaceURI);t.appendChild(o),this.writeCoordinates_(o,e,i)},p.prototype.writeMultiSurfaceOrPolygon_=function(t,e,i){var r=i[i.length-1],n=r.hasZ,o=r.srsName,a=r.surface;o&&t.setAttribute("srsName",o);var s=e.getPolygons();c.a.pushSerializeAndPop({node:t,hasZ:n,srsName:o,surface:a},p.SURFACEORPOLYGONMEMBER_SERIALIZERS_,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,s,i,void 0,this)},p.prototype.writeSurfaceOrPolygonMember_=function(t,e,i){var r=this.GEOMETRY_NODE_FACTORY_(e,i);r&&(t.appendChild(r),this.writeSurfaceOrPolygon_(r,e,i))},p.prototype.writeEnvelope=function(t,e,i){var r=i[i.length-1],n=r.srsName;n&&t.setAttribute("srsName",n);var o=["lowerCorner","upperCorner"],a=[e[0]+" "+e[1],e[2]+" "+e[3]];c.a.pushSerializeAndPop({node:t},p.ENVELOPE_SERIALIZERS_,c.a.OBJECT_PROPERTY_NODE_FACTORY,a,i,o,this)},p.GEOMETRY_SERIALIZERS_={"http://www.opengis.net/gml":{Curve:c.a.makeChildAppender(p.prototype.writeCurveOrLineString_),MultiCurve:c.a.makeChildAppender(p.prototype.writeMultiCurveOrLineString_),Point:c.a.makeChildAppender(p.prototype.writePoint_),MultiPoint:c.a.makeChildAppender(p.prototype.writeMultiPoint_),LineString:c.a.makeChildAppender(p.prototype.writeCurveOrLineString_),MultiLineString:c.a.makeChildAppender(p.prototype.writeMultiCurveOrLineString_),LinearRing:c.a.makeChildAppender(p.prototype.writeLinearRing_),Polygon:c.a.makeChildAppender(p.prototype.writeSurfaceOrPolygon_),MultiPolygon:c.a.makeChildAppender(p.prototype.writeMultiSurfaceOrPolygon_),Surface:c.a.makeChildAppender(p.prototype.writeSurfaceOrPolygon_),MultiSurface:c.a.makeChildAppender(p.prototype.writeMultiSurfaceOrPolygon_),Envelope:c.a.makeChildAppender(p.prototype.writeEnvelope)}},p.RING_SERIALIZERS_={"http://www.opengis.net/gml":{outerBoundaryIs:c.a.makeChildAppender(p.prototype.writeRing_),innerBoundaryIs:c.a.makeChildAppender(p.prototype.writeRing_)}},p.POINTMEMBER_SERIALIZERS_={"http://www.opengis.net/gml":{pointMember:c.a.makeChildAppender(p.prototype.writePointMember_)}},p.LINESTRINGORCURVEMEMBER_SERIALIZERS_={"http://www.opengis.net/gml":{lineStringMember:c.a.makeChildAppender(p.prototype.writeLineStringOrCurveMember_),curveMember:c.a.makeChildAppender(p.prototype.writeLineStringOrCurveMember_)}},p.prototype.MULTIGEOMETRY_MEMBER_NODE_FACTORY_=function(t,e,i){var r=e[e.length-1].node;return c.a.createElementNS("http://www.opengis.net/gml",p.MULTIGEOMETRY_TO_MEMBER_NODENAME_[r.nodeName])},p.MULTIGEOMETRY_TO_MEMBER_NODENAME_={MultiLineString:"lineStringMember",MultiCurve:"curveMember",MultiPolygon:"polygonMember",MultiSurface:"surfaceMember"},p.SURFACEORPOLYGONMEMBER_SERIALIZERS_={"http://www.opengis.net/gml":{surfaceMember:c.a.makeChildAppender(p.prototype.writeSurfaceOrPolygonMember_),polygonMember:c.a.makeChildAppender(p.prototype.writeSurfaceOrPolygonMember_)}},p.ENVELOPE_SERIALIZERS_={"http://www.opengis.net/gml":{lowerCorner:c.a.makeChildAppender(s.a.writeStringTextNode),upperCorner:c.a.makeChildAppender(s.a.writeStringTextNode)}},e.a=p},function(t,e,i){"use strict";var r=i(0),n=i(9),o=i(106),a=function(t,e){o.a.call(this,t),this.conditions=Array.prototype.slice.call(arguments,1),n.a.assert(this.conditions.length>=2,57)};r.a.inherits(a,o.a),e.a=a},function(t,e,i){"use strict";var r=i(0),n=i(50),o=i(44),a=i(1),s=i(449),l=function(t){var e=t||{},i=e.condition?e.condition:o.a.shiftKeyOnly;this.duration_=void 0!==e.duration?e.duration:200,this.out_=void 0!==e.out&&e.out,s.a.call(this,{condition:i,className:e.className||"ol-dragzoom"})};r.a.inherits(l,s.a),l.prototype.onBoxEnd=function(){var t=this.getMap(),e=t.getView(),i=t.getSize(),r=this.getGeometry().getExtent();if(this.out_){var o=e.calculateExtent(i),s=a.a.createOrUpdateFromCoordinates([t.getPixelFromCoordinate(a.a.getBottomLeft(r)),t.getPixelFromCoordinate(a.a.getTopRight(r))]),l=e.getResolutionForExtent(s,i);a.a.scaleFromCenter(o,1/l),r=o}var u=e.constrainResolution(e.getResolutionForExtent(r,i)),h=a.a.getCenter(r);h=e.constrainCenter(h),e.animate({resolution:u,center:h,duration:this.duration_,easing:n.a.easeOut})},e.a=l},function(t,e,i){"use strict";var r=i(0),n=i(78),o=i(61),a=function(t){var e=t||{};this.delta_=e.delta?e.delta:1,o.a.call(this,{handleEvent:a.handleEvent}),this.duration_=void 0!==e.duration?e.duration:250};r.a.inherits(a,o.a),a.handleEvent=function(t){var e=!1,i=t.originalEvent;if(t.type==n.a.DBLCLICK){var r=t.map,a=t.coordinate,s=i.shiftKey?-this.delta_:this.delta_,l=r.getView();o.a.zoomByDelta(l,s,a,this.duration_),t.preventDefault(),e=!0}return!e},e.a=a},function(t,e,i){"use strict";var r=i(0),n=i(139),o=function(t){var e,i=t||{};e=void 0!==i.attributions?i.attributions:[o.ATTRIBUTION];var r=void 0!==i.crossOrigin?i.crossOrigin:"anonymous",a=void 0!==i.url?i.url:"https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png";n.a.call(this,{attributions:e,cacheSize:i.cacheSize,crossOrigin:r,opaque:void 0===i.opaque||i.opaque,maxZoom:void 0!==i.maxZoom?i.maxZoom:19,reprojectionErrorThreshold:i.reprojectionErrorThreshold,tileLoadFunction:i.tileLoadFunction,url:a,wrapX:i.wrapX})};r.a.inherits(o,n.a),o.ATTRIBUTION='&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors.',e.a=o},function(t,e,i){"use strict";function r(t,e){var i=6378245,r=.006693421622965943,n=u(e-105,t-35),o=h(e-105,t-35),a=t/180*c,s=Math.sin(a);s=1-r*s*s;var l=Math.sqrt(s);return n=180*n/(i*(1-r)/(s*l)*c),o=180*o/(i/l*Math.cos(a)*c),{lat:n,lon:o}}function n(t,e){if(l(t,e))return{lat:t,lon:e};var i=r(t,e);return{lat:t+i.lat,lon:e+i.lon}}function o(t,e){for(var i=.01,r=.01,o=t-i,a=e-r,s=t+i,l=e+r,u=void 0,h=void 0,c=0;c++<=1e4;){u=(o+s)/2,h=(a+l)/2;var p=n(u,h);if(i=p.lat-t,r=p.lon-e,Math.abs(i)<1e-9&&Math.abs(r)<1e-9)break;i>0?s=u:o=u,r>0?l=h:a=h}return{lat:u,lon:h}}function a(t,e){var i=e,r=t,n=Math.sqrt(i*i+r*r)+2e-5*Math.sin(r*p),o=Math.atan2(r,i)+3e-6*Math.cos(i*p),a=n*Math.cos(o)+.0065;return{lat:n*Math.sin(o)+.006,lon:a}}function s(t,e){var i=e-.0065,r=t-.006,n=Math.sqrt(i*i+r*r)-2e-5*Math.sin(r*p),o=Math.atan2(r,i)-3e-6*Math.cos(i*p),a=n*Math.cos(o);return{lat:n*Math.sin(o),lon:a}}function l(t,e){return e<72.004||e>137.8347||(t<.8293||t>55.8271)}function u(t,e){var i=2*t-100+3*e+.2*e*e+.1*t*e+.2*Math.sqrt(Math.abs(t));return i+=2*(20*Math.sin(6*t*c)+20*Math.sin(2*t*c))/3,i+=2*(20*Math.sin(e*c)+40*Math.sin(e/3*c))/3,i+=2*(160*Math.sin(e/12*c)+320*Math.sin(e*c/30))/3}function h(t,e){var i=300+t+2*e+.1*t*t+.1*t*e+.1*Math.sqrt(Math.abs(t));return i+=2*(20*Math.sin(6*t*c)+20*Math.sin(2*t*c))/3,i+=2*(20*Math.sin(t*c)+40*Math.sin(t/3*c))/3,i+=2*(150*Math.sin(t/12*c)+300*Math.sin(t/30*c))/3}Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"bd09ToGcj",function(){return s}),i.d(e,"gcjToBd09",function(){return a}),i.d(e,"gcjToWgs84",function(){return o}),i.d(e,"wgs84ToGcj",function(){return n});var c=3.141592653589793,p=52.35987755982988},function(t,e,i){"use strict";function r(t){if(!isNaN(t.buildId)&&!isNaN(t.floorId)&&d.i(t.callBack)){var e=[],i=s(t);if(i){var r=p({dataList:i,vMap:t.map});r&&r.length>0&&t.callBack({datas:r})}else e.push({buildId:t.buildId,floorId:t.floorId});e&&e.length>0&&l({buildIdArray:e,map:t.map,styleType:t.styleType,languageType:t.languageType,callBack:t.callBack})}}function n(){T.forEach(function(t){for(var e in t)if(t[e]&&t[e].txtImgURL){var i=t[e].txtImgURL;i&&window.URL.revokeObjectURL(i)}})}function o(){n(),T.clear()}function a(t){return S.POI_CACHE_STYLE+"_"+t.styleType+"\n              _"+S.POI_CACHE_BUILDID+"_"+t.buildId+"\n              _"+S.POI_CACHE_LG+"_"+t.languageType}function s(t){var e=a(t),i=T.get(e);return i&&i.hasOwnProperty(t.floorId)?i[t.floorId].dataList:null}function l(t){var e=v.a.getIndoorServerUrl(t.buildIdArray,t.styleType,t.languageType);Object(g.loadWithXhr)(e,"arraybuffer").then(function(e){u(e,t)}).catch(function(){f.a("load poi error!")})}function u(t,e){for(var i=new y.a(t),r=i.readUShort(),n=0;n<r;n++)for(var o=i.readUInt64(),s=i.readUShort(),l=0;l<s;l++){var u=i.readUInt64();i.skipBytes(8);var c=i.readUInt32(),f=i.readBytes(c),_=new Blob([f],{type:"image/png"}),g=window.URL.createObjectURL(_),v=i.readUInt32(),E=i.readString(v);if(h(e.buildIdArray,o,u)&&E.length>0){var S=JSON.parse(E),R=m.a.parserJsonData({sourceObj:S,txtImgURL:g,iBuildId:o,iFloorId:u,styleType:e.styleType,languageType:e.languageType});if(R){if(d.g(R)&&R.length>0){var I=a({styleType:e.styleType,buildId:o,languageType:e.languageType}),x=T.get(I);x||(T.put(I,{}),x=T.get(I)),x[u]={dataList:R,txtImgURL:g};var C=p({dataList:R,vMap:e.map});C&&C.length>0&&e.callBack({datas:C})}break}}}i=null}function h(t,e,i){for(var r=0;r<t.length;++r)if(parseInt(t[r].buildId)==e&&parseInt(t[r].floorId)==i)return!0;return!1}function c(t,e,i){return e&&t<e||i&&t>i}function p(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.dataList,i=t.vMap,r=[],n=[],o=i.getZoom();if(e&&d.g(e)&&e.length>0){for(var a=e.length,s=0;s<a;++s){var l=e[s],u=!0,h=l.type,p=i.getOlMap().getPixelFromCoordinate(i.transform4326ToMap(l.poiCoord));if(m.a.poiDisplayType.POI_TYPE_ICON===h){if(c(o,l.zoomLevel.minZoom,l.zoomLevel.maxZoom))continue}else if(m.a.poiDisplayType.POI_TYPE_TXT===h){if(c(o,l.zoomLevel.minTextZoom,l.zoomLevel.maxTextZoom))continue}else if(m.a.poiDisplayType.POI_TYPE_ICON_TXT===h){var _=!0,g=!0;if(c(o,l.zoomLevel.minZoom,l.zoomLevel.maxZoom)&&(_=!1),c(o,l.zoomLevel.minTextZoom,l.zoomLevel.maxTextZoom)&&(g=!1),!_&&!g)continue;!_&&g&&(h=m.a.poiDisplayType.POI_TYPE_TXT),_&&!g&&(h=m.a.poiDisplayType.POI_TYPE_ICON)}if(m.a.poiDisplayType.POI_TYPE_ICON_TXT===h){if(!l.poiImg||!l.poiTxt)return void f.a("poiImg or poiTxt is undefined");for(var y=l.txtLayArray.length,T=0;T<y;++T){u=!0,l.poiImgLonlat.coordinate=p;var S=E.a.toLonLatBounds(l.poiImgLonlat),R=m.a.adjustPoiTxtBounds({poiImageSize:l.poiImg.size,poiTxt:l.poiTxt,txtLay:l.txtLayArray[T],poiImageFrame:S,txtSize:l.txtSize},v.a.POI_IMG_TXT_MARGIN);l.poiBound=S.updateBounds(R),R=null;for(var I=r.length,x=0;x<I;++x)if(l.poiBound.isoverlap(r[x],v.a.POI_FRAME_MARGIN)){u=!1;break}if(u){r.push(l.poiBound);var C={};C[m.a.poiRenderDataType.POI_OUT_ID]=l.poiImg[m.a.poiRenderDataType.POI_OUT_ID],C[m.a.poiRenderDataType.POI_OUT_COORD]=l.poiImg[m.a.poiRenderDataType.POI_OUT_COORD],C[m.a.poiRenderDataType.POI_OUT_POINAME]=l.poiImg[m.a.poiRenderDataType.POI_OUT_POINAME],C[m.a.poiRenderDataType.POI_OUT_TYPE_ICON]={},C[m.a.poiRenderDataType.POI_OUT_TYPE_ICON][m.a.poiRenderDataType.POI_OUT_SCR]=l.poiImg[m.a.poiRenderDataType.POI_OUT_SCR],C[m.a.poiRenderDataType.POI_OUT_TYPE_ICON][m.a.poiRenderDataType.POI_OUT_SIZE]=l.poiImg[m.a.poiRenderDataType.POI_OUT_SIZE],C[m.a.poiRenderDataType.POI_OUT_TYPE_TXT]={},C[m.a.poiRenderDataType.POI_OUT_TYPE_TXT][m.a.poiRenderDataType.POI_OUT_SCR]=l.poiTxt[m.a.poiRenderDataType.POI_OUT_SCR],C[m.a.poiRenderDataType.POI_OUT_TYPE_TXT][m.a.poiRenderDataType.POI_OUT_SIZE]=l.poiTxt[m.a.poiRenderDataType.POI_OUT_SIZE],C[m.a.poiRenderDataType.POI_OUT_TYPE_TXT][m.a.poiRenderDataType.POI_OUT_OFFSET]=l.poiTxt[m.a.poiRenderDataType.POI_OUT_OFFSET],C[m.a.poiRenderDataType.POI_OUT_TYPE_TXT][m.a.poiRenderDataType.POI_OUT_ANCHOR]=l.poiTxt[m.a.poiRenderDataType.POI_OUT_ANCHOR],n.push(C);break}}}else if(m.a.poiDisplayType.POI_TYPE_ICON===h||m.a.poiDisplayType.POI_TYPE_TXT===h){if(!l.poiImg&&!l.poiTxt)return void f.a("poiImg and poiTxt is undefined");u=!0,l.poiImgLonlat.coordinate=p,l.poiBound=E.a.toLonLatBounds(l.poiImgLonlat);for(var O=r.length,P=0;P<O;++P)if(l.poiBound.isoverlap(r[P],v.a.POI_FRAME_MARGIN)){u=!1;break}if(u){r.push(l.poiBound);var L={},A=l.poiImg?l.poiImg:l.poiTxt;L[m.a.poiRenderDataType.POI_OUT_ID]=A[m.a.poiRenderDataType.POI_OUT_ID],L[m.a.poiRenderDataType.POI_OUT_COORD]=A[m.a.poiRenderDataType.POI_OUT_COORD],L[m.a.poiRenderDataType.POI_OUT_POINAME]=A[m.a.poiRenderDataType.POI_OUT_POINAME],m.a.poiDisplayType.POI_TYPE_ICON===h?(L[m.a.poiRenderDataType.POI_OUT_TYPE_ICON]={},L[m.a.poiRenderDataType.POI_OUT_TYPE_ICON][m.a.poiRenderDataType.POI_OUT_SCR]=A[m.a.poiRenderDataType.POI_OUT_SCR],L[m.a.poiRenderDataType.POI_OUT_TYPE_ICON][m.a.poiRenderDataType.POI_OUT_SIZE]=A[m.a.poiRenderDataType.POI_OUT_SIZE]):(L[m.a.poiRenderDataType.POI_OUT_TYPE_TXT]={},L[m.a.poiRenderDataType.POI_OUT_TYPE_TXT][m.a.poiRenderDataType.POI_OUT_SCR]=A[m.a.poiRenderDataType.POI_OUT_SCR],L[m.a.poiRenderDataType.POI_OUT_TYPE_TXT][m.a.poiRenderDataType.POI_OUT_SIZE]=A[m.a.poiRenderDataType.POI_OUT_SIZE],L[m.a.poiRenderDataType.POI_OUT_TYPE_TXT][m.a.poiRenderDataType.POI_OUT_OFFSET]=A[m.a.poiRenderDataType.POI_OUT_OFFSET],L[m.a.poiRenderDataType.POI_OUT_TYPE_TXT][m.a.poiRenderDataType.POI_OUT_ANCHOR]=A[m.a.poiRenderDataType.POI_OUT_ANCHOR]),n.push(L)}}}r=null}return n}i.d(e,"a",function(){return r}),i.d(e,"b",function(){return o});var d=i(10),f=i(22),_=i(265),g=i(140),y=i(264),v=i(195),m=i(454),E=i(277),T=new _.a(5),S={POI_CACHE_BUILDID:"buildID",POI_CACHE_FLOORID:"floorID",POI_CACHE_STYLE:"styleType",POI_CACHE_LG:"language",POI_CACHE_DATA:"data",POI_CACHE_TXTIMG_URL:"txtUrl"}},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}i.d(e,"a",function(){return u});var n=i(3),o=i.n(n),a=i(10),s=i(22),l=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),o()(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),u=function(){function t(e){if(r(this,t),t._isLonLatObject(e)){var i=e.width/2,n=e.height/2,o=e.coordinate;this._minX=o[0]-i,this._maxX=o[0]+i,this._minY=o[1]-n,this._maxY=o[1]+n,this._width=e.width,this._height=e.height,this._center=o}else s.a("LonLatBounds param error!")}return l(t,[{key:"updateBounds",value:function(e){if(!e)return this;var i=void 0,r=void 0,n=void 0,o=void 0;if(t._isLonLatObject(e)){var a=e.width/2,s=e.height/2;i=e.coordinate[0]-a,r=e.coordinate[0]+a,n=e.coordinate[1]-s,o=e.coordinate[1]+s}else e instanceof t&&(i=e._minX,r=e._maxX,n=e._minY,o=e._maxY);return i<this._minX&&(this._minX=i),r>this._maxX&&(this._maxX=r),n<this._minY&&(this._minY=n),o>this._maxY&&(this._maxY=o),this._width=this._maxX-this._minX,this._height=this._maxY-this._minY,this._center=[(this._maxX+this._minX)/2,(this._maxY+this._minY)/2],this}},{key:"isoverlap",value:function(e,i){if(!e)return!1;var r=0;a.j(i)&&(r=i);var n=e;return e instanceof t||(n=t.toLonLatBounds(e)),!(n._minY>this._maxY+r||n._minX>this._maxX+r||this._minY-r>n._maxY||this._minX-r>n._maxX)}}],[{key:"toLonLatBounds",value:function(e){return e instanceof t?e:new t(e)}},{key:"_isLonLatObject",value:function(t){return!!(t&&t.hasOwnProperty("coordinate")&&t.hasOwnProperty("width")&&t.hasOwnProperty("height"))}}]),t}()},function(e,i){e.exports=t},function(t,e,i){"use strict";var r=i(74),n=i(280),o=i(244),a=i(237),s={};s.defaults=function(t){var e=t||{},i=new r.a;return(void 0===e.zoom||e.zoom)&&i.push(new a.a(e.zoomOptions)),(void 0===e.rotate||e.rotate)&&i.push(new o.a(e.rotateOptions)),(void 0===e.attribution||e.attribution)&&i.push(new n.a(e.attributionOptions)),i},e.a=s},function(t,e,i){"use strict";var r=i(0),n=i(6),o=i(29),a=i(34),s=i(13),l=i(4),u=i(5),h=i(72),c=i(2),p=function(t){var e=t||{};this.ulElement_=document.createElement("UL"),this.logoLi_=document.createElement("LI"),this.ulElement_.appendChild(this.logoLi_),this.logoLi_.style.display="none",this.collapsed_=void 0===e.collapsed||e.collapsed,this.collapsible_=void 0===e.collapsible||e.collapsible,this.collapsible_||(this.collapsed_=!1);var i=void 0!==e.className?e.className:"ol-attribution",r=void 0!==e.tipLabel?e.tipLabel:"Attributions",n=void 0!==e.collapseLabel?e.collapseLabel:"";"string"==typeof n?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=n):this.collapseLabel_=n;var s=void 0!==e.label?e.label:"i";"string"==typeof s?(this.label_=document.createElement("span"),this.label_.textContent=s):this.label_=s;var h=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_,c=document.createElement("button");c.setAttribute("type","button"),c.title=r,c.appendChild(h),l.a.listen(c,u.a.CLICK,this.handleClick_,this);var d=i+" "+a.a.CLASS_UNSELECTABLE+" "+a.a.CLASS_CONTROL+(this.collapsed_&&this.collapsible_?" ol-collapsed":"")+(this.collapsible_?"":" ol-uncollapsible"),f=document.createElement("div");f.className=d,f.appendChild(this.ulElement_),f.appendChild(c);var _=e.render?e.render:p.render;o.a.call(this,{element:f,render:_,target:e.target}),this.renderedAttributions_=[],this.renderedVisible_=!0,this.logoElements_={}};r.a.inherits(p,o.a),p.prototype.getSourceAttributions_=function(t){for(var e={},i=[],r=t.layerStatesArray,n=t.viewState.resolution,o=0,a=r.length;o<a;++o){var s=r[o];if(h.a.visibleAtResolution(s,n)){var l=s.layer.getSource();if(l){var u=l.getAttributions2();if(u){var c=u(t);if(c)if(Array.isArray(c))for(var p=0,d=c.length;p<d;++p)c[p]in e||(i.push(c[p]),e[c[p]]=!0);else c in e||(i.push(c),e[c]=!0)}}}}return i},p.render=function(t){this.updateElement_(t.frameState)},p.prototype.updateElement_=function(t){if(!t)return void(this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1));var e=this.getSourceAttributions_(t);if(!n.a.equals(e,this.renderedAttributions_)){for(;this.ulElement_.lastChild!==this.logoLi_;)this.ulElement_.removeChild(this.ulElement_.lastChild);for(var i=0,r=e.length;i<r;++i){var o=document.createElement("LI");o.innerHTML=e[i],this.ulElement_.appendChild(o)}0===e.length&&this.renderedAttributions_.length>0?this.element.classList.add("ol-logo-only"):0===this.renderedAttributions_.length&&e.length>0&&this.element.classList.remove("ol-logo-only");var a=e.length>0||!c.a.isEmpty(t.logos);this.renderedVisible_!=a&&(this.element.style.display=a?"":"none",this.renderedVisible_=a),this.renderedAttributions_=e,this.insertLogos_(t)}},p.prototype.insertLogos_=function(t){var e,i=t.logos,r=this.logoElements_;for(e in r)e in i||(s.a.removeNode(r[e]),delete r[e]);var n,o,a;for(a in i){var l=i[a];l instanceof HTMLElement&&(this.logoLi_.appendChild(l),r[a]=l),a in r||(n=new Image,n.src=a,""===l?o=n:(o=document.createElement("a"),o.href=l,o.appendChild(n)),this.logoLi_.appendChild(o),r[a]=o)}this.logoLi_.style.display=c.a.isEmpty(i)?"none":""},p.prototype.handleClick_=function(t){t.preventDefault(),this.handleToggle_()},p.prototype.handleToggle_=function(){this.element.classList.toggle("ol-collapsed"),this.collapsed_?s.a.replaceNode(this.collapseLabel_,this.label_):s.a.replaceNode(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_},p.prototype.getCollapsible=function(){return this.collapsible_},p.prototype.setCollapsible=function(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),!t&&this.collapsed_&&this.handleToggle_())},p.prototype.setCollapsed=function(t){this.collapsible_&&this.collapsed_!==t&&this.handleToggle_()},p.prototype.getCollapsed=function(){return this.collapsed_},e.a=p},function(t,e,i){"use strict";var r=i(74),n=i(475),o=i(273),a=i(476),s=i(477),l=i(272),u=i(478),h=i(480),c=i(481),p=i(482),d=i(483),f={};f.defaults=function(t){var e=t||{},i=new r.a,f=new n.a(-.005,.05,100);return(void 0===e.altShiftDragRotate||e.altShiftDragRotate)&&i.push(new s.a),(void 0===e.doubleClickZoom||e.doubleClickZoom)&&i.push(new o.a({delta:e.zoomDelta,duration:e.zoomDuration})),(void 0===e.dragPan||e.dragPan)&&i.push(new a.a({kinetic:f})),(void 0===e.pinchRotate||e.pinchRotate)&&i.push(new p.a),(void 0===e.pinchZoom||e.pinchZoom)&&i.push(new d.a({constrainResolution:e.constrainResolution,duration:e.zoomDuration})),(void 0===e.keyboard||e.keyboard)&&(i.push(new u.a),i.push(new h.a({delta:e.zoomDelta,duration:e.zoomDuration}))),(void 0===e.mouseWheelZoom||e.mouseWheelZoom)&&i.push(new c.a({constrainResolution:e.constrainResolution,duration:e.zoomDuration})),(void 0===e.shiftDragZoom||e.shiftDragZoom)&&i.push(new l.a({duration:e.zoomDuration})),i},e.a=f},function(t,e,i){"use strict";var r=i(0),n=i(54),o=i(13),a=i(1),s=i(283),l=i(16),u=function(t){s.a.call(this,t),this.coordinateToCanvasPixelTransform=l.a.create(),this.hitCanvasContext_=null};r.a.inherits(u,s.a),u.prototype.composeFrame=function(t,e,i){this.preCompose(i,t);var r=this.getImage();if(r){var n=e.extent,o=void 0!==n&&!a.a.containsExtent(n,t.extent)&&a.a.intersects(n,t.extent);o&&this.clip(i,t,n);var s=this.getImageTransform(),l=i.globalAlpha;i.globalAlpha=e.opacity;var u=s[4],h=s[5],c=r.width*s[0],p=r.height*s[3];i.drawImage(r,0,0,+r.width,+r.height,Math.round(u),Math.round(h),Math.round(c),Math.round(p)),i.globalAlpha=l,o&&i.restore()}this.postCompose(i,t,e)},u.prototype.getImage=function(){},u.prototype.getImageTransform=function(){},u.prototype.forEachFeatureAtCoordinate=function(t,e,i,r,n){var o=this.getLayer(),a=o.getSource(),s=e.viewState.resolution,l=e.viewState.rotation,u=e.skippedFeatureUids;return a.forEachFeatureAtCoordinate(t,s,l,i,u,function(t){return r.call(n,t,o)})},u.prototype.forEachLayerAtCoordinate=function(t,e,i,a){if(this.getImage()){if(this.getLayer().getSource().forEachFeatureAtCoordinate!==r.a.nullFunction)return s.a.prototype.forEachLayerAtCoordinate.apply(this,arguments);var u=l.a.apply(this.coordinateToCanvasPixelTransform,t.slice());n.a.scale(u,e.viewState.resolution/this.renderedResolution),this.hitCanvasContext_||(this.hitCanvasContext_=o.a.createCanvasContext2D(1,1)),this.hitCanvasContext_.clearRect(0,0,1,1),this.hitCanvasContext_.drawImage(this.getImage(),u[0],u[1],1,1,0,0,1,1);var h=this.hitCanvasContext_.getImageData(0,0,1,1).data;return h[3]>0?i.call(a,this.getLayer(),h):void 0}},e.a=u},function(t,e,i){"use strict";var r=i(0),n=i(1),o=i(19),a=i(146),s=i(73),l=i(53),u=i(284),h=i(285),c=i(16),p=function(t){h.a.call(this,t),this.renderedResolution,this.transform_=c.a.create()};r.a.inherits(p,h.a),p.prototype.clip=function(t,e,i){var r=e.pixelRatio,o=e.size[0]*r,a=e.size[1]*r,s=e.viewState.rotation,u=n.a.getTopLeft(i),h=n.a.getTopRight(i),p=n.a.getBottomRight(i),d=n.a.getBottomLeft(i);c.a.apply(e.coordinateToPixelTransform,u),c.a.apply(e.coordinateToPixelTransform,h),c.a.apply(e.coordinateToPixelTransform,p),c.a.apply(e.coordinateToPixelTransform,d),t.save(),l.a.rotateAtOffset(t,-s,o/2,a/2),t.beginPath(),t.moveTo(u[0]*r,u[1]*r),t.lineTo(h[0]*r,h[1]*r),t.lineTo(p[0]*r,p[1]*r),t.lineTo(d[0]*r,d[1]*r),t.clip(),l.a.rotateAtOffset(t,s,o/2,a/2)},p.prototype.dispatchComposeEvent_=function(t,e,i,r){var n=this.getLayer();if(n.hasListener(t)){var o=i.size[0]*i.pixelRatio,s=i.size[1]*i.pixelRatio,h=i.viewState.rotation;l.a.rotateAtOffset(e,-h,o/2,s/2);var c=void 0!==r?r:this.getTransform(i,0),p=new u.a(e,i.pixelRatio,i.extent,c,i.viewState.rotation),d=new a.a(t,p,i,e,null);n.dispatchEvent(d),l.a.rotateAtOffset(e,h,o/2,s/2)}},p.prototype.forEachLayerAtCoordinate=function(t,e,i,r){return this.forEachFeatureAtCoordinate(t,e,0,o.a.TRUE,this)?i.call(r,this.getLayer(),null):void 0},p.prototype.postCompose=function(t,e,i,r){this.dispatchComposeEvent_(s.a.POSTCOMPOSE,t,e,r)},p.prototype.preCompose=function(t,e,i){this.dispatchComposeEvent_(s.a.PRECOMPOSE,t,e,i)},p.prototype.dispatchRenderEvent=function(t,e,i){this.dispatchComposeEvent_(s.a.RENDER,t,e,i)},p.prototype.getTransform=function(t,e){var i=t.viewState,r=t.pixelRatio,n=r*t.size[0]/2,o=r*t.size[1]/2,a=r/i.resolution,s=-a,l=-i.rotation,u=-i.center[0]+e,h=-i.center[1];return c.a.compose(this.transform_,n,o,a,s,l,u,h)},p.prototype.composeFrame=function(t,e,i){},p.prototype.prepareFrame=function(t,e){},e.a=p},function(t,e,i){"use strict";var r=i(0),n=i(6),o=i(94),a=i(1),s=i(12),l=i(35),u=i(51),h=i(33),c=i(147),p=i(53),d=i(16),f=function(t,e,i,r,n){c.a.call(this),this.context_=t,this.pixelRatio_=e,this.extent_=i,this.transform_=r,this.viewRotation_=n,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=0,this.imageSnapToPixel_=!1,this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=0,this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=d.a.create()};r.a.inherits(f,c.a),f.prototype.drawImages_=function(t,e,i,r){if(this.image_){var n=u.a.transform2D(t,e,i,2,this.transform_,this.pixelCoordinates_),o=this.context_,a=this.tmpLocalTransform_,s=o.globalAlpha;1!=this.imageOpacity_&&(o.globalAlpha=s*this.imageOpacity_);var l=this.imageRotation_;this.imageRotateWithView_&&(l+=this.viewRotation_);var h,c;for(h=0,c=n.length;h<c;h+=2){var p=n[h]-this.imageAnchorX_,f=n[h+1]-this.imageAnchorY_;if(this.imageSnapToPixel_&&(p=Math.round(p),f=Math.round(f)),0!==l||1!=this.imageScale_){var _=p+this.imageAnchorX_,g=f+this.imageAnchorY_;d.a.compose(a,_,g,this.imageScale_,this.imageScale_,l,-_,-g),o.setTransform.apply(o,a)}o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,p,f,this.imageWidth_,this.imageHeight_)}0===l&&1==this.imageScale_||o.setTransform(1,0,0,1,0,0),1!=this.imageOpacity_&&(o.globalAlpha=s)}},f.prototype.drawText_=function(t,e,i,r){if(this.textState_&&""!==this.text_){this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);var n=u.a.transform2D(t,e,i,r,this.transform_,this.pixelCoordinates_),o=this.context_,a=this.textRotation_;for(this.textRotateWithView_&&(a+=this.viewRotation_);e<i;e+=r){var s=n[e]+this.textOffsetX_,l=n[e+1]+this.textOffsetY_;if(0!==a||1!=this.textScale_){var h=d.a.compose(this.tmpLocalTransform_,s,l,this.textScale_,this.textScale_,a,-s,-l);o.setTransform.apply(o,h)}this.textStrokeState_&&o.strokeText(this.text_,s,l),this.textFillState_&&o.fillText(this.text_,s,l)}0===a&&1==this.textScale_||o.setTransform(1,0,0,1,0,0)}},f.prototype.moveToLineTo_=function(t,e,i,r,n){var o=this.context_,a=u.a.transform2D(t,e,i,r,this.transform_,this.pixelCoordinates_);o.moveTo(a[0],a[1]);var s=a.length;n&&(s-=2);for(var l=2;l<s;l+=2)o.lineTo(a[l],a[l+1]);return n&&o.closePath(),i},f.prototype.drawRings_=function(t,e,i,r){var n,o;for(n=0,o=i.length;n<o;++n)e=this.moveToLineTo_(t,e,i[n],r,!0);return e},f.prototype.drawCircle=function(t){if(a.a.intersects(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=l.a.transform2D(t,this.transform_,this.pixelCoordinates_),i=e[2]-e[0],r=e[3]-e[1],n=Math.sqrt(i*i+r*r),o=this.context_;o.beginPath(),o.arc(e[0],e[1],n,0,2*Math.PI),this.fillState_&&o.fill(),this.strokeState_&&o.stroke()}""!==this.text_&&this.drawText_(t.getCenter(),0,2,2)}},f.prototype.setStyle=function(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())},f.prototype.drawGeometry=function(t){switch(t.getType()){case s.a.POINT:this.drawPoint(t);break;case s.a.LINE_STRING:this.drawLineString(t);break;case s.a.POLYGON:this.drawPolygon(t);break;case s.a.MULTI_POINT:this.drawMultiPoint(t);break;case s.a.MULTI_LINE_STRING:this.drawMultiLineString(t);break;case s.a.MULTI_POLYGON:this.drawMultiPolygon(t);break;case s.a.GEOMETRY_COLLECTION:this.drawGeometryCollection(t);break;case s.a.CIRCLE:this.drawCircle(t)}},f.prototype.drawFeature=function(t,e){var i=e.getGeometryFunction()(t);i&&a.a.intersects(this.extent_,i.getExtent())&&(this.setStyle(e),this.drawGeometry(i))},f.prototype.drawGeometryCollection=function(t){var e,i,r=t.getGeometriesArray();for(e=0,i=r.length;e<i;++e)this.drawGeometry(r[e])},f.prototype.drawPoint=function(t){var e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),""!==this.text_&&this.drawText_(e,0,e.length,i)},f.prototype.drawMultiPoint=function(t){var e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),""!==this.text_&&this.drawText_(e,0,e.length,i)},f.prototype.drawLineString=function(t){if(a.a.intersects(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var e=this.context_,i=t.getFlatCoordinates();e.beginPath(),this.moveToLineTo_(i,0,i.length,t.getStride(),!1),e.stroke()}if(""!==this.text_){var r=t.getFlatMidpoint();this.drawText_(r,0,2,2)}}},f.prototype.drawMultiLineString=function(t){var e=t.getExtent();if(a.a.intersects(this.extent_,e)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var i=this.context_,r=t.getFlatCoordinates(),n=0,o=t.getEnds(),s=t.getStride();i.beginPath();var l,u;for(l=0,u=o.length;l<u;++l)n=this.moveToLineTo_(r,n,o[l],s,!1);i.stroke()}if(""!==this.text_){var h=t.getFlatMidpoints();this.drawText_(h,0,h.length,2)}}},f.prototype.drawPolygon=function(t){if(a.a.intersects(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=this.context_;e.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){var i=t.getFlatInteriorPoint();this.drawText_(i,0,2,2)}}},f.prototype.drawMultiPolygon=function(t){if(a.a.intersects(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e,i,r=this.context_,n=t.getOrientedFlatCoordinates(),o=0,s=t.getEndss(),l=t.getStride();for(r.beginPath(),e=0,i=s.length;e<i;++e){var u=s[e];o=this.drawRings_(n,o,u,l)}this.fillState_&&r.fill(),this.strokeState_&&r.stroke()}if(""!==this.text_){var h=t.getFlatInteriorPoints();this.drawText_(h,0,h.length,2)}}},f.prototype.setContextFillState_=function(t){var e=this.context_,i=this.contextFillState_;i?i.fillStyle!=t.fillStyle&&(i.fillStyle=e.fillStyle=t.fillStyle):(e.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})},f.prototype.setContextStrokeState_=function(t){var e=this.context_,i=this.contextStrokeState_;i?(i.lineCap!=t.lineCap&&(i.lineCap=e.lineCap=t.lineCap),h.a.CANVAS_LINE_DASH&&(n.a.equals(i.lineDash,t.lineDash)||e.setLineDash(i.lineDash=t.lineDash),i.lineDashOffset!=t.lineDashOffset&&(i.lineDashOffset=e.lineDashOffset=t.lineDashOffset)),i.lineJoin!=t.lineJoin&&(i.lineJoin=e.lineJoin=t.lineJoin),i.lineWidth!=t.lineWidth&&(i.lineWidth=e.lineWidth=t.lineWidth),i.miterLimit!=t.miterLimit&&(i.miterLimit=e.miterLimit=t.miterLimit),i.strokeStyle!=t.strokeStyle&&(i.strokeStyle=e.strokeStyle=t.strokeStyle)):(e.lineCap=t.lineCap,h.a.CANVAS_LINE_DASH&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.lineWidth=t.lineWidth,e.miterLimit=t.miterLimit,e.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})},f.prototype.setContextTextState_=function(t){var e=this.context_,i=this.contextTextState_,r=t.textAlign?t.textAlign:p.a.defaultTextAlign;i?(i.font!=t.font&&(i.font=e.font=t.font),i.textAlign!=r&&(i.textAlign=r),i.textBaseline!=t.textBaseline&&(i.textBaseline=e.textBaseline=t.textBaseline)):(e.font=t.font,e.textAlign=r,e.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:r,textBaseline:t.textBaseline})},f.prototype.setFillStrokeStyle=function(t,e){if(t){var i=t.getColor();this.fillState_={fillStyle:o.a.asColorLike(i||p.a.defaultFillStyle)}}else this.fillState_=null;if(e){var r=e.getColor(),n=e.getLineCap(),a=e.getLineDash(),s=e.getLineDashOffset(),l=e.getLineJoin(),u=e.getWidth(),h=e.getMiterLimit();this.strokeState_={lineCap:void 0!==n?n:p.a.defaultLineCap,lineDash:a||p.a.defaultLineDash,lineDashOffset:s||p.a.defaultLineDashOffset,lineJoin:void 0!==l?l:p.a.defaultLineJoin,lineWidth:this.pixelRatio_*(void 0!==u?u:p.a.defaultLineWidth),miterLimit:void 0!==h?h:p.a.defaultMiterLimit,strokeStyle:o.a.asColorLike(r||p.a.defaultStrokeStyle)}}else this.strokeState_=null},f.prototype.setImageStyle=function(t){if(t){var e=t.getAnchor(),i=t.getImage(1),r=t.getOrigin(),n=t.getSize();this.imageAnchorX_=e[0],this.imageAnchorY_=e[1],this.imageHeight_=n[1],this.image_=i,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=r[0],this.imageOriginY_=r[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation(),this.imageScale_=t.getScale()*this.pixelRatio_,this.imageSnapToPixel_=t.getSnapToPixel(),this.imageWidth_=n[0]}else this.image_=null},f.prototype.setTextStyle=function(t){if(t){var e=t.getFill();if(e){var i=e.getColor();this.textFillState_={fillStyle:o.a.asColorLike(i||p.a.defaultFillStyle)}}else this.textFillState_=null;var r=t.getStroke();if(r){var n=r.getColor(),a=r.getLineCap(),s=r.getLineDash(),l=r.getLineDashOffset(),u=r.getLineJoin(),h=r.getWidth(),c=r.getMiterLimit();this.textStrokeState_={lineCap:void 0!==a?a:p.a.defaultLineCap,lineDash:s||p.a.defaultLineDash,lineDashOffset:l||p.a.defaultLineDashOffset,lineJoin:void 0!==u?u:p.a.defaultLineJoin,lineWidth:void 0!==h?h:p.a.defaultLineWidth,miterLimit:void 0!==c?c:p.a.defaultMiterLimit,strokeStyle:o.a.asColorLike(n||p.a.defaultStrokeStyle)}}else this.textStrokeState_=null;var d=t.getFont(),f=t.getOffsetX(),_=t.getOffsetY(),g=t.getRotateWithView(),y=t.getRotation(),v=t.getScale(),m=t.getText(),E=t.getTextAlign(),T=t.getTextBaseline();this.textState_={font:void 0!==d?d:p.a.defaultFont,textAlign:void 0!==E?E:p.a.defaultTextAlign,textBaseline:void 0!==T?T:p.a.defaultTextBaseline},this.text_=void 0!==m?m:"",this.textOffsetX_=void 0!==f?this.pixelRatio_*f:0,this.textOffsetY_=void 0!==_?this.pixelRatio_*_:0,this.textRotateWithView_=void 0!==g&&g,this.textRotation_=void 0!==y?y:0,this.textScale_=this.pixelRatio_*(void 0!==v?v:1)}else this.text_=""},e.a=f},function(t,e,i){"use strict";var r=i(0),n=i(43),o=i(165),a=i(39),s=i(9),l=i(4),u=i(5),h=i(19),c=i(63),p=function(t){o.a.call(this),this.layer_=t};r.a.inherits(p,o.a),p.prototype.forEachFeatureAtCoordinate=r.a.nullFunction,p.prototype.hasFeatureAtCoordinate=h.a.FALSE,p.prototype.createLoadedTileFinder=function(t,e,i){return function(r,n){function o(t){i[r]||(i[r]={}),i[r][t.tileCoord.toString()]=t}return t.forEachLoadedTile(e,r,n,o)}},p.prototype.getLayer=function(){return this.layer_},p.prototype.handleImageChange_=function(t){t.target.getState()===n.a.LOADED&&this.renderIfReadyAndVisible()},p.prototype.loadImage=function(t){var e=t.getState();return e!=n.a.LOADED&&e!=n.a.ERROR&&l.a.listen(t,u.a.CHANGE,this.handleImageChange_,this),e==n.a.IDLE&&(t.load(),e=t.getState()),e==n.a.LOADED},p.prototype.renderIfReadyAndVisible=function(){var t=this.getLayer();t.getVisible()&&t.getSourceState()==c.a.READY&&this.changed()},p.prototype.scheduleExpireCache=function(t,e){if(e.canExpireCache()){var i=function(t,e,i){var n=r.a.getUid(t).toString();n in i.usedTiles&&t.expireCache(i.viewState.projection,i.usedTiles[n])}.bind(null,e);t.postRenderFunctions.push(i)}},p.prototype.updateLogos=function(t,e){var i=e.getLogo();void 0!==i&&("string"==typeof i?t.logos[i]="":i&&(s.a.assert("string"==typeof i.href,44),s.a.assert("string"==typeof i.src,45),t.logos[i.src]=i.href))},p.prototype.updateUsedTiles=function(t,e,i,n){var o=r.a.getUid(e).toString(),a=i.toString();o in t?a in t[o]?t[o][a].extend(n):t[o][a]=n:(t[o]={},t[o][a]=n)},p.prototype.manageTilePyramid=function(t,e,i,n,o,s,l,u,h,c){var p=r.a.getUid(e).toString();p in t.wantedTiles||(t.wantedTiles[p]={});var d,f,_,g,y,v,m=t.wantedTiles[p],E=t.tileQueue,T=i.getMinZoom();for(v=T;v<=l;++v)for(f=i.getTileRangeForExtentAndZ(s,v,f),_=i.getResolution(v),g=f.minX;g<=f.maxX;++g)for(y=f.minY;y<=f.maxY;++y)l-v<=u?(d=e.getTile(v,g,y,n,o),d.getState()==a.a.IDLE&&(m[d.getKey()]=!0,E.isKeyQueued(d.getKey())||E.enqueue([d,p,i.getTileCoordCenter(d.tileCoord),_])),void 0!==h&&h.call(c,d)):e.useTile(v,g,y,o)},e.a=p},function(t,e,i){"use strict";var r=i(0),n=i(119),o=i(4),a=i(5),s=i(1),l=i(19),u=i(72),h=i(134),c=i(246),p=i(16),d=function(t,e){n.a.call(this),this.map_=e,this.layerRenderers_={},this.layerRendererListeners_={}};r.a.inherits(d,n.a),d.prototype.calculateMatrices2D=function(t){var e=t.viewState,i=t.coordinateToPixelTransform,r=t.pixelToCoordinateTransform;p.a.compose(i,t.size[0]/2,t.size[1]/2,1/e.resolution,-1/e.resolution,-e.rotation,-e.center[0],-e.center[1]),p.a.invert(p.a.setFromArray(r,i))},d.prototype.removeLayerRenderers=function(){for(var t in this.layerRenderers_)this.removeLayerRendererByKey_(t).dispose()},d.expireIconCache_=function(t,e){c.a.iconImageCache.expire()},d.prototype.forEachFeatureAtCoordinate=function(t,e,i,n,o,a,l){function h(t,i){var a=r.a.getUid(t).toString(),s=e.layerStates[r.a.getUid(i)].managed;if(!(a in e.skippedFeatureUids)||s)return n.call(o,t,s?i:null)}var c,p=e.viewState,d=p.resolution,f=p.projection,_=t;if(f.canWrapX()){var g=f.getExtent(),y=s.a.getWidth(g),v=t[0];if(v<g[0]||v>g[2]){_=[v+y*Math.ceil((g[0]-v)/y),t[1]]}}var m,E=e.layerStatesArray,T=E.length;for(m=T-1;m>=0;--m){var S=E[m],R=S.layer;if(u.a.visibleAtResolution(S,d)&&a.call(l,R)){var I=this.getLayerRenderer(R);if(R.getSource()&&(c=I.forEachFeatureAtCoordinate(R.getSource().getWrapX()?_:t,e,i,h,o)),c)return c}}},d.prototype.forEachLayerAtPixel=function(t,e,i,r,n,o){},d.prototype.hasFeatureAtCoordinate=function(t,e,i,r,n){return void 0!==this.forEachFeatureAtCoordinate(t,e,i,l.a.TRUE,this,r,n)},d.prototype.getLayerRenderer=function(t){var e=r.a.getUid(t).toString();if(e in this.layerRenderers_)return this.layerRenderers_[e];for(var i,n=h.a.getLayerRendererPlugins(),s=this.getType(),l=0,u=n.length;l<u;++l){var c=n[l];if(c.handles(s,t)){i=c.create(this,t);break}}if(!i)throw new Error("Unable to create renderer for layer: "+t.getType());return this.layerRenderers_[e]=i,this.layerRendererListeners_[e]=o.a.listen(i,a.a.CHANGE,this.handleLayerRendererChange_,this),i},d.prototype.getLayerRendererByKey=function(t){return this.layerRenderers_[t]},d.prototype.getLayerRenderers=function(){return this.layerRenderers_},d.prototype.getMap=function(){return this.map_},d.prototype.getType=function(){},d.prototype.handleLayerRendererChange_=function(){this.map_.render()},d.prototype.removeLayerRendererByKey_=function(t){var e=this.layerRenderers_[t];return delete this.layerRenderers_[t],o.a.unlistenByKey(this.layerRendererListeners_[t]),delete this.layerRendererListeners_[t],e},d.prototype.renderFrame=r.a.nullFunction,d.prototype.removeUnusedLayerRenderers_=function(t,e){var i;for(i in this.layerRenderers_)e&&i in e.layerStates||this.removeLayerRendererByKey_(i).dispose()},d.prototype.scheduleExpireIconCache=function(t){t.postRenderFunctions.push(d.expireIconCache_)},d.prototype.scheduleRemoveUnusedLayerRenderers=function(t){var e;for(e in this.layerRenderers_)if(!(e in t.layerStates))return void t.postRenderFunctions.push(this.removeUnusedLayerRenderers_.bind(this))},d.sortByZIndex=function(t,e){return t.zIndex-e.zIndex},e.a=d},function(t,e,i){"use strict";var r=i(0),n=i(48),o=i(128),a=i(39),s=i(28),l=i(13),u=i(1),h=i(49),c=i(282),p=i(16),d=function(t){c.a.call(this,t),this.context=null===this.context?null:l.a.createCanvasContext2D(),this.oversampling_,this.renderedExtent_=null,this.renderedRevision,this.renderedTiles=[],this.tmpExtent=u.a.createEmpty(),this.tmpTileRange_=new o.a(0,0,0,0),this.imageTransform_=p.a.create(),this.zDirection=0};r.a.inherits(d,c.a),d.handles=function(t,e){return t===h.a.CANVAS&&e.getType()===n.a.TILE},d.create=function(t,e){return new d(e)},d.prototype.isDrawableTile_=function(t){var e=t.getState(),i=this.getLayer().getUseInterimTilesOnError();return e==a.a.LOADED||e==a.a.EMPTY||e==a.a.ERROR&&!i},d.prototype.prepareFrame=function(t,e){var i=t.pixelRatio,n=t.size,o=t.viewState,l=o.projection,h=o.resolution,c=o.center,d=this.getLayer(),f=d.getSource(),_=f.getRevision(),g=f.getTileGridForProjection(l),y=g.getZForResolution(h,this.zDirection),v=g.getResolution(y),m=Math.round(h/v)||1,E=t.extent;if(void 0!==e.extent&&(E=u.a.getIntersection(E,e.extent)),u.a.isEmpty(E))return!1;var T=g.getTileRangeForExtentAndZ(E,y),S=g.getTileRangeExtent(y,T),R=f.getTilePixelRatio(i),I={};I[y]={};var x,C,O,P=this.createLoadedTileFinder(f,l,I),L=this.tmpExtent,A=this.tmpTileRange_,w=!1;for(C=T.minX;C<=T.maxX;++C)for(O=T.minY;O<=T.maxY;++O){if(x=f.getTile(y,C,O,i,l),x.getState()==a.a.ERROR&&(d.getUseInterimTilesOnError()?d.getPreload()>0&&(w=!0):x.setState(a.a.LOADED)),this.isDrawableTile_(x)||(x=x.getInterimTile()),this.isDrawableTile_(x)){var M=r.a.getUid(this);if(x.getState()==a.a.LOADED){I[y][x.tileCoord.toString()]=x;var F=x.inTransition(M);w||!F&&-1!==this.renderedTiles.indexOf(x)||(w=!0)}if(1===x.getAlpha(M,t.time))continue}var N=g.getTileCoordChildTileRange(x.tileCoord,A,L),b=!1;N&&(b=P(y+1,N)),b||g.forEachTileCoordParentTileRange(x.tileCoord,P,null,A,L)}var D=v*i/R*m,k=t.viewHints,G=k[s.a.ANIMATING]||k[s.a.INTERACTING];if(!(this.renderedResolution&&Date.now()-t.time>16&&G)&&(w||!this.renderedExtent_||!u.a.containsExtent(this.renderedExtent_,E)||this.renderedRevision!=_||m!=this.oversampling_||!G&&D!=this.renderedResolution)){var U=this.context;if(U){var B=f.getTilePixelSize(y,i,l),Y=Math.round(T.getWidth()*B[0]/m),j=Math.round(T.getHeight()*B[1]/m),X=U.canvas;X.width!=Y||X.height!=j?(this.oversampling_=m,X.width=Y,X.height=j):(this.renderedExtent_&&!u.a.equals(S,this.renderedExtent_)&&U.clearRect(0,0,Y,j),m=this.oversampling_)}this.renderedTiles.length=0;var V=Object.keys(I).map(Number);V.sort(function(t,e){return t===y?1:e===y?-1:t>e?1:t<e?-1:0});var z,W,Z,H,K,q,J,Q,$,tt,et;for(K=0,q=V.length;K<q;++K){H=V[K],Z=f.getTilePixelSize(H,i,l),z=g.getResolution(H),W=z/v,Q=R*f.getGutter(l),$=I[H];for(var it in $)x=$[it],J=g.getTileCoordExtent(x.getTileCoord(),L),C=(J[0]-S[0])/v*R/m,O=(S[3]-J[3])/v*R/m,tt=Z[0]*W/m,et=Z[1]*W/m,this.drawTileImage(x,t,e,C,O,tt,et,Q,y===H),this.renderedTiles.push(x)}this.renderedRevision=_,this.renderedResolution=v*i/R*m,this.renderedExtent_=S}var rt=this.renderedResolution/h,nt=p.a.compose(this.imageTransform_,i*n[0]/2,i*n[1]/2,rt,rt,0,(this.renderedExtent_[0]-c[0])/this.renderedResolution*i,(c[1]-this.renderedExtent_[3])/this.renderedResolution*i);return p.a.compose(this.coordinateToCanvasPixelTransform,i*n[0]/2-nt[4],i*n[1]/2-nt[5],i/h,-i/h,0,-c[0],-c[1]),this.updateUsedTiles(t.usedTiles,f,y,T),this.manageTilePyramid(t,f,g,i,l,E,y,d.getPreload()),this.scheduleExpireCache(t,f),this.updateLogos(t,f),this.renderedTiles.length>0},d.prototype.drawTileImage=function(t,e,i,n,o,a,s,l,u){var h=t.getImage(this.getLayer());if(h){var c=r.a.getUid(this),p=u?t.getAlpha(c,e.time):1;1!==p||this.getLayer().getSource().getOpaque(e.viewState.projection)||this.context.clearRect(n,o,a,s);var d=p!==this.context.globalAlpha;d&&(this.context.save(),this.context.globalAlpha=p),this.context.drawImage(h,l,l,h.width-2*l,h.height-2*l,n,o,a,s),d&&this.context.restore(),1!==p?e.animate=!0:u&&t.endTransition(c)}},d.prototype.getImage=function(){var t=this.context;return t?t.canvas:null},d.prototype.getLayer,d.prototype.getImageTransform=function(){return this.imageTransform_},e.a=d},function(t,e,i){"use strict";var r=i(0),n=i(6),o=i(13),a=i(1),s=i(51),l=i(2),u=i(289),h=i(109),c=i(110),p=i(489),d=i(490),f=i(491),_=i(492),g=i(84),y=i(16),v=function(t,e,i,r,n,a,s){u.a.call(this),this.declutterTree_=a,this.declutterGroup_=null,this.tolerance_=t,this.maxExtent_=e,this.overlaps_=n,this.pixelRatio_=r,this.resolution_=i,this.renderBuffer_=s,this.replaysByZIndex_={},this.hitDetectionContext_=o.a.createCanvasContext2D(1,1),this.hitDetectionTransform_=y.a.create()};r.a.inherits(v,u.a),v.circleArrayCache_={0:[[!0]]},v.fillCircleArrayRowToMiddle_=function(t,e,i){var r,n=Math.floor(t.length/2);if(e>=n)for(r=n;r<e;r++)t[r][i]=!0;else if(e<n)for(r=e+1;r<n;r++)t[r][i]=!0},v.getCircleArray_=function(t){if(void 0!==v.circleArrayCache_[t])return v.circleArrayCache_[t];for(var e=2*t+1,i=new Array(e),r=0;r<e;r++)i[r]=new Array(e);for(var n=t,o=0,a=0;n>=o;)v.fillCircleArrayRowToMiddle_(i,t+n,t+o),v.fillCircleArrayRowToMiddle_(i,t+o,t+n),v.fillCircleArrayRowToMiddle_(i,t-o,t+n),v.fillCircleArrayRowToMiddle_(i,t-n,t+o),v.fillCircleArrayRowToMiddle_(i,t-n,t-o),v.fillCircleArrayRowToMiddle_(i,t-o,t-n),v.fillCircleArrayRowToMiddle_(i,t+o,t-n),v.fillCircleArrayRowToMiddle_(i,t+n,t-o),o++,2*((a+=1+2*o)-n)+1>0&&(n-=1,a+=1-2*n);return v.circleArrayCache_[t]=i,i},v.replayDeclutter=function(t,e,i){for(var r=Object.keys(t).map(Number).sort(n.a.numberSafeCompareFunction),o={},a=0,s=r.length;a<s;++a)for(var l=t[r[a].toString()],u=0,h=l.length;u<h;){var c=l[u++],p=l[u++];c.replay(e,p,i,o)}},v.prototype.addDeclutter=function(t){var e=null;return this.declutterTree_&&(t?(e=this.declutterGroup_,e[4]++):(e=this.declutterGroup_=a.a.createEmpty(),e.push(1))),e},v.prototype.clip=function(t,e){var i=this.getClipCoords(e);t.beginPath(),t.moveTo(i[0],i[1]),t.lineTo(i[2],i[3]),t.lineTo(i[4],i[5]),t.lineTo(i[6],i[7]),t.clip()},v.prototype.hasReplays=function(t){for(var e in this.replaysByZIndex_)for(var i=this.replaysByZIndex_[e],r=0,n=t.length;r<n;++r)if(t[r]in i)return!0;return!1},v.prototype.finish=function(){var t;for(t in this.replaysByZIndex_){var e,i=this.replaysByZIndex_[t];for(e in i)i[e].finish()}},v.prototype.forEachFeatureAtCoordinate=function(t,e,i,r,o,s,l){function u(t){for(var e=d.getImageData(0,0,c,c).data,i=0;i<c;i++)for(var r=0;r<c;r++)if(m[i][r]&&e[4*(r*c+i)+3]>0){var n;return(!_||E!=h.a.IMAGE&&E!=h.a.TEXT||-1!==_.indexOf(t))&&(n=s(t)),n||void d.clearRect(0,0,c,c)}}r=Math.round(r);var c=2*r+1,p=y.a.compose(this.hitDetectionTransform_,r+.5,r+.5,1/e,-1/e,-i,-t[0],-t[1]),d=this.hitDetectionContext_;d.canvas.width!==c||d.canvas.height!==c?(d.canvas.width=c,d.canvas.height=c):d.clearRect(0,0,c,c);var f;void 0!==this.renderBuffer_&&(f=a.a.createEmpty(),a.a.extendCoordinate(f,t),a.a.buffer(f,e*(this.renderBuffer_+r),f));var _,m=v.getCircleArray_(r);this.declutterTree_&&(_=this.declutterTree_.all().map(function(t){return t.value}));var E,T=Object.keys(this.replaysByZIndex_).map(Number);T.sort(n.a.numberSafeCompareFunction);var S,R,I,x,C;for(S=T.length-1;S>=0;--S){var O=T[S].toString();for(I=this.replaysByZIndex_[O],R=g.a.ORDER.length-1;R>=0;--R)if(E=g.a.ORDER[R],void 0!==(x=I[E]))if(!l||E!=h.a.IMAGE&&E!=h.a.TEXT){if(C=x.replayHitDetection(d,p,i,o,u,f))return C}else{var P=l[O];P?P.push(x,p.slice(0)):l[O]=[x,p.slice(0)]}}},v.prototype.getClipCoords=function(t){var e=this.maxExtent_,i=e[0],r=e[1],n=e[2],o=e[3],a=[i,r,i,o,n,o,n,r];return s.a.transform2D(a,0,8,2,t,a),a},v.prototype.getReplay=function(t,e){var i=void 0!==t?t.toString():"0",r=this.replaysByZIndex_[i];void 0===r&&(r={},this.replaysByZIndex_[i]=r);var n=r[e];if(void 0===n){n=new(0,v.BATCH_CONSTRUCTORS_[e])(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_,this.overlaps_,this.declutterTree_),r[e]=n}return n},v.prototype.getReplays=function(){return this.replaysByZIndex_},v.prototype.isEmpty=function(){return l.a.isEmpty(this.replaysByZIndex_)},v.prototype.replay=function(t,e,i,r,o,a){var s=Object.keys(this.replaysByZIndex_).map(Number);s.sort(n.a.numberSafeCompareFunction),t.save(),this.clip(t,e);var l,u,c,p,d,f,_=o||g.a.ORDER;for(l=0,u=s.length;l<u;++l){var y=s[l].toString();for(d=this.replaysByZIndex_[y],c=0,p=_.length;c<p;++c){var v=_[c];if(void 0!==(f=d[v]))if(!a||v!=h.a.IMAGE&&v!=h.a.TEXT)f.replay(t,e,i,r);else{var m=a[y];m?m.push(f,e.slice(0)):a[y]=[f,e.slice(0)]}}}t.restore()},v.BATCH_CONSTRUCTORS_={Circle:f.a,Default:c.a,Image:p.a,LineString:d.a,Polygon:f.a,Text:_.a},e.a=v},function(t,e,i){"use strict";var r=function(){};r.prototype.getReplay=function(t,e){},r.prototype.isEmpty=function(){},e.a=r},function(t,e,i){"use strict";var r=i(0),n=i(1),o=i(12),a=i(109),s=i(147),l=i(291),u=function(t,e,i,r,n,o,a){s.a.call(this),this.context_=t,this.center_=e,this.extent_=o,this.pixelRatio_=a,this.size_=n,this.rotation_=r,this.resolution_=i,this.imageStyle_=null,this.fillStyle_=null,this.strokeStyle_=null,this.textStyle_=null};r.a.inherits(u,s.a),u.prototype.drawText_=function(t,e){var i=this.context_,r=t.getReplay(0,a.a.TEXT);r.setTextStyle(this.textStyle_),r.drawText(e,null),r.finish(i);var n={};r.replay(this.context_,this.center_,this.resolution_,this.rotation_,this.size_,this.pixelRatio_,1,n,void 0,!1),r.getDeleteResourcesFunction(i)()},u.prototype.setStyle=function(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())},u.prototype.drawGeometry=function(t){switch(t.getType()){case o.a.POINT:this.drawPoint(t,null);break;case o.a.LINE_STRING:this.drawLineString(t,null);break;case o.a.POLYGON:this.drawPolygon(t,null);break;case o.a.MULTI_POINT:this.drawMultiPoint(t,null);break;case o.a.MULTI_LINE_STRING:this.drawMultiLineString(t,null);break;case o.a.MULTI_POLYGON:this.drawMultiPolygon(t,null);break;case o.a.GEOMETRY_COLLECTION:this.drawGeometryCollection(t,null);break;case o.a.CIRCLE:this.drawCircle(t,null)}},u.prototype.drawFeature=function(t,e){var i=e.getGeometryFunction()(t);i&&n.a.intersects(this.extent_,i.getExtent())&&(this.setStyle(e),this.drawGeometry(i))},u.prototype.drawGeometryCollection=function(t,e){var i,r,n=t.getGeometriesArray();for(i=0,r=n.length;i<r;++i)this.drawGeometry(n[i])},u.prototype.drawPoint=function(t,e){var i=this.context_,r=new l.a(1,this.extent_),n=r.getReplay(0,a.a.IMAGE);n.setImageStyle(this.imageStyle_),n.drawPoint(t,e),n.finish(i);var o={};n.replay(this.context_,this.center_,this.resolution_,this.rotation_,this.size_,this.pixelRatio_,1,o,void 0,!1),n.getDeleteResourcesFunction(i)(),this.textStyle_&&this.drawText_(r,t)},u.prototype.drawMultiPoint=function(t,e){var i=this.context_,r=new l.a(1,this.extent_),n=r.getReplay(0,a.a.IMAGE);n.setImageStyle(this.imageStyle_),n.drawMultiPoint(t,e),n.finish(i);var o={};n.replay(this.context_,this.center_,this.resolution_,this.rotation_,this.size_,this.pixelRatio_,1,o,void 0,!1),n.getDeleteResourcesFunction(i)(),this.textStyle_&&this.drawText_(r,t)},u.prototype.drawLineString=function(t,e){var i=this.context_,r=new l.a(1,this.extent_),n=r.getReplay(0,a.a.LINE_STRING);n.setFillStrokeStyle(null,this.strokeStyle_),n.drawLineString(t,e),n.finish(i);var o={};n.replay(this.context_,this.center_,this.resolution_,this.rotation_,this.size_,this.pixelRatio_,1,o,void 0,!1),n.getDeleteResourcesFunction(i)(),this.textStyle_&&this.drawText_(r,t)},u.prototype.drawMultiLineString=function(t,e){var i=this.context_,r=new l.a(1,this.extent_),n=r.getReplay(0,a.a.LINE_STRING);n.setFillStrokeStyle(null,this.strokeStyle_),n.drawMultiLineString(t,e),n.finish(i);var o={};n.replay(this.context_,this.center_,this.resolution_,this.rotation_,this.size_,this.pixelRatio_,1,o,void 0,!1),n.getDeleteResourcesFunction(i)(),this.textStyle_&&this.drawText_(r,t)},u.prototype.drawPolygon=function(t,e){var i=this.context_,r=new l.a(1,this.extent_),n=r.getReplay(0,a.a.POLYGON);n.setFillStrokeStyle(this.fillStyle_,this.strokeStyle_),n.drawPolygon(t,e),n.finish(i);var o={};n.replay(this.context_,this.center_,this.resolution_,this.rotation_,this.size_,this.pixelRatio_,1,o,void 0,!1),n.getDeleteResourcesFunction(i)(),this.textStyle_&&this.drawText_(r,t)},u.prototype.drawMultiPolygon=function(t,e){var i=this.context_,r=new l.a(1,this.extent_),n=r.getReplay(0,a.a.POLYGON);n.setFillStrokeStyle(this.fillStyle_,this.strokeStyle_),n.drawMultiPolygon(t,e),n.finish(i);var o={};n.replay(this.context_,this.center_,this.resolution_,this.rotation_,this.size_,this.pixelRatio_,1,o,void 0,!1),n.getDeleteResourcesFunction(i)(),this.textStyle_&&this.drawText_(r,t)},u.prototype.drawCircle=function(t,e){var i=this.context_,r=new l.a(1,this.extent_),n=r.getReplay(0,a.a.CIRCLE);n.setFillStrokeStyle(this.fillStyle_,this.strokeStyle_),n.drawCircle(t,e),n.finish(i);var o={};n.replay(this.context_,this.center_,this.resolution_,this.rotation_,this.size_,this.pixelRatio_,1,o,void 0,!1),n.getDeleteResourcesFunction(i)(),this.textStyle_&&this.drawText_(r,t)},u.prototype.setImageStyle=function(t){this.imageStyle_=t},u.prototype.setFillStrokeStyle=function(t,e){this.fillStyle_=t,this.strokeStyle_=e},u.prototype.setTextStyle=function(t){this.textStyle_=t},e.a=u},function(t,e,i){"use strict";var r=i(0),n=i(6),o=i(1),a=i(2),s=i(84),l=i(289),u=i(497),h=i(500),c=i(296),p=i(506),d=i(510),f=function(t,e,i){l.a.call(this),this.maxExtent_=e,this.tolerance_=t,this.renderBuffer_=i,this.replaysByZIndex_={}};r.a.inherits(f,l.a),f.prototype.addDeclutter=function(t,e){},f.prototype.getDeleteResourcesFunction=function(t){var e,i=[];for(e in this.replaysByZIndex_){var r,n=this.replaysByZIndex_[e];for(r in n)i.push(n[r].getDeleteResourcesFunction(t))}return function(){for(var t,e=i.length,r=0;r<e;r++)t=i[r].apply(this,arguments);return t}},f.prototype.finish=function(t){var e;for(e in this.replaysByZIndex_){var i,r=this.replaysByZIndex_[e];for(i in r)r[i].finish(t)}},f.prototype.getReplay=function(t,e){var i=void 0!==t?t.toString():"0",r=this.replaysByZIndex_[i];void 0===r&&(r={},this.replaysByZIndex_[i]=r);var n=r[e];if(void 0===n){n=new(0,f.BATCH_CONSTRUCTORS_[e])(this.tolerance_,this.maxExtent_),r[e]=n}return n},f.prototype.isEmpty=function(){return a.a.isEmpty(this.replaysByZIndex_)},f.prototype.replay=function(t,e,i,r,o,a,l,u){var h=Object.keys(this.replaysByZIndex_).map(Number);h.sort(n.a.numberSafeCompareFunction);var c,p,d,f,_,g;for(c=0,p=h.length;c<p;++c)for(_=this.replaysByZIndex_[h[c].toString()],d=0,f=s.a.ORDER.length;d<f;++d)void 0!==(g=_[s.a.ORDER[d]])&&g.replay(t,e,i,r,o,a,l,u,void 0,!1)},f.prototype.replayHitDetection_=function(t,e,i,r,n,o,a,l,u,h,c){var p=Object.keys(this.replaysByZIndex_).map(Number);p.sort(function(t,e){return e-t});var d,f,_,g,y,v;for(d=0,f=p.length;d<f;++d)for(g=this.replaysByZIndex_[p[d].toString()],_=s.a.ORDER.length-1;_>=0;--_)if(void 0!==(y=g[s.a.ORDER[_]])&&(v=y.replay(t,e,i,r,n,o,a,l,u,h,c)))return v},f.prototype.forEachFeatureAtCoordinate=function(t,e,i,r,n,a,s,l,u,h){var c=e.getGL();c.bindFramebuffer(c.FRAMEBUFFER,e.getHitDetectionFramebuffer());var p;return void 0!==this.renderBuffer_&&(p=o.a.buffer(o.a.createOrUpdateFromCoordinate(t),r*this.renderBuffer_)),this.replayHitDetection_(e,t,r,n,f.HIT_DETECTION_SIZE_,s,l,u,function(t){var e=new Uint8Array(4);if(c.readPixels(0,0,1,1,c.RGBA,c.UNSIGNED_BYTE,e),e[3]>0){var i=h(t);if(i)return i}},!0,p)},f.prototype.hasFeatureAtCoordinate=function(t,e,i,r,n,o,a,s,l){var u=e.getGL();return u.bindFramebuffer(u.FRAMEBUFFER,e.getHitDetectionFramebuffer()),void 0!==this.replayHitDetection_(e,t,r,n,f.HIT_DETECTION_SIZE_,a,s,l,function(t){var e=new Uint8Array(4);return u.readPixels(0,0,1,1,u.RGBA,u.UNSIGNED_BYTE,e),e[3]>0},!1)},f.HIT_DETECTION_SIZE_=[1,1],f.BATCH_CONSTRUCTORS_={Circle:u.a,Image:h.a,LineString:c.a,Polygon:p.a,Text:d.a},e.a=f},function(t,e,i){"use strict";var r=i(19),n=function(t){this.source_=t};n.prototype.getType=function(){},n.prototype.getSource=function(){return this.source_},n.prototype.isAnimated=r.a.FALSE,e.a=n},function(t,e,i){"use strict";var r={};r.create=function(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},r.fromTransform=function(t,e){return t[0]=e[0],t[1]=e[1],t[4]=e[2],t[5]=e[3],t[12]=e[4],t[13]=e[5],t},e.a=r},function(t,e,i){"use strict";var r=i(0),n=i(1),o=i(2),a=i(501),s=i(502),l=i(148),u=i(21),h=i(150),c=function(t,e){l.a.call(this,t,e),this.anchorX=void 0,this.anchorY=void 0,this.groupIndices=[],this.hitDetectionGroupIndices=[],this.height=void 0,this.imageHeight=void 0,this.imageWidth=void 0,this.defaultLocations=null,this.opacity=void 0,this.originX=void 0,this.originY=void 0,this.rotateWithView=void 0,this.rotation=void 0,this.scale=void 0,this.width=void 0};r.a.inherits(c,l.a),c.prototype.getDeleteResourcesFunction=function(t){var e=this.verticesBuffer,i=this.indicesBuffer,r=this.getTextures(!0),n=t.getGL();return function(){if(!n.isContextLost()){var o,a;for(o=0,a=r.length;o<a;++o)n.deleteTexture(r[o])}t.deleteBuffer(e),t.deleteBuffer(i)}},c.prototype.drawCoordinates=function(t,e,i,r){var n,o,a,s,l,u,h=this.anchorX,c=this.anchorY,p=this.height,d=this.imageHeight,f=this.imageWidth,_=this.opacity,g=this.originX,y=this.originY,v=this.rotateWithView?1:0,m=-this.rotation,E=this.scale,T=this.width,S=Math.cos(m),R=Math.sin(m),I=this.indices.length,x=this.vertices.length;for(n=e;n<i;n+=r)l=t[n]-this.origin[0],u=t[n+1]-this.origin[1],o=x/8,a=-E*h,s=-E*(p-c),this.vertices[x++]=l,this.vertices[x++]=u,this.vertices[x++]=a*S-s*R,this.vertices[x++]=a*R+s*S,this.vertices[x++]=g/f,this.vertices[x++]=(y+p)/d,this.vertices[x++]=_,this.vertices[x++]=v,a=E*(T-h),s=-E*(p-c),this.vertices[x++]=l,this.vertices[x++]=u,this.vertices[x++]=a*S-s*R,this.vertices[x++]=a*R+s*S,this.vertices[x++]=(g+T)/f,this.vertices[x++]=(y+p)/d,this.vertices[x++]=_,this.vertices[x++]=v,a=E*(T-h),s=E*c,this.vertices[x++]=l,this.vertices[x++]=u,this.vertices[x++]=a*S-s*R,this.vertices[x++]=a*R+s*S,this.vertices[x++]=(g+T)/f,this.vertices[x++]=y/d,this.vertices[x++]=_,this.vertices[x++]=v,a=-E*h,s=E*c,this.vertices[x++]=l,this.vertices[x++]=u,this.vertices[x++]=a*S-s*R,this.vertices[x++]=a*R+s*S,this.vertices[x++]=g/f,this.vertices[x++]=y/d,this.vertices[x++]=_,this.vertices[x++]=v,this.indices[I++]=o,this.indices[I++]=o+1,this.indices[I++]=o+2,this.indices[I++]=o,this.indices[I++]=o+2,this.indices[I++]=o+3;return x},c.prototype.createTextures=function(t,e,i,n){var o,a,s,l,c=e.length;for(l=0;l<c;++l)a=e[l],s=r.a.getUid(a).toString(),s in i?o=i[s]:(o=h.a.createTexture(n,a,u.a.CLAMP_TO_EDGE,u.a.CLAMP_TO_EDGE),i[s]=o),t[l]=o},c.prototype.setUpProgram=function(t,e,i,r){var n,o=a.a.fragment,l=a.a.vertex,h=e.getProgram(o,l);return this.defaultLocations?n=this.defaultLocations:(n=new s.a(t,h),this.defaultLocations=n),e.useProgram(h),t.enableVertexAttribArray(n.a_position),t.vertexAttribPointer(n.a_position,2,u.a.FLOAT,!1,32,0),t.enableVertexAttribArray(n.a_offsets),t.vertexAttribPointer(n.a_offsets,2,u.a.FLOAT,!1,32,8),t.enableVertexAttribArray(n.a_texCoord),t.vertexAttribPointer(n.a_texCoord,2,u.a.FLOAT,!1,32,16),t.enableVertexAttribArray(n.a_opacity),t.vertexAttribPointer(n.a_opacity,1,u.a.FLOAT,!1,32,24),t.enableVertexAttribArray(n.a_rotateWithView),t.vertexAttribPointer(n.a_rotateWithView,1,u.a.FLOAT,!1,32,28),n},c.prototype.shutDownProgram=function(t,e){t.disableVertexAttribArray(e.a_position),t.disableVertexAttribArray(e.a_offsets),t.disableVertexAttribArray(e.a_texCoord),t.disableVertexAttribArray(e.a_opacity),t.disableVertexAttribArray(e.a_rotateWithView)},c.prototype.drawReplay=function(t,e,i,r){var n=r?this.getHitDetectionTextures():this.getTextures(),a=r?this.hitDetectionGroupIndices:this.groupIndices;if(o.a.isEmpty(i)){var s,l,h;for(s=0,l=n.length,h=0;s<l;++s){t.bindTexture(u.a.TEXTURE_2D,n[s]);var c=a[s];this.drawElements(t,e,h,c),h=c}}else this.drawReplaySkipping(t,e,i,n,a)},c.prototype.drawReplaySkipping=function(t,e,i,n,o){var a,s,l=0;for(a=0,s=n.length;a<s;++a){t.bindTexture(u.a.TEXTURE_2D,n[a]);for(var h=a>0?o[a-1]:0,c=o[a],p=h,d=h;l<this.startIndices.length&&this.startIndices[l]<=c;){var f=this.startIndicesFeature[l];void 0!==i[r.a.getUid(f).toString()]?(p!==d&&this.drawElements(t,e,p,d),p=l===this.startIndices.length-1?c:this.startIndices[l+1],d=p):d=l===this.startIndices.length-1?c:this.startIndices[l+1],l++}p!==d&&this.drawElements(t,e,p,d)}},c.prototype.drawHitDetectionReplayOneByOne=function(t,e,i,o,a){var s,l,h,c,p,d,f=this.startIndices.length-1,_=this.getHitDetectionTextures();for(s=_.length-1;s>=0;--s)for(t.bindTexture(u.a.TEXTURE_2D,_[s]),l=s>0?this.hitDetectionGroupIndices[s-1]:0,c=this.hitDetectionGroupIndices[s];f>=0&&this.startIndices[f]>=l;){if(h=this.startIndices[f],p=this.startIndicesFeature[f],d=r.a.getUid(p).toString(),void 0===i[d]&&p.getGeometry()&&(void 0===a||n.a.intersects(a,p.getGeometry().getExtent()))){t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),this.drawElements(t,e,h,c);var g=o(p);if(g)return g}c=h,f--}},c.prototype.finish=function(t){this.anchorX=void 0,this.anchorY=void 0,this.height=void 0,this.imageHeight=void 0,this.imageWidth=void 0,this.indices=null,this.opacity=void 0,this.originX=void 0,this.originY=void 0,this.rotateWithView=void 0,this.rotation=void 0,this.scale=void 0,this.vertices=null,this.width=void 0},c.prototype.getTextures=function(t){},c.prototype.getHitDetectionTextures=function(){},e.a=c},function(t,e,i){"use strict";var r={LOST:"webglcontextlost",RESTORED:"webglcontextrestored"};e.a=r},function(t,e,i){"use strict";var r=i(0),n=i(6),o=i(52),a=i(1),s=i(80),l=i(51),u=i(503),h=i(2),c=i(149),p=i(148),d=i(504),f=i(505),_=i(21),g=i(76),y=function(t,e){p.a.call(this,t,e),this.defaultLocations_=null,this.styles_=[],this.styleIndices_=[],this.state_={strokeColor:null,lineCap:void 0,lineDash:null,lineDashOffset:void 0,lineJoin:void 0,lineWidth:void 0,miterLimit:void 0,changed:!1}};r.a.inherits(y,p.a),y.prototype.drawCoordinates_=function(t,e,i,r){var o,a,l,h,p,d,f,_,g=this.vertices.length,v=this.indices.length,m="bevel"===this.state_.lineJoin?0:"miter"===this.state_.lineJoin?1:2,E="butt"===this.state_.lineCap?0:"square"===this.state_.lineCap?1:2,T=u.a.lineStringIsClosed(t,e,i,r),S=v,R=1;for(o=e,a=i;o<a;o+=r){if(p=g/7,d=f,f=_||[t[o],t[o+1]],o===e){if(_=[t[o+r],t[o+r+1]],i-e==2*r&&n.a.equals(f,_))break;if(!T){E&&(g=this.addVertices_([0,0],f,_,R*y.Instruction_.BEGIN_LINE_CAP*E,g),g=this.addVertices_([0,0],f,_,-R*y.Instruction_.BEGIN_LINE_CAP*E,g),this.indices[v++]=p+2,this.indices[v++]=p,this.indices[v++]=p+1,this.indices[v++]=p+1,this.indices[v++]=p+3,this.indices[v++]=p+2),g=this.addVertices_([0,0],f,_,R*y.Instruction_.BEGIN_LINE*(E||1),g),g=this.addVertices_([0,0],f,_,-R*y.Instruction_.BEGIN_LINE*(E||1),g),S=g/7-1;continue}d=[t[i-2*r],t[i-2*r+1]],l=_}else{if(o===i-r){if(T){_=l;break}d=d||[0,0],g=this.addVertices_(d,f,[0,0],R*y.Instruction_.END_LINE*(E||1),g),g=this.addVertices_(d,f,[0,0],-R*y.Instruction_.END_LINE*(E||1),g),this.indices[v++]=p,this.indices[v++]=S-1,this.indices[v++]=S,this.indices[v++]=S,this.indices[v++]=p+1,this.indices[v++]=p,E&&(g=this.addVertices_(d,f,[0,0],R*y.Instruction_.END_LINE_CAP*E,g),g=this.addVertices_(d,f,[0,0],-R*y.Instruction_.END_LINE_CAP*E,g),this.indices[v++]=p+2,this.indices[v++]=p,this.indices[v++]=p+1,this.indices[v++]=p+1,this.indices[v++]=p+3,this.indices[v++]=p+2);break}_=[t[o+r],t[o+r+1]]}h=c.a.triangleIsCounterClockwise(d[0],d[1],f[0],f[1],_[0],_[1])?-1:1,g=this.addVertices_(d,f,_,h*y.Instruction_.BEVEL_FIRST*(m||1),g),g=this.addVertices_(d,f,_,h*y.Instruction_.BEVEL_SECOND*(m||1),g),g=this.addVertices_(d,f,_,-h*y.Instruction_.MITER_BOTTOM*(m||1),g),o>e&&(this.indices[v++]=p,this.indices[v++]=S-1,this.indices[v++]=S,this.indices[v++]=p+2,this.indices[v++]=p,this.indices[v++]=R*h>0?S:S-1),this.indices[v++]=p,this.indices[v++]=p+2,this.indices[v++]=p+1,S=p+2,R=h,m&&(g=this.addVertices_(d,f,_,h*y.Instruction_.MITER_TOP*m,g),this.indices[v++]=p+1,this.indices[v++]=p+3,this.indices[v++]=p)}T&&(p=p||g/7,h=s.a.linearRingIsClockwise([d[0],d[1],f[0],f[1],_[0],_[1]],0,6,2)?1:-1,g=this.addVertices_(d,f,_,h*y.Instruction_.BEVEL_FIRST*(m||1),g),g=this.addVertices_(d,f,_,-h*y.Instruction_.MITER_BOTTOM*(m||1),g),this.indices[v++]=p,this.indices[v++]=S-1,this.indices[v++]=S,this.indices[v++]=p+1,this.indices[v++]=p,this.indices[v++]=R*h>0?S:S-1)},y.prototype.addVertices_=function(t,e,i,r,n){return this.vertices[n++]=t[0],this.vertices[n++]=t[1],this.vertices[n++]=e[0],this.vertices[n++]=e[1],this.vertices[n++]=i[0],this.vertices[n++]=i[1],this.vertices[n++]=r,n},y.prototype.isValid_=function(t,e,i,r){var o=i-e;if(o<2*r)return!1;if(o===2*r){var a=[t[e],t[e+1]],s=[t[e+r],t[e+r+1]];return!n.a.equals(a,s)}return!0},y.prototype.drawLineString=function(t,e){var i=t.getFlatCoordinates(),r=t.getStride();this.isValid_(i,0,i.length,r)&&(i=l.a.translate(i,0,i.length,r,-this.origin[0],-this.origin[1]),this.state_.changed&&(this.styleIndices_.push(this.indices.length),this.state_.changed=!1),this.startIndices.push(this.indices.length),this.startIndicesFeature.push(e),this.drawCoordinates_(i,0,i.length,r))},y.prototype.drawMultiLineString=function(t,e){var i=this.indices.length,r=t.getEnds();r.unshift(0);var n,o,a=t.getFlatCoordinates(),s=t.getStride();if(r.length>1)for(n=1,o=r.length;n<o;++n)if(this.isValid_(a,r[n-1],r[n],s)){var u=l.a.translate(a,r[n-1],r[n],s,-this.origin[0],-this.origin[1]);this.drawCoordinates_(u,0,u.length,s)}this.indices.length>i&&(this.startIndices.push(i),this.startIndicesFeature.push(e),this.state_.changed&&(this.styleIndices_.push(i),this.state_.changed=!1))},y.prototype.drawPolygonCoordinates=function(t,e,i){if(u.a.lineStringIsClosed(t,0,t.length,i)||(t.push(t[0]),t.push(t[1])),this.drawCoordinates_(t,0,t.length,i),e.length){var r,n;for(r=0,n=e.length;r<n;++r)u.a.lineStringIsClosed(e[r],0,e[r].length,i)||(e[r].push(e[r][0]),e[r].push(e[r][1])),this.drawCoordinates_(e[r],0,e[r].length,i)}},y.prototype.setPolygonStyle=function(t,e){var i=void 0===e?this.indices.length:e;this.startIndices.push(i),this.startIndicesFeature.push(t),this.state_.changed&&(this.styleIndices_.push(i),this.state_.changed=!1)},y.prototype.getCurrentIndex=function(){return this.indices.length},y.prototype.finish=function(t){this.verticesBuffer=new g.a(this.vertices),this.indicesBuffer=new g.a(this.indices),this.startIndices.push(this.indices.length),0===this.styleIndices_.length&&this.styles_.length>0&&(this.styles_=[]),this.vertices=null,this.indices=null},y.prototype.getDeleteResourcesFunction=function(t){var e=this.verticesBuffer,i=this.indicesBuffer;return function(){t.deleteBuffer(e),t.deleteBuffer(i)}},y.prototype.setUpProgram=function(t,e,i,r){var n,o;n=d.a.fragment,o=d.a.vertex;var a,s=e.getProgram(n,o);return this.defaultLocations_?a=this.defaultLocations_:(a=new f.a(t,s),this.defaultLocations_=a),e.useProgram(s),t.enableVertexAttribArray(a.a_lastPos),t.vertexAttribPointer(a.a_lastPos,2,_.a.FLOAT,!1,28,0),t.enableVertexAttribArray(a.a_position),t.vertexAttribPointer(a.a_position,2,_.a.FLOAT,!1,28,8),t.enableVertexAttribArray(a.a_nextPos),t.vertexAttribPointer(a.a_nextPos,2,_.a.FLOAT,!1,28,16),t.enableVertexAttribArray(a.a_direction),t.vertexAttribPointer(a.a_direction,1,_.a.FLOAT,!1,28,24),t.uniform2fv(a.u_size,i),t.uniform1f(a.u_pixelRatio,r),a},y.prototype.shutDownProgram=function(t,e){t.disableVertexAttribArray(e.a_lastPos),t.disableVertexAttribArray(e.a_position),t.disableVertexAttribArray(e.a_nextPos),t.disableVertexAttribArray(e.a_direction)},y.prototype.drawReplay=function(t,e,i,r){var n=t.getParameter(t.DEPTH_FUNC),o=t.getParameter(t.DEPTH_WRITEMASK);if(r||(t.enable(t.DEPTH_TEST),t.depthMask(!0),t.depthFunc(t.NOTEQUAL)),h.a.isEmpty(i)){var a,s,l,u;for(l=this.startIndices[this.startIndices.length-1],a=this.styleIndices_.length-1;a>=0;--a)s=this.styleIndices_[a],u=this.styles_[a],this.setStrokeStyle_(t,u[0],u[1],u[2]),this.drawElements(t,e,s,l),t.clear(t.DEPTH_BUFFER_BIT),l=s}else this.drawReplaySkipping_(t,e,i);r||(t.disable(t.DEPTH_TEST),t.clear(t.DEPTH_BUFFER_BIT),t.depthMask(o),t.depthFunc(n))},y.prototype.drawReplaySkipping_=function(t,e,i){var n,o,a,s,l,u,h,c,p;for(c=this.startIndices.length-2,a=o=this.startIndices[c+1],n=this.styleIndices_.length-1;n>=0;--n){for(s=this.styles_[n],this.setStrokeStyle_(t,s[0],s[1],s[2]),l=this.styleIndices_[n];c>=0&&this.startIndices[c]>=l;)p=this.startIndices[c],u=this.startIndicesFeature[c],h=r.a.getUid(u).toString(),i[h]&&(o!==a&&(this.drawElements(t,e,o,a),t.clear(t.DEPTH_BUFFER_BIT)),a=p),c--,o=p;o!==a&&(this.drawElements(t,e,o,a),t.clear(t.DEPTH_BUFFER_BIT)),o=a=l}},y.prototype.drawHitDetectionReplayOneByOne=function(t,e,i,n,o){var s,l,u,h,c,p,d,f;for(f=this.startIndices.length-2,u=this.startIndices[f+1],s=this.styleIndices_.length-1;s>=0;--s)for(h=this.styles_[s],this.setStrokeStyle_(t,h[0],h[1],h[2]),c=this.styleIndices_[s];f>=0&&this.startIndices[f]>=c;){if(l=this.startIndices[f],p=this.startIndicesFeature[f],d=r.a.getUid(p).toString(),void 0===i[d]&&p.getGeometry()&&(void 0===o||a.a.intersects(o,p.getGeometry().getExtent()))){t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),this.drawElements(t,e,l,u);var _=n(p);if(_)return _}f--,u=l}},y.prototype.setStrokeStyle_=function(t,e,i,r){t.uniform4fv(this.defaultLocations_.u_color,e),t.uniform1f(this.defaultLocations_.u_lineWidth,i),t.uniform1f(this.defaultLocations_.u_miterLimit,r)},y.prototype.setFillStrokeStyle=function(t,e){var i=e.getLineCap();this.state_.lineCap=void 0!==i?i:c.a.defaultLineCap;var r=e.getLineDash();this.state_.lineDash=r||c.a.defaultLineDash;var a=e.getLineDashOffset();this.state_.lineDashOffset=a||c.a.defaultLineDashOffset;var s=e.getLineJoin();this.state_.lineJoin=void 0!==s?s:c.a.defaultLineJoin;var l=e.getColor();l=l instanceof CanvasGradient||l instanceof CanvasPattern?c.a.defaultStrokeStyle:o.a.asArray(l).map(function(t,e){return 3!=e?t/255:t})||c.a.defaultStrokeStyle;var u=e.getWidth();u=void 0!==u?u:c.a.defaultLineWidth;var h=e.getMiterLimit();h=void 0!==h?h:c.a.defaultMiterLimit,this.state_.strokeColor&&n.a.equals(this.state_.strokeColor,l)&&this.state_.lineWidth===u&&this.state_.miterLimit===h||(this.state_.changed=!0,this.state_.strokeColor=l,this.state_.lineWidth=u,this.state_.miterLimit=h,this.styles_.push([l,u,h]))},y.Instruction_={ROUND:2,BEGIN_LINE:3,END_LINE:5,BEGIN_LINE_CAP:7,END_LINE_CAP:11,BEVEL_FIRST:13,BEVEL_SECOND:17,MITER_BOTTOM:19,MITER_TOP:23},e.a=y},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(298),n=(i.n(r),i(299)),o=(i.n(n),i(300)),a=i(349),s=i(350),l=i(368),u=i(390),h=i(456);i.d(e,"Measure",function(){return h.d}),i.d(e,"TurfUtil",function(){return h.e}),i.d(e,"AlgorithmUtil",function(){return h.b}),i.d(e,"Ajax",function(){return h.a}),i.d(e,"Bezier",function(){return h.c}),i.d(e,"interaction",function(){return o}),i.d(e,"popup",function(){return a}),i.d(e,"control",function(){return s}),i.d(e,"layer",function(){return l});var c=i(462);i.d(e,"proj",function(){return c.b}),i.d(e,"gcjTransform",function(){return c.a});var p=i(463);i.d(e,"VMap",function(){return p.b}),i.d(e,"MapPropertys",function(){return p.a});var d=i(267);i.d(e,"Feature",function(){return d.f}),i.d(e,"geom",function(){return d.r}),i.d(e,"style",function(){return d.s}),i.d(e,"format",function(){return d.q}),i.d(e,"extent",function(){return d.p}),i.d(e,"OlView",function(){return d.i}),i.d(e,"OlProj",function(){return d.h}),i.d(e,"DragZoomInteraction",function(){return d.e}),i.d(e,"condition",function(){return d.o}),i.d(e,"TileGrid",function(){return d.m}),i.d(e,"Wmts",function(){return d.n}),i.d(e,"Coordinate",function(){return d.c}),i.d(e,"Control",function(){return d.b}),i.d(e,"Collection",function(){return d.a}),i.d(e,"Group",function(){return d.g}),i.d(e,"Overlay",function(){return d.j}),i.d(e,"Sphere",function(){return d.k}),i.d(e,"DoubleClickZoom",function(){return d.d}),i.d(e,"Stamen",function(){return d.l});var f=i(520);i.d(e,"i18n",function(){return f.a}),i.d(e,"indoor",function(){return u})},function(t,e){},function(t,e){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(301),n=i(321),o=i(232);i.d(e,"DrawType",function(){return o.b}),i.d(e,"DragType",function(){return o.a}),i.d(e,"TranslateCondition",function(){return o.c}),i.d(e,"VDrag",function(){return r.a}),i.d(e,"VDraw",function(){return n.a})},function(t,e,i){"use strict";var r=i(10),n=i(68),o=function t(e){this.dragStartFun=e.dragStartFun,this.dragingFun=e.dragingFun,this.dragEndFun=e.dragEndFun,this.cursor_=e.cursor||"pointer",this.layer=e.layerObj,this.map=e.map,n.a.call(this,{handleDownEvent:t.prototype.handleDownEvent,handleDragEvent:t.prototype.handleDragEvent,handleMoveEvent:t.prototype.handleMoveEvent,handleUpEvent:t.prototype.handleUpEvent}),this.coordinate_=null,this.feature_=null,this.previousCursor_=void 0};r.f(o,n.a),o.prototype.handleDownEvent=function(t){var e=t.map,i=this.layer,r=null;return r||(r=e.forEachFeatureAtPixel(t.pixel,function(t){if(t)return t},{layerFilter:function(t){return t===i._olLayer}})),r&&(this.coordinate_=t.coordinate,this.feature_=r),this.dragStartFun&&"function"==typeof this.dragStartFun&&(void 0==r?this.dragStartFun({}):this.dragStartFun({target:t,coordinate:t.coordinate,features:r,type:t.type})),!!r},o.prototype.handleDragEvent=function(t){var e=t.map,i=e.forEachFeatureAtPixel(t.pixel,function(t){if(t)return t}),r=t.coordinate[0]-this.coordinate_[0],n=t.coordinate[1]-this.coordinate_[1],o=this.feature_.get("features");if(o)o instanceof Array&&1===o.length&&o[0].getGeometry().translate(r,n);else{this.feature_.getGeometry().translate(r,n)}this.coordinate_[0]=t.coordinate[0],this.coordinate_[1]=t.coordinate[1],this.dragingFun&&"function"==typeof this.dragingFun&&(void 0==i?this.dragingFun({}):this.dragingFun({target:t,coordinate:t.coordinate,features:i,type:t.type}))},o.prototype.handleMoveEvent=function(t){if(this.cursor_){var e=t.map,i=e.forEachFeatureAtPixel(t.pixel,function(t){return t}),r=t.map.getTargetElement();i?r.style.cursor!=this.cursor_&&(this.previousCursor_=r.style.cursor,r.style.cursor=this.cursor_):void 0!==this.previousCursor_&&(r.style.cursor=this.previousCursor_,this.previousCursor_=void 0)}},o.prototype.handleUpEvent=function(t){var e=this.feature_;return this.dragEndFun&&"function"==typeof this.dragEndFun&&this.dragEndFun({target:t,coordinate:t.coordinate,features:e,type:t.type}),this.coordinate_=null,this.feature_=null,!1},o.prototype.startDrag=function(){this.map.getOlMap().addInteraction(this)},o.prototype.stopDrag=function(){this.map.getOlMap().removeInteraction(this)},e.a=o},function(t,e,i){i(151),i(160),t.exports=i(161).f("iterator")},function(t,e,i){var r=i(152),n=i(153);t.exports=function(t){return function(e,i){var o,a,s=String(n(e)),l=r(i),u=s.length;return l<0||l>=u?t?"":void 0:(o=s.charCodeAt(l),o<55296||o>56319||l+1===u||(a=s.charCodeAt(l+1))<56320||a>57343?t?s.charAt(l):o:t?s.slice(l,l+2):a-56320+(o-55296<<10)+65536)}}},function(t,e,i){"use strict";var r=i(156),n=i(114),o=i(116),a={};i(65)(a,i(24)("iterator"),function(){return this}),t.exports=function(t,e,i){t.prototype=r(a,{next:n(1,i)}),o(t,e+" Iterator")}},function(t,e,i){var r=i(58),n=i(41),o=i(90);t.exports=i(60)?Object.defineProperties:function(t,e){n(t);for(var i,a=o(e),s=a.length,l=0;s>l;)r.f(t,i=a[l++],e[i]);return t}},function(t,e,i){var r=i(67),n=i(204),o=i(307);t.exports=function(t){return function(e,i,a){var s,l=r(e),u=n(l.length),h=o(a,u);if(t&&i!=i){for(;u>h;)if((s=l[h++])!=s)return!0}else for(;u>h;h++)if((t||h in l)&&l[h]===i)return t||h||0;return!t&&-1}}},function(t,e,i){var r=i(152),n=Math.max,o=Math.min;t.exports=function(t,e){return t=r(t),t<0?n(t+e,0):o(t,e)}},function(t,e,i){"use strict";var r=i(309),n=i(310),o=i(89),a=i(67);t.exports=i(199)(Array,"Array",function(t,e){this._t=a(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,i=this._i++;return!t||i>=t.length?(this._t=void 0,n(1)):"keys"==e?n(0,i):"values"==e?n(0,t[i]):n(0,[i,t[i]])},"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},function(t,e){t.exports=function(){}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,i){i(312),i(208),i(317),i(318),t.exports=i(17).Symbol},function(t,e,i){"use strict";var r=i(23),n=i(66),o=i(60),a=i(40),s=i(201),l=i(313).KEY,u=i(77),h=i(158),c=i(116),p=i(115),d=i(24),f=i(161),_=i(162),g=i(314),y=i(315),v=i(41),m=i(59),E=i(67),T=i(155),S=i(114),R=i(156),I=i(316),x=i(164),C=i(58),O=i(90),P=x.f,L=C.f,A=I.f,w=r.Symbol,M=r.JSON,F=M&&M.stringify,N=d("_hidden"),b=d("toPrimitive"),D={}.propertyIsEnumerable,k=h("symbol-registry"),G=h("symbols"),U=h("op-symbols"),B=Object.prototype,Y="function"==typeof w,j=r.QObject,X=!j||!j.prototype||!j.prototype.findChild,V=o&&u(function(){return 7!=R(L({},"a",{get:function(){return L(this,"a",{value:7}).a}})).a})?function(t,e,i){var r=P(B,e);r&&delete B[e],L(t,e,i),r&&t!==B&&L(B,e,r)}:L,z=function(t){var e=G[t]=R(w.prototype);return e._k=t,e},W=Y&&"symbol"==typeof w.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof w},Z=function(t,e,i){return t===B&&Z(U,e,i),v(t),e=T(e,!0),v(i),n(G,e)?(i.enumerable?(n(t,N)&&t[N][e]&&(t[N][e]=!1),i=R(i,{enumerable:S(0,!1)})):(n(t,N)||L(t,N,S(1,{})),t[N][e]=!0),V(t,e,i)):L(t,e,i)},H=function(t,e){v(t);for(var i,r=g(e=E(e)),n=0,o=r.length;o>n;)Z(t,i=r[n++],e[i]);return t},K=function(t,e){return void 0===e?R(t):H(R(t),e)},q=function(t){var e=D.call(this,t=T(t,!0));return!(this===B&&n(G,t)&&!n(U,t))&&(!(e||!n(this,t)||!n(G,t)||n(this,N)&&this[N][t])||e)},J=function(t,e){if(t=E(t),e=T(e,!0),t!==B||!n(G,e)||n(U,e)){var i=P(t,e);return!i||!n(G,e)||n(t,N)&&t[N][e]||(i.enumerable=!0),i}},Q=function(t){for(var e,i=A(E(t)),r=[],o=0;i.length>o;)n(G,e=i[o++])||e==N||e==l||r.push(e);return r},$=function(t){for(var e,i=t===B,r=A(i?U:E(t)),o=[],a=0;r.length>a;)!n(G,e=r[a++])||i&&!n(B,e)||o.push(G[e]);return o};Y||(w=function(){if(this instanceof w)throw TypeError("Symbol is not a constructor!");var t=p(arguments.length>0?arguments[0]:void 0),e=function(i){this===B&&e.call(U,i),n(this,N)&&n(this[N],t)&&(this[N][t]=!1),V(this,t,S(1,i))};return o&&X&&V(B,t,{configurable:!0,set:e}),z(t)},s(w.prototype,"toString",function(){return this._k}),x.f=J,C.f=Z,i(207).f=I.f=Q,i(118).f=q,i(163).f=$,o&&!i(112)&&s(B,"propertyIsEnumerable",q,!0),f.f=function(t){return z(d(t))}),a(a.G+a.W+a.F*!Y,{Symbol:w});for(var tt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),et=0;tt.length>et;)d(tt[et++]);for(var it=O(d.store),rt=0;it.length>rt;)_(it[rt++]);a(a.S+a.F*!Y,"Symbol",{for:function(t){return n(k,t+="")?k[t]:k[t]=w(t)},keyFor:function(t){if(!W(t))throw TypeError(t+" is not a symbol!");for(var e in k)if(k[e]===t)return e},useSetter:function(){X=!0},useSimple:function(){X=!1}}),a(a.S+a.F*!Y,"Object",{create:K,defineProperty:Z,defineProperties:H,getOwnPropertyDescriptor:J,getOwnPropertyNames:Q,getOwnPropertySymbols:$}),M&&a(a.S+a.F*(!Y||u(function(){var t=w();return"[null]"!=F([t])||"{}"!=F({a:t})||"{}"!=F(Object(t))})),"JSON",{stringify:function(t){for(var e,i,r=[t],n=1;arguments.length>n;)r.push(arguments[n++]);if(i=e=r[1],(m(e)||void 0!==t)&&!W(t))return y(e)||(e=function(t,e){if("function"==typeof i&&(e=i.call(this,t,e)),!W(e))return e}),r[1]=e,F.apply(M,r)}}),w.prototype[b]||i(65)(w.prototype,b,w.prototype.valueOf),c(w,"Symbol"),c(Math,"Math",!0),c(r.JSON,"JSON",!0)},function(t,e,i){var r=i(115)("meta"),n=i(59),o=i(66),a=i(58).f,s=0,l=Object.isExtensible||function(){return!0},u=!i(77)(function(){return l(Object.preventExtensions({}))}),h=function(t){a(t,r,{value:{i:"O"+ ++s,w:{}}})},c=function(t,e){if(!n(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,r)){if(!l(t))return"F";if(!e)return"E";h(t)}return t[r].i},p=function(t,e){if(!o(t,r)){if(!l(t))return!0;if(!e)return!1;h(t)}return t[r].w},d=function(t){return u&&f.NEED&&l(t)&&!o(t,r)&&h(t),t},f=t.exports={KEY:r,NEED:!1,fastKey:c,getWeak:p,onFreeze:d}},function(t,e,i){var r=i(90),n=i(163),o=i(118);t.exports=function(t){var e=r(t),i=n.f;if(i)for(var a,s=i(t),l=o.f,u=0;s.length>u;)l.call(t,a=s[u++])&&e.push(a);return e}},function(t,e,i){var r=i(91);t.exports=Array.isArray||function(t){return"Array"==r(t)}},function(t,e,i){var r=i(67),n=i(207).f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(t){try{return n(t)}catch(t){return a.slice()}};t.exports.f=function(t){return a&&"[object Window]"==o.call(t)?s(t):n(r(t))}},function(t,e,i){i(162)("asyncIterator")},function(t,e,i){i(162)("observable")},function(t,e,i){i(320);var r=i(17).Object;t.exports=function(t,e){return r.create(t,e)}},function(t,e,i){var r=i(40);r(r.S,"Object",{create:i(156)})},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}i.d(e,"a",function(){return E});var n=i(3),o=i.n(n),a=i(31),s=i.n(a),l=i(166),u=i.n(l),h=i(329),c=i(62),p=i(95),d=i(96),f=i(168),_=i(165),g=i(44),y=i(129),v=i(232),m=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),o()(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),E=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,t),this._defaultStyle={fillColor:"rgba(255,255,255,0.4)",strokeColor:"#3399CC",strokeWidth:1,radius:5},this._map=e.map,this._olMap=this._map.getOlMap();var i=e.style||{};this._drawingStyle=e.drawingStyle,u()(this._defaultStyle,i),this._type=e.type,this._drawStartFun=e.drawStartFun,this._drawingFun=e.drawingFun,this._drawEndFun=e.drawEndFun,this._drawingClickFun=e.clickFun,this._stopClick=e.stopClick||!1,this._isDrawing=!1,this._initDraw()}return m(t,[{key:"_initDraw",value:function(){var t=void 0,e=this._type;this._type===v.b.RECTANGLE&&(e=v.b.CIRCLE,t=h.a.createBox()),this._type===v.b.SQUARE&&(e=v.b.CIRCLE,t=h.a.createRegularPolygon(4));var i=this._defaultStyle,r=new c.a({fill:new p.a({color:i.fillColor}),stroke:new d.a({color:i.strokeColor,width:i.strokeWidth}),image:new f.a({radius:i.radius,fill:new p.a({color:i.fillColor}),stroke:new d.a({color:i.strokeColor,width:i.strokeWidth})})});this._vectorLayer=new y.a({style:r,wrapX:!1}),this._map.addLayer([this._vectorLayer]),this._olDraw=new h.a({clickTolerance:1e-4,snapTolerance:1e-4,source:this._vectorLayer._olSource,type:e,condition:g.a.mouseActionButton,geometryFunction:t,style:this._drawingStyle,stopClick:this._stopClick}),this._olMap.addInteraction(this._olDraw),this._olDraw.setActive(!1),this._setEvents()}},{key:"_setEvents",value:function(){var t=this;this._eventKeys||(this._eventKeys=[]);var e=this._olDraw.on("drawstart",function(e){t._isDrawing=!0,t._drawStartFun&&t._drawStartFun(e)});if(this._eventKeys.push(e),this._drawingClickFun){var i=this._olMap.on("click",function(e){!e.dragging&&t._isDrawing&&t._drawingClickFun(e)});this._eventKeys.push(i)}if(this._drawingFun){var r=this._olMap.on("pointermove",function(e){!e.dragging&&t._isDrawing&&t._drawingFun(e)});this._eventKeys.push(r)}var n=this._olDraw.on("drawend",function(e){t._isDrawing=!1,t._olDraw.setActive(!1),t._drawEndFun&&t._drawEndFun(e)});this._eventKeys.push(n)}},{key:"_removeEvent",value:function(){var t=!0,e=!1,i=void 0;try{for(var r,n=s()(this._eventKeys);!(t=(r=n.next()).done);t=!0){var o=r.value;_.a.unByKey(o)}}catch(t){e=!0,i=t}finally{try{!t&&n.return&&n.return()}finally{if(e)throw i}}}},{key:"startDraw",value:function(){this._olDraw.getActive()||this._olDraw.setActive(!0)}},{key:"stopDraw",value:function(){this._olDraw&&this._olDraw.getActive()&&this._olDraw.setActive(!1)}},{key:"removeDraw",value:function(){this.stopDraw();var t=this._vectorLayer;t&&t._olSource&&t._olSource.clear()}},{key:"destroyDraw",value:function(){this.removeDraw(),this._removeEvent(),this._olMap.removeInteraction(this._olDraw),this._map.removeLayer([this._vectorLayer]),this._olMap=null,this._olDraw=null,this._map=null,this._vectorLayer=null,this._drawStartFun=null,this._drawingClickFun=null,this._drawingFun=null,this._drawEndFun=null}},{key:"getLayer",value:function(){return this._vectorLayer}}]),t}()},function(t,e,i){i(323);var r=i(17).Object;t.exports=function(t,e,i){return r.defineProperty(t,e,i)}},function(t,e,i){var r=i(40);r(r.S+r.F*!i(60),"Object",{defineProperty:i(58).f})},function(t,e,i){i(160),i(151),t.exports=i(325)},function(t,e,i){var r=i(41),n=i(214);t.exports=i(17).getIterator=function(t){var e=n(t);if("function"!=typeof e)throw TypeError(t+" is not iterable!");return r(e.call(t))}},function(t,e,i){i(327),t.exports=i(17).Object.assign},function(t,e,i){var r=i(40);r(r.S+r.F,"Object",{assign:i(328)})},function(t,e,i){"use strict";var r=i(90),n=i(163),o=i(118),a=i(117),s=i(203),l=Object.assign;t.exports=!l||i(77)(function(){var t={},e={},i=Symbol(),r="abcdefghijklmnopqrst";return t[i]=7,r.split("").forEach(function(t){e[t]=t}),7!=l({},t)[i]||Object.keys(l({},e)).join("")!=r})?function(t,e){for(var i=a(t),l=arguments.length,u=1,h=n.f,c=o.f;l>u;)for(var p,d=s(arguments[u++]),f=h?r(d).concat(h(d)):r(d),_=f.length,g=0;_>g;)c.call(d,p=f[g++])&&(i[p]=d[p]);return i}:l},function(t,e,i){"use strict";var r=i(0),n=i(42),o=i(78),a=i(18),s=i(54),l=i(4),u=i(25),h=i(44),c=i(1),p=i(19),d=i(221),f=i(12),_=i(36),g=i(45),y=i(46),v=i(47),m=i(26),E=i(27),T=i(335),S=i(68),R=i(212),I=i(126),x=i(99),C=i(62),O=function(t){S.a.call(this,{handleDownEvent:O.handleDownEvent_,handleEvent:O.handleEvent,handleUpEvent:O.handleUpEvent_}),this.shouldHandle_=!1,this.downPx_=null,this.freehand_=!1,this.source_=t.source?t.source:null,this.features_=t.features?t.features:null,this.snapTolerance_=t.snapTolerance?t.snapTolerance:12,this.type_=t.type,this.mode_=O.getMode_(this.type_),this.stopClick_=!!t.stopClick,this.minPoints_=t.minPoints?t.minPoints:this.mode_===O.Mode_.POLYGON?3:2,this.maxPoints_=t.maxPoints?t.maxPoints:1/0,this.finishCondition_=t.finishCondition?t.finishCondition:p.a.TRUE;var e=t.geometryFunction;if(!e)if(this.type_===f.a.CIRCLE)e=function(t,e){var i=e||new d.a([NaN,NaN]),r=s.a.squaredDistance(t[0],t[1]);return i.setCenterAndRadius(t[0],Math.sqrt(r)),i};else{var i,r=this.mode_;r===O.Mode_.POINT?i=m.a:r===O.Mode_.LINE_STRING?i=_.a:r===O.Mode_.POLYGON&&(i=E.a),e=function(t,e){var n=e;return n?r===O.Mode_.POLYGON?t[0].length?n.setCoordinates([t[0].concat([t[0][0]])]):n.setCoordinates([]):n.setCoordinates(t):n=new i(t),n}}this.geometryFunction_=e,this.finishCoordinate_=null,this.sketchFeature_=null,this.sketchPoint_=null,this.sketchCoords_=null,this.sketchLine_=null,this.sketchLineCoords_=null,this.squaredClickTolerance_=t.clickTolerance?t.clickTolerance*t.clickTolerance:36,this.overlay_=new I.a({source:new x.a({useSpatialIndex:!1,wrapX:!!t.wrapX&&t.wrapX}),style:t.style?t.style:O.getDefaultStyleFunction()}),this.geometryName_=t.geometryName,this.condition_=t.condition?t.condition:h.a.noModifierKeys,this.freehandCondition_,t.freehand?this.freehandCondition_=h.a.always:this.freehandCondition_=t.freehandCondition?t.freehandCondition:h.a.shiftKeyOnly,l.a.listen(this,a.a.getChangeEventType(R.a.ACTIVE),this.updateState_,this)};r.a.inherits(O,S.a),O.getDefaultStyleFunction=function(){var t=C.a.createDefaultEditing();return function(e,i){return t[e.getGeometry().getType()]}},O.prototype.setMap=function(t){S.a.prototype.setMap.call(this,t),this.updateState_()},O.handleEvent=function(t){this.freehand_=this.mode_!==O.Mode_.POINT&&this.freehandCondition_(t);var e=!0;return this.freehand_&&t.type===o.a.POINTERDRAG&&null!==this.sketchFeature_?(this.addToDrawing_(t),e=!1):this.freehand_&&t.type===o.a.POINTERDOWN?e=!1:t.type===o.a.POINTERMOVE?e=this.handlePointerMove_(t):t.type===o.a.DBLCLICK&&(e=!1),S.a.handleEvent.call(this,t)&&e},O.handleDownEvent_=function(t){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=t.pixel,this.finishCoordinate_||this.startDrawing_(t),!0):!!this.condition_(t)&&(this.downPx_=t.pixel,!0)},O.handleUpEvent_=function(t){var e=!0;this.handlePointerMove_(t);var i=this.mode_===O.Mode_.CIRCLE;return this.shouldHandle_?(this.finishCoordinate_?this.freehand_||i?this.finishDrawing():this.atFinish_(t)?this.finishCondition_(t)&&this.finishDrawing():this.addToDrawing_(t):(this.startDrawing_(t),this.mode_===O.Mode_.POINT&&this.finishDrawing()),e=!1):this.freehand_&&(this.finishCoordinate_=null,this.abortDrawing_()),!e&&this.stopClick_&&t.stopPropagation(),e},O.prototype.handlePointerMove_=function(t){if(this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){var e=this.downPx_,i=t.pixel,r=e[0]-i[0],n=e[1]-i[1],o=r*r+n*n;this.shouldHandle_=this.freehand_?o>this.squaredClickTolerance_:o<=this.squaredClickTolerance_}return this.finishCoordinate_?this.modifyDrawing_(t):this.createOrUpdateSketchPoint_(t),!0},O.prototype.atFinish_=function(t){var e=!1;if(this.sketchFeature_){var i=!1,r=[this.finishCoordinate_];if(this.mode_===O.Mode_.LINE_STRING?i=this.sketchCoords_.length>this.minPoints_:this.mode_===O.Mode_.POLYGON&&(i=this.sketchCoords_[0].length>this.minPoints_,r=[this.sketchCoords_[0][0],this.sketchCoords_[0][this.sketchCoords_[0].length-2]]),i)for(var n=t.map,o=0,a=r.length;o<a;o++){var s=r[o],l=n.getPixelFromCoordinate(s),u=t.pixel,h=u[0]-l[0],c=u[1]-l[1],p=this.freehand_?1:this.snapTolerance_;if(e=Math.sqrt(h*h+c*c)<=p){this.finishCoordinate_=s;break}}}return e},O.prototype.createOrUpdateSketchPoint_=function(t){var e=t.coordinate.slice();if(this.sketchPoint_){this.sketchPoint_.getGeometry().setCoordinates(e)}else this.sketchPoint_=new n.a(new m.a(e)),this.updateSketchFeatures_()},O.prototype.startDrawing_=function(t){var e=t.coordinate;this.finishCoordinate_=e,this.mode_===O.Mode_.POINT?this.sketchCoords_=e.slice():this.mode_===O.Mode_.POLYGON?(this.sketchCoords_=[[e.slice(),e.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):(this.sketchCoords_=[e.slice(),e.slice()],this.mode_===O.Mode_.CIRCLE&&(this.sketchLineCoords_=this.sketchCoords_)),this.sketchLineCoords_&&(this.sketchLine_=new n.a(new _.a(this.sketchLineCoords_)));var i=this.geometryFunction_(this.sketchCoords_);this.sketchFeature_=new n.a,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(i),this.updateSketchFeatures_(),this.dispatchEvent(new O.Event(T.a.DRAWSTART,this.sketchFeature_))},O.prototype.modifyDrawing_=function(t){var e,i,r=t.coordinate,o=this.sketchFeature_.getGeometry();if(this.mode_===O.Mode_.POINT?i=this.sketchCoords_:this.mode_===O.Mode_.POLYGON?(e=this.sketchCoords_[0],i=e[e.length-1],this.atFinish_(t)&&(r=this.finishCoordinate_.slice())):(e=this.sketchCoords_,i=e[e.length-1]),i[0]=r[0],i[1]=r[1],this.geometryFunction_(this.sketchCoords_,o),this.sketchPoint_){this.sketchPoint_.getGeometry().setCoordinates(r)}var a;if(o instanceof E.a&&this.mode_!==O.Mode_.POLYGON){this.sketchLine_||(this.sketchLine_=new n.a(new _.a(null)));var s=o.getLinearRing(0);a=this.sketchLine_.getGeometry(),a.setFlatCoordinates(s.getLayout(),s.getFlatCoordinates())}else this.sketchLineCoords_&&(a=this.sketchLine_.getGeometry(),a.setCoordinates(this.sketchLineCoords_));this.updateSketchFeatures_()},O.prototype.addToDrawing_=function(t){var e,i,r=t.coordinate,n=this.sketchFeature_.getGeometry();this.mode_===O.Mode_.LINE_STRING?(this.finishCoordinate_=r.slice(),i=this.sketchCoords_,i.length>=this.maxPoints_&&(this.freehand_?i.pop():e=!0),i.push(r.slice()),this.geometryFunction_(i,n)):this.mode_===O.Mode_.POLYGON&&(i=this.sketchCoords_[0],i.length>=this.maxPoints_&&(this.freehand_?i.pop():e=!0),i.push(r.slice()),e&&(this.finishCoordinate_=i[0]),this.geometryFunction_(this.sketchCoords_,n)),this.updateSketchFeatures_(),e&&this.finishDrawing()},O.prototype.removeLastPoint=function(){if(this.sketchFeature_){var t,e,i=this.sketchFeature_.getGeometry();this.mode_===O.Mode_.LINE_STRING?(t=this.sketchCoords_,t.splice(-2,1),this.geometryFunction_(t,i),t.length>=2&&(this.finishCoordinate_=t[t.length-2].slice())):this.mode_===O.Mode_.POLYGON&&(t=this.sketchCoords_[0],t.splice(-2,1),e=this.sketchLine_.getGeometry(),e.setCoordinates(t),this.geometryFunction_(this.sketchCoords_,i)),0===t.length&&(this.finishCoordinate_=null),this.updateSketchFeatures_()}},O.prototype.finishDrawing=function(){var t=this.abortDrawing_(),e=this.sketchCoords_,i=t.getGeometry();this.mode_===O.Mode_.LINE_STRING?(e.pop(),this.geometryFunction_(e,i)):this.mode_===O.Mode_.POLYGON&&(e[0].pop(),this.geometryFunction_(e,i),e=i.getCoordinates()),this.type_===f.a.MULTI_POINT?t.setGeometry(new y.a([e])):this.type_===f.a.MULTI_LINE_STRING?t.setGeometry(new g.a([e])):this.type_===f.a.MULTI_POLYGON&&t.setGeometry(new v.a([e])),this.dispatchEvent(new O.Event(T.a.DRAWEND,t)),this.features_&&this.features_.push(t),this.source_&&this.source_.addFeature(t)},O.prototype.abortDrawing_=function(){this.finishCoordinate_=null;var t=this.sketchFeature_;return t&&(this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0)),t},O.prototype.extend=function(t){var e=t.getGeometry(),i=e;this.sketchFeature_=t,this.sketchCoords_=i.getCoordinates();var r=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=r.slice(),this.sketchCoords_.push(r.slice()),this.updateSketchFeatures_(),this.dispatchEvent(new O.Event(T.a.DRAWSTART,this.sketchFeature_))},O.prototype.shouldStopEvent=p.a.FALSE,O.prototype.updateSketchFeatures_=function(){var t=[];this.sketchFeature_&&t.push(this.sketchFeature_),this.sketchLine_&&t.push(this.sketchLine_),this.sketchPoint_&&t.push(this.sketchPoint_);var e=this.overlay_.getSource();e.clear(!0),e.addFeatures(t)},O.prototype.updateState_=function(){var t=this.getMap(),e=this.getActive();t&&e||this.abortDrawing_(),this.overlay_.setMap(e?t:null)},O.createRegularPolygon=function(t,e){return function(i,r){var n=i[0],o=i[1],a=Math.sqrt(s.a.squaredDistance(n,o)),l=r||E.a.fromCircle(new d.a(n),t),u=e||Math.atan((o[1]-n[1])/(o[0]-n[0]));return E.a.makeRegular(l,n,a,u),l}},O.createBox=function(){return function(t,e){var i=c.a.boundingExtent(t),r=e||new E.a(null);return r.setCoordinates([[c.a.getBottomLeft(i),c.a.getBottomRight(i),c.a.getTopRight(i),c.a.getTopLeft(i),c.a.getBottomLeft(i)]]),r}},O.getMode_=function(t){var e;return t===f.a.POINT||t===f.a.MULTI_POINT?e=O.Mode_.POINT:t===f.a.LINE_STRING||t===f.a.MULTI_LINE_STRING?e=O.Mode_.LINE_STRING:t===f.a.POLYGON||t===f.a.MULTI_POLYGON?e=O.Mode_.POLYGON:t===f.a.CIRCLE&&(e=O.Mode_.CIRCLE),e},O.Mode_={POINT:"Point",LINE_STRING:"LineString",POLYGON:"Polygon",CIRCLE:"Circle"},O.Event=function(t,e){u.a.call(this,t),this.feature=e},r.a.inherits(O.Event,u.a),e.a=O},function(t,e,i){"use strict";var r=i(0),n=i(7),o=i(120),a=i(32),s={};s.Projection_=function(t){o.a.call(this,{code:t,units:a.a.METERS,extent:s.EXTENT,global:!0,worldExtent:s.WORLD_EXTENT,getPointResolution:function(t,e){return t/n.a.cosh(e[1]/s.RADIUS)}})},r.a.inherits(s.Projection_,o.a),s.RADIUS=6378137,s.HALF_SIZE=Math.PI*s.RADIUS,s.EXTENT=[-s.HALF_SIZE,-s.HALF_SIZE,s.HALF_SIZE,s.HALF_SIZE],s.WORLD_EXTENT=[-180,-85,180,85],s.PROJECTIONS=[new s.Projection_("EPSG:3857"),new s.Projection_("EPSG:102100"),new s.Projection_("EPSG:102113"),new s.Projection_("EPSG:900913"),new s.Projection_("urn:ogc:def:crs:EPSG:6.18:3:3857"),new s.Projection_("urn:ogc:def:crs:EPSG::3857"),new s.Projection_("http://www.opengis.net/gml/srs/epsg.xml#3857")],s.fromEPSG4326=function(t,e,i){var r=t.length,n=i>1?i:2,o=e;void 0===o&&(o=n>2?t.slice():new Array(r));for(var a=s.HALF_SIZE,l=0;l<r;l+=n){o[l]=a*t[l]/180;var u=s.RADIUS*Math.log(Math.tan(Math.PI*(t[l+1]+90)/360));u>a?u=a:u<-a&&(u=-a),o[l+1]=u}return o},s.toEPSG4326=function(t,e,i){var r=t.length,n=i>1?i:2,o=e;void 0===o&&(o=n>2?t.slice():new Array(r));for(var a=0;a<r;a+=n)o[a]=180*t[a]/s.HALF_SIZE,o[a+1]=360*Math.atan(Math.exp(t[a+1]/s.RADIUS))/Math.PI-90;return o},e.a=s},function(t,e,i){"use strict";var r=i(0),n=i(120),o=i(32),a={};a.Projection_=function(t,e){n.a.call(this,{code:t,units:o.a.DEGREES,extent:a.EXTENT,axisOrientation:e,global:!0,metersPerUnit:a.METERS_PER_UNIT,worldExtent:a.EXTENT})},r.a.inherits(a.Projection_,n.a),a.RADIUS=6378137,a.EXTENT=[-180,-90,180,90],a.METERS_PER_UNIT=Math.PI*a.RADIUS/180,a.PROJECTIONS=[new a.Projection_("CRS:84"),new a.Projection_("EPSG:4326","neu"),new a.Projection_("urn:ogc:def:crs:EPSG::4326","neu"),new a.Projection_("urn:ogc:def:crs:EPSG:6.6:4326","neu"),new a.Projection_("urn:ogc:def:crs:OGC:1.3:CRS84"),new a.Projection_("urn:ogc:def:crs:OGC:2:84"),new a.Projection_("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new a.Projection_("urn:x-ogc:def:crs:EPSG:4326","neu")],e.a=a},function(t,e,i){"use strict";var r={};r.cache_={},r.clear=function(){r.cache_={}},r.get=function(t){return r.cache_[t]||null},r.add=function(t,e){r.cache_[t]=e},e.a=r},function(t,e,i){"use strict";var r=i(2),n={};n.cache_={},n.clear=function(){n.cache_={}},n.add=function(t,e,i){var r=t.getCode(),o=e.getCode(),a=n.cache_;r in a||(a[r]={}),a[r][o]=i},n.remove=function(t,e){var i=t.getCode(),o=e.getCode(),a=n.cache_,s=a[i][o];return delete a[i][o],r.a.isEmpty(a[i])&&delete a[i],s},n.get=function(t,e){var i,r=n.cache_;return t in r&&e in r[t]&&(i=r[t][e]),i},e.a=n},function(t,e,i){"use strict";var r={};r.coordinates=function(t,e,i,r){for(;e<i-r;){var n;for(n=0;n<r;++n){var o=t[e+n];t[e+n]=t[i-r+n],t[i-r+n]=o}e+=r,i-=r}},e.a=r},function(t,e,i){"use strict";var r={DRAWSTART:"drawstart",DRAWEND:"drawend"};e.a=r},function(t,e,i){"use strict";var r=i(0),n=i(100),o=i(64),a={};a.loadFeaturesXhr=function(t,e,i,r){return function(a,s,l){var u=new XMLHttpRequest;u.open("GET","function"==typeof t?t(a,s,l):t,!0),e.getType()==n.a.ARRAY_BUFFER&&(u.responseType="arraybuffer"),u.onload=function(t){if(!u.status||u.status>=200&&u.status<300){var a,s=e.getType();s==n.a.JSON||s==n.a.TEXT?a=u.responseText:s==n.a.XML?(a=u.responseXML)||(a=o.a.parse(u.responseText)):s==n.a.ARRAY_BUFFER&&(a=u.response),a?i.call(this,e.readFeatures(a,{featureProjection:l}),e.readProjection(a),e.getLastExtent()):r.call(this)}else r.call(this)}.bind(this),u.onerror=function(){r.call(this)}.bind(this),u.send()}},a.xhr=function(t,e){return a.loadFeaturesXhr(t,e,function(t,e){this.addFeatures(t)},r.a.nullFunction)},e.a=a},function(t,e,i){"use strict";var r={};r.all=function(t,e){return[[-1/0,-1/0,1/0,1/0]]},r.bbox=function(t,e){return[t]},r.tile=function(t){return function(e,i){var r=t.getZForResolution(i),n=t.getTileRangeForExtentAndZ(e,r),o=[],a=[r,0,0];for(a[1]=n.minX;a[1]<=n.maxX;++a[1])for(a[2]=n.minY;a[2]<=n.maxY;++a[2])o.push(t.getTileCoordExtent(a));return o}},e.a=r},function(t,e,i){"use strict";var r={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature"};e.a=r},function(t,e,i){!function(e,i){t.exports=i()}(0,function(){"use strict";function t(t,i,n,o,a){e(t,i,n||0,o||t.length-1,a||r)}function e(t,r,n,o,a){for(;o>n;){if(o-n>600){var s=o-n+1,l=r-n+1,u=Math.log(s),h=.5*Math.exp(2*u/3),c=.5*Math.sqrt(u*h*(s-h)/s)*(l-s/2<0?-1:1);e(t,r,Math.max(n,Math.floor(r-l*h/s+c)),Math.min(o,Math.floor(r+(s-l)*h/s+c)),a)}var p=t[r],d=n,f=o;for(i(t,n,r),a(t[o],p)>0&&i(t,n,o);d<f;){for(i(t,d,f),d++,f--;a(t[d],p)<0;)d++;for(;a(t[f],p)>0;)f--}0===a(t[n],p)?i(t,n,f):(f++,i(t,f,o)),f<=r&&(n=f+1),r<=f&&(o=f-1)}}function i(t,e,i){var r=t[e];t[e]=t[i],t[i]=r}function r(t,e){return t<e?-1:t>e?1:0}return t})},function(t,e,i){i(341);var r=i(17).Object;t.exports=function(t,e){return r.getOwnPropertyDescriptor(t,e)}},function(t,e,i){var r=i(67),n=i(164).f;i(174)("getOwnPropertyDescriptor",function(){return function(t,e){return n(r(t),e)}})},function(t,e,i){i(343),t.exports=i(17).Object.setPrototypeOf},function(t,e,i){var r=i(40);r(r.S,"Object",{setPrototypeOf:i(344).set})},function(t,e,i){var r=i(59),n=i(41),o=function(t,e){if(n(t),!r(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,r){try{r=i(88)(Function.call,i(164).f(Object.prototype,"__proto__").set,2),r(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,i){return o(t,i),e?t.__proto__=i:r(t,i),t}}({},!1):void 0),check:o}},function(t,e,i){i(346),t.exports=i(17).Object.getPrototypeOf},function(t,e,i){var r=i(117),n=i(206);i(174)("getPrototypeOf",function(){return function(t){return n(r(t))}})},function(t,e,i){i(348),t.exports=i(17).Object.keys},function(t,e,i){var r=i(117),n=i(90);i(174)("keys",function(){return function(t){return n(r(t))}})},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(233),n=i(132);i.d(e,"_createTooltip",function(){return n.a}),i.d(e,"showTooltip",function(){return n.e}),i.d(e,"hideToolTip",function(){return n.c}),i.d(e,"_destoryTooltip",function(){return n.b}),i.d(e,"setTipStyle",function(){return n.d}),i.d(e,"VPopup",function(){return r.a})},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(351),n=i(357),o=i(359),a=i(360),s=i(361),l=i(363),u=i(244);i.d(e,"VZoomSlider",function(){return r.a}),i.d(e,"VMousePosition",function(){return n.a}),i.d(e,"VShowZoomControl",function(){return o.a}),i.d(e,"VFullScreen",function(){return a.a}),i.d(e,"VScaleLine",function(){return s.a}),i.d(e,"VOverviewMap",function(){return l.a}),i.d(e,"VRotate",function(){return u.a})},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}i.d(e,"a",function(){return u});var n=i(3),o=i.n(n),a=i(352),s=i(237),l=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),o()(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),u=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{type:"small",position:"left-top"};r(this,t),this.options=e;var i=this.options.className||"ol-zoom",n=this.options.className||"";switch(this.options.position){case"right-top":n+=" right-top",i+=" right-top";break;case"right-bottom":n+=" right-bottom",i+=" right-bottom";break;case"left-bottom":n+=" left-bottom",i+=" left-bottom"}if("big"==this.options.type){var o="",l="";o=i+" ol-hasSlider",l=n+" ol-zoomslider ol-hasSlider",this._olZoomS=new s.a({className:o}),this._olSlider=new a.a({className:l})}else this._olZoom=new s.a({className:i})}return l(t,[{key:"_setMap",value:function(t){t&&("big"==this.options.type?(this._olZoomS.setMap(t),this._olSlider.setMap(t)):this._olZoom.setMap(t))}},{key:"_destroy",value:function(t){this._olZoomS&&(t.removeControl(this._olZoomS),this._olZoomS.setMap(null)),this._olSlider&&(t.removeControl(this._olSlider),this._olSlider.setMap(null)),this._olZoom&&(t.removeControl(this.zoom),this._olZoom.setMap(null)),this.options=null}}]),t}()},function(t,e,i){"use strict";var r=i(0),n=i(28),o=i(29),a=i(34),s=i(50),l=i(4),u=i(25),h=i(5),c=i(7),p=i(179),d=i(235),f=function(t){var e=t||{};this.currentResolution_=void 0,this.direction_=f.Direction_.VERTICAL,this.dragging_,this.heightLimit_=0,this.widthLimit_=0,this.previousX_,this.previousY_,this.thumbSize_=null,this.sliderInitialized_=!1,this.duration_=void 0!==e.duration?e.duration:200;var i=void 0!==e.className?e.className:"ol-zoomslider",r=document.createElement("button");r.setAttribute("type","button"),r.className=i+"-thumb "+a.a.CLASS_UNSELECTABLE;var n=document.createElement("div");n.className=i+" "+a.a.CLASS_UNSELECTABLE+" "+a.a.CLASS_CONTROL,n.appendChild(r),this.dragger_=new d.a(n),l.a.listen(this.dragger_,p.a.POINTERDOWN,this.handleDraggerStart_,this),l.a.listen(this.dragger_,p.a.POINTERMOVE,this.handleDraggerDrag_,this),l.a.listen(this.dragger_,p.a.POINTERUP,this.handleDraggerEnd_,this),l.a.listen(n,h.a.CLICK,this.handleContainerClick_,this),l.a.listen(r,h.a.CLICK,u.a.stopPropagation);var s=e.render?e.render:f.render;o.a.call(this,{element:n,render:s})};r.a.inherits(f,o.a),f.prototype.disposeInternal=function(){this.dragger_.dispose(),o.a.prototype.disposeInternal.call(this)},f.Direction_={VERTICAL:0,HORIZONTAL:1},f.prototype.setMap=function(t){o.a.prototype.setMap.call(this,t),t&&t.render()},f.prototype.initSlider_=function(){var t=this.element,e={width:t.offsetWidth,height:t.offsetHeight},i=t.firstElementChild,r=getComputedStyle(i),n=i.offsetWidth+parseFloat(r.marginRight)+parseFloat(r.marginLeft),o=i.offsetHeight+parseFloat(r.marginTop)+parseFloat(r.marginBottom);this.thumbSize_=[n,o],e.width>e.height?(this.direction_=f.Direction_.HORIZONTAL,this.widthLimit_=e.width-n):(this.direction_=f.Direction_.VERTICAL,this.heightLimit_=e.height-o),this.sliderInitialized_=!0},f.render=function(t){if(t.frameState){this.sliderInitialized_||this.initSlider_();var e=t.frameState.viewState.resolution;e!==this.currentResolution_&&(this.currentResolution_=e,this.setThumbPosition_(e))}},f.prototype.handleContainerClick_=function(t){var e=this.getMap().getView(),i=this.getRelativePosition_(t.offsetX-this.thumbSize_[0]/2,t.offsetY-this.thumbSize_[1]/2),r=this.getResolutionForPosition_(i);e.animate({resolution:e.constrainResolution(r),duration:this.duration_,easing:s.a.easeOut})},f.prototype.handleDraggerStart_=function(t){this.dragging_||t.originalEvent.target!==this.element.firstElementChild||(this.getMap().getView().setHint(n.a.INTERACTING,1),this.previousX_=t.clientX,this.previousY_=t.clientY,this.dragging_=!0)},f.prototype.handleDraggerDrag_=function(t){if(this.dragging_){var e=this.element.firstElementChild,i=t.clientX-this.previousX_+parseInt(e.style.left,10),r=t.clientY-this.previousY_+parseInt(e.style.top,10),n=this.getRelativePosition_(i,r);this.currentResolution_=this.getResolutionForPosition_(n),this.getMap().getView().setResolution(this.currentResolution_),this.setThumbPosition_(this.currentResolution_),this.previousX_=t.clientX,this.previousY_=t.clientY}},f.prototype.handleDraggerEnd_=function(t){if(this.dragging_){var e=this.getMap().getView();e.setHint(n.a.INTERACTING,-1),e.animate({resolution:e.constrainResolution(this.currentResolution_),duration:this.duration_,easing:s.a.easeOut}),this.dragging_=!1,this.previousX_=void 0,this.previousY_=void 0}},f.prototype.setThumbPosition_=function(t){var e=this.getPositionForResolution_(t),i=this.element.firstElementChild;this.direction_==f.Direction_.HORIZONTAL?i.style.left=this.widthLimit_*e+"px":i.style.top=this.heightLimit_*e+"px"},f.prototype.getRelativePosition_=function(t,e){var i;return i=this.direction_===f.Direction_.HORIZONTAL?t/this.widthLimit_:e/this.heightLimit_,c.a.clamp(i,0,1)},f.prototype.getResolutionForPosition_=function(t){return this.getMap().getView().getResolutionForValueFunction()(1-t)},f.prototype.getPositionForResolution_=function(t){return 1-this.getMap().getView().getValueForResolutionFunction()(t)},e.a=f},function(t,e,i){"use strict";var r=i(0),n=i(133),o=function(t){var e={MSPointerDown:this.msPointerDown,MSPointerMove:this.msPointerMove,MSPointerUp:this.msPointerUp,MSPointerOut:this.msPointerOut,MSPointerOver:this.msPointerOver,MSPointerCancel:this.msPointerCancel,MSGotPointerCapture:this.msGotPointerCapture,MSLostPointerCapture:this.msLostPointerCapture};n.a.call(this,t,e),this.pointerMap=t.pointerMap,this.POINTER_TYPES=["","unavailable","touch","pen","mouse"]};r.a.inherits(o,n.a),o.prototype.prepareEvent_=function(t){var e=t;return"number"==typeof t.pointerType&&(e=this.dispatcher.cloneEvent(t,t),e.pointerType=this.POINTER_TYPES[t.pointerType]),e},o.prototype.cleanup=function(t){delete this.pointerMap[t.toString()]},o.prototype.msPointerDown=function(t){this.pointerMap[t.pointerId.toString()]=t;var e=this.prepareEvent_(t);this.dispatcher.down(e,t)},o.prototype.msPointerMove=function(t){var e=this.prepareEvent_(t);this.dispatcher.move(e,t)},o.prototype.msPointerUp=function(t){var e=this.prepareEvent_(t);this.dispatcher.up(e,t),this.cleanup(t.pointerId)},o.prototype.msPointerOut=function(t){var e=this.prepareEvent_(t);this.dispatcher.leaveOut(e,t)},o.prototype.msPointerOver=function(t){var e=this.prepareEvent_(t);this.dispatcher.enterOver(e,t)},o.prototype.msPointerCancel=function(t){var e=this.prepareEvent_(t);this.dispatcher.cancel(e,t),this.cleanup(t.pointerId)},o.prototype.msLostPointerCapture=function(t){var e=this.dispatcher.makeEvent("lostpointercapture",t,t);this.dispatcher.dispatchEvent(e)},o.prototype.msGotPointerCapture=function(t){var e=this.dispatcher.makeEvent("gotpointercapture",t,t);this.dispatcher.dispatchEvent(e)},e.a=o},function(t,e,i){"use strict";var r=i(0),n=i(133),o=function(t){var e={pointerdown:this.pointerDown,pointermove:this.pointerMove,pointerup:this.pointerUp,pointerout:this.pointerOut,pointerover:this.pointerOver,pointercancel:this.pointerCancel,gotpointercapture:this.gotPointerCapture,lostpointercapture:this.lostPointerCapture};n.a.call(this,t,e)};r.a.inherits(o,n.a),o.prototype.pointerDown=function(t){this.dispatcher.fireNativeEvent(t)},o.prototype.pointerMove=function(t){this.dispatcher.fireNativeEvent(t)},o.prototype.pointerUp=function(t){this.dispatcher.fireNativeEvent(t)},o.prototype.pointerOut=function(t){this.dispatcher.fireNativeEvent(t)},o.prototype.pointerOver=function(t){this.dispatcher.fireNativeEvent(t)},o.prototype.pointerCancel=function(t){this.dispatcher.fireNativeEvent(t)},o.prototype.lostPointerCapture=function(t){this.dispatcher.fireNativeEvent(t)},o.prototype.gotPointerCapture=function(t){this.dispatcher.fireNativeEvent(t)},e.a=o},function(t,e,i){"use strict";var r=i(0),n=i(25),o=function(t,e,i){n.a.call(this,t),this.originalEvent=e;var r=i||{};this.buttons=this.getButtons_(r),this.pressure=this.getPressure_(r,this.buttons),this.bubbles="bubbles"in r&&r.bubbles,this.cancelable="cancelable"in r&&r.cancelable,this.view="view"in r?r.view:null,this.detail="detail"in r?r.detail:null,this.screenX="screenX"in r?r.screenX:0,this.screenY="screenY"in r?r.screenY:0,this.clientX="clientX"in r?r.clientX:0,this.clientY="clientY"in r?r.clientY:0,this.ctrlKey="ctrlKey"in r&&r.ctrlKey,this.altKey="altKey"in r&&r.altKey,this.shiftKey="shiftKey"in r&&r.shiftKey,this.metaKey="metaKey"in r&&r.metaKey,this.button="button"in r?r.button:0,this.relatedTarget="relatedTarget"in r?r.relatedTarget:null,this.pointerId="pointerId"in r?r.pointerId:0,this.width="width"in r?r.width:0,this.height="height"in r?r.height:0,this.tiltX="tiltX"in r?r.tiltX:0,this.tiltY="tiltY"in r?r.tiltY:0,this.pointerType="pointerType"in r?r.pointerType:"",this.hwTimestamp="hwTimestamp"in r?r.hwTimestamp:0,this.isPrimary="isPrimary"in r&&r.isPrimary,e.preventDefault&&(this.preventDefault=function(){e.preventDefault()})};r.a.inherits(o,n.a),o.prototype.getButtons_=function(t){var e;if(t.buttons||o.HAS_BUTTONS)e=t.buttons;else switch(t.which){case 1:e=1;break;case 2:e=4;break;case 3:e=2;break;default:e=0}return e},o.prototype.getPressure_=function(t,e){return t.pressure?t.pressure:e?.5:0},o.HAS_BUTTONS=!1,function(){try{var t=new MouseEvent("click",{buttons:1});o.HAS_BUTTONS=1===t.buttons}catch(t){}}(),e.a=o},function(t,e,i){"use strict";var r=i(0),n=i(6),o=i(133),a=i(236),s=function(t,e){var i={touchstart:this.touchstart,touchmove:this.touchmove,touchend:this.touchend,touchcancel:this.touchcancel};o.a.call(this,t,i),this.pointerMap=t.pointerMap,this.mouseSource=e,this.firstTouchId_=void 0,this.clickCount_=0,this.resetId_=void 0};r.a.inherits(s,o.a),s.DEDUP_TIMEOUT=2500,s.CLICK_COUNT_TIMEOUT=200,s.POINTER_TYPE="touch",s.prototype.isPrimaryTouch_=function(t){return this.firstTouchId_===t.identifier},s.prototype.setPrimaryTouch_=function(t){var e=Object.keys(this.pointerMap).length;(0===e||1===e&&a.a.POINTER_ID.toString()in this.pointerMap)&&(this.firstTouchId_=t.identifier,this.cancelResetClickCount_())},s.prototype.removePrimaryPointer_=function(t){t.isPrimary&&(this.firstTouchId_=void 0,this.resetClickCount_())},s.prototype.resetClickCount_=function(){this.resetId_=setTimeout(this.resetClickCountHandler_.bind(this),s.CLICK_COUNT_TIMEOUT)},s.prototype.resetClickCountHandler_=function(){this.clickCount_=0,this.resetId_=void 0},s.prototype.cancelResetClickCount_=function(){void 0!==this.resetId_&&clearTimeout(this.resetId_)},s.prototype.touchToPointer_=function(t,e){var i=this.dispatcher.cloneEvent(t,e);return i.pointerId=e.identifier+2,i.bubbles=!0,i.cancelable=!0,i.detail=this.clickCount_,i.button=0,i.buttons=1,i.width=e.webkitRadiusX||e.radiusX||0,i.height=e.webkitRadiusY||e.radiusY||0,i.pressure=e.webkitForce||e.force||.5,i.isPrimary=this.isPrimaryTouch_(e),i.pointerType=s.POINTER_TYPE,i.clientX=e.clientX,i.clientY=e.clientY,i.screenX=e.screenX,i.screenY=e.screenY,i},s.prototype.processTouches_=function(t,e){function i(){t.preventDefault()}var r,n,o=Array.prototype.slice.call(t.changedTouches),a=o.length;for(r=0;r<a;++r)n=this.touchToPointer_(t,o[r]),n.preventDefault=i,e.call(this,t,n)},s.prototype.findTouch_=function(t,e){for(var i,r=t.length,n=0;n<r;n++)if(i=t[n],i.identifier===e)return!0;return!1},s.prototype.vacuumTouches_=function(t){var e=t.touches,i=Object.keys(this.pointerMap),r=i.length;if(r>=e.length){var n,o,s,l=[];for(n=0;n<r;++n)o=i[n],s=this.pointerMap[o],o==a.a.POINTER_ID||this.findTouch_(e,o-2)||l.push(s.out);for(n=0;n<l.length;++n)this.cancelOut_(t,l[n])}},s.prototype.touchstart=function(t){this.vacuumTouches_(t),this.setPrimaryTouch_(t.changedTouches[0]),this.dedupSynthMouse_(t),this.clickCount_++,this.processTouches_(t,this.overDown_)},s.prototype.overDown_=function(t,e){this.pointerMap[e.pointerId]={target:e.target,out:e,outTarget:e.target},this.dispatcher.over(e,t),this.dispatcher.enter(e,t),this.dispatcher.down(e,t)},s.prototype.touchmove=function(t){t.preventDefault(),this.processTouches_(t,this.moveOverOut_)},s.prototype.moveOverOut_=function(t,e){var i=e,r=this.pointerMap[i.pointerId];if(r){var n=r.out,o=r.outTarget;this.dispatcher.move(i,t),n&&o!==i.target&&(n.relatedTarget=i.target,i.relatedTarget=o,n.target=o,i.target?(this.dispatcher.leaveOut(n,t),this.dispatcher.enterOver(i,t)):(i.target=o,i.relatedTarget=null,this.cancelOut_(t,i))),r.out=i,r.outTarget=i.target}},s.prototype.touchend=function(t){this.dedupSynthMouse_(t),this.processTouches_(t,this.upOut_)},s.prototype.upOut_=function(t,e){this.dispatcher.up(e,t),this.dispatcher.out(e,t),this.dispatcher.leave(e,t),this.cleanUpPointer_(e)},s.prototype.touchcancel=function(t){this.processTouches_(t,this.cancelOut_)},s.prototype.cancelOut_=function(t,e){this.dispatcher.cancel(e,t),this.dispatcher.out(e,t),this.dispatcher.leave(e,t),this.cleanUpPointer_(e)},s.prototype.cleanUpPointer_=function(t){delete this.pointerMap[t.pointerId],this.removePrimaryPointer_(t)},s.prototype.dedupSynthMouse_=function(t){var e=this.mouseSource.lastTouches,i=t.changedTouches[0];if(this.isPrimaryTouch_(i)){var r=[i.clientX,i.clientY];e.push(r),setTimeout(function(){n.a.remove(e,r)},s.DEDUP_TIMEOUT)}},e.a=s},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}i.d(e,"a",function(){return u});var n=i(3),o=i.n(n),a=i(358),s=i(54),l=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),o()(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),u=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isDMSLonLat:!1};r(this,t);var i=e.target||void 0,n=e.position||"left-bottom",o=e.rounding||null,l="ol-mouse-position";l+="right-bottom"==n?" right-bottom":" left-bottom",e.isDMSLonLat?this._olMousePostionControl=new a.a({coordinateFormat:function(t){var e=t[0],i=t[1];return e>=180||e<=-180||i>=90||i<=-90?"":s.a.toStringHDMS(t)},projection:"EPSG:4326",target:i,className:l}):this._olMousePostionControl=null!==o&&o>=0&&o<14?new a.a({coordinateFormat:function(t){var e=t[0],i=t[1];return e>=180||e<=-180||i>=90||i<=-90?"":s.a.createStringXY(o)(t)},projection:"EPSG:4326",target:i,className:l}):new a.a({coordinateFormat:function(t){var e=t[0],i=t[1];return e>=180||e<=-180||i>=90||i<=-90?"":t},projection:"EPSG:4326",target:i,className:l})}return l(t,[{key:"_setMap",value:function(t){this._olMousePostionControl.setMap(t)}},{key:"_destroy",value:function(t){this._olMousePostionControl&&(t.removeControl(this._olMousePostionControl),this._olMousePostionControl.setMap(null),this._olMousePostionControl=null)}}]),t}()},function(t,e,i){"use strict";var r=i(0),n=i(4),o=i(5),a=i(18),s=i(29),l=i(8),u=function(t){var e=t||{},i=document.createElement("DIV");i.className=void 0!==e.className?e.className:"ol-mouse-position";var r=e.render?e.render:u.render;s.a.call(this,{element:i,render:r,target:e.target}),n.a.listen(this,a.a.getChangeEventType(u.Property_.PROJECTION),this.handleProjectionChanged_,this),e.coordinateFormat&&this.setCoordinateFormat(e.coordinateFormat),e.projection&&this.setProjection(e.projection),this.undefinedHTML_=void 0!==e.undefinedHTML?e.undefinedHTML:"",this.renderedHTML_=i.innerHTML,this.mapProjection_=null,this.transform_=null,this.lastMouseMovePixel_=null};r.a.inherits(u,s.a),u.render=function(t){var e=t.frameState;e?this.mapProjection_!=e.viewState.projection&&(this.mapProjection_=e.viewState.projection,this.transform_=null):this.mapProjection_=null,this.updateHTML_(this.lastMouseMovePixel_)},u.prototype.handleProjectionChanged_=function(){this.transform_=null},u.prototype.getCoordinateFormat=function(){return this.get(u.Property_.COORDINATE_FORMAT)},u.prototype.getProjection=function(){return this.get(u.Property_.PROJECTION)},u.prototype.handleMouseMove=function(t){var e=this.getMap();this.lastMouseMovePixel_=e.getEventPixel(t),this.updateHTML_(this.lastMouseMovePixel_)},u.prototype.handleMouseOut=function(t){this.updateHTML_(null),this.lastMouseMovePixel_=null},u.prototype.setMap=function(t){if(s.a.prototype.setMap.call(this,t),t){var e=t.getViewport();this.listenerKeys.push(n.a.listen(e,o.a.MOUSEMOVE,this.handleMouseMove,this),n.a.listen(e,o.a.MOUSEOUT,this.handleMouseOut,this))}},u.prototype.setCoordinateFormat=function(t){this.set(u.Property_.COORDINATE_FORMAT,t)},u.prototype.setProjection=function(t){this.set(u.Property_.PROJECTION,l.a.get(t))},u.prototype.updateHTML_=function(t){var e=this.undefinedHTML_;if(t&&this.mapProjection_){if(!this.transform_){var i=this.getProjection();this.transform_=i?l.a.getTransformFromProjections(this.mapProjection_,i):l.a.identityTransform}var r=this.getMap(),n=r.getCoordinateFromPixel(t);if(n){this.transform_(n,n);var o=this.getCoordinateFormat();e=o?o(n):n.toString()}}this.renderedHTML_&&e==this.renderedHTML_||(this.element.innerHTML=e,this.renderedHTML_=e)},u.Property_={PROJECTION:"projection",COORDINATE_FORMAT:"coordinateFormat"},e.a=u},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=c()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(u.a?u()(t,e):t.__proto__=e)}i.d(e,"a",function(){return y});var a=i(3),s=i.n(a),l=i(14),u=i.n(l),h=i(11),c=i.n(h),p=i(15),d=i.n(p),f=i(29),_=i(102),g=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),s()(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),y=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,e);var i=t.className||"ol-showZoomControl",o=Object(_.b)("div",i),a={element:o},s=n(this,(e.__proto__||d()(e)).call(this,a));return s.element=o,s.name="showZoomControl",s}return o(e,t),g(e,[{key:"_setMap",value:function(t){t&&this._createListen(t)}},{key:"_createListen",value:function(t){if(t){var e=t.getView(),i=this.element;this.element.innerHTML=Math.floor(e.getZoom()),e&&e.on("change:resolution",function(){i.innerHTML=Math.floor(e.getZoom())})}}},{key:"_destroy",value:function(){this.setMap(null),this.element=null}}]),e}(f.a)},function(t,e,i){"use strict";var r=i(0),n=i(29),o=i(34),a=i(13),s=i(4),l=i(5),u=function(t){var e=t||{};this.cssClassName_=void 0!==e.className?e.className:"ol-full-screen";var i=void 0!==e.label?e.label:"";this.labelNode_="string"==typeof i?document.createTextNode(i):i;var r=void 0!==e.labelActive?e.labelActive:"";this.labelActiveNode_="string"==typeof r?document.createTextNode(r):r;var a=e.tipLabel?e.tipLabel:"Toggle full-screen",h=document.createElement("button");h.className=this.cssClassName_+"-"+u.isFullScreen(),h.setAttribute("type","button"),h.title=a,h.appendChild(this.labelNode_),s.a.listen(h,l.a.CLICK,this.handleClick_,this);var c=this.cssClassName_+" "+o.a.CLASS_UNSELECTABLE+" "+o.a.CLASS_CONTROL+" "+(u.isFullScreenSupported()?"":o.a.CLASS_UNSUPPORTED),p=document.createElement("div");p.className=c,p.appendChild(h),n.a.call(this,{element:p,target:e.target}),this.keys_=void 0!==e.keys&&e.keys,this.source_=e.source};r.a.inherits(u,n.a),u.prototype.handleClick_=function(t){t.preventDefault(),this.handleFullScreen_()},u.prototype.handleFullScreen_=function(){if(u.isFullScreenSupported()){var t=this.getMap();if(t)if(u.isFullScreen())u.exitFullScreen();else{var e;e=this.source_?"string"==typeof this.source_?document.getElementById(this.source_):this.source_:t.getTargetElement(),this.keys_?u.requestFullScreenWithKeys(e):u.requestFullScreen(e)}}},u.prototype.handleFullScreenChange_=function(){var t=this.element.firstElementChild,e=this.getMap();u.isFullScreen()?(t.className=this.cssClassName_+"-true",a.a.replaceNode(this.labelActiveNode_,this.labelNode_)):(t.className=this.cssClassName_+"-false",a.a.replaceNode(this.labelNode_,this.labelActiveNode_)),e&&e.updateSize()},u.prototype.setMap=function(t){n.a.prototype.setMap.call(this,t),t&&this.listenerKeys.push(s.a.listen(document,u.getChangeType_(),this.handleFullScreenChange_,this))},u.isFullScreenSupported=function(){var t=document.body;return!!(t.webkitRequestFullscreen||t.mozRequestFullScreen&&document.mozFullScreenEnabled||t.msRequestFullscreen&&document.msFullscreenEnabled||t.requestFullscreen&&document.fullscreenEnabled)},u.isFullScreen=function(){return!!(document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement||document.fullscreenElement)},u.requestFullScreen=function(t){t.requestFullscreen?t.requestFullscreen():t.msRequestFullscreen?t.msRequestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen&&t.webkitRequestFullscreen()},u.requestFullScreenWithKeys=function(t){t.mozRequestFullScreenWithKeys?t.mozRequestFullScreenWithKeys():t.webkitRequestFullscreen?t.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT):u.requestFullScreen(t)},u.exitFullScreen=function(){document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()},u.getChangeType_=function(){var t;return function(){if(!t){var e=document.body;e.webkitRequestFullscreen?t="webkitfullscreenchange":e.mozRequestFullScreen?t="mozfullscreenchange":e.msRequestFullscreen?t="MSFullscreenChange":e.requestFullscreen&&(t="fullscreenchange")}return t}}(),e.a=u},function(t,e,i){"use strict";var r=i(362),n=i(238),o=i(8),a=i(32);r.a.prototype.updateElement_=function(){var t=this.viewState_;if(!t)return void(this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1));var e=t.center,i=t.projection,s=this.getUnits(),l=s==n.a.DEGREES?a.a.DEGREES:a.a.METERS,u=o.a.getPointResolution(i,t.resolution,e,l);i.getUnits()!=a.a.DEGREES&&s==n.a.METRIC&&(u*=i.getMetersPerUnit());var h=this.minWidth_*u,c="";if(s==n.a.DEGREES){var p=o.a.METERS_PER_UNIT[a.a.DEGREES];i.getUnits()==a.a.DEGREES?h*=p:u/=p,h<p/60?(c="",u*=3600):h<p?(c="",u*=60):c=""}else s==n.a.IMPERIAL?h<.9144?(c="in",u/=.0254):h<1609.344?(c="ft",u/=.3048):(c="mi",u/=1609.344):s==n.a.NAUTICAL?(u/=1852,c="nm"):s==n.a.METRIC?h<.001?(c="m",u*=1e6):h<1?(c="mm",u*=1e3):h<1e3?c="m":(c="km",u/=1e3):s==n.a.US&&(h<.9144?(c="in",u*=39.37):h<1609.344?(c="ft",u/=.30480061):(c="mi",u/=1609.3472));for(var d,f,_=3*Math.floor(Math.log(this.minWidth_*u)/Math.log(10));_>=0;){if(d=r.a.LEADING_DIGITS[(_%3+3)%3]*Math.pow(10,Math.floor(_/3)),f=Math.round(d/u),isNaN(f))return this.element_.style.display="none",void(this.renderedVisible_=!1);if(f>=this.minWidth_)break;++_}var g=d+" "+c;this.renderedHTML_!=g&&(this.innerElement_.innerHTML=g,this.renderedHTML_=g),this.renderedWidth_!=f&&(this.innerElement_.style.width=f+"px",this.renderedWidth_=f),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0)},e.a=r.a},function(t,e,i){"use strict";var r=i(0),n=i(18),o=i(9),a=i(29),s=i(238),l=i(34),u=i(4),h=i(8),c=i(32),p=function(t){var e=t||{},i=void 0!==e.className?e.className:"ol-scale-line";this.innerElement_=document.createElement("DIV"),this.innerElement_.className=i+"-inner",this.element_=document.createElement("DIV"),this.element_.className=i+" "+l.a.CLASS_UNSELECTABLE,this.element_.appendChild(this.innerElement_),this.viewState_=null,this.minWidth_=void 0!==e.minWidth?e.minWidth:64,this.renderedVisible_=!1,this.renderedWidth_=void 0,this.renderedHTML_="";var r=e.render?e.render:p.render;a.a.call(this,{element:this.element_,render:r,target:e.target}),u.a.listen(this,n.a.getChangeEventType(p.Property_.UNITS),this.handleUnitsChanged_,this),this.setUnits(e.units||s.a.METRIC)};r.a.inherits(p,a.a),p.LEADING_DIGITS=[1,2,5],p.prototype.getUnits=function(){return this.get(p.Property_.UNITS)},p.render=function(t){var e=t.frameState;this.viewState_=e?e.viewState:null,this.updateElement_()},p.prototype.handleUnitsChanged_=function(){this.updateElement_()},p.prototype.setUnits=function(t){this.set(p.Property_.UNITS,t)},p.prototype.updateElement_=function(){var t=this.viewState_;if(!t)return void(this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1));var e=t.center,i=t.projection,r=this.getUnits(),n=r==s.a.DEGREES?c.a.DEGREES:c.a.METERS,a=h.a.getPointResolution(i,t.resolution,e,n);r!=s.a.DEGREES&&(a*=i.getMetersPerUnit());var l=this.minWidth_*a,u="";if(r==s.a.DEGREES){var d=h.a.METERS_PER_UNIT[c.a.DEGREES];i.getUnits()==c.a.DEGREES?l*=d:a/=d,l<d/60?(u="",a*=3600):l<d?(u="",a*=60):u=""}else r==s.a.IMPERIAL?l<.9144?(u="in",a/=.0254):l<1609.344?(u="ft",a/=.3048):(u="mi",a/=1609.344):r==s.a.NAUTICAL?(a/=1852,u="nm"):r==s.a.METRIC?l<.001?(u="m",a*=1e6):l<1?(u="mm",a*=1e3):l<1e3?u="m":(u="km",a/=1e3):r==s.a.US?l<.9144?(u="in",a*=39.37):l<1609.344?(u="ft",a/=.30480061):(u="mi",a/=1609.3472):o.a.assert(!1,33);for(var f,_,g=3*Math.floor(Math.log(this.minWidth_*a)/Math.log(10));;){if(f=p.LEADING_DIGITS[(g%3+3)%3]*Math.pow(10,Math.floor(g/3)),_=Math.round(f/a),isNaN(_))return this.element_.style.display="none",void(this.renderedVisible_=!1);if(_>=this.minWidth_)break;++g}var y=f+" "+u;this.renderedHTML_!=y&&(this.innerElement_.innerHTML=y,this.renderedHTML_=y),this.renderedWidth_!=_&&(this.innerElement_.style.width=_+"px",this.renderedWidth_=_),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0)},p.Property_={UNITS:"units"},e.a=p},function(t,e,i){"use strict";var r=i(0),n=i(74),o=i(239),a=i(131),s=i(240),l=i(18),u=i(93),h=i(130),c=i(234),p=i(241),d=i(29),f=i(54),_=i(34),g=i(13),y=i(4),v=i(5),m=i(1),E=function(t){var e=t||{};this.collapsed_=void 0===e.collapsed||e.collapsed,this.collapsible_=void 0===e.collapsible||e.collapsible,this.collapsible_||(this.collapsed_=!1);var i=void 0!==e.className?e.className:"ol-overviewmap",r=void 0!==e.tipLabel?e.tipLabel:"Overview map",a=void 0!==e.collapseLabel?e.collapseLabel:"";"string"==typeof a?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=a):this.collapseLabel_=a;var s=void 0!==e.label?e.label:"";"string"==typeof s?(this.label_=document.createElement("span"),this.label_.textContent=s):this.label_=s;var l=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_,u=document.createElement("button");u.setAttribute("type","button"),u.title=r,u.appendChild(l),y.a.listen(u,v.a.CLICK,this.handleClick_,this),this.ovmapDiv_=document.createElement("DIV"),this.ovmapDiv_.className="ol-overviewmap-map",this.ovmap_=new o.a({controls:new n.a,interactions:new n.a,view:e.view});var p=this.ovmap_;e.layers&&e.layers.forEach(function(t){p.addLayer(t)},this);var f=document.createElement("DIV");f.className="ol-overviewmap-box",f.style.boxSizing="border-box",this.boxOverlay_=new h.a({position:[0,0],positioning:c.a.BOTTOM_LEFT,element:f}),this.ovmap_.addOverlay(this.boxOverlay_);var g=i+" "+_.a.CLASS_UNSELECTABLE+" "+_.a.CLASS_CONTROL+(this.collapsed_&&this.collapsible_?" ol-collapsed":"")+(this.collapsible_?"":" ol-uncollapsible"),m=document.createElement("div");m.className=g,m.appendChild(this.ovmapDiv_),m.appendChild(u);var T=e.render?e.render:E.render;d.a.call(this,{element:m,render:T,target:e.target});var S=this,R=this.boxOverlay_,I=this.boxOverlay_.getElement(),x=function(t){return{clientX:t.clientX-I.offsetWidth/2,clientY:t.clientY+I.offsetHeight/2}},C=function(t){var e=p.getEventCoordinate(x(t));R.setPosition(e)},O=function(t){var e=p.getEventCoordinate(t);S.getMap().getView().setCenter(e),window.removeEventListener("mousemove",C),window.removeEventListener("mouseup",O)};I.addEventListener("mousedown",function(){window.addEventListener("mousemove",C),window.addEventListener("mouseup",O)})};r.a.inherits(E,d.a),E.prototype.setMap=function(t){var e=this.getMap();if(t!==e){if(e){var i=e.getView();i&&this.unbindView_(i),this.ovmap_.setTarget(null)}if(d.a.prototype.setMap.call(this,t),t){this.ovmap_.setTarget(this.ovmapDiv_),this.listenerKeys.push(y.a.listen(t,u.a.PROPERTYCHANGE,this.handleMapPropertyChange_,this)),0===this.ovmap_.getLayers().getLength()&&this.ovmap_.setLayerGroup(t.getLayerGroup());var r=t.getView();r&&(this.bindView_(r),r.isDef()&&(this.ovmap_.updateSize(),this.resetExtent_()))}}},E.prototype.handleMapPropertyChange_=function(t){if(t.key===s.a.VIEW){var e=t.oldValue;e&&this.unbindView_(e);var i=this.getMap().getView();this.bindView_(i)}},E.prototype.bindView_=function(t){y.a.listen(t,l.a.getChangeEventType(p.a.ROTATION),this.handleRotationChanged_,this)},E.prototype.unbindView_=function(t){y.a.unlisten(t,l.a.getChangeEventType(p.a.ROTATION),this.handleRotationChanged_,this)},E.prototype.handleRotationChanged_=function(){this.ovmap_.getView().setRotation(this.getMap().getView().getRotation())},E.render=function(t){this.validateExtent_(),this.updateBox_()},E.prototype.validateExtent_=function(){var t=this.getMap(),e=this.ovmap_;if(t.isRendered()&&e.isRendered()){var i=t.getSize(),n=t.getView(),o=n.calculateExtent(i),a=e.getSize(),s=e.getView(),l=s.calculateExtent(a),u=e.getPixelFromCoordinate(m.a.getTopLeft(o)),h=e.getPixelFromCoordinate(m.a.getBottomRight(o)),c=Math.abs(u[0]-h[0]),p=Math.abs(u[1]-h[1]),d=a[0],f=a[1];c<d*r.a.OVERVIEWMAP_MIN_RATIO||p<f*r.a.OVERVIEWMAP_MIN_RATIO||c>d*r.a.OVERVIEWMAP_MAX_RATIO||p>f*r.a.OVERVIEWMAP_MAX_RATIO?this.resetExtent_():m.a.containsExtent(l,o)||this.recenter_()}},E.prototype.resetExtent_=function(){if(0!==r.a.OVERVIEWMAP_MAX_RATIO&&0!==r.a.OVERVIEWMAP_MIN_RATIO){var t=this.getMap(),e=this.ovmap_,i=t.getSize(),n=t.getView(),o=n.calculateExtent(i),a=e.getView(),s=Math.log(r.a.OVERVIEWMAP_MAX_RATIO/r.a.OVERVIEWMAP_MIN_RATIO)/Math.LN2,l=1/(Math.pow(2,s/2)*r.a.OVERVIEWMAP_MIN_RATIO);m.a.scaleFromCenter(o,l),a.fit(o)}},E.prototype.recenter_=function(){var t=this.getMap(),e=this.ovmap_,i=t.getView();e.getView().setCenter(i.getCenter())},E.prototype.updateBox_=function(){var t=this.getMap(),e=this.ovmap_;if(t.isRendered()&&e.isRendered()){var i=t.getSize(),r=t.getView(),n=e.getView(),o=r.getRotation(),a=this.boxOverlay_,s=this.boxOverlay_.getElement(),l=r.calculateExtent(i),u=n.getResolution(),h=m.a.getBottomLeft(l),c=m.a.getTopRight(l),p=this.calculateCoordinateRotate_(o,h);a.setPosition(p),s&&(s.style.width=Math.abs((h[0]-c[0])/u)+"px",s.style.height=Math.abs((c[1]-h[1])/u)+"px")}},E.prototype.calculateCoordinateRotate_=function(t,e){var i,r=this.getMap(),n=r.getView(),o=n.getCenter();return o&&(i=[e[0]-o[0],e[1]-o[1]],f.a.rotate(i,t),f.a.add(i,o)),i},E.prototype.handleClick_=function(t){t.preventDefault(),this.handleToggle_()},E.prototype.handleToggle_=function(){this.element.classList.toggle("ol-collapsed"),this.collapsed_?g.a.replaceNode(this.collapseLabel_,this.label_):g.a.replaceNode(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_;var t=this.ovmap_;this.collapsed_||t.isRendered()||(t.updateSize(),this.resetExtent_(),y.a.listenOnce(t,a.a.POSTRENDER,function(t){this.updateBox_()},this))},E.prototype.getCollapsible=function(){return this.collapsible_},E.prototype.setCollapsible=function(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),!t&&this.collapsed_&&this.handleToggle_())},E.prototype.setCollapsed=function(t){this.collapsible_&&this.collapsed_!==t&&this.handleToggle_()},E.prototype.getCollapsed=function(){return this.collapsed_},E.prototype.getOverviewMap=function(){return this.ovmap_},e.a=E},function(t,e,i){"use strict";var r=i(0),n=i(33),o=i(78),a=i(209),s=i(4),l=i(69),u=i(179),h=i(235),c=function(t,e){l.a.call(this),this.map_=t,this.clickTimeoutId_=0,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=e?e*n.a.DEVICE_PIXEL_RATIO:n.a.DEVICE_PIXEL_RATIO,this.down_=null;var i=this.map_.getViewport();this.activePointers_=0,this.trackedTouches_={},this.pointerEventHandler_=new h.a(i),this.documentPointerEventHandler_=null,this.pointerdownListenerKey_=s.a.listen(this.pointerEventHandler_,u.a.POINTERDOWN,this.handlePointerDown_,this),this.relayedListenerKey_=s.a.listen(this.pointerEventHandler_,u.a.POINTERMOVE,this.relayEvent_,this)};r.a.inherits(c,l.a),c.prototype.emulateClick_=function(t){var e=new a.a(o.a.CLICK,this.map_,t);this.dispatchEvent(e),0!==this.clickTimeoutId_?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=0,e=new a.a(o.a.DBLCLICK,this.map_,t),this.dispatchEvent(e)):this.clickTimeoutId_=setTimeout(function(){this.clickTimeoutId_=0;var e=new a.a(o.a.SINGLECLICK,this.map_,t);this.dispatchEvent(e)}.bind(this),250)},c.prototype.updateActivePointers_=function(t){var e=t;e.type==o.a.POINTERUP||e.type==o.a.POINTERCANCEL?delete this.trackedTouches_[e.pointerId]:e.type==o.a.POINTERDOWN&&(this.trackedTouches_[e.pointerId]=!0),this.activePointers_=Object.keys(this.trackedTouches_).length},c.prototype.handlePointerUp_=function(t){this.updateActivePointers_(t);var e=new a.a(o.a.POINTERUP,this.map_,t);this.dispatchEvent(e),e.propagationStopped||this.dragging_||!this.isMouseActionButton_(t)||this.emulateClick_(this.down_),0===this.activePointers_&&(this.dragListenerKeys_.forEach(s.a.unlistenByKey),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null,this.documentPointerEventHandler_.dispose(),this.documentPointerEventHandler_=null)},c.prototype.isMouseActionButton_=function(t){return 0===t.button},c.prototype.handlePointerDown_=function(t){this.updateActivePointers_(t);var e=new a.a(o.a.POINTERDOWN,this.map_,t);this.dispatchEvent(e),this.down_=t,0===this.dragListenerKeys_.length&&(this.documentPointerEventHandler_=new h.a(document),this.dragListenerKeys_.push(s.a.listen(this.documentPointerEventHandler_,o.a.POINTERMOVE,this.handlePointerMove_,this),s.a.listen(this.documentPointerEventHandler_,o.a.POINTERUP,this.handlePointerUp_,this),s.a.listen(this.pointerEventHandler_,o.a.POINTERCANCEL,this.handlePointerUp_,this)))},c.prototype.handlePointerMove_=function(t){if(this.isMoving_(t)){this.dragging_=!0;var e=new a.a(o.a.POINTERDRAG,this.map_,t,this.dragging_);this.dispatchEvent(e)}t.preventDefault()},c.prototype.relayEvent_=function(t){var e=!(!this.down_||!this.isMoving_(t));this.dispatchEvent(new a.a(t.type,this.map_,t,e))},c.prototype.isMoving_=function(t){return Math.abs(t.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(t.clientY-this.down_.clientY)>this.moveTolerance_},c.prototype.disposeInternal=function(){this.relayedListenerKey_&&(s.a.unlistenByKey(this.relayedListenerKey_),this.relayedListenerKey_=null),this.pointerdownListenerKey_&&(s.a.unlistenByKey(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(s.a.unlistenByKey),this.dragListenerKeys_.length=0,this.documentPointerEventHandler_&&(this.documentPointerEventHandler_.dispose(),this.documentPointerEventHandler_=null),this.pointerEventHandler_&&(this.pointerEventHandler_.dispose(),this.pointerEventHandler_=null),l.a.prototype.disposeInternal.call(this)},e.a=c},function(t,e,i){"use strict";var r=i(0),n=i(39),o=i(4),a=i(5),s=i(180),l=function(t,e){s.a.call(this,function(e){return t.apply(null,e)},function(t){return t[0].getKey()}),this.tileChangeCallback_=e,this.tilesLoading_=0,this.tilesLoadingKeys_={}};r.a.inherits(l,s.a),l.prototype.enqueue=function(t){var e=s.a.prototype.enqueue.call(this,t);if(e){var i=t[0];o.a.listen(i,a.a.CHANGE,this.handleTileChange,this)}return e},l.prototype.getTilesLoading=function(){return this.tilesLoading_},l.prototype.handleTileChange=function(t){var e=t.target,i=e.getState();if(i===n.a.LOADED||i===n.a.ERROR||i===n.a.EMPTY||i===n.a.ABORT){o.a.unlisten(e,a.a.CHANGE,this.handleTileChange,this);var r=e.getKey();r in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[r],--this.tilesLoading_),this.tileChangeCallback_()}},l.prototype.loadMoreTiles=function(t,e){for(var i,r,o,a=0,s=!1;this.tilesLoading_<t&&a<e&&this.getCount()>0;)r=this.dequeue()[0],o=r.getKey(),i=r.getState(),i===n.a.ABORT?s=!0:i!==n.a.IDLE||o in this.tilesLoadingKeys_||(this.tilesLoadingKeys_[o]=!0,++this.tilesLoading_,++a,r.load());0===a&&s&&this.tileChangeCallback_()},e.a=l},function(t,e,i){"use strict";var r=i(7),n={};n.createExtent=function(t){return function(e){return e?[r.a.clamp(e[0],t[0],t[2]),r.a.clamp(e[1],t[1],t[3])]:void 0}},n.none=function(t){return t},e.a=n},function(t,e,i){"use strict";var r=i(6),n=i(7),o={};o.createSnapToResolutions=function(t){return function(e,i,o){if(void 0!==e){var a=r.a.linearFindNearest(t,e,o);a=n.a.clamp(a+i,0,t.length-1);var s=Math.floor(a);if(a!=s&&s<t.length-1){var l=t[s]/t[s+1];return t[s]/Math.pow(l,a-s)}return t[s]}}},o.createSnapToPower=function(t,e,i){return function(r,n,o){if(void 0!==r){var a=-o/2+.5,s=Math.floor(Math.log(e/r)/Math.log(t)+a),l=Math.max(s+n,0);return void 0!==i&&(l=Math.min(l,i)),e/Math.pow(t,l)}}},e.a=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(129),n=i(369),o=i(373),a=i(375),s=i(382),l=i(387),u=i(388),h=i(257);i.d(e,"VectorLayer",function(){return r.a}),i.d(e,"VHeatMapLayer",function(){return n.a}),i.d(e,"VClusterLayer",function(){return o.a}),i.d(e,"VWmsLayer",function(){return a.a}),i.d(e,"VImageLayer",function(){return s.a}),i.d(e,"VXYZLayer",function(){return l.a}),i.d(e,"VWMTSLayer",function(){return u.a}),i.d(e,"VGifLayer",function(){return h.a})},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=d()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(c.a?c()(t,e):t.__proto__=e)}i.d(e,"a",function(){return S});var a=i(3),s=i.n(a),l=i(37),u=i.n(l),h=i(14),c=i.n(h),p=i(11),d=i.n(p),f=i(15),_=i.n(f),g=i(175),y=i(370),v=i(99),m=i(57),E=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),s()(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),T=function t(e,i,r){null===e&&(e=Function.prototype);var n=u()(e,i);if(void 0===n){var o=_()(e);return null===o?void 0:t(o,i,r)}if("value"in n)return n.value;var a=n.get;if(void 0!==a)return a.call(r)},S=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,e);var i=n(this,(e.__proto__||_()(e)).call(this,t));return i._blur=t.blur||m.e.BLUR,i._gradient=t.gradient||m.e.GRADIENT,i._radius=t.radius||m.e.RADIUS,i._shadow=t.shadow||m.e.SHADOW,i._weight=t.weight,i._olSource=new v.a({wrapX:i._wrapX}),i._olLayer=new y.a({zIndex:i._zIndex,visible:i._visible,opacity:i._opacity,blur:i._blur,gradient:i._gradient,radius:i._radius,shadow:i._shadow,weight:i._weight,source:i._olSource}),i._setCurrObjToLayer(),i}return o(e,t),E(e,[{key:"destroy",value:function(){this._gradient=null,T(e.prototype.__proto__||_()(e.prototype),"destroy",this).call(this)}},{key:"setGradient",value:function(t){t instanceof Array&&this._olLayer.setGradient(t)}},{key:"getGradient",value:function(){return this._olLayer.getGradient()}},{key:"setRadius",value:function(t){"number"==typeof t&&this._olLayer.setRadius(t)}},{key:"getRadius",value:function(){return this._olLayer.getRadius()}},{key:"setBlur",value:function(t){"number"==typeof t&&this._olLayer.setBlur(t)}},{key:"getBlur",value:function(){return this._olLayer.getBlur()}}]),e}(g.a)},function(t,e,i){"use strict";var r=i(4),n=i(0),o=i(18),a=i(13),s=i(126),l=i(7),u=i(2),h=i(73),c=i(135),p=i(62),d=function(t){var e=t||{},i=u.a.assign({},e);delete i.gradient,delete i.radius,delete i.blur,delete i.shadow,delete i.weight,s.a.call(this,i),this.gradient_=null,this.shadow_=void 0!==e.shadow?e.shadow:250,this.circleImage_=void 0,this.styleCache_=null,r.a.listen(this,o.a.getChangeEventType(d.Property_.GRADIENT),this.handleGradientChanged_,this),this.setGradient(e.gradient?e.gradient:d.DEFAULT_GRADIENT),this.setBlur(void 0!==e.blur?e.blur:15),this.setRadius(void 0!==e.radius?e.radius:8),r.a.listen(this,o.a.getChangeEventType(d.Property_.BLUR),this.handleStyleChanged_,this),r.a.listen(this,o.a.getChangeEventType(d.Property_.RADIUS),this.handleStyleChanged_,this),this.handleStyleChanged_();var n,a=e.weight?e.weight:"weight";n="string"==typeof a?function(t){return t.get(a)}:a,this.setStyle(function(t,e){var i=n(t),r=void 0!==i?l.a.clamp(i,0,1):1,o=255*r|0,a=this.styleCache_[o];return a||(a=[new p.a({image:new c.a({opacity:r,src:this.circleImage_})})],this.styleCache_[o]=a),a}.bind(this)),this.setRenderOrder(null),r.a.listen(this,h.a.RENDER,this.handleRender_,this)};n.a.inherits(d,s.a),d.DEFAULT_GRADIENT=["#00f","#0ff","#0f0","#ff0","#f00"],d.createGradient_=function(t){for(var e=a.a.createCanvasContext2D(1,256),i=e.createLinearGradient(0,0,1,256),r=1/(t.length-1),n=0,o=t.length;n<o;++n)i.addColorStop(n*r,t[n]);return e.fillStyle=i,e.fillRect(0,0,1,256),e.getImageData(0,0,1,256).data},d.prototype.createCircle_=function(){var t=this.getRadius(),e=this.getBlur(),i=t+e+1,r=2*i,n=a.a.createCanvasContext2D(r,r);n.shadowOffsetX=n.shadowOffsetY=this.shadow_,n.shadowBlur=e,n.shadowColor="#000",n.beginPath();var o=i-this.shadow_;return n.arc(o,o,t,0,2*Math.PI,!0),n.fill(),n.canvas.toDataURL()},d.prototype.getBlur=function(){return this.get(d.Property_.BLUR)},d.prototype.getGradient=function(){return this.get(d.Property_.GRADIENT)},d.prototype.getRadius=function(){return this.get(d.Property_.RADIUS)},d.prototype.handleGradientChanged_=function(){this.gradient_=d.createGradient_(this.getGradient())},d.prototype.handleStyleChanged_=function(){this.circleImage_=this.createCircle_(),this.styleCache_=new Array(256),this.changed()},d.prototype.handleRender_=function(t){var e,i,r,n=t.context,o=n.canvas,a=n.getImageData(0,0,o.width,o.height),s=a.data;for(e=0,i=s.length;e<i;e+=4)(r=4*s[e+3])&&(s[e]=this.gradient_[r],s[e+1]=this.gradient_[r+1],s[e+2]=this.gradient_[r+2]);n.putImageData(a,0,0)},d.prototype.setBlur=function(t){this.set(d.Property_.BLUR,t)},d.prototype.setGradient=function(t){this.set(d.Property_.GRADIENT,t)},d.prototype.setRadius=function(t){this.set(d.Property_.RADIUS,t)},d.Property_={BLUR:"blur",GRADIENT:"gradient",RADIUS:"radius"},e.a=d},function(t,e,i){"use strict";var r=i(0),n=i(13),o=i(4),a=i(69),s=i(5),l=i(43),u=i(246),h=function(t,e,i,r,n,o){a.a.call(this),this.hitDetectionImage_=null,this.image_=t||new Image,null!==r&&(this.image_.crossOrigin=r),this.canvas_=o?document.createElement("CANVAS"):null,this.color_=o,this.imageListenerKeys_=null,this.imageState_=n,this.size_=i,this.src_=e,this.tainting_=!1,this.imageState_==l.a.LOADED&&this.determineTainting_()};r.a.inherits(h,a.a),h.get=function(t,e,i,r,n,o){var a=u.a.iconImageCache,s=a.get(e,r,o);return s||(s=new h(t,e,i,r,n,o),a.set(e,r,o,s)),s},h.prototype.determineTainting_=function(){var t=n.a.createCanvasContext2D(1,1);try{t.drawImage(this.image_,0,0),t.getImageData(0,0,1,1)}catch(t){this.tainting_=!0}},h.prototype.dispatchChangeEvent_=function(){this.dispatchEvent(s.a.CHANGE)},h.prototype.handleImageError_=function(){this.imageState_=l.a.ERROR,this.unlistenImage_(),this.dispatchChangeEvent_()},h.prototype.handleImageLoad_=function(){this.imageState_=l.a.LOADED,this.size_&&(this.image_.width=this.size_[0],this.image_.height=this.size_[1]),this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.determineTainting_(),this.replaceColor_(),this.dispatchChangeEvent_()},h.prototype.getImage=function(t){return this.canvas_?this.canvas_:this.image_},h.prototype.getImageState=function(){return this.imageState_},h.prototype.getHitDetectionImage=function(t){if(!this.hitDetectionImage_)if(this.tainting_){var e=this.size_[0],i=this.size_[1],r=n.a.createCanvasContext2D(e,i);r.fillRect(0,0,e,i),this.hitDetectionImage_=r.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_},h.prototype.getSize=function(){return this.size_},h.prototype.getSrc=function(){return this.src_},h.prototype.load=function(){if(this.imageState_==l.a.IDLE){this.imageState_=l.a.LOADING,this.imageListenerKeys_=[o.a.listenOnce(this.image_,s.a.ERROR,this.handleImageError_,this),o.a.listenOnce(this.image_,s.a.LOAD,this.handleImageLoad_,this)];try{this.image_.src=this.src_}catch(t){this.handleImageError_()}}},h.prototype.replaceColor_=function(){if(!this.tainting_&&null!==this.color_){this.canvas_.width=this.image_.width,this.canvas_.height=this.image_.height;var t=this.canvas_.getContext("2d");t.drawImage(this.image_,0,0);for(var e=t.getImageData(0,0,this.image_.width,this.image_.height),i=e.data,r=this.color_[0]/255,n=this.color_[1]/255,o=this.color_[2]/255,a=0,s=i.length;a<s;a+=4)i[a]*=r,i[a+1]*=n,i[a+2]*=o;t.putImageData(e,0,0)}},h.prototype.unlistenImage_=function(){this.imageListenerKeys_.forEach(o.a.unlistenByKey),this.imageListenerKeys_=null},e.a=h},function(t,e,i){"use strict";var r=i(52),n=function(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32};n.getKey=function(t,e,i){return e+":"+t+":"+(i?r.a.asString(i):"null")},n.prototype.clear=function(){this.cache_={},this.cacheSize_=0},n.prototype.expire=function(){if(this.cacheSize_>this.maxCacheSize_){var t,e,i=0;for(t in this.cache_)e=this.cache_[t],0!=(3&i++)||e.hasListener()||(delete this.cache_[t],--this.cacheSize_)}},n.prototype.get=function(t,e,i){var r=n.getKey(t,e,i);return r in this.cache_?this.cache_[r]:null},n.prototype.set=function(t,e,i,r){var o=n.getKey(t,e,i);this.cache_[o]=r,++this.cacheSize_},n.prototype.setSize=function(t){this.maxCacheSize_=t,this.expire()},e.a=n},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=d()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(c.a?c()(t,e):t.__proto__=e)}i.d(e,"a",function(){return x});var a=i(3),s=i.n(a),l=i(37),u=i.n(l),h=i(14),c=i.n(h),p=i(11),d=i.n(p),f=i(31),_=i.n(f),g=i(15),y=i.n(g),v=i(126),m=i(99),E=i(374),T=i(175),S=i(57),R=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),s()(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),I=function t(e,i,r){null===e&&(e=Function.prototype);var n=u()(e,i);if(void 0===n){var o=y()(e);return null===o?void 0:t(o,i,r)}if("value"in n)return n.value;var a=n.get;if(void 0!==a)return a.call(r)},x=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,e);var i=n(this,(e.__proto__||y()(e)).call(this,t));return i._renderMode=t.renderMode||S.e.RENDERMODE,i._style=t.style||S.e.STYLE,i._renderBuffer=t.renderBuffer||S.e.RENDERBUFFER,i._renderOrder=t.renderOrder||S.e.RENDERORDER,i._distance=void 0!==t.distance?t.distance:S.e.DISTANCE,i._olSource=new E.a({wrapX:i._wrapX,distance:i._distance,source:new m.a}),i._olLayer=new v.a({renderMode:i._renderMode,renderBuffer:i._renderBuffer,renderOrder:i._renderOrder,style:i._style,zIndex:i._zIndex,visible:i._visible,opacity:i._opacity,source:i._olSource}),i._setCurrObjToLayer(),i}return o(e,t),R(e,[{key:"destroy",value:function(){this._style=null,this._renderOrder=null,I(e.prototype.__proto__||y()(e.prototype),"destroy",this).call(this)}},{key:"_getFeatureFormArray",value:function(){var t={_clusterFea:[],_unClusterFea:[]},e=this._olSource.getFeatures();if(0!=e.length){var i=!0,r=!1,n=void 0;try{for(var o,a=_()(e);!(i=(o=a.next()).done);i=!0){var s=o.value;if(s.get("features")&&s.get("features").length>1){var l=!0,u=!1,h=void 0;try{for(var c,p=_()(s.get("features"));!(l=(c=p.next()).done);l=!0){var d=c.value;t._clusterFea.push(d)}}catch(t){u=!0,h=t}finally{try{!l&&p.return&&p.return()}finally{if(u)throw h}}}else s.get("features")&&1==s.get("features").length&&t._unClusterFea.push(s.get("features")[0])}}catch(t){r=!0,n=t}finally{try{!i&&a.return&&a.return()}finally{if(r)throw n}}}return t}},{key:"getClusterFeatures",value:function(){return this._getFeatureFormArray()._clusterFea}},{key:"getUnclusterFeatures",value:function(){return this._getFeatureFormArray()._unClusterFea}},{key:"addFeature",value:function(t){t instanceof Array&&this._olSource.getSource().addFeatures(t)}},{key:"removeFeature",value:function(t){if(t instanceof Array){var e=!0,i=!1,r=void 0;try{for(var n,o=_()(t);!(e=(n=o.next()).done);e=!0){var a=n.value;this._olSource.getSource().removeFeature(a)}}catch(t){i=!0,r=t}finally{try{!e&&o.return&&o.return()}finally{if(i)throw r}}}}},{key:"queryByProperty",value:function(t){var e=this._olSource.getSource().getFeatures(),i=[],r=!0,n=!1,o=void 0;try{for(var a,s=_()(e);!(r=(a=s.next()).done);r=!0){var l=a.value,u=!0,h=!1,c=void 0;try{for(var p,d=_()(l.getKeys());!(u=(p=d.next()).done);u=!0){p.value==t&&i.push(l)}}catch(t){h=!0,c=t}finally{try{!u&&d.return&&d.return()}finally{if(h)throw c}}}}catch(t){n=!0,o=t}finally{try{!r&&s.return&&s.return()}finally{if(n)throw o}}return i}},{key:"queryByExtent",value:function(t){if(t instanceof Array)return this._olSource.getSource().getFeaturesInExtent(t)}},{key:"getFeatureById",value:function(t){return this._olSource.getSource().getFeatureById(t)}},{key:"clearAllFeature",value:function(){this._olSource.getSource().clear()}}]),e}(T.a)},function(t,e,i){"use strict";var r=i(0),n=i(9),o=i(42),a=i(54),s=i(5),l=i(1),u=i(26),h=i(99),c=function(t){h.a.call(this,{attributions:t.attributions,extent:t.extent,logo:t.logo,projection:t.projection,wrapX:t.wrapX}),this.resolution=void 0,this.distance=void 0!==t.distance?t.distance:20,this.features=[],this.geometryFunction=t.geometryFunction||function(t){var e=t.getGeometry();return n.a.assert(e instanceof u.a,10),e},this.source=t.source,this.source.on(s.a.CHANGE,c.prototype.refresh,this)};r.a.inherits(c,h.a),c.prototype.getDistance=function(){return this.distance},c.prototype.getSource=function(){return this.source},c.prototype.loadFeatures=function(t,e,i){this.source.loadFeatures(t,e,i),e!==this.resolution&&(this.clear(),this.resolution=e,this.cluster(),this.addFeatures(this.features))},c.prototype.setDistance=function(t){this.distance=t,this.refresh()},c.prototype.refresh=function(){this.clear(),this.cluster(),this.addFeatures(this.features),h.a.prototype.refresh.call(this)},c.prototype.cluster=function(){if(void 0!==this.resolution){this.features.length=0;for(var t=l.a.createEmpty(),e=this.distance*this.resolution,i=this.source.getFeatures(),n={},o=0,a=i.length;o<a;o++){var s=i[o];if(!(r.a.getUid(s).toString()in n)){var u=this.geometryFunction(s);if(u){var h=u.getCoordinates();l.a.createOrUpdateFromCoordinate(h,t),l.a.buffer(t,e,t);var c=this.source.getFeaturesInExtent(t);c=c.filter(function(t){var e=r.a.getUid(t).toString();return!(e in n)&&(n[e]=!0,!0)}),this.features.push(this.createCluster(c))}}}}},c.prototype.createCluster=function(t){for(var e=[0,0],i=t.length-1;i>=0;--i){var r=this.geometryFunction(t[i]);r?a.a.add(e,r.getCoordinates()):t.splice(i,1)}a.a.scale(e,1/t.length);var n=new o.a(new u.a(e));return n.set("features",t),n},e.a=c},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=d()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(c.a?c()(t,e):t.__proto__=e)}i.d(e,"a",function(){return R});var a=i(3),s=i.n(a),l=i(37),u=i.n(l),h=i(14),c=i.n(h),p=i(11),d=i.n(p),f=i(15),_=i.n(f),g=i(81),y=i(38),v=i(136),m=i(248),E=i(57),T=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),s()(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),S=function t(e,i,r){null===e&&(e=Function.prototype);var n=u()(e,i);if(void 0===n){var o=_()(e);return null===o?void 0:t(o,i,r)}if("value"in n)return n.value;var a=n.get;if(void 0!==a)return a.call(r)},R=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,e);var i=n(this,(e.__proto__||_()(e)).call(this,t));i._url=t.url,i._params=t.params,i._projection=t.projection||y.MapProperty.PROJECTION,i._preload=t.preload||E.b.PRELOAD,i._serverType=t.serverType||E.b.SERVERTYPE,i._gutter=t.gutter||E.b.GUTTER,i._transition=t.transition||E.b.TRANSITION,i._tileGrid=t.tileGrid||E.b.TILEGRID;var o=t.crossOrigin;return i._olSource=new m.a({wrapX:i._wrapX,serverType:i._serverType,params:i._params,projection:i._projection,url:i._url,gutter:i._gutter,transition:i._transition,tileGrid:i._tileGrid,crossOrigin:o}),i._olLayer=new v.a({zIndex:i._zIndex,visible:i._visible,opacity:i._opacity,preload:i._preload,source:i._olSource}),i._setCurrObjToLayer(),i}return o(e,t),T(e,[{key:"destroy",value:function(){this._params=null,this._projection=null,S(e.prototype.__proto__||_()(e.prototype),"destroy",this).call(this)}}]),e}(g.a)},function(t,e,i){"use strict";var r={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};e.a=r},function(t,e,i){"use strict";var r=i(0),n=i(249),o=i(39),a=i(13),s=i(4),l=i(5),u=function(t,e,i,r,o,a){n.a.call(this,t,e,a),this.crossOrigin_=r,this.src_=i,this.image_=new Image,null!==r&&(this.image_.crossOrigin=r),this.imageListenerKeys_=null,this.tileLoadFunction_=o};r.a.inherits(u,n.a),u.prototype.disposeInternal=function(){this.state==o.a.LOADING&&(this.unlistenImage_(),this.image_=u.getBlankImage()),this.interimTile&&this.interimTile.dispose(),this.state=o.a.ABORT,this.changed(),n.a.prototype.disposeInternal.call(this)},u.prototype.getImage=function(){return this.image_},u.prototype.getKey=function(){return this.src_},u.prototype.handleImageError_=function(){this.state=o.a.ERROR,this.unlistenImage_(),this.image_=u.getBlankImage(),this.changed()},u.prototype.handleImageLoad_=function(){this.image_.naturalWidth&&this.image_.naturalHeight?this.state=o.a.LOADED:this.state=o.a.EMPTY,this.unlistenImage_(),this.changed()},u.prototype.load=function(){this.state==o.a.ERROR&&(this.state=o.a.IDLE,this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==o.a.IDLE&&(this.state=o.a.LOADING,this.changed(),this.imageListenerKeys_=[s.a.listenOnce(this.image_,l.a.ERROR,this.handleImageError_,this),s.a.listenOnce(this.image_,l.a.LOAD,this.handleImageLoad_,this)],this.tileLoadFunction_(this,this.src_))},u.prototype.unlistenImage_=function(){this.imageListenerKeys_.forEach(s.a.unlistenByKey),this.imageListenerKeys_=null},u.getBlankImage=function(){var t=a.a.createCanvasContext2D(1,1);return t.fillStyle="rgba(0,0,0,0)",t.fillRect(0,0,1,1),t.canvas},e.a=u},function(t,e,i){"use strict";var r=i(0),n=i(249),o=i(39),a=i(4),s=i(5),l=i(1),u=i(7),h=i(137),c=i(251),p=function(t,e,i,a,s,p,d,f,_,g,y){n.a.call(this,s,o.a.IDLE),this.renderEdges_=void 0!==y&&y,this.pixelRatio_=d,this.gutter_=f,this.canvas_=null,this.sourceTileGrid_=e,this.targetTileGrid_=a,this.wrappedTileCoord_=p||s,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;var v=a.getTileCoordExtent(this.wrappedTileCoord_),m=this.targetTileGrid_.getExtent(),E=this.sourceTileGrid_.getExtent(),T=m?l.a.getIntersection(v,m):v;if(0===l.a.getArea(T))return void(this.state=o.a.EMPTY);var S=t.getExtent();S&&(E=E?l.a.getIntersection(E,S):S);var R=a.getResolution(this.wrappedTileCoord_[0]),I=l.a.getCenter(T),x=h.a.calculateSourceResolution(t,i,I,R);if(!isFinite(x)||x<=0)return void(this.state=o.a.EMPTY);var C=void 0!==g?g:r.a.DEFAULT_RASTER_REPROJECTION_ERROR_THRESHOLD;if(this.triangulation_=new c.a(t,i,T,E,x*C),0===this.triangulation_.getTriangles().length)return void(this.state=o.a.EMPTY);this.sourceZ_=e.getZForResolution(x);var O=this.triangulation_.calculateSourceExtent();if(E&&(t.canWrapX()?(O[1]=u.a.clamp(O[1],E[1],E[3]),O[3]=u.a.clamp(O[3],E[1],E[3])):O=l.a.getIntersection(O,E)),l.a.getArea(O)){for(var P=e.getTileRangeForExtentAndZ(O,this.sourceZ_),L=P.minX;L<=P.maxX;L++)for(var A=P.minY;A<=P.maxY;A++){var w=_(this.sourceZ_,L,A,d);w&&this.sourceTiles_.push(w)}0===this.sourceTiles_.length&&(this.state=o.a.EMPTY)}else this.state=o.a.EMPTY};r.a.inherits(p,n.a),p.prototype.disposeInternal=function(){this.state==o.a.LOADING&&this.unlistenSources_(),n.a.prototype.disposeInternal.call(this)},p.prototype.getImage=function(){return this.canvas_},p.prototype.reproject_=function(){var t=[];if(this.sourceTiles_.forEach(function(e,i,r){e&&e.getState()==o.a.LOADED&&t.push({extent:this.sourceTileGrid_.getTileCoordExtent(e.tileCoord),image:e.getImage()})},this),this.sourceTiles_.length=0,0===t.length)this.state=o.a.ERROR;else{var e=this.wrappedTileCoord_[0],i=this.targetTileGrid_.getTileSize(e),r="number"==typeof i?i:i[0],n="number"==typeof i?i:i[1],a=this.targetTileGrid_.getResolution(e),s=this.sourceTileGrid_.getResolution(this.sourceZ_),l=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=h.a.render(r,n,this.pixelRatio_,s,this.sourceTileGrid_.getExtent(),a,l,this.triangulation_,t,this.gutter_,this.renderEdges_),this.state=o.a.LOADED}this.changed()},p.prototype.load=function(){if(this.state==o.a.IDLE){this.state=o.a.LOADING,this.changed();var t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(function(e,i,r){var n=e.getState();if(n==o.a.IDLE||n==o.a.LOADING){t++;var l;l=a.a.listen(e,s.a.CHANGE,function(i){var r=e.getState();r!=o.a.LOADED&&r!=o.a.ERROR&&r!=o.a.EMPTY||(a.a.unlistenByKey(l),0===--t&&(this.unlistenSources_(),this.reproject_()))},this),this.sourcesListenerKeys_.push(l)}},this),this.sourceTiles_.forEach(function(t,e,i){t.getState()==o.a.IDLE&&t.load()}),0===t&&setTimeout(this.reproject_.bind(this),0)}},p.prototype.unlistenSources_=function(){this.sourcesListenerKeys_.forEach(a.a.unlistenByKey),this.sourcesListenerKeys_=null},e.a=p},function(t,e,i){"use strict";var r=i(0),n=i(39),o=i(183),a=i(380),s=i(381),l=i(56),u=function(t){a.a.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,extent:t.extent,logo:t.logo,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tilePixelRatio:t.tilePixelRatio,wrapX:t.wrapX,transition:t.transition}),this.tileLoadFunction=t.tileLoadFunction,this.tileUrlFunction=this.fixedTileUrlFunction?this.fixedTileUrlFunction.bind(this):o.a.nullTileUrlFunction,this.urls=null,t.urls?this.setUrls(t.urls):t.url&&this.setUrl(t.url),t.tileUrlFunction&&this.setTileUrlFunction(t.tileUrlFunction),this.tileLoadingKeys_={}};r.a.inherits(u,a.a),u.prototype.fixedTileUrlFunction,u.prototype.getTileLoadFunction=function(){return this.tileLoadFunction},u.prototype.getTileUrlFunction=function(){return this.tileUrlFunction},u.prototype.getUrls=function(){return this.urls},u.prototype.handleTileChange=function(t){var e,i=t.target,o=r.a.getUid(i),l=i.getState();l==n.a.LOADING?(this.tileLoadingKeys_[o]=!0,e=s.a.TILELOADSTART):o in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[o],e=l==n.a.ERROR?s.a.TILELOADERROR:l==n.a.LOADED||l==n.a.ABORT?s.a.TILELOADEND:void 0),void 0!=e&&this.dispatchEvent(new a.a.Event(e,i))},u.prototype.setTileLoadFunction=function(t){this.tileCache.clear(),this.tileLoadFunction=t,this.changed()},u.prototype.setTileUrlFunction=function(t,e){this.tileUrlFunction=t,this.tileCache.pruneExceptNewestZ(),void 0!==e?this.setKey(e):this.changed()},u.prototype.setUrl=function(t){var e=this.urls=o.a.expandUrl(t);this.setTileUrlFunction(this.fixedTileUrlFunction?this.fixedTileUrlFunction.bind(this):o.a.createFromTemplates(e,this.tileGrid),t)},u.prototype.setUrls=function(t){this.urls=t;var e=t.join("\n");this.setTileUrlFunction(this.fixedTileUrlFunction?this.fixedTileUrlFunction.bind(this):o.a.createFromTemplates(t,this.tileGrid),e)},u.prototype.useTile=function(t,e,i){var r=l.a.getKeyZXY(t,e,i);this.tileCache.containsKey(r)&&this.tileCache.get(r)},e.a=u},function(t,e,i){"use strict";var r=i(0),n=i(250),o=i(39),a=i(25),s=i(8),l=i(75),u=i(171),h=i(56),c=i(101),p=function(t){u.a.call(this,{attributions:t.attributions,extent:t.extent,logo:t.logo,projection:t.projection,state:t.state,wrapX:t.wrapX}),this.opaque_=void 0!==t.opaque&&t.opaque,this.tilePixelRatio_=void 0!==t.tilePixelRatio?t.tilePixelRatio:1,this.tileGrid=void 0!==t.tileGrid?t.tileGrid:null,this.tileCache=new n.a(t.cacheSize),this.tmpSize=[0,0],this.key_="",this.tileOptions={transition:t.transition}};r.a.inherits(p,u.a),p.prototype.canExpireCache=function(){return this.tileCache.canExpireCache()},p.prototype.expireCache=function(t,e){var i=this.getTileCacheForProjection(t);i&&i.expireCache(e)},p.prototype.forEachLoadedTile=function(t,e,i,r){var n=this.getTileCacheForProjection(t);if(!n)return!1;for(var a,s,l,u=!0,c=i.minX;c<=i.maxX;++c)for(var p=i.minY;p<=i.maxY;++p)s=h.a.getKeyZXY(e,c,p),l=!1,n.containsKey(s)&&(a=n.get(s),(l=a.getState()===o.a.LOADED)&&(l=!1!==r(a))),l||(u=!1);return u},p.prototype.getGutter=function(t){return 0},p.prototype.getKey=function(){return this.key_},p.prototype.setKey=function(t){this.key_!==t&&(this.key_=t,this.changed())},p.prototype.getOpaque=function(t){return this.opaque_},p.prototype.getResolutions=function(){return this.tileGrid.getResolutions()},p.prototype.getTile=function(t,e,i,r,n){},p.prototype.getTileGrid=function(){return this.tileGrid},p.prototype.getTileGridForProjection=function(t){return this.tileGrid?this.tileGrid:c.a.getForProjection(t)},p.prototype.getTileCacheForProjection=function(t){var e=this.getProjection();return e&&!s.a.equivalent(e,t)?null:this.tileCache},p.prototype.getTilePixelRatio=function(t){return this.tilePixelRatio_},p.prototype.getTilePixelSize=function(t,e,i){var r=this.getTileGridForProjection(i),n=this.getTilePixelRatio(e),o=l.a.toSize(r.getTileSize(t),this.tmpSize);return 1==n?o:l.a.scale(o,n,this.tmpSize)},p.prototype.getTileCoordForTileUrlFunction=function(t,e){var i=void 0!==e?e:this.getProjection(),r=this.getTileGridForProjection(i);return this.getWrapX()&&i.isGlobal()&&(t=c.a.wrapX(r,t,i)),h.a.withinExtentAndZ(t,r)?t:null},p.prototype.refresh=function(){this.tileCache.clear(),this.changed()},p.prototype.useTile=r.a.nullFunction,p.Event=function(t,e){a.a.call(this,t),this.tile=e},r.a.inherits(p.Event,a.a),e.a=p},function(t,e,i){"use strict";var r={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};e.a=r},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=d()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(c.a?c()(t,e):t.__proto__=e)}i.d(e,"a",function(){return I});var a=i(3),s=i.n(a),l=i(37),u=i.n(l),h=i(14),c=i.n(h),p=i(11),d=i.n(p),f=i(15),_=i.n(f),g=i(81),y=i(38),v=i(383),m=i(384),E=i(386),T=i(57),S=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),s()(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),R=function t(e,i,r){null===e&&(e=Function.prototype);var n=u()(e,i);if(void 0===n){var o=_()(e);return null===o?void 0:t(o,i,r)}if("value"in n)return n.value;var a=n.get;if(void 0!==a)return a.call(r)},I=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,e);var i=n(this,(e.__proto__||_()(e)).call(this,t));i._url=t.url,i._projection=t.projection||y.MapProperty.PROJECTION,i._params=t.params,i._imgServerType=t.imgServerType,i._ratio=t.ratio||T.b.RATIO,i._imageLoadFunction=t.imageLoadFunction||T.b.IMAGELOADFUNCTION,i._serverType=t.serverType||T.b.SERVERTYPE,i._imageExtent=t.imageExtent;var o=t.crossOrigin;return i._olSource=null,T.c.IMAGEWMS===i._imgServerType?i._olSource=new m.a({wrapX:i._wrapX,serverType:i._serverType,params:i._params,projection:i._projection,ratio:i._ratio,url:i._url,imageLoadFunction:i._imageLoadFunction,crossOrigin:o}):T.c.IMAGESTATIC===i._imgServerType&&(i._olSource=new E.a({url:i._url,projection:i._projection,imageExtent:i._imageExtent,crossOrigin:o})),i._olLayer=new v.a({zIndex:i._zIndex,visible:i._visible,opacity:i._opacity,source:i._olSource}),i._setCurrObjToLayer(),i}return o(e,t),S(e,[{key:"destroy",value:function(){this._projection=null,this._params=null,this._imageLoadFunction=null,this._imageExtent=null,R(e.prototype.__proto__||_()(e.prototype),"destroy",this).call(this)}}]),e}(g.a)},function(t,e,i){"use strict";var r=i(0),n=i(48),o=i(72),a=function(t){var e=t||{};o.a.call(this,e),this.type=n.a.IMAGE};r.a.inherits(a,o.a),a.prototype.getSource,e.a=a},function(t,e,i){"use strict";var r=i(0),n=i(253),o=i(9),a=i(4),s=i(5),l=i(1),u=i(2),h=i(8),c=i(137),p=i(254),d=i(252),f=i(122),_=i(138),g=function(t){var e=t||{};p.a.call(this,{attributions:e.attributions,logo:e.logo,projection:e.projection,resolutions:e.resolutions}),this.crossOrigin_=void 0!==e.crossOrigin?e.crossOrigin:null,this.url_=e.url,this.imageLoadFunction_=void 0!==e.imageLoadFunction?e.imageLoadFunction:p.a.defaultImageLoadFunction,this.params_=e.params||{},this.v13_=!0,this.updateV13_(),this.serverType_=e.serverType,this.hidpi_=void 0===e.hidpi||e.hidpi,this.image_=null,this.imageSize_=[0,0],this.renderedRevision_=0,this.ratio_=void 0!==e.ratio?e.ratio:1.5};r.a.inherits(g,p.a),g.GETFEATUREINFO_IMAGE_SIZE_=[101,101],g.prototype.getGetFeatureInfoUrl=function(t,e,i,n){if(void 0!==this.url_){var o=h.a.get(i),a=this.getProjection();a&&a!==o&&(e=c.a.calculateSourceResolution(a,o,t,e),t=h.a.transform(t,o,a));var s=l.a.getForViewAndSize(t,e,0,g.GETFEATUREINFO_IMAGE_SIZE_),p={SERVICE:"WMS",VERSION:r.a.DEFAULT_WMS_VERSION,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.params_.LAYERS};u.a.assign(p,this.params_,n);var d=Math.floor((t[0]-s[0])/e),f=Math.floor((s[3]-t[1])/e);return p[this.v13_?"I":"X"]=d,p[this.v13_?"J":"Y"]=f,this.getRequestUrl_(s,g.GETFEATUREINFO_IMAGE_SIZE_,1,a||o,p)}},g.prototype.getParams=function(){return this.params_},g.prototype.getImageInternal=function(t,e,i,o){if(void 0===this.url_)return null;e=this.findNearestResolution(e),1==i||this.hidpi_&&void 0!==this.serverType_||(i=1);var h=e/i,c=l.a.getCenter(t),p=Math.ceil(l.a.getWidth(t)/h),d=Math.ceil(l.a.getHeight(t)/h),f=l.a.getForViewAndSize(c,h,0,[p,d]),_=Math.ceil(this.ratio_*l.a.getWidth(t)/h),g=Math.ceil(this.ratio_*l.a.getHeight(t)/h),y=l.a.getForViewAndSize(c,h,0,[_,g]),v=this.image_;if(v&&this.renderedRevision_==this.getRevision()&&v.getResolution()==e&&v.getPixelRatio()==i&&l.a.containsExtent(v.getExtent(),f))return v;var m={SERVICE:"WMS",VERSION:r.a.DEFAULT_WMS_VERSION,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};u.a.assign(m,this.params_),this.imageSize_[0]=Math.round(l.a.getWidth(y)/h),this.imageSize_[1]=Math.round(l.a.getHeight(y)/h);var E=this.getRequestUrl_(y,this.imageSize_,i,o,m);return this.image_=new n.a(y,e,i,E,this.crossOrigin_,this.imageLoadFunction_),this.renderedRevision_=this.getRevision(),a.a.listen(this.image_,s.a.CHANGE,this.handleImageChange,this),this.image_},g.prototype.getImageLoadFunction=function(){return this.imageLoadFunction_},g.prototype.getRequestUrl_=function(t,e,i,r,n){if(o.a.assert(void 0!==this.url_,9),n[this.v13_?"CRS":"SRS"]=r.getCode(),"STYLES"in this.params_||(n.STYLES=""),1!=i)switch(this.serverType_){case d.a.GEOSERVER:var a=90*i+.5|0;"FORMAT_OPTIONS"in n?n.FORMAT_OPTIONS+=";dpi:"+a:n.FORMAT_OPTIONS="dpi:"+a;break;case d.a.MAPSERVER:n.MAP_RESOLUTION=90*i;break;case d.a.CARMENTA_SERVER:case d.a.QGIS:n.DPI=90*i;break;default:o.a.assert(!1,8)}n.WIDTH=e[0],n.HEIGHT=e[1];var s,l=r.getAxisOrientation();return s=this.v13_&&"ne"==l.substr(0,2)?[t[1],t[0],t[3],t[2]]:t,n.BBOX=s.join(","),_.a.appendParams(this.url_,n)},g.prototype.getUrl=function(){return this.url_},g.prototype.setImageLoadFunction=function(t){this.image_=null,this.imageLoadFunction_=t,this.changed()},g.prototype.setUrl=function(t){t!=this.url_&&(this.url_=t,this.image_=null,this.changed())},g.prototype.updateParams=function(t){u.a.assign(this.params_,t),this.updateV13_(),this.image_=null,this.changed()},g.prototype.updateV13_=function(){var t=this.params_.VERSION||r.a.DEFAULT_WMS_VERSION;this.v13_=f.a.compareVersions(t,"1.3")>=0},e.a=g},function(t,e,i){"use strict";var r=i(0),n=i(184),o=i(43),a=i(4),s=i(5),l=i(1),u=i(137),h=i(251),c=function(t,e,i,a,s,c){this.targetProj_=e,this.maxSourceExtent_=t.getExtent();var p=e.getExtent(),d=p?l.a.getIntersection(i,p):i,f=l.a.getCenter(d),_=u.a.calculateSourceResolution(t,e,f,a),g=r.a.DEFAULT_RASTER_REPROJECTION_ERROR_THRESHOLD;this.triangulation_=new h.a(t,e,d,this.maxSourceExtent_,_*g),this.targetResolution_=a,this.targetExtent_=i;var y=this.triangulation_.calculateSourceExtent();this.sourceImage_=c(y,_,s),this.sourcePixelRatio_=this.sourceImage_?this.sourceImage_.getPixelRatio():1,this.canvas_=null,this.sourceListenerKey_=null;var v=o.a.LOADED;this.sourceImage_&&(v=o.a.IDLE),n.a.call(this,i,a,this.sourcePixelRatio_,v)};r.a.inherits(c,n.a),c.prototype.disposeInternal=function(){this.state==o.a.LOADING&&this.unlistenSource_(),n.a.prototype.disposeInternal.call(this)},c.prototype.getImage=function(){return this.canvas_},c.prototype.getProjection=function(){return this.targetProj_},c.prototype.reproject_=function(){var t=this.sourceImage_.getState();if(t==o.a.LOADED){var e=l.a.getWidth(this.targetExtent_)/this.targetResolution_,i=l.a.getHeight(this.targetExtent_)/this.targetResolution_;this.canvas_=u.a.render(e,i,this.sourcePixelRatio_,this.sourceImage_.getResolution(),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0)}this.state=t,this.changed()},c.prototype.load=function(){if(this.state==o.a.IDLE){this.state=o.a.LOADING,this.changed();var t=this.sourceImage_.getState();t==o.a.LOADED||t==o.a.ERROR?this.reproject_():(this.sourceListenerKey_=a.a.listen(this.sourceImage_,s.a.CHANGE,function(t){var e=this.sourceImage_.getState();e!=o.a.LOADED&&e!=o.a.ERROR||(this.unlistenSource_(),this.reproject_())},this),this.sourceImage_.load())}},c.prototype.unlistenSource_=function(){a.a.unlistenByKey(this.sourceListenerKey_),this.sourceListenerKey_=null},e.a=c},function(t,e,i){"use strict";var r=i(0),n=i(253),o=i(43),a=i(13),s=i(4),l=i(5),u=i(1),h=i(8),c=i(254),p=function(t){var e=t.imageExtent,i=void 0!==t.crossOrigin?t.crossOrigin:null,r=void 0!==t.imageLoadFunction?t.imageLoadFunction:c.a.defaultImageLoadFunction;c.a.call(this,{attributions:t.attributions,logo:t.logo,projection:h.a.get(t.projection)}),this.image_=new n.a(e,void 0,1,t.url,i,r),this.imageSize_=t.imageSize?t.imageSize:null,s.a.listen(this.image_,l.a.CHANGE,this.handleImageChange,this)};r.a.inherits(p,c.a),p.prototype.getImageInternal=function(t,e,i,r){return u.a.intersects(t,this.image_.getExtent())?this.image_:null},p.prototype.handleImageChange=function(t){if(this.image_.getState()==o.a.LOADED){var e,i,r=this.image_.getExtent(),n=this.image_.getImage();this.imageSize_?(e=this.imageSize_[0],i=this.imageSize_[1]):(e=n.width,i=n.height);var s=u.a.getHeight(r)/i,l=Math.ceil(u.a.getWidth(r)/s);if(l!=e){var h=a.a.createCanvasContext2D(l,i),p=h.canvas;h.drawImage(n,0,0,e,i,0,0,p.width,p.height),this.image_.setImage(p)}}c.a.prototype.handleImageChange.call(this,t)},e.a=p},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=d()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(c.a?c()(t,e):t.__proto__=e)}i.d(e,"a",function(){return R});var a=i(3),s=i.n(a),l=i(37),u=i.n(l),h=i(14),c=i.n(h),p=i(11),d=i.n(p),f=i(15),_=i.n(f),g=i(81),y=i(38),v=i(136),m=i(139),E=i(57),T=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),s()(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),S=function t(e,i,r){null===e&&(e=Function.prototype);var n=u()(e,i);if(void 0===n){var o=_()(e);return null===o?void 0:t(o,i,r)}if("value"in n)return n.value;var a=n.get;if(void 0!==a)return a.call(r)},R=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,e);var i=n(this,(e.__proto__||_()(e)).call(this,t));i._url=t.url,i._projection=t.projection||y.MapProperty.PROJECTION,i._preload=t.preload||E.b.PRELOAD,i._tileSize=t.tileSize||E.b.TILESIZE,i._tilePixelRatio=t.tilePixelRatio||E.b.TILEPIXELRATIO,i._opaque=t.opaque||E.b.OPAQUE,i._tileLoadFunction=t.tileLoadFunction||E.b.TILELOADFUNCTION,i._transition=t.transition||E.b.TRANSITION;var o=t.crossOrigin;return i._olSource=new m.a({url:i._url,projection:i._projection,wrapX:i._wrapX,tileSize:i._tileSize,tilePixelRatio:i._tilePixelRatio,opaque:i._opaque,tileGrid:t.tileGrid,tileLoadFunction:i._tileLoadFunction,tileUrlFunction:t.tileUrlFunction,transition:i._transition,crossOrigin:o}),i._olLayer=new v.a({zIndex:i._zIndex,visible:i._visible,opacity:i._opacity,preload:i._preload,source:i._olSource}),i._setCurrObjToLayer(),i}return o(e,t),T(e,[{key:"destroy",value:function(){this._projection=null,this._tileLoadFunction=null,S(e.prototype.__proto__||_()(e.prototype),"destroy",this).call(this)}}]),e}(g.a)},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=d()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(c.a?c()(t,e):t.__proto__=e)}i.d(e,"a",function(){return T});var a=i(3),s=i.n(a),l=i(37),u=i.n(l),h=i(14),c=i.n(h),p=i(11),d=i.n(p),f=i(15),_=i.n(f),g=i(81),y=i(136),v=i(255),m=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),s()(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),E=function t(e,i,r){null===e&&(e=Function.prototype);var n=u()(e,i);if(void 0===n){var o=_()(e);return null===o?void 0:t(o,i,r)}if("value"in n)return n.value;var a=n.get;if(void 0!==a)return a.call(r)},T=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,e);var i=n(this,(e.__proto__||_()(e)).call(this,t));if(i._url=t.url,i._layer=t.layer,i._tileGrid=t.tileGrid,!(i._url&&i._layer&&t.matrixSet&&i._tileGrid))return n(i);var o=t.style||"default",a=t.crossOrigin;return i._olSource=new v.a({url:i._url,layer:i._layer,style:o,requestEncoding:t.requestEncoding,tilePixelRatio:t.tilePixelRatio,format:t.format,matrixSet:t.matrixSet,tileGrid:i._tileGrid,projection:t.projection,crossOrigin:a}),i._olLayer=new y.a({source:i._olSource,zIndex:i._zIndex,visible:i._visible,opacity:i._opacity,preload:i._preload}),i._setCurrObjToLayer(),i}return o(e,t),m(e,[{key:"destroy",value:function(){this._tileGrid=null,E(e.prototype.__proto__||_()(e.prototype),"destroy",this).call(this)}}]),e}(g.a)},function(t,e,i){"use strict";var r={KVP:"KVP",REST:"REST"};e.a=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(104),n=i(105),o=i(266),a=i(415);i.d(e,"StyleBuilderManager",function(){return r}),i.d(e,"DataBuilderManager",function(){return n}),i.d(e,"LoadIndoorData",function(){return o}),i.d(e,"VIndoorLayer",function(){return a.a})},function(t,e,i){i(208),i(151),i(160),i(392),i(402),i(403),t.exports=i(17).Promise},function(t,e,i){"use strict";var r,n,o,a,s=i(112),l=i(23),u=i(88),h=i(215),c=i(40),p=i(59),d=i(113),f=i(393),_=i(394),g=i(258),y=i(259).set,v=i(398)(),m=i(185),E=i(260),T=i(261),S=l.TypeError,R=l.process,I=l.Promise,x="process"==h(R),C=function(){},O=n=m.f,P=!!function(){try{var t=I.resolve(1),e=(t.constructor={})[i(24)("species")]=function(t){t(C,C)};return(x||"function"==typeof PromiseRejectionEvent)&&t.then(C)instanceof e}catch(t){}}(),L=function(t){var e;return!(!p(t)||"function"!=typeof(e=t.then))&&e},A=function(t,e){if(!t._n){t._n=!0;var i=t._c;v(function(){for(var r=t._v,n=1==t._s,o=0;i.length>o;)!function(e){var i,o,a,s=n?e.ok:e.fail,l=e.resolve,u=e.reject,h=e.domain;try{s?(n||(2==t._h&&F(t),t._h=1),!0===s?i=r:(h&&h.enter(),i=s(r),h&&(h.exit(),a=!0)),i===e.promise?u(S("Promise-chain cycle")):(o=L(i))?o.call(i,l,u):l(i)):u(r)}catch(t){h&&!a&&h.exit(),u(t)}}(i[o++]);t._c=[],t._n=!1,e&&!t._h&&w(t)})}},w=function(t){y.call(l,function(){var e,i,r,n=t._v,o=M(t);if(o&&(e=E(function(){x?R.emit("unhandledRejection",n,t):(i=l.onunhandledrejection)?i({promise:t,reason:n}):(r=l.console)&&r.error&&r.error("Unhandled promise rejection",n)}),t._h=x||M(t)?2:1),t._a=void 0,o&&e.e)throw e.v})},M=function(t){return 1!==t._h&&0===(t._a||t._c).length},F=function(t){y.call(l,function(){var e;x?R.emit("rejectionHandled",t):(e=l.onrejectionhandled)&&e({promise:t,reason:t._v})})},N=function(t){var e=this;e._d||(e._d=!0,e=e._w||e,e._v=t,e._s=2,e._a||(e._a=e._c.slice()),A(e,!0))},b=function(t){var e,i=this;if(!i._d){i._d=!0,i=i._w||i;try{if(i===t)throw S("Promise can't be resolved itself");(e=L(t))?v(function(){var r={_w:i,_d:!1};try{e.call(t,u(b,r,1),u(N,r,1))}catch(t){N.call(r,t)}}):(i._v=t,i._s=1,A(i,!1))}catch(t){N.call({_w:i,_d:!1},t)}}};P||(I=function(t){f(this,I,"Promise","_h"),d(t),r.call(this);try{t(u(b,this,1),u(N,this,1))}catch(t){N.call(this,t)}},r=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},r.prototype=i(399)(I.prototype,{then:function(t,e){var i=O(g(this,I));return i.ok="function"!=typeof t||t,i.fail="function"==typeof e&&e,i.domain=x?R.domain:void 0,this._c.push(i),this._a&&this._a.push(i),this._s&&A(this,!1),i.promise},catch:function(t){return this.then(void 0,t)}}),o=function(){var t=new r;this.promise=t,this.resolve=u(b,t,1),this.reject=u(N,t,1)},m.f=O=function(t){return t===I||t===a?new o(t):n(t)}),c(c.G+c.W+c.F*!P,{Promise:I}),i(116)(I,"Promise"),i(400)("Promise"),a=i(17).Promise,c(c.S+c.F*!P,"Promise",{reject:function(t){var e=O(this);return(0,e.reject)(t),e.promise}}),c(c.S+c.F*(s||!P),"Promise",{resolve:function(t){return T(s&&this===a?I:this,t)}}),c(c.S+c.F*!(P&&i(401)(function(t){I.all(t).catch(C)})),"Promise",{all:function(t){var e=this,i=O(e),r=i.resolve,n=i.reject,o=E(function(){var i=[],o=0,a=1;_(t,!1,function(t){var s=o++,l=!1;i.push(void 0),a++,e.resolve(t).then(function(t){l||(l=!0,i[s]=t,--a||r(i))},n)}),--a||r(i)});return o.e&&n(o.v),i.promise},race:function(t){var e=this,i=O(e),r=i.reject,n=E(function(){_(t,!1,function(t){e.resolve(t).then(i.resolve,r)})});return n.e&&r(n.v),i.promise}})},function(t,e){t.exports=function(t,e,i,r){if(!(t instanceof e)||void 0!==r&&r in t)throw TypeError(i+": incorrect invocation!");return t}},function(t,e,i){var r=i(88),n=i(395),o=i(396),a=i(41),s=i(204),l=i(214),u={},h={},e=t.exports=function(t,e,i,c,p){var d,f,_,g,y=p?function(){return t}:l(t),v=r(i,c,e?2:1),m=0;if("function"!=typeof y)throw TypeError(t+" is not iterable!");if(o(y)){for(d=s(t.length);d>m;m++)if((g=e?v(a(f=t[m])[0],f[1]):v(t[m]))===u||g===h)return g}else for(_=y.call(t);!(f=_.next()).done;)if((g=n(_,v,f.value,e))===u||g===h)return g};e.BREAK=u,e.RETURN=h},function(t,e,i){var r=i(41);t.exports=function(t,e,i,n){try{return n?e(r(i)[0],i[1]):e(i)}catch(e){var o=t.return;throw void 0!==o&&r(o.call(t)),e}}},function(t,e,i){var r=i(89),n=i(24)("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(r.Array===t||o[n]===t)}},function(t,e){t.exports=function(t,e,i){var r=void 0===i;switch(e.length){case 0:return r?t():t.call(i);case 1:return r?t(e[0]):t.call(i,e[0]);case 2:return r?t(e[0],e[1]):t.call(i,e[0],e[1]);case 3:return r?t(e[0],e[1],e[2]):t.call(i,e[0],e[1],e[2]);case 4:return r?t(e[0],e[1],e[2],e[3]):t.call(i,e[0],e[1],e[2],e[3])}return t.apply(i,e)}},function(t,e,i){var r=i(23),n=i(259).set,o=r.MutationObserver||r.WebKitMutationObserver,a=r.process,s=r.Promise,l="process"==i(91)(a);t.exports=function(){var t,e,i,u=function(){var r,n;for(l&&(r=a.domain)&&r.exit();t;){n=t.fn,t=t.next;try{n()}catch(r){throw t?i():e=void 0,r}}e=void 0,r&&r.enter()};if(l)i=function(){a.nextTick(u)};else if(!o||r.navigator&&r.navigator.standalone)if(s&&s.resolve){var h=s.resolve();i=function(){h.then(u)}}else i=function(){n.call(r,u)};else{var c=!0,p=document.createTextNode("");new o(u).observe(p,{characterData:!0}),i=function(){p.data=c=!c}}return function(r){var n={fn:r,next:void 0};e&&(e.next=n),t||(t=n,i()),e=n}}},function(t,e,i){var r=i(65);t.exports=function(t,e,i){for(var n in e)i&&t[n]?t[n]=e[n]:r(t,n,e[n]);return t}},function(t,e,i){"use strict";var r=i(23),n=i(17),o=i(58),a=i(60),s=i(24)("species");t.exports=function(t){var e="function"==typeof n[t]?n[t]:r[t];a&&e&&!e[s]&&o.f(e,s,{configurable:!0,get:function(){return this}})}},function(t,e,i){var r=i(24)("iterator"),n=!1;try{var o=[7][r]();o.return=function(){n=!0},Array.from(o,function(){throw 2})}catch(t){}t.exports=function(t,e){if(!e&&!n)return!1;var i=!1;try{var o=[7],a=o[r]();a.next=function(){return{done:i=!0}},o[r]=function(){return a},t(o)}catch(t){}return i}},function(t,e,i){"use strict";var r=i(40),n=i(17),o=i(23),a=i(258),s=i(261);r(r.P+r.R,"Promise",{finally:function(t){var e=a(this,n.Promise||o.Promise),i="function"==typeof t;return this.then(i?function(i){return s(e,t()).then(function(){return i})}:t,i?function(i){return s(e,t()).then(function(){throw i})}:t)}})},function(t,e,i){"use strict";var r=i(40),n=i(185),o=i(260);r(r.S,"Promise",{try:function(t){var e=n.f(this),i=o(t);return(i.e?e.reject:e.resolve)(i.v),e.promise}})},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=c()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(u.a?u()(t,e):t.__proto__=e)}i.d(e,"a",function(){return R});var a=i(3),s=i.n(a),l=i(14),u=i.n(l),h=i(11),c=i.n(h),p=i(15),d=i.n(p),f=i(262),_=i(186),g=i(10),y=i(82),v=i(405),m=i(406),E=i(408),T=i(187),S=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),s()(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),R=function(t){function e(t){r(this,e);var i=n(this,(e.__proto__||d()(e)).call(this));return i._styleManager=t||null,i.addParsers(e.parsersArray_),i}return o(e,t),S(e,[{key:"load",value:function(t){if(g.l(t)){var e=JSON.parse(t);if(null!==e)return this.parser(e)}else if(null!==t)return this.parser(t);return!1}}],[{key:"parserLayers",value:function(t,i){for(var r=0;r<i.length;r++){var n=i[r];if(n.hasOwnProperty(e.keyList.KEY_LAYER_TYPE)&&g.l(n[e.keyList.KEY_LAYER_TYPE])){var o=n[e.keyList.KEY_LAYER_TYPE],a=e.createStyleParser(o,null);if(null!==a&&a.parser(n)){var s=a.getStyle();if(null===s)return console.log("Parser parserLayers error!"),!1;t._styleManager.addStyle(s.get("id"),s)}}}return!0}},{key:"parserTextures",value:function(t,i){return g.g(i)&&e.parserTextures_atlas(t,i),!0}},{key:"parserTextures_atlas",value:function(t,i){i.forEach(function(i){i.hasOwnProperty("name")&&g.l(i.name)&&i.hasOwnProperty("url")&&g.l(i.url)&&i.hasOwnProperty("sprites")&&g.g(i.sprites)&&e.parserTextureAtlasItem(t,i)})}},{key:"parserTextureAtlasItem",value:function(t,e){var i=new v.a(e.url);e.sprites.forEach(function(t){var e=new v.b;e.parseData(t)&&i.addSprite(e)}),t._styleManager.addAtlasImage(e.name,i)}},{key:"createStyleParser",value:function(t,e){switch(t){case T.a.FILL:return new m.a(e);case T.a.SYMBOL:return new E.a(e)}return new _.a(e)}}]),e}(f.a);R.parsersArray_=[{must:!0,key:"layers",type:y.a.DT_ARRAY,parserHandler:R.parserLayers},{must:!0,key:"textures",type:y.a.DT_ARRAY,parserHandler:R.parserTextures}],R.keyList={KEY_LAYER_TYPE:"type"}},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}i.d(e,"b",function(){return h}),i.d(e,"a",function(){return c});var n=i(31),o=i.n(n),a=i(3),s=i.n(a),l=i(10),u=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),s()(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),h=function(){function t(){r(this,t),this._origin=null,this._size=null,this._materials=null}return u(t,[{key:"parseData",value:function(t){if(!t.hasOwnProperty("materials")||!t.hasOwnProperty("rect"))return!1;this._materials=t.materials;var e=t.rect;return this._origin=[e[0],e[1]],this._size=[e[2],e[3]],!0}},{key:"getRect",value:function(){return{origin:this._origin,size:this._size}}},{key:"isExistByMaterial",value:function(t){return l.g(this._materials)?this._materials.indexOf(t)>-1:!!l.j(this._materials)&&this._materials===t}}]),t}(),c=function(){function t(e){r(this,t),this._url=e,this._image=null,this._sprites=[],this._rectAccelerator={}}return u(t,[{key:"addSprite",value:function(t){t instanceof h&&this._sprites.push(t)}},{key:"setImage",value:function(t){this._image=t}},{key:"getImage",value:function(){return this._image}},{key:"getSprite",value:function(t){var e=this._getFromAccelerator(t);if(e)return e;var i=!0,r=!1,n=void 0;try{for(var a,s=o()(this._sprites);!(i=(a=s.next()).done);i=!0){var l=a.value;if(l.isExistByMaterial(t))return e=l.getRect(),this._addToAccelerator(t,e),e}}catch(t){r=!0,n=t}finally{try{!i&&s.return&&s.return()}finally{if(r)throw n}}return null}},{key:"_addToAccelerator",value:function(t,e){this._rectAccelerator[t]=e}},{key:"_getFromAccelerator",value:function(t){return this._rectAccelerator.hasOwnProperty(t)?this._rectAccelerator[t]:null}},{key:"clear",value:function(){this._image=null,this._sprites=[],this._rectAccelerator={}}}]),t}()},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=c()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(u.a?u()(t,e):t.__proto__=e)}i.d(e,"a",function(){return E});var a=i(3),s=i.n(a),l=i(14),u=i.n(l),h=i(11),c=i.n(h),p=i(15),d=i.n(p),f=i(186),_=i(10),g=i(22),y=i(82),v=i(407),m=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),s()(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),E=function(t){function e(t){r(this,e),t=t||new v.a;var i=n(this,(e.__proto__||d()(e)).call(this,t));return i.addPaintParser(e.linePaint_),i}return o(e,t),m(e,null,[{key:"setLineWidth",value:function(t,e){return null!==t._style&&(_.k(e)&&e.hasOwnProperty("base")?(t._style.set("lineWidth",e.base),!0):(g.a("style setLineWidth error!"),!1))}},{key:"setFillColor",value:function(t,e){return null!==t._style&&(t._style.set("fillColor",e),!0)}},{key:"setLineColor",value:function(t,e){return null!==t._style&&(t._style.set("lineColor",e),!0)}},{key:"setFillOpacityOnlyBase",value:function(t,e){return null!==t._style&&(_.j(e)?(t._style.set("fillOpacity",e),!0):(g.a("style setFillOpacity error!"),!1))}},{key:"setTexture",value:function(t,e){return null!==t._style&&(t._style.set("texture",e),!0)}}]),e}(f.a);E.linePaint_=[{must:!1,key:"fill-color",type:y.a.DT_STR,parserHandler:E.setFillColor},{must:!1,key:"fill-opacity",type:y.a.DT_NUMBER,parserHandler:E.setFillOpacityOnlyBase},{must:!1,key:"line-color",type:y.a.DT_STR,parserHandler:E.setLineColor},{must:!1,key:"line-width",type:y.a.DT_OBJ,parserHandler:E.setLineWidth},{must:!1,key:"texture",type:y.a.DT_STR,parserHandler:E.setTexture}]},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=c()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(u.a?u()(t,e):t.__proto__=e)}i.d(e,"a",function(){return y});var a=i(3),s=i.n(a),l=i(14),u=i.n(l),h=i(11),c=i.n(h),p=i(15),d=i.n(p),f=i(263),_=i(187),g=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),s()(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),y=function(t){function e(){r(this,e);var t=n(this,(e.__proto__||d()(e)).call(this));return t.set("fillOpacity",1),t.set("fillColor","#ffffff"),t.set("lineColor","#ffffff"),t.set("lineWidth",0),t.set("texture",""),t}return o(e,t),g(e,[{key:"getType",value:function(){return _.a.FILL}}]),e}(f.a)},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=c()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(u.a?u()(t,e):t.__proto__=e)}i.d(e,"a",function(){return E});var a=i(3),s=i.n(a),l=i(14),u=i.n(l),h=i(11),c=i.n(h),p=i(15),d=i.n(p),f=i(186),_=i(10),g=i(22),y=i(82),v=i(409),m=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),s()(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),E=function(t){function e(t){r(this,e),null===t&&(t=new v.a);var i=n(this,(e.__proto__||d()(e)).call(this,t));return i.addLayoutParser(e.lineLayout_),i.addPaintParser(e.linePaint_),i}return o(e,t),m(e,null,[{key:"setIconOpacity",value:function(t,e){return null!==t._style&&(e>=0&&e<=1?(t._style.set("iconOpacity",e),!0):(g.a("symbol setIconOpacity error!"),!1))}},{key:"setIconImage",value:function(t,e){return null!==t._style&&(t._style.set("iconImage",e),!0)}},{key:"setSpriteSize",value:function(t,e){return null!==t._style&&(_.k(e)&&e.hasOwnProperty("base")?(t._style.set("iconSize",e.base),!0):(g.a("style setSpriteSize error!"),!1))}},{key:"setTextAnchor",value:function(t,e){return null!==t._style&&(_.g(e)?(t._style.set("textAnchors",e),!0):(g.a("symbol setTextAnchor error!"),!1))}}]),e}(f.a);E.linePaint_=[{must:!1,key:"icon-opacity",type:y.a.DT_NUMBER,parserHandler:E.setIconOpacity}],E.lineLayout_=[{must:!1,key:"icon-image",type:y.a.DT_STR,parserHandler:E.setIconImage},{must:!1,key:"icon-size",type:y.a.DT_OBJ,parserHandler:E.setSpriteSize},{must:!1,key:"text-anchor",type:y.a.DT_ARRAY,parserHandler:E.setTextAnchor}]},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=c()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(u.a?u()(t,e):t.__proto__=e)}i.d(e,"a",function(){return y});var a=i(3),s=i.n(a),l=i(14),u=i.n(l),h=i(11),c=i.n(h),p=i(15),d=i.n(p),f=i(263),_=i(187),g=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),s()(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),y=function(t){function e(){r(this,e);var t=n(this,(e.__proto__||d()(e)).call(this));return t.set("iconImage",""),t.set("iconSize",null),t.set("textAnchors",null),t.set("iconOpacity",1),t}return o(e,t),g(e,[{key:"getType",value:function(){return _.a.SYMBOL}}]),e}(f.a)},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}i.d(e,"a",function(){return y});var n=i(3),o=i.n(n),a=i(31),s=i.n(a),l=i(141),u=i.n(l),h=i(230),c=i.n(h),p=i(411),d=i(22),f=i(412),_=i(188),g=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),o()(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),y=function(){function t(){r(this,t),this._styleMap={},this._styleTypeMap={},this._styleAtlasMap={},this._styleAccelerator={}}return g(t,[{key:"getStyle",value:function(t){return this._styleMap.hasOwnProperty(t)?this._styleMap[t]:null}},{key:"addStyle",value:function(t,e){this._styleMap[t]=e,this._styleTypeMap.hasOwnProperty(e.getType())||(this._styleTypeMap[e.getType()]=[]),this._styleTypeMap[e.getType()].push(e)}},{key:"_getStyleByType",value:function(t){return this._styleTypeMap.hasOwnProperty(t)?this._styleTypeMap[t]:null}},{key:"getStyleByFilter",value:function(t,e,i){var r=this._getFromAccelerator(t,e,i);if(r)return r;var n=this._getStyleByType(t);if(null==n)return null;for(var o=0;o<n.length;o++){var a=n[o];if(a.get("sourceLayer")===e){var s=a.getFilter();if(!s)return d.b("style filter is null"),this._addToAccelerator(t,e,i,a),a;if(Object(f.a)(i,s))return this._addToAccelerator(t,e,i,a),a}}return null}},{key:"addAtlasImage",value:function(t,e){this._styleAtlasMap[t]=e}},{key:"getStyleAtlas",value:function(t){return this._styleAtlasMap.hasOwnProperty(t)?this._styleAtlasMap[t]:null}},{key:"isExistAtlas",value:function(){return 0!==c()(this._styleAtlasMap).length}},{key:"_preloadAtlas",value:function(){var t=this,e=[],i=Object(_.a)();for(var r in this._styleAtlasMap){var n=this._styleAtlasMap[r],o=i+"/"+n._url;e.push(Object(p.a)(r,o))}return u.a.all(e).then(function(e){var i=!0,r=!1,n=void 0;try{for(var o,a=s()(e);!(i=(o=a.next()).done);i=!0){var l=o.value;if(t._styleAtlasMap.hasOwnProperty(l.name)){t._styleAtlasMap[l.name].setImage(l.image)}}}catch(t){r=!0,n=t}finally{try{!i&&a.return&&a.return()}finally{if(r)throw n}}return!0}).catch(function(t){return d.a(t),!1})}},{key:"_addToAccelerator",value:function(t,e,i,r){var n=t;n+=e,n+=this._getStringKey(i),this._styleAccelerator[n]=r}},{key:"_getStringKey",value:function(t){var e="";return c()(t).forEach(function(i){if(["category"].indexOf(i)>-1)return void(e+=i+t[i])}),e}},{key:"_getFromAccelerator",value:function(t,e,i){var r=t;return r+=e,r+=this._getStringKey(i),this._styleAccelerator.hasOwnProperty(r)?this._styleAccelerator[r]:null}},{key:"clear",value:function(){this._styleMap={},this._styleTypeMap={},this._styleAccelerator={};for(var t in this._styleAtlasMap){this._styleAtlasMap[t].clear()}this._styleAtlasMap={}}}]),t}()},function(t,e,i){"use strict";function r(t,e){return new o.a(function(i,r){var n=new Image;n.onload=function(){i({name:t,image:n})},n.onerror=function(t){r(t)},n.src=e})}i.d(e,"a",function(){return r});var n=i(141),o=i.n(n)},function(t,e,i){"use strict";function r(t,e){if(!n.g(e))return o.a("style filter is not array!"),!1;var i=e[0];if(a.indexOf(i)>-1){var u=i===a[0],h=1;if(u){for(;h<e.length;h++)if(!r(t,e[h]))return!1;if(h===e.length)return!0}else{for(;h<e.length;h++)if(r(t,e[h]))return!0;if(h===e.length)return!1}}else{if(s.indexOf(i)>-1){if(!t.hasOwnProperty(e[1])||!n.g(e[2]))return!1;var c=i===s[0],p=t[e[1]],d=Number(p);isNaN(d)||(p=d);var f=e[2].indexOf(p);return!!(c&&f>-1)||!c&&f<0}if(l.indexOf(i)>-1){if(!t.hasOwnProperty(e[1])||!n.j(e[2]))return!1;var _=t[e[1]],g=Number(_);switch(isNaN(g)||(_=g),i){case l[0]:if(_>e[2])return!0;break;case l[1]:if(_>=e[2])return!0;break;case l[2]:if(_<e[2])return!0;break;case l[3]:if(_<=e[2])return!0;break;case l[4]:if(_===e[2])return!0;break;case l[5]:if(_!==e[2])return!0}return!1}}return o.c("filter operation is not known"),!1}i.d(e,"a",function(){return r});var n=i(10),o=i(22),a=["all","or"],s=["in","!in"],l=[">",">=","<","<=","==","!="]},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}i.d(e,"a",function(){return u});var n=i(3),o=i.n(n),a=i(22),s=i(143),l=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),o()(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),u=function(){function t(e){r(this,t),this.bdId=e,this.floorInfo=[],this.isFloorInfoSorted=!1,this.floorFeatures={}}return l(t,[{key:"addFlInfo",value:function(t){if(t.hasOwnProperty("geometry")&&t.hasOwnProperty("properties")){var e=t.properties;if(e.hasOwnProperty(s.a.FlId)&&e.hasOwnProperty("fl_name")&&e.hasOwnProperty("floornum")){var i=e[s.a.FlId],r={floorId:i,floorNum:e.floornum,floorName:e.fl_name};this.floorInfo.push(r),this.floorFeatures.hasOwnProperty(i)||(this.floorFeatures[i]={},this.floorFeatures[i][s.b.FlInfo]=[]);this.floorFeatures[i][s.b.FlInfo].push(t)}else a.a("floor properties lack keyField")}else a.a("add flInfo error")}},{key:"addOtherInfo",value:function(t,e){if(e.hasOwnProperty("geometry")&&e.hasOwnProperty("properties")){var i=e.properties;if(i.hasOwnProperty(s.a.FlId)){var r=i[s.a.FlId];this.floorFeatures.hasOwnProperty(r)||(this.floorFeatures[r]={}),this.floorFeatures[r].hasOwnProperty(t)||(this.floorFeatures[r][t]=[]);this.floorFeatures[r][t].push(e)}else a.a("floor properties lack keyField")}else a.a("add flInfo error")}},{key:"getFlInfo",value:function(){return this.isFloorInfoSorted||(this.floorInfo.sort(function(t,e){return t.floorNum-e.floorNum}),this.isFloorInfoSorted=!0),this.floorInfo}},{key:"getFeatureData",value:function(t,e){var i=void 0;return t&&this.floorFeatures.hasOwnProperty(t)?(i=this.floorFeatures[t],e&&i.hasOwnProperty(e)&&(i=i[e])):a.a("flId is unknown!"),i}},{key:"clear",value:function(){this.bdId=null,this.floorInfo=[],this.isFloorInfoSorted=!1,this.floorFeatures={}}}]),t}()},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}i.d(e,"a",function(){return h});var n=i(3),o=i.n(n),a=i(10),s=i(22),l=i(143),u=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),o()(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),h=function(){function t(e){r(this,t),this._dataManager=e}return u(t,[{key:"load",value:function(t){if(a.l(t)){var e=JSON.parse(t);if(null!==e)return this.readFeaturesFromObject(e)}else if(null!==t)return this.readFeaturesFromObject(t);return!1}},{key:"readFeaturesFromObject",value:function(e,i){var r=void 0,n=null,o=null;e.transform&&(r=e.transform,n=r.scale,o=r.translate);var a=e.arcs;r&&t._transformArcs(a,n,o);var u=e.objects,h=void 0,c=void 0;if(!u.hasOwnProperty(l.b.FlInfo))return s.a("topojson not have fl_info!"),!1;"GeometryCollection"===u[l.b.FlInfo].type?(c=u[l.b.FlInfo],this._readFeaturesFromGeometryCollection(c,a,n,o,l.b.FlInfo,i)):(c=u[l.b.FlInfo],this._readFeatureFromGeometry(c,a,n,o,l.b.FlInfo,i));for(h in u)l.b.FlInfo!==h&&l.b.MPoiInfo!==h&&("GeometryCollection"===u[h].type?(c=u[h],this._readFeaturesFromGeometryCollection(c,a,n,o,h,i)):(c=u[h],this._readFeatureFromGeometry(c,a,n,o,h,i)));return!0}},{key:"_readFeaturesFromGeometryCollection",value:function(t,e,i,r,n,o){var a=t.geometries,s=void 0,l=void 0;for(s=0,l=a.length;s<l;++s)this._readFeatureFromGeometry(a[s],e,i,r,n,o)}},{key:"_readFeatureFromGeometry",value:function(e,i,r,n,o){var a=void 0,s=e.type,u=t.GEOMETRY_READERS[s];a="Point"===s||"MultiPoint"===s?u(e,r,n):u(e,i);var h=e.properties,c={geometry:{type:s,coordinates:a},properties:h};if(l.b.FlInfo===o)return void this._dataManager.addFlInfo(c);this._dataManager.addOtherInfo(o,c)}}],[{key:"_readPointGeometry",value:function(e,i,r){var n=e.coordinates;return i&&r&&t._transformVertex(n,i,r),n}},{key:"_readMultiPointGeometry",value:function(e,i,r){var n=e.coordinates,o=void 0,a=void 0;if(i&&r)for(o=0,a=n.length;o<a;++o)t._transformVertex(n[o],i,r);return n}},{key:"_readLineStringGeometry",value:function(e,i){return t._concatenateArcs(e.arcs,i)}},{key:"_readMultiLineStringGeometry",value:function(e,i){var r=[],n=void 0,o=void 0;for(n=0,o=e.arcs.length;n<o;++n)r[n]=t._concatenateArcs(e.arcs[n],i);return r}},{key:"_readPolygonGeometry",value:function(e,i){var r=[],n=void 0,o=void 0;for(n=0,o=e.arcs.length;n<o;++n)r[n]=t._concatenateArcs(e.arcs[n],i);return r}},{key:"_readMultiPolygonGeometry",value:function(e,i){var r=[],n=void 0,o=void 0,a=void 0,s=void 0,l=void 0,u=void 0;for(l=0,u=e.arcs.length;l<u;++l){for(n=e.arcs[l],o=[],a=0,s=n.length;a<s;++a)o[a]=t._concatenateArcs(n[a],i);r[l]=o}return r}},{key:"_transformArcs",value:function(e,i,r){var n=void 0,o=void 0;for(n=0,o=e.length;n<o;++n)t._transformArc(e[n],i,r)}},{key:"_transformArc",value:function(e,i,r){var n=0,o=0,a=void 0,s=void 0,l=void 0;for(s=0,l=e.length;s<l;++s)a=e[s],n+=a[0],o+=a[1],a[0]=n,a[1]=o,t._transformVertex(a,i,r)}},{key:"_transformVertex",value:function(t,e,i){t[0]=t[0]*e[0]+i[0],t[1]=t[1]*e[1]+i[1]}},{key:"_concatenateArcs",value:function(t,e){var i=[],r=void 0,n=void 0,o=void 0,a=void 0,s=void 0,l=void 0;for(o=0,a=t.length;o<a;++o)r=t[o],o>0&&i.pop(),n=r>=0?e[r]:e[~r].slice().reverse(),i.push.apply(i,n);for(s=0,l=i.length;s<l;++s)i[s]=i[s].slice();return i}}]),t}();h.GEOMETRY_READERS={Point:h._readPointGeometry,LineString:h._readLineStringGeometry,Polygon:h._readPolygonGeometry,MultiPoint:h._readMultiPointGeometry,MultiLineString:h._readMultiLineStringGeometry,MultiPolygon:h._readMultiPolygonGeometry}},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=d()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(c.a?c()(t,e):t.__proto__=e)}i.d(e,"a",function(){return b});var a=i(3),s=i.n(a),l=i(37),u=i.n(l),h=i(14),c=i.n(h),p=i(11),d=i.n(p),f=i(31),_=i.n(f),g=i(15),y=i.n(g),v=i(22),m=i(176),E=i(416),T=i(418),S=i(453),R=i(276),I=i(142),x=i(188),C=i(266),O=i(105),P=i(104),L=i(143),A=i(108),w=i(196),M=i(455),F=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),s()(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),N=function t(e,i,r){null===e&&(e=Function.prototype);var n=u()(e,i);if(void 0===n){var o=y()(e);return null===o?void 0:t(o,i,r)}if("value"in n)return n.value;var a=n.get;if(void 0!==a)return a.call(r)},b=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=t.map,o=t.buildingId,a=t.floorId,s=t.zoomRange,l=void 0===s?{}:s,u=t.styleType,h=void 0===u?"dark":u,c=t.languageType,p=void 0===c?A.LanguageType.CHINESE:c,d=t.isShowFloorControl,f=void 0===d||d,_=t.displayRegion,g=void 0!==_&&_,v=t.hasPoi,m=void 0===v||v;r(this,e);var E=n(this,(e.__proto__||y()(e)).call(this));return E._map=i,E._showBdId=o,E._showFlId=a,E._languageType=p,E._styleType=h,E._isShowFlCtrl=f,E._poiRender=null,E._polygonFloor=null,E._polygonRoom=null,E._polygonFurniture=null,E._dataManager=null,E._maxShowZoom=l.maxZoom||I.c.indoorZoomMax,E._minShowZoom=l.minZoom||I.c.indoorZoomMin,E._displayRegion=g,E._hasPoi=m,E}return o(e,t),F(e,[{key:"loadIndoor",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this._showBdId)return void v.a("buildingId is null!");var i=Object(x.d)(this._showBdId),r=Object(x.c)(this._styleType);if(""===r)return void v.a("styleUrl is null!");Object(C.loadIndoorData)({bdId:this._showBdId,buildingUrl:i},{type:this._styleType,styleUrl:r}).then(function(i){return i[0]?i[1]?(t._initShowFloor(),t._renderIndoor(e),t._createFloorCtrl(),void t.fire(M.a.LOAD,{bdId:t._showBdId,styleType:t._styleType})):void v.a("load style failed!"):void v.a("load topojson failed!")})}},{key:"setPoiVisible",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._hasPoi=void 0===t.visible||t.visible,this._hasPoi?this._renderPoi(t):this._poiRender&&this._poiRender.clearData&&(this._poiRender.clearData(),this._poiRender=null)}},{key:"switchShowFloor",value:function(t,e){t!==this._showFlId&&(this._showFlId=t,this._showFlNum=e,e||this._initShowFloor(),this._clearData(),this._renderIndoor(),this._createFloorCtrl(),this.fire(M.a.SWITCHFLOOR,{bdId:this._showBdId,flId:this._showFlId,floorNum:this._showFlNum}))}},{key:"switchShowBuilding",value:function(t,e){t!==this._showBdId?(this._showBdId=t,this._showFlId=e,this._clearData(),this.loadIndoor()):this.switchShowFloor(e)}},{key:"switchLangauge",value:function(t){this._languageType!==t&&(this._languageType=t,Object(A.setI18n)(t),this._clearData(),this._renderIndoor())}},{key:"updateIndoorStyle",value:function(t){this._styleType!==t&&(this._styleType=t,this._isShowFlCtrl&&this._floorControl,this._clearData(),this._renderIndoor())}},{key:"getBuildingFloorInfo",value:function(){this._dataManager=O.getIndoorDataManager(this._showBdId);var t=this._dataManager.getFlInfo();return t&&0!==t.length?t:(v.a("!"),[])}},{key:"getBuildInfo",value:function(){return{bdId:this._showBdId,flId:this._showFlId,floorNum:this._showFlNum}}},{key:"on",value:function(t,i,r){if(r){var n=t+r;N(e.prototype.__proto__||y()(e.prototype),"addEventListener",this).call(this,n,i)}else N(e.prototype.__proto__||y()(e.prototype),"addEventListener",this).call(this,t,i)}},{key:"off",value:function(t,i,r){if(r&&t){var n=t+r;N(e.prototype.__proto__||y()(e.prototype),"removeEventListener",this).call(this,n,i)}else N(e.prototype.__proto__||y()(e.prototype),"removeEventListener",this).call(this,t,i)}},{key:"once",value:function(t,i,r){if(r){var n=t+r;N(e.prototype.__proto__||y()(e.prototype),"once",this).call(this,n,i)}else N(e.prototype.__proto__||y()(e.prototype),"once",this).call(this,t,i)}},{key:"_renderIndoor",value:function(t){this._renderFloor(t),this._renderRegion(t),this._renderFurniture(t),this._hasPoi&&this._renderPoi(t)}},{key:"_createFloorCtrl",value:function(){var t=this;if(this._isShowFlCtrl){var e=function(e){t.switchShowFloor(e.flId,e.flNum)};this._floorControl||(this._floorControl=new E.a({showBuildingId:this._showBdId,showFloorId:this._showFlId,callBackFunc:e}),this._map.addControl([this._floorControl])),this._floorControl&&this._floorControl.setDisplayFloor({buildingId:this._showBdId,floorId:this._showFlId})}}},{key:"_initShowFloor",value:function(){for(var t=this.getBuildingFloorInfo(),e=this._showFlId,i=void 0,r=0;r<t.length;r++)if(e){if(t[r].floorId===e){i=t[r].floorNum;break}}else if(t[r].floorNum>0){e=t[r].floorId,i=t[r].floorNum;break}e||(e=t[0].floorId,i=t[0].floorNum),this._showFlId=e,this._showFlNum=i}},{key:"_isEvent",value:function(t){var e=this,i=M.a.CLICK+t,r=function(t){return!!e.hasOn(i)&&(e.fire(i,t),!0)},n=M.a.POINTEROVER+t,o=function(t){return!!e.hasOn(n)&&(e.fire(n,t),!0)},a=M.a.POINTEROUT+t;return{click:r,pointerover:o,pointerout:function(t){return!!e.hasOn(a)&&(e.fire(a,t),!0)}}}},{key:"_renderPoi",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._hasPoi){if(!this._poiRender){var i=this._isEvent("poi"),r={maxShow:e.maxShowZoom||this._maxShowZoom,minShow:e.minShowZoom||this._minShowZoom,styleType:this._styleType,zIndex:e.zIndex,poiEvent:i};this._poiRender=new S.a(r),this._poiRender.addLayer(this._map),this._zoomChangeEvent()}this._poiRender.clearData();var n=function(e){t._poiRender.render(e.datas)},o={map:this._map,buildId:this._showBdId,floorId:this._showFlId,styleType:this._styleType,languageType:this._languageType,callBack:n};Object(R.a)(o)}}},{key:"_renderFloor",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.zIndex,i=void 0===e?I.b.flZIndex:e,r=t.minShowZoom,n=t.maxShowZoom;if(!this._polygonFloor){var o={layerName:L.b.FlInfo,zIndex:i,minShowLevel:r||this._minShowZoom||I.c.indoorZoomMin,maxShowLevel:n||this._maxShowZoom||I.c.indoorZoomMax,styleType:this._styleType,languageType:this._languageType,map:this._map,displayRegion:this._displayRegion};this._polygonFloor=new T.a(o),this._polygonFloor.addLayer()}this._polygonFloor._languageType=Object(A.getI18n)();var a=this._dataManager.getFeatureData(this._showFlId,L.b.FlInfo);this._polygonFloor.setLayerData(a)}},{key:"_renderRegion",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.zIndex,i=void 0===e?I.b.regionZIndex:e,r=t.minShowZoom,n=t.maxShowZoom;if(!this._polygonRoom){var o=this._isEvent("region"),a={layerName:L.b.RegionInfo,zIndex:i,minShowLevel:r||this._minShowZoom||I.c.indoorZoomMin,maxShowLevel:n||this._maxShowZoom||I.c.indoorZoomMax,styleType:this._styleType,bdId:this._showBdId,flId:this._showFlId,languageType:this._languageType,map:this._map,displayRegion:this._displayRegion,regionEvent:o};this._polygonRoom=new T.a(a),this._polygonRoom.addLayer()}this._polygonRoom._languageType=Object(A.getI18n)();var s=this._dataManager.getFeatureData(this._showFlId,L.b.RegionInfo);this._polygonRoom.setLayerData(s)}},{key:"_renderFurniture",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.zIndex,i=void 0===e?I.b.subZIndex:e,r=t.minShowZoom,n=t.maxShowZoom;if(!this._polygonFurniture){var o={layerName:L.b.RegionSub,zIndex:i,minShowLevel:r||I.c.subMinShowLevel||this._minShowZoom,maxShowLevel:n||I.c.indoorZoomMax||this._maxShowZoom,styleType:this._styleType,bdId:this._showBdId,flId:this._showFlId,languageType:this._languageType,map:this._map,displayRegion:this._displayRegion};this._polygonFurniture=new T.a(o),this._polygonFurniture.addLayer()}this._polygonFurniture._languageType=Object(A.getI18n)();var a=this._dataManager.getFeatureData(this._showFlId,L.b.RegionSub);this._polygonFurniture.setLayerData(a)}},{key:"_zoomChangeEvent",value:function(){var t=this,e=void 0,i=this._map.on(w.c.MOVEEND,function(){var i=t._map.getZoom();e!==i&&(t._renderPoi(),e=i),t._minShowZoom&&t._minShowZoom>i||t._maxShowZoom&&t._maxShowZoom<i?t._floorControl&&t._floorControl.setFloorCtrlShow(!1):t._floorControl.setFloorCtrlShow(!0)});if(this._mapEventKeys){var r=!0,n=!1,o=void 0;try{for(var a,s=_()(i);!(r=(a=s.next()).done);r=!0){var l=a.value;this._mapEventKeys.push(l)}}catch(t){n=!0,o=t}finally{try{!r&&s.return&&s.return()}finally{if(n)throw o}}}else this._mapEventKeys=i}},{key:"_clearData",value:function(){this._poiRender&&this._poiRender.clearData(),this._polygonFloor&&this._polygonFloor.clearData(),this._polygonRoom&&this._polygonRoom.clearData(),this._polygonFurniture&&this._polygonFurniture.clearData()}},{key:"_removeAllEvent",value:function(){if(this.off(),this._mapEventKeys){var t=!0,e=!1,i=void 0;try{for(var r,n=_()(this._mapEventKeys);!(t=(r=n.next()).done);t=!0){var o=r.value;this._map.off(o.type,o.fn,o.ctx)}}catch(t){e=!0,i=t}finally{try{!t&&n.return&&n.return()}finally{if(e)throw i}}this._mapEventKeys={}}}},{key:"destroy",value:function(){this._removeAllEvent(),this._isShowFlCtrl&&this._floorControl&&(this._map.removeControl([this._floorControl]),this._floorControl=null),this._poiRender&&(this._poiRender.destroy(),this._poiRender=null),this._polygonFloor&&(this._polygonFloor.destroy(),this._polygonFloor=null),this._polygonRoom&&(this._polygonRoom.destroy(),this._polygonRoom=null),this._polygonFurniture&&(this._polygonFurniture.destroy(),this._polygonFurniture=null),this._map=null}}],[{key:"removeAllCache",value:function(){O.clear(),P.clear()}}]),e}(m.a)},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=d()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(c.a?c()(t,e):t.__proto__=e)}i.d(e,"a",function(){return C});var a=i(3),s=i.n(a),l=i(37),u=i.n(l),h=i(14),c=i.n(h),p=i(11),d=i.n(p),f=i(31),_=i.n(f),g=i(15),y=i.n(g),v=i(29),m=i(4),E=i(102),T=i(22),S=i(417),R=i(105),I=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),s()(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),x=function t(e,i,r){null===e&&(e=Function.prototype);var n=u()(e,i);if(void 0===n){var o=y()(e);return null===o?void 0:t(o,i,r)}if("value"in n)return n.value;var a=n.get;if(void 0!==a)return a.call(r)},C=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=t.target,o=t.className,a=t.showBuildingId,s=t.showFloorId,l=t.callBackFunc;r(this,e),o=o||"ol-switch-floor";var u=E.b("div",o),h={target:i,element:u},c=n(this,(e.__proto__||y()(e)).call(this,h));return c._showBuildingId=a,c._showFloorId=s,c._switchFloorFun=l,c}return o(e,t),I(e,[{key:"setMap",value:function(t){x(e.prototype.__proto__||y()(e.prototype),"setMap",this).call(this,t),t?(this._buildingFloorInfo={},this._createFloorCtrl()):this._destroy()}},{key:"_initBuildingFloor",value:function(){if(!this._showBuildingId)return!1;var t=R.getIndoorDataManager(this._showBuildingId),e=t.getFlInfo();return e&&0!==e.length?(this._buildingFloorInfo={bd_id:t.bdId,floors:e},!0):(T.a("!"),!1)}},{key:"_createFloorCtrl",value:function(){if(!this._initBuildingFloor())return void T.a("create floorCtrl failed!");var t=this._buildingFloorInfo;this._curFloorIndex=this._getFloorIndexByFlId(t,this._showFloorId);var e=this._getCtrlIndex(t),i=e.displayStart,r=e.dispalyEnd,n=E.b("ul"),o=E.b("li");o.flag="up",this.listenerKeys.push(m.a.listen(o,"click",this._onfloorclick,this)),n.appendChild(o);for(var a=t.floors,s=a.length-1;s>=0;s--){var l=E.b("li");l.innerText=a[s].floorName,l.data_id=a[s].floorId,l.index=s,(s>r||s<i)&&(l.style.display="none"),this.listenerKeys.push(m.a.listen(l,"click",this._onfloorclick,this)),n.appendChild(l)}var u=E.b("li");u.flag="down",this.listenerKeys.push(m.a.listen(u,"click",this._onfloorclick,this)),n.appendChild(u),this.element.appendChild(n),0===this._curFloorIndex&&E.a(u,S.a.DISABLEDOWN),this._curFloorIndex===a.length-1&&E.a(o,S.a.DISABLEUP);var h=this.element.querySelectorAll("ul>li"),c=a.length-this._curFloorIndex;E.a(h[c],S.a.SELECTED)}},{key:"_getFloorIndexByFlId",value:function(t,e){var i=void 0;return t.floors.forEach(function(t,r){if(t.floorId===e)return void(i=r)}),i}},{key:"_getCtrlIndex",value:function(t){var e=t.floors.length,i=this._curFloorIndex,r=void 0,n=void 0;return e>S.b.MAX_LENGTH?(r=i>S.b.UNDER_NUM?i-S.b.UNDER_NUM:0,e-i>=S.b.UPPER_NUM+1?(n=i+S.b.UPPER_NUM,0===r&&(n=S.b.MAX_LENGTH-1)):(n=e-1,r-=S.b.UPPER_NUM-(n-i))):(r=0,n=e-1),{displayStart:r,dispalyEnd:n}}},{key:"_updateCtrlStatus",value:function(t,e,i){var r=this._buildingFloorInfo.floors.length,n=r-e;E.i(t[n],S.a.SELECTED);var o=r-i;E.a(t[o],S.a.SELECTED),0===this._curFloorIndex?E.a(t[t.length-1],S.a.DISABLEDOWN):E.f(t[t.length-1],S.a.DISABLEDOWN)&&E.i(t[t.length-1],S.a.DISABLEDOWN),this._curFloorIndex===r-1?E.a(t[0],S.a.DISABLEUP):E.f(t[0],S.a.DISABLEUP)&&E.i(t[0],S.a.DISABLEUP)}},{key:"_onfloorclick",value:function(t){t=t||window.event;var e=t.target||t.srcElement,i=e.data_id,r=this._curFloorIndex;if(this._showFloorId!==i){var n=this.element.querySelectorAll("ul>li"),o=n.length,a=e.flag;if(a){if("up"===a){if(this._curFloorIndex===o-3)return;this._curFloorIndex++}else{if(0===this._curFloorIndex)return;this._curFloorIndex--}this._showFloorId=this._buildingFloorInfo.floors[this._curFloorIndex].floorId}else this._showFloorId=i,this._curFloorIndex=e.index;o-2>S.b.MAX_LENGTH&&this._controlFloorCtrlVisible(n),this._updateCtrlStatus(n,r,this._curFloorIndex),this._cutFloor()}}},{key:"_controlFloorCtrlVisible",value:function(t){for(var e=this._buildingFloorInfo,i=this._getCtrlIndex(e),r=i.displayStart,n=i.dispalyEnd,o=e.floors,a=1;a<t.length-1;a++){var s=t[a];a<o.length-n||a>o.length-r?s.style.visibility="hidden":s.style.visibility="visible"}}},{key:"_cutFloor",value:function(){if(this._switchFloorFun){var t=this._buildingFloorInfo.floors[this._curFloorIndex],e={bdId:this._buildingFloorInfo.bd_id,flId:t.floorId,flNum:t.floorNum};this._switchFloorFun(e)}}},{key:"_resetFloorCtrl",value:function(){this._deleteFloorCtrl(),this._createFloorCtrl()}},{key:"setDisplayFloor",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.buildingId,i=t.floorId;if(e&&e!==this._buildingFloorInfo.bd_id)return this._buildingFloorInfo={},this._showBuildingId=e,this._showFloorId=i,void this._resetFloorCtrl();if(i!==this._showFloorId){var r=this.element.querySelectorAll("ul>li");r.length-2>S.b.MAX_LENGTH&&this._controlFloorCtrlVisible(r);var n=this._curFloorIndex;this._curFloorIndex=this._getFloorIndexByFlId(this._buildingFloorInfo,i),this._showFloorId=i,this._updateCtrlStatus(r,n,this._curFloorIndex),this._cutFloor()}}},{key:"updateCtrlStyle",value:function(t){E.j(this.element,t)}},{key:"setFloorCtrlShow",value:function(t){this.element&&(this.element.style.visibility=t?"visible":"hidden")}},{key:"_deleteFloorCtrl",value:function(){this._removeEvents(),E.c(this.element)}},{key:"_removeEvents",value:function(){var t=!0,e=!1,i=void 0;try{for(var r,n=_()(this.listenerKeys);!(t=(r=n.next()).done);t=!0){var o=r.value;m.a.unlistenByKey(o)}}catch(t){e=!0,i=t}finally{try{!t&&n.return&&n.return()}finally{if(e)throw i}}this.listenerKeys.length=0}},{key:"_destroy",value:function(){this._deleteFloorCtrl(),this._buildingFloorInfo=null,this._showBuildingId=null,this.element=null,this.target_=null,this._showFloorId=null,this._switchFloorFun=null}}]),e}(v.a)},function(t,e,i){"use strict";i.d(e,"b",function(){return r}),i.d(e,"a",function(){return n});var r={MAX_LENGTH:5,UPPER_NUM:2,UNDER_NUM:2},n={DISABLEDOWN:"disabledown",DISABLEUP:"disableup",SELECTED:"selected"}},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}i.d(e,"a",function(){return T});var n=i(3),o=i.n(n),a=i(166),s=i.n(a),l=i(267),u=i(178),h=i(129),c=i(104),p=i(57),d=i(143),f=i(142),_=i(38),g=i(194),y=i(108),v=i(132),m=i(10),E=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),o()(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),T=function(){function t(e){r(this,t),this._layer=void 0,this._regionEvent=e.regionEvent||void 0,this._styleType=e.styleType,this._styleManager=Object(c.getStyleManager)(this._styleType),this._map=e.map,this._languageType=e.languageType,this._layerName=e.layerName,this._zIndex=e.zIndex,this._minZoom=e.minShowLevel,this._maxZoom=e.maxShowLevel,this._renderBuffer=e.renderBuffer||1,this._displayRegion=e.displayRegion,this._polygonEvent=e.polygonEvent,this._tmpFeaOver=null,this._tmpLayerMove=null}return E(t,[{key:"addLayer",value:function(){if(!this._layer){var e=void 0,i=void 0,r={},n=new l.s.Style({stroke:new l.s.Stroke({width:2,color:"#686868"})}),o=this,a=function(a){var s=a.get("properties"),u=null;if(o._displayRegion)return t.transparentStyle;if("MultiLineString"==a.getGeometry().getType())return n;if(!(u=r[o._styleType+s.texture+s.material]))if(s.texture&&s.hasOwnProperty("material")){var h=o._styleManager.getStyleAtlas(s.texture),c=h.getSprite(s.material);if(h&&h.getImage()&&c&&c.hasOwnProperty("origin")&&c.hasOwnProperty("size")){e||(e=document.createElement("canvas"),i=e.getContext("2d")),e.width=Math.round(c.size[0]),e.height=Math.round(c.size[1]),i.drawImage(h.getImage(),c.origin[0],c.origin[1],c.size[0],c.size[1],0,0,e.width,e.height);var p=i.createPattern(e,"repeat");u=new l.s.Style({fill:new l.s.Fill({color:p||"#FFFFFF"})})}r[o._styleType+s.texture+s.material]=u}else u=new l.s.Style({fill:new l.s.Fill({color:s.fillColor||"#FFFFFF"}),stroke:new l.s.Stroke({color:s.strokeColor||"rgba(255,255,255,0)",width:s.strokeWidth||1})});return u};d.b.FlInfo===this._layerName?this._layer=new h.a({renderMode:p.e.RENDERMODE,style:a,zIndex:this._zIndex,renderBuffer:this._renderBuffer,zoomRange:{minZoom:this._minZoom,maxZoom:this._maxZoom}}):this._layer=new h.a({renderMode:"image",style:a,zIndex:this._zIndex,renderBuffer:this._renderBuffer,zoomRange:{minZoom:this._minZoom,maxZoom:this._maxZoom}}),this._map.addLayer([this._layer]),d.b.RegionInfo===this._layerName&&this._addRegionEvent()}}},{key:"_addRegionEvent",value:function(){var t=this,e=null,i=f.a[this._styleType].regionStyle,r=new l.s.Style({fill:new l.s.Fill({color:i.fillColor}),stroke:new l.s.Stroke({width:i.strokeWidth,color:i.strokeColor}),zIndex:1});this._layer.on(u.a.POINTEROVER,function(i){var n=i.feature,o=i.e,a=i.layer;if(a&&n){var s=n.get("properties"),l=!1;if(t._regionEvent&&t._regionEvent.hasOwnProperty("pointerover")&&m.i(t._regionEvent.pointerover)&&(l=t._regionEvent.pointerover(i)),!l){var u="";t._languageType===y.LanguageType.CHINESE?u=s.name||"":t._languageType===y.LanguageType.ENGLISH&&(u=s.name_en||""),u=m.m(u,"^"),u=t._getPopupContent(u),v.e({mapId:a._currMap._currOlMap.getTarget(),position:o.coordinate,anchor:"bottom-center",element:u})}e!==n&&(e&&e.setStyle(null),n.setStyle(r),e=n)}}),this._layer.on(u.a.POINTEROUT,function(i){var r=!1;t._regionEvent&&t._regionEvent.hasOwnProperty("pointerout")&&m.i(t._regionEvent.pointerout)&&(r=t._regionEvent.pointerout(i)),r||v.c(t._layer._currMap._currOlMap.getTarget()),e&&(e.setStyle(null),e=null)}),this._layer.on(u.a.CLICK,function(e){t._regionEvent.click(e)})}},{key:"setLayerData",value:function(t){var e=[],i=this;t.length>0&&(t.forEach(function(t){var r=i._styleManager.getStyleByFilter("fill",i._layerName,t.properties);r&&r._values&&s()(t.properties,r._values),d.b.FlInfo===i._layerName&&(t.properties.material=4);var n=t.geometry.coordinates;if(i._map._isGCJProjection&&(n=Object(g.geomGcjTransform)(n,t.geometry.type)),d.b.RegionInfo===i._layerName){var o=i._setRegionBorder(t.properties.door_flag,n[0]);i._map._transformInd&&(o=o.transform(_.SystemProj.PROJ4326,_.SystemProj.PROJ3857));var a=new l.f({geometry:o,properties:t.properties});e.push(a)}var u=null;"Polygon"===t.geometry.type?u=new l.r.Polygon(n):"MultiPolygon"===t.geometry.type&&(u=new l.r.MultiPolygon(n)),i._map._transformInd&&(u=u.transform(_.SystemProj.PROJ4326,_.SystemProj.PROJ3857));var h=new l.f({geometry:u,properties:t.properties});e.push(h)}),this._layer.addFeature(e))}},{key:"_setRegionBorder",value:function(t,e){if(t){for(var i=t.split("|"),r=[],n=0;n<i.length;n++)r.push(parseInt(i[n]));r.sort(function(t,e){return t-e});for(var o=[],a=0,s=0;s<r.length;s++)o.push(e.slice(a,r[s])),a=r[s];return o.push(e.slice(a)),new l.r.MultiLineString(o)}return new l.r.MultiLineString([e])}},{key:"destroy",value:function(){this._layer&&this._map&&(this._layer.off(),this._map.removeLayer([this._layer]),this._styleManager=null,this._layer=null,this._map=null)}},{key:"clearData",value:function(){this._layer&&this._layer.clearAllFeature()}},{key:"_getPopupContent",value:function(t){var e=f.a[this._styleType].popupStyle;return'<div><pre style="margin: 0;min-width:30px;min-height:16px;"><div style="text-align: center;"><span style="font-size:'+e.textFontSize+";font-family: "+e.textFontFamily+";color:"+e.textColor+';">'+t+"</span></div></pre></div>"}}]),t}();T.transparentStyle=new l.s.Style({fill:new l.s.Fill({color:"rgba(255,255,255,0)"}),stroke:new l.s.Stroke({width:1,color:"rgba(255,255,255,0)"})})},function(t,e,i){"use strict";var r=i(0),n=i(42),o=i(9),a=i(1),s=i(30),l=i(189),u=i(20),h=i(12),c=i(36),p=i(124),d=i(45),f=i(46),_=i(47),g=i(26),y=i(27),v=i(55),m=i(80),E=i(2),T=i(8),S=function(t){var e=t||{};l.a.call(this),this.geometryName_=e.geometryName};r.a.inherits(S,l.a),S.readGeometry_=function(t,e){if(!t)return null;var i;if("number"==typeof t.x&&"number"==typeof t.y)i=h.a.POINT;else if(t.points)i=h.a.MULTI_POINT;else if(t.paths)i=1===t.paths.length?h.a.LINE_STRING:h.a.MULTI_LINE_STRING;else if(t.rings){var r=S.getGeometryLayout_(t),n=S.convertRings_(t.rings,r);t=E.a.assign({},t),1===n.length?(i=h.a.POLYGON,t.rings=n[0]):(i=h.a.MULTI_POLYGON,t.rings=n)}var o=S.GEOMETRY_READERS_[i];return s.a.transformWithOptions(o(t),!1,e)},S.convertRings_=function(t,e){var i,r,n=[],o=[],s=[];for(i=0,r=t.length;i<r;++i){n.length=0,v.a.coordinates(n,0,t[i],e.length);m.a.linearRingIsClockwise(n,0,n.length,e.length)?o.push([t[i]]):s.push(t[i])}for(;s.length;){var l=s.shift(),u=!1;for(i=o.length-1;i>=0;i--){var h=o[i][0];if(a.a.containsExtent(new p.a(h).getExtent(),new p.a(l).getExtent())){o[i].push(l),u=!0;break}}u||o.push([l.reverse()])}return o},S.readPointGeometry_=function(t){return void 0!==t.m&&void 0!==t.z?new g.a([t.x,t.y,t.z,t.m],u.a.XYZM):void 0!==t.z?new g.a([t.x,t.y,t.z],u.a.XYZ):void 0!==t.m?new g.a([t.x,t.y,t.m],u.a.XYM):new g.a([t.x,t.y])},S.readLineStringGeometry_=function(t){var e=S.getGeometryLayout_(t);return new c.a(t.paths[0],e)},S.readMultiLineStringGeometry_=function(t){var e=S.getGeometryLayout_(t);return new d.a(t.paths,e)},S.getGeometryLayout_=function(t){var e=u.a.XY;return!0===t.hasZ&&!0===t.hasM?e=u.a.XYZM:!0===t.hasZ?e=u.a.XYZ:!0===t.hasM&&(e=u.a.XYM),e},S.readMultiPointGeometry_=function(t){var e=S.getGeometryLayout_(t);return new f.a(t.points,e)},S.readMultiPolygonGeometry_=function(t){var e=S.getGeometryLayout_(t);return new _.a(t.rings,e)},S.readPolygonGeometry_=function(t){var e=S.getGeometryLayout_(t);return new y.a(t.rings,e)},S.writePointGeometry_=function(t,e){var i,r=t.getCoordinates(),n=t.getLayout();return n===u.a.XYZ?i={x:r[0],y:r[1],z:r[2]}:n===u.a.XYM?i={x:r[0],y:r[1],m:r[2]}:n===u.a.XYZM?i={x:r[0],y:r[1],z:r[2],m:r[3]}:n===u.a.XY?i={x:r[0],y:r[1]}:o.a.assert(!1,34),i},S.getHasZM_=function(t){var e=t.getLayout();return{hasZ:e===u.a.XYZ||e===u.a.XYZM,hasM:e===u.a.XYM||e===u.a.XYZM}},S.writeLineStringGeometry_=function(t,e){var i=S.getHasZM_(t);return{hasZ:i.hasZ,hasM:i.hasM,paths:[t.getCoordinates()]}},S.writePolygonGeometry_=function(t,e){var i=S.getHasZM_(t);return{hasZ:i.hasZ,hasM:i.hasM,rings:t.getCoordinates(!1)}},S.writeMultiLineStringGeometry_=function(t,e){var i=S.getHasZM_(t);return{hasZ:i.hasZ,hasM:i.hasM,paths:t.getCoordinates()}},S.writeMultiPointGeometry_=function(t,e){var i=S.getHasZM_(t);return{hasZ:i.hasZ,hasM:i.hasM,points:t.getCoordinates()}},S.writeMultiPolygonGeometry_=function(t,e){for(var i=S.getHasZM_(t),r=t.getCoordinates(!1),n=[],o=0;o<r.length;o++)for(var a=r[o].length-1;a>=0;a--)n.push(r[o][a]);return{hasZ:i.hasZ,hasM:i.hasM,rings:n}},S.GEOMETRY_READERS_={},S.GEOMETRY_READERS_[h.a.POINT]=S.readPointGeometry_,S.GEOMETRY_READERS_[h.a.LINE_STRING]=S.readLineStringGeometry_,S.GEOMETRY_READERS_[h.a.POLYGON]=S.readPolygonGeometry_,S.GEOMETRY_READERS_[h.a.MULTI_POINT]=S.readMultiPointGeometry_,S.GEOMETRY_READERS_[h.a.MULTI_LINE_STRING]=S.readMultiLineStringGeometry_,S.GEOMETRY_READERS_[h.a.MULTI_POLYGON]=S.readMultiPolygonGeometry_,S.GEOMETRY_WRITERS_={},S.GEOMETRY_WRITERS_[h.a.POINT]=S.writePointGeometry_,S.GEOMETRY_WRITERS_[h.a.LINE_STRING]=S.writeLineStringGeometry_,S.GEOMETRY_WRITERS_[h.a.POLYGON]=S.writePolygonGeometry_,S.GEOMETRY_WRITERS_[h.a.MULTI_POINT]=S.writeMultiPointGeometry_,S.GEOMETRY_WRITERS_[h.a.MULTI_LINE_STRING]=S.writeMultiLineStringGeometry_,S.GEOMETRY_WRITERS_[h.a.MULTI_POLYGON]=S.writeMultiPolygonGeometry_,S.prototype.readFeature,S.prototype.readFeatures,S.prototype.readFeatureFromObject=function(t,e){var i=t,r=S.readGeometry_(i.geometry,e),o=new n.a;return this.geometryName_&&o.setGeometryName(this.geometryName_),o.setGeometry(r),e&&e.idField&&i.attributes[e.idField]&&o.setId(i.attributes[e.idField]),i.attributes&&o.setProperties(i.attributes),o},S.prototype.readFeaturesFromObject=function(t,e){var i=t,r=e||{};if(i.features){var n,o,a=t,s=[],l=a.features;for(r.idField=t.objectIdFieldName,n=0,o=l.length;n<o;++n)s.push(this.readFeatureFromObject(l[n],r));return s}return[this.readFeatureFromObject(t,r)]},S.prototype.readGeometry,S.prototype.readGeometryFromObject=function(t,e){return S.readGeometry_(t,e)},S.prototype.readProjection,S.prototype.readProjectionFromObject=function(t){var e=t;if(e.spatialReference&&e.spatialReference.wkid){var i=e.spatialReference.wkid;return T.a.get("EPSG:"+i)}return null},S.writeGeometry_=function(t,e){return(0,S.GEOMETRY_WRITERS_[t.getType()])(s.a.transformWithOptions(t,!0,e),e)},S.prototype.writeGeometry,S.prototype.writeGeometryObject=function(t,e){return S.writeGeometry_(t,this.adaptOptions(e))},S.prototype.writeFeature,S.prototype.writeFeatureObject=function(t,e){e=this.adaptOptions(e);var i={},r=t.getGeometry();r&&(i.geometry=S.writeGeometry_(r,e),e&&e.featureProjection&&(i.geometry.spatialReference={wkid:T.a.get(e.featureProjection).getCode().split(":").pop()}));var n=t.getProperties();return delete n[t.getGeometryName()],E.a.isEmpty(n)?i.attributes={}:i.attributes=n,i},S.prototype.writeFeatures,S.prototype.writeFeaturesObject=function(t,e){e=this.adaptOptions(e);var i,r,n=[];for(i=0,r=t.length;i<r;++i)n.push(this.writeFeatureObject(t[i],e));return{features:n}},e.a=S},function(t,e,i){"use strict";var r=i(0),n=i(9),o=i(42),a=i(30),s=i(189),l=i(144),u=i(36),h=i(45),c=i(46),p=i(47),d=i(26),f=i(27),_=i(2),g=i(8),y=function(t){var e=t||{};s.a.call(this),this.defaultDataProjection=g.a.get(e.defaultDataProjection?e.defaultDataProjection:"EPSG:4326"),e.featureProjection&&(this.defaultFeatureProjection=g.a.get(e.featureProjection)),this.geometryName_=e.geometryName,this.extractGeometryName_=e.extractGeometryName};r.a.inherits(y,s.a),y.readGeometry_=function(t,e){if(!t)return null;var i=y.GEOMETRY_READERS_[t.type];return a.a.transformWithOptions(i(t),!1,e)},y.readGeometryCollectionGeometry_=function(t,e){var i=t.geometries.map(function(t){return y.readGeometry_(t,e)});return new l.a(i)},y.readPointGeometry_=function(t){return new d.a(t.coordinates)},y.readLineStringGeometry_=function(t){return new u.a(t.coordinates)},y.readMultiLineStringGeometry_=function(t){return new h.a(t.coordinates)},y.readMultiPointGeometry_=function(t){return new c.a(t.coordinates)},y.readMultiPolygonGeometry_=function(t){return new p.a(t.coordinates)},y.readPolygonGeometry_=function(t){return new f.a(t.coordinates)},y.writeGeometry_=function(t,e){return(0,y.GEOMETRY_WRITERS_[t.getType()])(a.a.transformWithOptions(t,!0,e),e)},y.writeEmptyGeometryCollectionGeometry_=function(t){return{type:"GeometryCollection",geometries:[]}},y.writeGeometryCollectionGeometry_=function(t,e){return{type:"GeometryCollection",geometries:t.getGeometriesArray().map(function(t){var i=_.a.assign({},e);return delete i.featureProjection,y.writeGeometry_(t,i)})}},y.writeLineStringGeometry_=function(t,e){return{type:"LineString",coordinates:t.getCoordinates()}},y.writeMultiLineStringGeometry_=function(t,e){return{type:"MultiLineString",coordinates:t.getCoordinates()}},y.writeMultiPointGeometry_=function(t,e){return{type:"MultiPoint",coordinates:t.getCoordinates()}},y.writeMultiPolygonGeometry_=function(t,e){var i;return e&&(i=e.rightHanded),{type:"MultiPolygon",coordinates:t.getCoordinates(i)}},y.writePointGeometry_=function(t,e){return{type:"Point",coordinates:t.getCoordinates()}},y.writePolygonGeometry_=function(t,e){var i;return e&&(i=e.rightHanded),{type:"Polygon",coordinates:t.getCoordinates(i)}},y.GEOMETRY_READERS_={Point:y.readPointGeometry_,LineString:y.readLineStringGeometry_,Polygon:y.readPolygonGeometry_,MultiPoint:y.readMultiPointGeometry_,MultiLineString:y.readMultiLineStringGeometry_,MultiPolygon:y.readMultiPolygonGeometry_,GeometryCollection:y.readGeometryCollectionGeometry_},y.GEOMETRY_WRITERS_={Point:y.writePointGeometry_,LineString:y.writeLineStringGeometry_,Polygon:y.writePolygonGeometry_,MultiPoint:y.writeMultiPointGeometry_,MultiLineString:y.writeMultiLineStringGeometry_,MultiPolygon:y.writeMultiPolygonGeometry_,GeometryCollection:y.writeGeometryCollectionGeometry_,Circle:y.writeEmptyGeometryCollectionGeometry_},y.prototype.readFeature,y.prototype.readFeatures,y.prototype.readFeatureFromObject=function(t,e){var i=null;i="Feature"===t.type?t:{type:"Feature",geometry:t};var r=y.readGeometry_(i.geometry,e),n=new o.a;return this.geometryName_?n.setGeometryName(this.geometryName_):this.extractGeometryName_&&void 0!==i.geometry_name&&n.setGeometryName(i.geometry_name),n.setGeometry(r),void 0!==i.id&&n.setId(i.id),i.properties&&n.setProperties(i.properties),n},y.prototype.readFeaturesFromObject=function(t,e){var i=t,r=null;if("FeatureCollection"===i.type){var n=t;r=[];var o,a,s=n.features;for(o=0,a=s.length;o<a;++o)r.push(this.readFeatureFromObject(s[o],e))}else r=[this.readFeatureFromObject(t,e)];return r},y.prototype.readGeometry,y.prototype.readGeometryFromObject=function(t,e){return y.readGeometry_(t,e)},y.prototype.readProjection,y.prototype.readProjectionFromObject=function(t){var e,i=t,r=i.crs;return r?"name"==r.type?e=g.a.get(r.properties.name):n.a.assert(!1,36):e=this.defaultDataProjection,e},y.prototype.writeFeature,y.prototype.writeFeatureObject=function(t,e){e=this.adaptOptions(e);var i={type:"Feature"},r=t.getId();void 0!==r&&(i.id=r);var n=t.getGeometry();i.geometry=n?y.writeGeometry_(n,e):null;var o=t.getProperties();return delete o[t.getGeometryName()],_.a.isEmpty(o)?i.properties=null:i.properties=o,i},y.prototype.writeFeatures,y.prototype.writeFeaturesObject=function(t,e){e=this.adaptOptions(e);var i,r,n=[];for(i=0,r=t.length;i<r;++i)n.push(this.writeFeatureObject(t[i],e));return{type:"FeatureCollection",features:n}},y.prototype.writeGeometry,y.prototype.writeGeometryObject=function(t,e){return y.writeGeometry_(t,this.adaptOptions(e))},e.a=y},function(t,e,i){"use strict";var r=i(0),n=i(42),o=i(30),a=i(189),s=i(36),l=i(45),u=i(46),h=i(47),c=i(26),p=i(27),d=i(8),f=function(t){var e=t||{};a.a.call(this),this.layerName_=e.layerName,this.layers_=e.layers?e.layers:null,this.defaultDataProjection=d.a.get(e.defaultDataProjection?e.defaultDataProjection:"EPSG:4326")};r.a.inherits(f,a.a),f.concatenateArcs_=function(t,e){var i,r,n,o,a,s,l=[];for(n=0,o=t.length;n<o;++n)i=t[n],n>0&&l.pop(),r=i>=0?e[i]:e[~i].slice().reverse(),l.push.apply(l,r);for(a=0,s=l.length;a<s;++a)l[a]=l[a].slice();return l},f.readPointGeometry_=function(t,e,i){var r=t.coordinates;return e&&i&&f.transformVertex_(r,e,i),new c.a(r)},f.readMultiPointGeometry_=function(t,e,i){var r,n,o=t.coordinates;if(e&&i)for(r=0,n=o.length;r<n;++r)f.transformVertex_(o[r],e,i);return new u.a(o)},f.readLineStringGeometry_=function(t,e){var i=f.concatenateArcs_(t.arcs,e);return new s.a(i)},f.readMultiLineStringGeometry_=function(t,e){var i,r,n=[];for(i=0,r=t.arcs.length;i<r;++i)n[i]=f.concatenateArcs_(t.arcs[i],e);return new l.a(n)},f.readPolygonGeometry_=function(t,e){var i,r,n=[];for(i=0,r=t.arcs.length;i<r;++i)n[i]=f.concatenateArcs_(t.arcs[i],e);return new p.a(n)},f.readMultiPolygonGeometry_=function(t,e){var i,r,n,o,a,s,l=[];for(a=0,s=t.arcs.length;a<s;++a){for(i=t.arcs[a],r=[],n=0,o=i.length;n<o;++n)r[n]=f.concatenateArcs_(i[n],e);l[a]=r}return new h.a(l)},f.readFeaturesFromGeometryCollection_=function(t,e,i,r,n,o,a){var s,l,u=t.geometries,h=[];for(s=0,l=u.length;s<l;++s)h[s]=f.readFeatureFromGeometry_(u[s],e,i,r,n,o,a);return h},f.readFeatureFromGeometry_=function(t,e,i,r,a,s,l){var u,h=t.type,c=f.GEOMETRY_READERS_[h];u="Point"===h||"MultiPoint"===h?c(t,i,r):c(t,e);var p=new n.a;p.setGeometry(o.a.transformWithOptions(u,!1,l)),void 0!==t.id&&p.setId(t.id);var d=t.properties;return a&&(d||(d={}),d[a]=s),d&&p.setProperties(d),p},f.prototype.readFeatures,f.prototype.readFeaturesFromObject=function(t,e){if("Topology"==t.type){var i,r=t,n=null,o=null;r.transform&&(i=r.transform,n=i.scale,o=i.translate);var a=r.arcs;i&&f.transformArcs_(a,n,o);var s,l,u=[],h=r.objects,c=this.layerName_;for(s in h)this.layers_&&-1==this.layers_.indexOf(s)||("GeometryCollection"===h[s].type?(l=h[s],u.push.apply(u,f.readFeaturesFromGeometryCollection_(l,a,n,o,c,s,e))):(l=h[s],u.push(f.readFeatureFromGeometry_(l,a,n,o,c,s,e))));return u}return[]},f.transformArcs_=function(t,e,i){var r,n;for(r=0,n=t.length;r<n;++r)f.transformArc_(t[r],e,i)},f.transformArc_=function(t,e,i){var r,n,o,a=0,s=0;for(n=0,o=t.length;n<o;++n)r=t[n],a+=r[0],s+=r[1],r[0]=a,r[1]=s,f.transformVertex_(r,e,i)},f.transformVertex_=function(t,e,i){t[0]=t[0]*e[0]+i[0],t[1]=t[1]*e[1]+i[1]},f.prototype.readProjection,f.prototype.readProjectionFromObject=function(t){return this.defaultDataProjection},f.GEOMETRY_READERS_={Point:f.readPointGeometry_,LineString:f.readLineStringGeometry_,Polygon:f.readPolygonGeometry_,MultiPoint:f.readMultiPointGeometry_,MultiLineString:f.readMultiLineStringGeometry_,MultiPolygon:f.readMultiPolygonGeometry_},f.prototype.writeFeatureObject=function(t,e){},f.prototype.writeFeaturesObject=function(t,e){},f.prototype.writeGeometryObject=function(t,e){},f.prototype.readGeometryFromObject=function(){},f.prototype.readFeatureFromObject=function(){},e.a=f},function(t,e,i){"use strict";var r=i(0),n=i(9),o=i(423),a=i.n(o),s=i(30),l=i(100),u=i(20),h=i(12),c=i(36),p=i(45),d=i(46),f=i(47),_=i(26),g=i(27),y=i(80),v=i(120),m=i(32),E=i(425),T=function(t){s.a.call(this);var e=t||{};this.defaultDataProjection=new v.a({code:"EPSG:3857",units:m.a.TILE_PIXELS}),this.featureClass_=e.featureClass?e.featureClass:E.a,this.geometryName_=e.geometryName,this.layerName_=e.layerName?e.layerName:"layer",this.layers_=e.layers?e.layers:null,this.extent_=null};r.a.inherits(T,s.a),T.pbfReaders_={layers:function(t,e,i){if(3===t){var r={keys:[],values:[],features:[]},n=i.readVarint()+i.pos;i.readFields(T.pbfReaders_.layer,r,n),r.length=r.features.length,r.length&&(e[r.name]=r)}},layer:function(t,e,i){if(15===t)e.version=i.readVarint();else if(1===t)e.name=i.readString();else if(5===t)e.extent=i.readVarint();else if(2===t)e.features.push(i.pos);else if(3===t)e.keys.push(i.readString());else if(4===t){for(var r=null,n=i.readVarint()+i.pos;i.pos<n;)t=i.readVarint()>>3,r=1===t?i.readString():2===t?i.readFloat():3===t?i.readDouble():4===t?i.readVarint64():5===t?i.readVarint():6===t?i.readSVarint():7===t?i.readBoolean():null;e.values.push(r)}},feature:function(t,e,i){if(1==t)e.id=i.readVarint();else if(2==t)for(var r=i.readVarint()+i.pos;i.pos<r;){var n=e.layer.keys[i.readVarint()],o=e.layer.values[i.readVarint()];e.properties[n]=o}else 3==t?e.type=i.readVarint():4==t&&(e.geometry=i.pos)}},T.readRawFeature_=function(t,e,i){t.pos=e.features[i];var r=t.readVarint()+t.pos,n={layer:e,type:0,properties:{}};return t.readFields(T.pbfReaders_.feature,n,r),n},T.readRawGeometry_=function(t,e,i,r){t.pos=e.geometry;for(var o=t.readVarint()+t.pos,a=1,s=0,l=0,u=0,h=0,c=0;t.pos<o;){if(!s){var p=t.readVarint();a=7&p,s=p>>3}s--,1===a||2===a?(l+=t.readSVarint(),u+=t.readSVarint(),1===a&&h>c&&(r.push(h),c=h),i.push(l,u),h+=2):7===a?h>c&&(i.push(i[c],i[c+1]),h+=2):n.a.assert(!1,59)}h>c&&(r.push(h),c=h)},T.getGeometryType_=function(t,e){var i;return 1===t?i=1===e?h.a.POINT:h.a.MULTI_POINT:2===t?i=1===e?h.a.LINE_STRING:h.a.MULTI_LINE_STRING:3===t&&(i=h.a.POLYGON),i},T.prototype.createFeature_=function(t,e,i){var r=e.type;if(0===r)return null;var n,o=e.id,a=e.properties;a[this.layerName_]=e.layer.name;var l=[],v=[];T.readRawGeometry_(t,e,l,v);var m=T.getGeometryType_(r,v.length);if(this.featureClass_===E.a)n=new this.featureClass_(m,l,v,a,o);else{var S;if(m==h.a.POLYGON){for(var R=[],I=0,x=0,C=0,O=v.length;C<O;++C){var P=v[C];y.a.linearRingIsClockwise(l,I,P,2)||(R.push(v.slice(x,C)),x=C),I=P}R.length>1?(v=R,S=new f.a(null)):S=new g.a(null)}else S=m===h.a.POINT?new _.a(null):m===h.a.LINE_STRING?new c.a(null):m===h.a.POLYGON?new g.a(null):m===h.a.MULTI_POINT?new d.a(null):m===h.a.MULTI_LINE_STRING?new p.a(null):null;S.setFlatCoordinates(u.a.XY,l,v),n=new this.featureClass_,this.geometryName_&&n.setGeometryName(this.geometryName_);var L=s.a.transformWithOptions(S,!1,this.adaptOptions(i));n.setGeometry(L),n.setId(o),n.setProperties(a)}return n},T.prototype.getLastExtent=function(){return this.extent_},T.prototype.getType=function(){return l.a.ARRAY_BUFFER},T.prototype.readFeatures=function(t,e){var i,r=this.layers_,n=new a.a(t),o=n.readFields(T.pbfReaders_.layers,{}),s=[];for(var l in o)if(!r||-1!=r.indexOf(l)){i=o[l];for(var u,h=0,c=i.length;h<c;++h)u=T.readRawFeature_(n,i,h),s.push(this.createFeature_(n,u));this.extent_=i?[0,0,i.extent,i.extent]:null}return s},T.prototype.readProjection=function(t){return this.defaultDataProjection},T.prototype.setLayers=function(t){this.layers_=t},T.prototype.readFeature=function(){},T.prototype.readGeometry=function(){},T.prototype.writeFeature=function(){},T.prototype.writeGeometry=function(){},T.prototype.writeFeatures=function(){},e.a=T},function(t,e,i){"use strict";function r(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}function n(t,e,i){var r,n,o=i.buf;if(n=o[i.pos++],r=(112&n)>>4,n<128)return a(t,r,e);if(n=o[i.pos++],r|=(127&n)<<3,n<128)return a(t,r,e);if(n=o[i.pos++],r|=(127&n)<<10,n<128)return a(t,r,e);if(n=o[i.pos++],r|=(127&n)<<17,n<128)return a(t,r,e);if(n=o[i.pos++],r|=(127&n)<<24,n<128)return a(t,r,e);if(n=o[i.pos++],r|=(1&n)<<31,n<128)return a(t,r,e);throw new Error("Expected varint not more than 10 bytes")}function o(t){return t.type===r.Bytes?t.readVarint()+t.pos:t.pos+1}function a(t,e,i){return i?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function s(t,e){var i,r;if(t>=0?(i=t%4294967296|0,r=t/4294967296|0):(i=~(-t%4294967296),r=~(-t/4294967296),4294967295^i?i=i+1|0:(i=0,r=r+1|0)),t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),l(i,r,e),u(r,e)}function l(t,e,i){i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos]=127&t}function u(t,e){var i=(7&t)<<4;e.buf[e.pos++]|=i|((t>>>=3)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t)))))}function h(t,e,i){var r=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.ceil(Math.log(e)/(7*Math.LN2));i.realloc(r);for(var n=i.pos-1;n>=t;n--)i.buf[n+r]=i.buf[n]}function c(t,e){for(var i=0;i<t.length;i++)e.writeVarint(t[i])}function p(t,e){for(var i=0;i<t.length;i++)e.writeSVarint(t[i])}function d(t,e){for(var i=0;i<t.length;i++)e.writeFloat(t[i])}function f(t,e){for(var i=0;i<t.length;i++)e.writeDouble(t[i])}function _(t,e){for(var i=0;i<t.length;i++)e.writeBoolean(t[i])}function g(t,e){for(var i=0;i<t.length;i++)e.writeFixed32(t[i])}function y(t,e){for(var i=0;i<t.length;i++)e.writeSFixed32(t[i])}function v(t,e){for(var i=0;i<t.length;i++)e.writeFixed64(t[i])}function m(t,e){for(var i=0;i<t.length;i++)e.writeSFixed64(t[i])}function E(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function T(t,e,i){t[i]=e,t[i+1]=e>>>8,t[i+2]=e>>>16,t[i+3]=e>>>24}function S(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}function R(t,e,i){for(var r="",n=e;n<i;){var o=t[n],a=null,s=o>239?4:o>223?3:o>191?2:1;if(n+s>i)break;var l,u,h;1===s?o<128&&(a=o):2===s?128==(192&(l=t[n+1]))&&(a=(31&o)<<6|63&l)<=127&&(a=null):3===s?(l=t[n+1],u=t[n+2],128==(192&l)&&128==(192&u)&&((a=(15&o)<<12|(63&l)<<6|63&u)<=2047||a>=55296&&a<=57343)&&(a=null)):4===s&&(l=t[n+1],u=t[n+2],h=t[n+3],128==(192&l)&&128==(192&u)&&128==(192&h)&&((a=(15&o)<<18|(63&l)<<12|(63&u)<<6|63&h)<=65535||a>=1114112)&&(a=null)),null===a?(a=65533,s=1):a>65535&&(a-=65536,r+=String.fromCharCode(a>>>10&1023|55296),a=56320|1023&a),r+=String.fromCharCode(a),n+=s}return r}function I(t,e,i){for(var r,n,o=0;o<e.length;o++){if((r=e.charCodeAt(o))>55295&&r<57344){if(!n){r>56319||o+1===e.length?(t[i++]=239,t[i++]=191,t[i++]=189):n=r;continue}if(r<56320){t[i++]=239,t[i++]=191,t[i++]=189,n=r;continue}r=n-55296<<10|r-56320|65536,n=null}else n&&(t[i++]=239,t[i++]=191,t[i++]=189,n=null);r<128?t[i++]=r:(r<2048?t[i++]=r>>6|192:(r<65536?t[i++]=r>>12|224:(t[i++]=r>>18|240,t[i++]=r>>12&63|128),t[i++]=r>>6&63|128),t[i++]=63&r|128)}return i}t.exports=r;var x=i(424);r.Varint=0,r.Fixed64=1,r.Bytes=2,r.Fixed32=5;r.prototype={destroy:function(){this.buf=null},readFields:function(t,e,i){for(i=i||this.length;this.pos<i;){var r=this.readVarint(),n=r>>3,o=this.pos;this.type=7&r,t(n,e,this),this.pos===o&&this.skip(r)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=E(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=S(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=E(this.buf,this.pos)+4294967296*E(this.buf,this.pos+4);return this.pos+=8,t},readSFixed64:function(){var t=E(this.buf,this.pos)+4294967296*S(this.buf,this.pos+4);return this.pos+=8,t},readFloat:function(){var t=x.read(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=x.read(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,i,r=this.buf;return i=r[this.pos++],e=127&i,i<128?e:(i=r[this.pos++],e|=(127&i)<<7,i<128?e:(i=r[this.pos++],e|=(127&i)<<14,i<128?e:(i=r[this.pos++],e|=(127&i)<<21,i<128?e:(i=r[this.pos],e|=(15&i)<<28,n(e,t,this)))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=R(this.buf,this.pos,t);return this.pos=t,e},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){var i=o(this);for(t=t||[];this.pos<i;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){var e=o(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){var e=o(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){var e=o(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){var e=o(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){var e=o(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){var e=o(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){var e=o(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){var e=o(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===r.Varint)for(;this.buf[this.pos++]>127;);else if(e===r.Bytes)this.pos=this.readVarint()+this.pos;else if(e===r.Fixed32)this.pos+=4;else{if(e!==r.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var i=new Uint8Array(e);i.set(this.buf),this.buf=i,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),T(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),T(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),T(this.buf,-1&t,this.pos),T(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),T(this.buf,-1&t,this.pos),T(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(t){if((t=+t||0)>268435455||t<0)return void s(t,this);this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127)))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=I(this.buf,t,this.pos);var i=this.pos-e;i>=128&&h(e,i,this),this.pos=e-1,this.writeVarint(i),this.pos+=i},writeFloat:function(t){this.realloc(4),x.write(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),x.write(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var i=0;i<e;i++)this.buf[this.pos++]=t[i]},writeRawMessage:function(t,e){this.pos++;var i=this.pos;t(e,this);var r=this.pos-i;r>=128&&h(i,r,this),this.pos=i-1,this.writeVarint(r),this.pos+=r},writeMessage:function(t,e,i){this.writeTag(t,r.Bytes),this.writeRawMessage(e,i)},writePackedVarint:function(t,e){this.writeMessage(t,c,e)},writePackedSVarint:function(t,e){this.writeMessage(t,p,e)},writePackedBoolean:function(t,e){this.writeMessage(t,_,e)},writePackedFloat:function(t,e){this.writeMessage(t,d,e)},writePackedDouble:function(t,e){this.writeMessage(t,f,e)},writePackedFixed32:function(t,e){this.writeMessage(t,g,e)},writePackedSFixed32:function(t,e){this.writeMessage(t,y,e)},writePackedFixed64:function(t,e){this.writeMessage(t,v,e)},writePackedSFixed64:function(t,e){this.writeMessage(t,m,e)},writeBytesField:function(t,e){this.writeTag(t,r.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,r.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,r.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,r.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,r.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,r.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,r.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,r.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,r.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,r.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}}},function(t,e){e.read=function(t,e,i,r,n){var o,a,s=8*n-r-1,l=(1<<s)-1,u=l>>1,h=-7,c=i?n-1:0,p=i?-1:1,d=t[e+c];for(c+=p,o=d&(1<<-h)-1,d>>=-h,h+=s;h>0;o=256*o+t[e+c],c+=p,h-=8);for(a=o&(1<<-h)-1,o>>=-h,h+=r;h>0;a=256*a+t[e+c],c+=p,h-=8);if(0===o)o=1-u;else{if(o===l)return a?NaN:1/0*(d?-1:1);a+=Math.pow(2,r),o-=u}return(d?-1:1)*a*Math.pow(2,o-r)},e.write=function(t,e,i,r,n,o){var a,s,l,u=8*o-n-1,h=(1<<u)-1,c=h>>1,p=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:o-1,f=r?1:-1,_=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=h):(a=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-a))<1&&(a--,l*=2),e+=a+c>=1?p/l:p*Math.pow(2,1-c),e*l>=2&&(a++,l/=2),a+c>=h?(s=0,a=h):a+c>=1?(s=(e*l-1)*Math.pow(2,n),a+=c):(s=e*Math.pow(2,c-1)*Math.pow(2,n),a=0));n>=8;t[i+d]=255&s,d+=f,s/=256,n-=8);for(a=a<<n|s,u+=n;u>0;t[i+d]=255&a,d+=f,a/=256,u-=8);t[i+d-f]|=128*_}},function(t,e,i){"use strict";var r=i(0),n=i(6),o=i(1),a=i(12),s=i(224),l=i(170),u=i(169),h=i(51),c=i(16),p=function(t,e,i,r,n){this.extent_,this.id_=n,this.type_=t,this.flatCoordinates_=e,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=i,this.properties_=r,this.tmpTransform_=c.a.create()};p.prototype.get=function(t){return this.properties_[t]},p.prototype.getEnds=p.prototype.getEndss=function(){return this.ends_},p.prototype.getExtent=function(){return this.extent_||(this.extent_=this.type_===a.a.POINT?o.a.createOrUpdateFromCoordinate(this.flatCoordinates_):o.a.createOrUpdateFromFlatCoordinates(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_},p.prototype.getFlatInteriorPoint=function(){if(!this.flatInteriorPoints_){var t=o.a.getCenter(this.getExtent());this.flatInteriorPoints_=l.a.linearRings(this.flatCoordinates_,0,this.ends_,2,t,0)}return this.flatInteriorPoints_},p.prototype.getFlatInteriorPoints=function(){if(!this.flatInteriorPoints_){var t=s.a.linearRingss(this.flatCoordinates_,0,this.ends_,2);this.flatInteriorPoints_=l.a.linearRingss(this.flatCoordinates_,0,this.ends_,2,t)}return this.flatInteriorPoints_},p.prototype.getFlatMidpoint=function(){return this.flatMidpoints_||(this.flatMidpoints_=u.a.lineString(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_},p.prototype.getFlatMidpoints=function(){if(!this.flatMidpoints_){this.flatMidpoints_=[];for(var t=this.flatCoordinates_,e=0,i=this.ends_,r=0,o=i.length;r<o;++r){var a=i[r],s=u.a.lineString(t,e,a,2,.5);n.a.extend(this.flatMidpoints_,s),e=a}}return this.flatMidpoints_},p.prototype.getId=function(){return this.id_},p.prototype.getOrientedFlatCoordinates=function(){return this.flatCoordinates_},p.prototype.getFlatCoordinates=p.prototype.getOrientedFlatCoordinates,p.prototype.getGeometry=function(){return this},p.prototype.getProperties=function(){return this.properties_},p.prototype.getSimplifiedGeometry=p.prototype.getGeometry,p.prototype.getStride=function(){return 2},p.prototype.getStyleFunction=r.a.nullFunction,p.prototype.getType=function(){return this.type_},p.prototype.transform=function(t,e){var i=t.getExtent(),r=t.getWorldExtent(),n=o.a.getHeight(r)/o.a.getHeight(i),a=this.tmpTransform_;c.a.compose(a,r[0],r[3],n,-n,0,0,0),h.a.transform2D(this.flatCoordinates_,0,this.flatCoordinates_.length,2,a,this.flatCoordinates_)},e.a=p},function(t,e,i){"use strict";var r=i(0),n=i(42),o=i(30),a=i(427),s=i(144),l=i(12),u=i(20),h=i(36),c=i(45),p=i(46),d=i(47),f=i(26),_=i(27),g=i(35),y=function(t){var e=t||{};a.a.call(this),this.splitCollection_=void 0!==e.splitCollection&&e.splitCollection};r.a.inherits(y,a.a),y.EMPTY="EMPTY",y.Z="Z",y.M="M",y.ZM="ZM",y.encodePointGeometry_=function(t){var e=t.getCoordinates();return 0===e.length?"":e.join(" ")},y.encodeMultiPointGeometry_=function(t){for(var e=[],i=t.getPoints(),r=0,n=i.length;r<n;++r)e.push("("+y.encodePointGeometry_(i[r])+")");return e.join(",")},y.encodeGeometryCollectionGeometry_=function(t){for(var e=[],i=t.getGeometries(),r=0,n=i.length;r<n;++r)e.push(y.encode_(i[r]));return e.join(",")},y.encodeLineStringGeometry_=function(t){for(var e=t.getCoordinates(),i=[],r=0,n=e.length;r<n;++r)i.push(e[r].join(" "));return i.join(",")},y.encodeMultiLineStringGeometry_=function(t){for(var e=[],i=t.getLineStrings(),r=0,n=i.length;r<n;++r)e.push("("+y.encodeLineStringGeometry_(i[r])+")");return e.join(",")},y.encodePolygonGeometry_=function(t){for(var e=[],i=t.getLinearRings(),r=0,n=i.length;r<n;++r)e.push("("+y.encodeLineStringGeometry_(i[r])+")");return e.join(",")},y.encodeMultiPolygonGeometry_=function(t){for(var e=[],i=t.getPolygons(),r=0,n=i.length;r<n;++r)e.push("("+y.encodePolygonGeometry_(i[r])+")");return e.join(",")},y.encodeGeometryLayout_=function(t){var e=t.getLayout(),i="";return e!==u.a.XYZ&&e!==u.a.XYZM||(i+=y.Z),e!==u.a.XYM&&e!==u.a.XYZM||(i+=y.M),i},y.encode_=function(t){var e=t.getType(),i=y.GeometryEncoder_[e],r=i(t);if(e=e.toUpperCase(),t instanceof g.a){var n=y.encodeGeometryLayout_(t);n.length>0&&(e+=" "+n)}return 0===r.length?e+" "+y.EMPTY:e+"("+r+")"},y.GeometryEncoder_={Point:y.encodePointGeometry_,LineString:y.encodeLineStringGeometry_,Polygon:y.encodePolygonGeometry_,MultiPoint:y.encodeMultiPointGeometry_,MultiLineString:y.encodeMultiLineStringGeometry_,MultiPolygon:y.encodeMultiPolygonGeometry_,GeometryCollection:y.encodeGeometryCollectionGeometry_},y.prototype.parse_=function(t){var e=new y.Lexer(t);return new y.Parser(e).parse()},y.prototype.readFeature,y.prototype.readFeatureFromText=function(t,e){var i=this.readGeometryFromText(t,e);if(i){var r=new n.a;return r.setGeometry(i),r}return null},y.prototype.readFeatures,y.prototype.readFeaturesFromText=function(t,e){var i=[],r=this.readGeometryFromText(t,e);i=this.splitCollection_&&r.getType()==l.a.GEOMETRY_COLLECTION?r.getGeometriesArray():[r];for(var o,a=[],s=0,u=i.length;s<u;++s)o=new n.a,o.setGeometry(i[s]),a.push(o);return a},y.prototype.readGeometry,y.prototype.readGeometryFromText=function(t,e){var i=this.parse_(t);return i?o.a.transformWithOptions(i,!1,e):null},y.prototype.writeFeature,y.prototype.writeFeatureText=function(t,e){var i=t.getGeometry();return i?this.writeGeometryText(i,e):""},y.prototype.writeFeatures,y.prototype.writeFeaturesText=function(t,e){if(1==t.length)return this.writeFeatureText(t[0],e);for(var i=[],r=0,n=t.length;r<n;++r)i.push(t[r].getGeometry());var o=new s.a(i);return this.writeGeometryText(o,e)},y.prototype.writeGeometry,y.prototype.writeGeometryText=function(t,e){return y.encode_(o.a.transformWithOptions(t,!0,e))},y.TokenType_={TEXT:1,LEFT_PAREN:2,RIGHT_PAREN:3,NUMBER:4,COMMA:5,EOF:6},y.Lexer=function(t){this.wkt=t,this.index_=-1},y.Lexer.prototype.isAlpha_=function(t){return t>="a"&&t<="z"||t>="A"&&t<="Z"},y.Lexer.prototype.isNumeric_=function(t,e){var i=void 0!==e&&e;return t>="0"&&t<="9"||"."==t&&!i},y.Lexer.prototype.isWhiteSpace_=function(t){return" "==t||"\t"==t||"\r"==t||"\n"==t},y.Lexer.prototype.nextChar_=function(){return this.wkt.charAt(++this.index_)},y.Lexer.prototype.nextToken=function(){var t=this.nextChar_(),e={position:this.index_,value:t};if("("==t)e.type=y.TokenType_.LEFT_PAREN;else if(","==t)e.type=y.TokenType_.COMMA;else if(")"==t)e.type=y.TokenType_.RIGHT_PAREN;else if(this.isNumeric_(t)||"-"==t)e.type=y.TokenType_.NUMBER,e.value=this.readNumber_();else if(this.isAlpha_(t))e.type=y.TokenType_.TEXT,e.value=this.readText_();else{if(this.isWhiteSpace_(t))return this.nextToken();if(""!==t)throw new Error("Unexpected character: "+t);e.type=y.TokenType_.EOF}return e},y.Lexer.prototype.readNumber_=function(){var t,e=this.index_,i=!1,r=!1;do{"."==t?i=!0:"e"!=t&&"E"!=t||(r=!0),t=this.nextChar_()}while(this.isNumeric_(t,i)||!r&&("e"==t||"E"==t)||r&&("-"==t||"+"==t));return parseFloat(this.wkt.substring(e,this.index_--))},y.Lexer.prototype.readText_=function(){var t,e=this.index_;do{t=this.nextChar_()}while(this.isAlpha_(t));return this.wkt.substring(e,this.index_--).toUpperCase()},y.Parser=function(t){this.lexer_=t,this.token_,this.layout_=u.a.XY},y.Parser.prototype.consume_=function(){this.token_=this.lexer_.nextToken()},y.Parser.prototype.isTokenType=function(t){return this.token_.type==t},y.Parser.prototype.match=function(t){var e=this.isTokenType(t);return e&&this.consume_(),e},y.Parser.prototype.parse=function(){return this.consume_(),this.parseGeometry_()},y.Parser.prototype.parseGeometryLayout_=function(){var t=u.a.XY,e=this.token_;if(this.isTokenType(y.TokenType_.TEXT)){var i=e.value;i===y.Z?t=u.a.XYZ:i===y.M?t=u.a.XYM:i===y.ZM&&(t=u.a.XYZM),t!==u.a.XY&&this.consume_()}return t},y.Parser.prototype.parseGeometry_=function(){var t=this.token_;if(this.match(y.TokenType_.TEXT)){var e=t.value;if(this.layout_=this.parseGeometryLayout_(),e==l.a.GEOMETRY_COLLECTION.toUpperCase()){var i=this.parseGeometryCollectionText_();return new s.a(i)}var r=y.Parser.GeometryParser_[e],n=y.Parser.GeometryConstructor_[e];if(!r||!n)throw new Error("Invalid geometry type: "+e);return new n(r.call(this),this.layout_)}throw new Error(this.formatErrorMessage_())},y.Parser.prototype.parseGeometryCollectionText_=function(){if(this.match(y.TokenType_.LEFT_PAREN)){var t=[];do{t.push(this.parseGeometry_())}while(this.match(y.TokenType_.COMMA));if(this.match(y.TokenType_.RIGHT_PAREN))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())},y.Parser.prototype.parsePointText_=function(){if(this.match(y.TokenType_.LEFT_PAREN)){var t=this.parsePoint_();if(this.match(y.TokenType_.RIGHT_PAREN))return t}else if(this.isEmptyGeometry_())return null;throw new Error(this.formatErrorMessage_())},y.Parser.prototype.parseLineStringText_=function(){if(this.match(y.TokenType_.LEFT_PAREN)){var t=this.parsePointList_();if(this.match(y.TokenType_.RIGHT_PAREN))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())},y.Parser.prototype.parsePolygonText_=function(){if(this.match(y.TokenType_.LEFT_PAREN)){var t=this.parseLineStringTextList_();if(this.match(y.TokenType_.RIGHT_PAREN))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())},y.Parser.prototype.parseMultiPointText_=function(){if(this.match(y.TokenType_.LEFT_PAREN)){var t;if(t=this.token_.type==y.TokenType_.LEFT_PAREN?this.parsePointTextList_():this.parsePointList_(),this.match(y.TokenType_.RIGHT_PAREN))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())},y.Parser.prototype.parseMultiLineStringText_=function(){if(this.match(y.TokenType_.LEFT_PAREN)){var t=this.parseLineStringTextList_();if(this.match(y.TokenType_.RIGHT_PAREN))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())},y.Parser.prototype.parseMultiPolygonText_=function(){if(this.match(y.TokenType_.LEFT_PAREN)){var t=this.parsePolygonTextList_();if(this.match(y.TokenType_.RIGHT_PAREN))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())},y.Parser.prototype.parsePoint_=function(){for(var t=[],e=this.layout_.length,i=0;i<e;++i){var r=this.token_;if(!this.match(y.TokenType_.NUMBER))break;t.push(r.value)}if(t.length==e)return t;throw new Error(this.formatErrorMessage_())},y.Parser.prototype.parsePointList_=function(){for(var t=[this.parsePoint_()];this.match(y.TokenType_.COMMA);)t.push(this.parsePoint_());return t},y.Parser.prototype.parsePointTextList_=function(){for(var t=[this.parsePointText_()];this.match(y.TokenType_.COMMA);)t.push(this.parsePointText_());return t},y.Parser.prototype.parseLineStringTextList_=function(){for(var t=[this.parseLineStringText_()];this.match(y.TokenType_.COMMA);)t.push(this.parseLineStringText_());return t},y.Parser.prototype.parsePolygonTextList_=function(){for(var t=[this.parsePolygonText_()];this.match(y.TokenType_.COMMA);)t.push(this.parsePolygonText_());return t},y.Parser.prototype.isEmptyGeometry_=function(){var t=this.isTokenType(y.TokenType_.TEXT)&&this.token_.value==y.EMPTY;return t&&this.consume_(),t},y.Parser.prototype.formatErrorMessage_=function(){return"Unexpected `"+this.token_.value+"` at position "+this.token_.position+" in `"+this.lexer_.wkt+"`"},y.Parser.GeometryConstructor_={POINT:f.a,LINESTRING:h.a,POLYGON:_.a,MULTIPOINT:p.a,MULTILINESTRING:c.a,MULTIPOLYGON:d.a},y.Parser.GeometryParser_={POINT:y.Parser.prototype.parsePointText_,LINESTRING:y.Parser.prototype.parseLineStringText_,POLYGON:y.Parser.prototype.parsePolygonText_,MULTIPOINT:y.Parser.prototype.parseMultiPointText_,MULTILINESTRING:y.Parser.prototype.parseMultiLineStringText_,MULTIPOLYGON:y.Parser.prototype.parseMultiPolygonText_},e.a=y},function(t,e,i){"use strict";var r=i(0),n=i(30),o=i(100),a=function(){n.a.call(this)};r.a.inherits(a,n.a),a.prototype.getText_=function(t){return"string"==typeof t?t:""},a.prototype.getType=function(){return o.a.TEXT},a.prototype.readFeature=function(t,e){return this.readFeatureFromText(this.getText_(t),this.adaptOptions(e))},a.prototype.readFeatureFromText=function(t,e){},a.prototype.readFeatures=function(t,e){return this.readFeaturesFromText(this.getText_(t),this.adaptOptions(e))},a.prototype.readFeaturesFromText=function(t,e){},a.prototype.readGeometry=function(t,e){return this.readGeometryFromText(this.getText_(t),this.adaptOptions(e))},a.prototype.readGeometryFromText=function(t,e){},a.prototype.readProjection=function(t){return this.readProjectionFromText(this.getText_(t))},a.prototype.readProjectionFromText=function(t){return this.defaultDataProjection},a.prototype.writeFeature=function(t,e){return this.writeFeatureText(t,this.adaptOptions(e))},a.prototype.writeFeatureText=function(t,e){},a.prototype.writeFeatures=function(t,e){return this.writeFeaturesText(t,this.adaptOptions(e))},a.prototype.writeFeaturesText=function(t,e){},a.prototype.writeGeometry=function(t,e){return this.writeGeometryText(t,this.adaptOptions(e))},a.prototype.writeGeometryText=function(t,e){},e.a=a},function(t,e,i){"use strict";var r=i(0),n=i(42),o=i(6),a=i(9),s=i(52),l=i(30),u=i(190),h=i(145),c=i(144),p=i(20),d=i(12),f=i(36),_=i(45),g=i(46),y=i(47),v=i(26),m=i(27),E=i(7),T=i(8),S=i(95),R=i(135),I=i(245),x=i(247),C=i(96),O=i(62),P=i(268),L=i(64),A=function(t){var e=t||{};u.a.call(this),A.DEFAULT_STYLE_ARRAY_||A.createStyleDefaults_(),this.defaultDataProjection=T.a.get("EPSG:4326"),this.defaultStyle_=e.defaultStyle?e.defaultStyle:A.DEFAULT_STYLE_ARRAY_,this.extractStyles_=void 0===e.extractStyles||e.extractStyles,this.writeStyles_=void 0===e.writeStyles||e.writeStyles,this.sharedStyles_={},this.showPointNames_=void 0===e.showPointNames||e.showPointNames};r.a.inherits(A,u.a),A.GX_NAMESPACE_URIS_=["http://www.google.com/kml/ext/2.2"],A.NAMESPACE_URIS_=[null,"http://earth.google.com/kml/2.0","http://earth.google.com/kml/2.1","http://earth.google.com/kml/2.2","http://www.opengis.net/kml/2.2"],A.SCHEMA_LOCATION_="http://www.opengis.net/kml/2.2 https://developers.google.com/kml/schema/kml22gx.xsd",A.createStyleDefaults_=function(){return A.DEFAULT_COLOR_=[255,255,255,1],A.DEFAULT_FILL_STYLE_=new S.a({color:A.DEFAULT_COLOR_}),A.DEFAULT_IMAGE_STYLE_ANCHOR_=[20,2],A.DEFAULT_IMAGE_STYLE_ANCHOR_X_UNITS_=I.a.PIXELS,A.DEFAULT_IMAGE_STYLE_ANCHOR_Y_UNITS_=I.a.PIXELS,A.DEFAULT_IMAGE_STYLE_SIZE_=[64,64],A.DEFAULT_IMAGE_STYLE_SRC_="https://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png",A.DEFAULT_IMAGE_SCALE_MULTIPLIER_=.5,A.DEFAULT_IMAGE_STYLE_=new R.a({anchor:A.DEFAULT_IMAGE_STYLE_ANCHOR_,anchorOrigin:x.a.BOTTOM_LEFT,anchorXUnits:A.DEFAULT_IMAGE_STYLE_ANCHOR_X_UNITS_,anchorYUnits:A.DEFAULT_IMAGE_STYLE_ANCHOR_Y_UNITS_,crossOrigin:"anonymous",rotation:0,scale:A.DEFAULT_IMAGE_SCALE_MULTIPLIER_,size:A.DEFAULT_IMAGE_STYLE_SIZE_,src:A.DEFAULT_IMAGE_STYLE_SRC_}),A.DEFAULT_NO_IMAGE_STYLE_="NO_IMAGE",A.DEFAULT_STROKE_STYLE_=new C.a({color:A.DEFAULT_COLOR_,width:1}),A.DEFAULT_TEXT_STROKE_STYLE_=new C.a({color:[51,51,51,1],width:2}),A.DEFAULT_TEXT_STYLE_=new P.a({font:"bold 16px Helvetica",fill:A.DEFAULT_FILL_STYLE_,stroke:A.DEFAULT_TEXT_STROKE_STYLE_,scale:.8}),A.DEFAULT_STYLE_=new O.a({fill:A.DEFAULT_FILL_STYLE_,image:A.DEFAULT_IMAGE_STYLE_,text:A.DEFAULT_TEXT_STYLE_,stroke:A.DEFAULT_STROKE_STYLE_,zIndex:0}),A.DEFAULT_STYLE_ARRAY_=[A.DEFAULT_STYLE_],A.DEFAULT_STYLE_ARRAY_},A.ICON_ANCHOR_UNITS_MAP_={fraction:I.a.FRACTION,pixels:I.a.PIXELS,insetPixels:I.a.PIXELS},A.createNameStyleFunction_=function(t,e){var i=null,r=[0,0],n="start";if(t.getImage()){var o=t.getImage().getImageSize();if(null===o&&(o=A.DEFAULT_IMAGE_STYLE_SIZE_),2==o.length){var a=t.getImage().getScale();r[0]=a*o[0]/2,r[1]=-a*o[1]/2,n="left"}}if(null!==t.getText()){var s=t.getText();i=s.clone(),i.setFont(s.getFont()||A.DEFAULT_TEXT_STYLE_.getFont()),i.setScale(s.getScale()||A.DEFAULT_TEXT_STYLE_.getScale()),i.setFill(s.getFill()||A.DEFAULT_TEXT_STYLE_.getFill()),i.setStroke(s.getStroke()||A.DEFAULT_TEXT_STROKE_STYLE_)}else i=A.DEFAULT_TEXT_STYLE_.clone();return i.setText(e),i.setOffsetX(r[0]),i.setOffsetY(r[1]),i.setTextAlign(n),new O.a({text:i})},A.createFeatureStyleFunction_=function(t,e,i,r,n){return function(o){var a,s=n,l="";if(s&&this.getGeometry()&&(s=this.getGeometry().getType()===d.a.POINT),s&&(l=this.get("name"),s=s&&l),t)return s?(a=A.createNameStyleFunction_(t[0],l),t.concat(a)):t;if(e){var u=A.findStyle_(e,i,r);return s?(a=A.createNameStyleFunction_(u[0],l),u.concat(a)):u}return s?(a=A.createNameStyleFunction_(i[0],l),i.concat(a)):i}},A.findStyle_=function(t,e,i){return Array.isArray(t)?t:"string"==typeof t?(!(t in i)&&"#"+t in i&&(t="#"+t),A.findStyle_(i[t],e,i)):e},A.readColor_=function(t){var e=L.a.getAllTextContent(t,!1),i=/^\s*#?\s*([0-9A-Fa-f]{8})\s*$/.exec(e);if(i){var r=i[1];return[parseInt(r.substr(6,2),16),parseInt(r.substr(4,2),16),parseInt(r.substr(2,2),16),parseInt(r.substr(0,2),16)/255]}},A.readFlatCoordinates_=function(t){for(var e,i=L.a.getAllTextContent(t,!1),r=[],n=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*,\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s*,\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?))?\s*/i;e=n.exec(i);){var o=parseFloat(e[1]),a=parseFloat(e[2]),s=e[3]?parseFloat(e[3]):0;r.push(o,a,s),i=i.substr(e[0].length)}if(""===i)return r},A.readURI_=function(t){var e=L.a.getAllTextContent(t,!1).trim(),i=t.baseURI;if(i&&"about:blank"!=i||(i=window.location.href),i){return new URL(e,i).href}return e},A.readVec2_=function(t){var e,i=t.getAttribute("xunits"),r=t.getAttribute("yunits");return e="insetPixels"!==i?"insetPixels"!==r?x.a.BOTTOM_LEFT:x.a.TOP_LEFT:"insetPixels"!==r?x.a.BOTTOM_RIGHT:x.a.TOP_RIGHT,{x:parseFloat(t.getAttribute("x")),xunits:A.ICON_ANCHOR_UNITS_MAP_[i],y:parseFloat(t.getAttribute("y")),yunits:A.ICON_ANCHOR_UNITS_MAP_[r],origin:e}},A.readScale_=function(t){return h.a.readDecimal(t)},A.readStyleMapValue_=function(t,e){return L.a.pushParseAndPop(void 0,A.STYLE_MAP_PARSERS_,t,e)},A.IconStyleParser_=function(t,e){var i=L.a.pushParseAndPop({},A.ICON_STYLE_PARSERS_,t,e);if(i){var r,n=e[e.length-1],o="Icon"in i?i.Icon:{},a=!("Icon"in i)||Object.keys(o).length>0,s=o.href;s?r=s:a&&(r=A.DEFAULT_IMAGE_STYLE_SRC_);var l,u,h,c=x.a.BOTTOM_LEFT,p=i.hotSpot;p?(l=[p.x,p.y],u=p.xunits,h=p.yunits,c=p.origin):r===A.DEFAULT_IMAGE_STYLE_SRC_?(l=A.DEFAULT_IMAGE_STYLE_ANCHOR_,u=A.DEFAULT_IMAGE_STYLE_ANCHOR_X_UNITS_,h=A.DEFAULT_IMAGE_STYLE_ANCHOR_Y_UNITS_):/^http:\/\/maps\.(?:google|gstatic)\.com\//.test(r)&&(l=[.5,0],u=I.a.FRACTION,h=I.a.FRACTION);var d,f=o.x,_=o.y;void 0!==f&&void 0!==_&&(d=[f,_]);var g,y=o.w,v=o.h;void 0!==y&&void 0!==v&&(g=[y,v]);var m,T=i.heading;void 0!==T&&(m=E.a.toRadians(T));var S=i.scale;if(a){r==A.DEFAULT_IMAGE_STYLE_SRC_&&(g=A.DEFAULT_IMAGE_STYLE_SIZE_,void 0===S&&(S=A.DEFAULT_IMAGE_SCALE_MULTIPLIER_));var C=new R.a({anchor:l,anchorOrigin:c,anchorXUnits:u,anchorYUnits:h,crossOrigin:"anonymous",offset:d,offsetOrigin:x.a.BOTTOM_LEFT,rotation:m,scale:S,size:g,src:r});n.imageStyle=C}else n.imageStyle=A.DEFAULT_NO_IMAGE_STYLE_}},A.LabelStyleParser_=function(t,e){var i=L.a.pushParseAndPop({},A.LABEL_STYLE_PARSERS_,t,e);if(i){var r=e[e.length-1],n=new P.a({fill:new S.a({color:"color"in i?i.color:A.DEFAULT_COLOR_}),scale:i.scale});r.textStyle=n}},A.LineStyleParser_=function(t,e){var i=L.a.pushParseAndPop({},A.LINE_STYLE_PARSERS_,t,e);if(i){var r=e[e.length-1],n=new C.a({color:"color"in i?i.color:A.DEFAULT_COLOR_,width:"width"in i?i.width:1});r.strokeStyle=n}},A.PolyStyleParser_=function(t,e){var i=L.a.pushParseAndPop({},A.POLY_STYLE_PARSERS_,t,e);if(i){var r=e[e.length-1],n=new S.a({color:"color"in i?i.color:A.DEFAULT_COLOR_});r.fillStyle=n;var o=i.fill;void 0!==o&&(r.fill=o);var a=i.outline;void 0!==a&&(r.outline=a)}},A.readFlatLinearRing_=function(t,e){return L.a.pushParseAndPop(null,A.FLAT_LINEAR_RING_PARSERS_,t,e)},A.gxCoordParser_=function(t,e){var i=e[e.length-1],r=i.flatCoordinates,n=L.a.getAllTextContent(t,!1),o=/^\s*([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s*$/i,a=o.exec(n);if(a){var s=parseFloat(a[1]),l=parseFloat(a[2]),u=parseFloat(a[3]);r.push(s,l,u,0)}else r.push(0,0,0,0)},A.readGxMultiTrack_=function(t,e){var i=L.a.pushParseAndPop([],A.GX_MULTITRACK_GEOMETRY_PARSERS_,t,e);if(i){var r=new _.a(null);return r.setLineStrings(i),r}},A.readGxTrack_=function(t,e){var i=L.a.pushParseAndPop({flatCoordinates:[],whens:[]},A.GX_TRACK_PARSERS_,t,e);if(i){var r,n,o=i.flatCoordinates,a=i.whens;for(r=0,n=Math.min(o.length,a.length);r<n;++r)o[4*r+3]=a[r];var s=new f.a(null);return s.setFlatCoordinates(p.a.XYZM,o),s}},A.readIcon_=function(t,e){var i=L.a.pushParseAndPop({},A.ICON_PARSERS_,t,e);return i||null},A.readFlatCoordinatesFromNode_=function(t,e){return L.a.pushParseAndPop(null,A.GEOMETRY_FLAT_COORDINATES_PARSERS_,t,e)},A.readLineString_=function(t,e){var i=L.a.pushParseAndPop({},A.EXTRUDE_AND_ALTITUDE_MODE_PARSERS_,t,e),r=A.readFlatCoordinatesFromNode_(t,e);if(r){var n=new f.a(null);return n.setFlatCoordinates(p.a.XYZ,r),n.setProperties(i),n}},A.readLinearRing_=function(t,e){var i=L.a.pushParseAndPop({},A.EXTRUDE_AND_ALTITUDE_MODE_PARSERS_,t,e),r=A.readFlatCoordinatesFromNode_(t,e);if(r){var n=new m.a(null);return n.setFlatCoordinates(p.a.XYZ,r,[r.length]),n.setProperties(i),n}},A.readMultiGeometry_=function(t,e){var i=L.a.pushParseAndPop([],A.MULTI_GEOMETRY_PARSERS_,t,e);if(!i)return null;if(0===i.length)return new c.a(i);var r,n,s,l,u=!0,h=i[0].getType();for(s=1,l=i.length;s<l;++s)if(n=i[s],n.getType()!=h){u=!1;break}if(u){var p,f;if(h==d.a.POINT){var v=i[0];for(p=v.getLayout(),f=v.getFlatCoordinates(),s=1,l=i.length;s<l;++s)n=i[s],o.a.extend(f,n.getFlatCoordinates());r=new g.a(null),r.setFlatCoordinates(p,f),A.setCommonGeometryProperties_(r,i)}else h==d.a.LINE_STRING?(r=new _.a(null),r.setLineStrings(i),A.setCommonGeometryProperties_(r,i)):h==d.a.POLYGON?(r=new y.a(null),r.setPolygons(i),A.setCommonGeometryProperties_(r,i)):h==d.a.GEOMETRY_COLLECTION?r=new c.a(i):a.a.assert(!1,37)}else r=new c.a(i);return r},A.readPoint_=function(t,e){var i=L.a.pushParseAndPop({},A.EXTRUDE_AND_ALTITUDE_MODE_PARSERS_,t,e),r=A.readFlatCoordinatesFromNode_(t,e);if(r){var n=new v.a(null);return n.setFlatCoordinates(p.a.XYZ,r),n.setProperties(i),n}},A.readPolygon_=function(t,e){var i=L.a.pushParseAndPop({},A.EXTRUDE_AND_ALTITUDE_MODE_PARSERS_,t,e),r=L.a.pushParseAndPop([null],A.FLAT_LINEAR_RINGS_PARSERS_,t,e);if(r&&r[0]){var n,a,s=new m.a(null),l=r[0],u=[l.length];for(n=1,a=r.length;n<a;++n)o.a.extend(l,r[n]),u.push(l.length);return s.setFlatCoordinates(p.a.XYZ,l,u),s.setProperties(i),s}},A.readStyle_=function(t,e){var i=L.a.pushParseAndPop({},A.STYLE_PARSERS_,t,e);if(!i)return null;var r="fillStyle"in i?i.fillStyle:A.DEFAULT_FILL_STYLE_,n=i.fill;void 0===n||n||(r=null);var o="imageStyle"in i?i.imageStyle:A.DEFAULT_IMAGE_STYLE_;o==A.DEFAULT_NO_IMAGE_STYLE_&&(o=void 0);var a="textStyle"in i?i.textStyle:A.DEFAULT_TEXT_STYLE_,s="strokeStyle"in i?i.strokeStyle:A.DEFAULT_STROKE_STYLE_,l=i.outline;return void 0===l||l||(s=null),[new O.a({fill:r,image:o,stroke:s,text:a,zIndex:void 0})]},A.setCommonGeometryProperties_=function(t,e){var i,r,n,o,a,s=e.length,l=new Array(e.length),u=new Array(e.length),h=new Array(e.length);for(n=o=a=!1,r=0;r<s;++r)i=e[r],l[r]=i.get("extrude"),u[r]=i.get("tessellate"),h[r]=i.get("altitudeMode"),n=n||void 0!==l[r],o=o||void 0!==u[r],a=a||h[r];n&&t.set("extrude",l),o&&t.set("tessellate",u),a&&t.set("altitudeMode",h)},A.DataParser_=function(t,e){var i=t.getAttribute("name");L.a.parseNode(A.DATA_PARSERS_,t,e);var r=e[e.length-1];null!==i?r[i]=r.value:null!==r.displayName&&(r[r.displayName]=r.value),delete r.value},A.ExtendedDataParser_=function(t,e){L.a.parseNode(A.EXTENDED_DATA_PARSERS_,t,e)},A.RegionParser_=function(t,e){L.a.parseNode(A.REGION_PARSERS_,t,e)},A.PairDataParser_=function(t,e){var i=L.a.pushParseAndPop({},A.PAIR_PARSERS_,t,e);if(i){var r=i.key;if(r&&"normal"==r){var n=i.styleUrl;n&&(e[e.length-1]=n);var o=i.Style;o&&(e[e.length-1]=o)}}},A.PlacemarkStyleMapParser_=function(t,e){var i=A.readStyleMapValue_(t,e);if(i){var r=e[e.length-1];Array.isArray(i)?r.Style=i:"string"==typeof i?r.styleUrl=i:a.a.assert(!1,38)}},A.SchemaDataParser_=function(t,e){L.a.parseNode(A.SCHEMA_DATA_PARSERS_,t,e)},A.SimpleDataParser_=function(t,e){var i=t.getAttribute("name");if(null!==i){var r=h.a.readString(t);e[e.length-1][i]=r}},A.LatLonAltBoxParser_=function(t,e){var i=L.a.pushParseAndPop({},A.LAT_LON_ALT_BOX_PARSERS_,t,e);if(i){var r=e[e.length-1],n=[parseFloat(i.west),parseFloat(i.south),parseFloat(i.east),parseFloat(i.north)];r.extent=n,r.altitudeMode=i.altitudeMode,r.minAltitude=parseFloat(i.minAltitude),r.maxAltitude=parseFloat(i.maxAltitude)}},A.LodParser_=function(t,e){var i=L.a.pushParseAndPop({},A.LOD_PARSERS_,t,e);if(i){var r=e[e.length-1];r.minLodPixels=parseFloat(i.minLodPixels),r.maxLodPixels=parseFloat(i.maxLodPixels),r.minFadeExtent=parseFloat(i.minFadeExtent),r.maxFadeExtent=parseFloat(i.maxFadeExtent)}},A.innerBoundaryIsParser_=function(t,e){var i=L.a.pushParseAndPop(void 0,A.INNER_BOUNDARY_IS_PARSERS_,t,e);if(i){e[e.length-1].push(i)}},A.outerBoundaryIsParser_=function(t,e){var i=L.a.pushParseAndPop(void 0,A.OUTER_BOUNDARY_IS_PARSERS_,t,e);if(i){e[e.length-1][0]=i}},A.LinkParser_=function(t,e){L.a.parseNode(A.LINK_PARSERS_,t,e)},A.whenParser_=function(t,e){var i=e[e.length-1],r=i.whens,n=L.a.getAllTextContent(t,!1),o=Date.parse(n);r.push(isNaN(o)?0:o)},A.DATA_PARSERS_=L.a.makeStructureNS(A.NAMESPACE_URIS_,{displayName:L.a.makeObjectPropertySetter(h.a.readString),value:L.a.makeObjectPropertySetter(h.a.readString)}),A.EXTENDED_DATA_PARSERS_=L.a.makeStructureNS(A.NAMESPACE_URIS_,{Data:A.DataParser_,SchemaData:A.SchemaDataParser_}),A.REGION_PARSERS_=L.a.makeStructureNS(A.NAMESPACE_URIS_,{LatLonAltBox:A.LatLonAltBoxParser_,Lod:A.LodParser_}),A.LAT_LON_ALT_BOX_PARSERS_=L.a.makeStructureNS(A.NAMESPACE_URIS_,{altitudeMode:L.a.makeObjectPropertySetter(h.a.readString),minAltitude:L.a.makeObjectPropertySetter(h.a.readDecimal),maxAltitude:L.a.makeObjectPropertySetter(h.a.readDecimal),north:L.a.makeObjectPropertySetter(h.a.readDecimal),south:L.a.makeObjectPropertySetter(h.a.readDecimal),east:L.a.makeObjectPropertySetter(h.a.readDecimal),west:L.a.makeObjectPropertySetter(h.a.readDecimal)}),A.LOD_PARSERS_=L.a.makeStructureNS(A.NAMESPACE_URIS_,{minLodPixels:L.a.makeObjectPropertySetter(h.a.readDecimal),maxLodPixels:L.a.makeObjectPropertySetter(h.a.readDecimal),minFadeExtent:L.a.makeObjectPropertySetter(h.a.readDecimal),maxFadeExtent:L.a.makeObjectPropertySetter(h.a.readDecimal)}),A.EXTRUDE_AND_ALTITUDE_MODE_PARSERS_=L.a.makeStructureNS(A.NAMESPACE_URIS_,{extrude:L.a.makeObjectPropertySetter(h.a.readBoolean),tessellate:L.a.makeObjectPropertySetter(h.a.readBoolean),altitudeMode:L.a.makeObjectPropertySetter(h.a.readString)}),A.FLAT_LINEAR_RING_PARSERS_=L.a.makeStructureNS(A.NAMESPACE_URIS_,{coordinates:L.a.makeReplacer(A.readFlatCoordinates_)}),A.FLAT_LINEAR_RINGS_PARSERS_=L.a.makeStructureNS(A.NAMESPACE_URIS_,{innerBoundaryIs:A.innerBoundaryIsParser_,outerBoundaryIs:A.outerBoundaryIsParser_}),A.GX_TRACK_PARSERS_=L.a.makeStructureNS(A.NAMESPACE_URIS_,{when:A.whenParser_},L.a.makeStructureNS(A.GX_NAMESPACE_URIS_,{coord:A.gxCoordParser_})),A.GEOMETRY_FLAT_COORDINATES_PARSERS_=L.a.makeStructureNS(A.NAMESPACE_URIS_,{coordinates:L.a.makeReplacer(A.readFlatCoordinates_)}),A.ICON_PARSERS_=L.a.makeStructureNS(A.NAMESPACE_URIS_,{href:L.a.makeObjectPropertySetter(A.readURI_)},L.a.makeStructureNS(A.GX_NAMESPACE_URIS_,{x:L.a.makeObjectPropertySetter(h.a.readDecimal),y:L.a.makeObjectPropertySetter(h.a.readDecimal),w:L.a.makeObjectPropertySetter(h.a.readDecimal),h:L.a.makeObjectPropertySetter(h.a.readDecimal)})),A.ICON_STYLE_PARSERS_=L.a.makeStructureNS(A.NAMESPACE_URIS_,{Icon:L.a.makeObjectPropertySetter(A.readIcon_),heading:L.a.makeObjectPropertySetter(h.a.readDecimal),hotSpot:L.a.makeObjectPropertySetter(A.readVec2_),scale:L.a.makeObjectPropertySetter(A.readScale_)}),A.INNER_BOUNDARY_IS_PARSERS_=L.a.makeStructureNS(A.NAMESPACE_URIS_,{LinearRing:L.a.makeReplacer(A.readFlatLinearRing_)}),A.LABEL_STYLE_PARSERS_=L.a.makeStructureNS(A.NAMESPACE_URIS_,{color:L.a.makeObjectPropertySetter(A.readColor_),scale:L.a.makeObjectPropertySetter(A.readScale_)}),A.LINE_STYLE_PARSERS_=L.a.makeStructureNS(A.NAMESPACE_URIS_,{color:L.a.makeObjectPropertySetter(A.readColor_),width:L.a.makeObjectPropertySetter(h.a.readDecimal)}),A.MULTI_GEOMETRY_PARSERS_=L.a.makeStructureNS(A.NAMESPACE_URIS_,{LineString:L.a.makeArrayPusher(A.readLineString_),LinearRing:L.a.makeArrayPusher(A.readLinearRing_),MultiGeometry:L.a.makeArrayPusher(A.readMultiGeometry_),Point:L.a.makeArrayPusher(A.readPoint_),Polygon:L.a.makeArrayPusher(A.readPolygon_)}),A.GX_MULTITRACK_GEOMETRY_PARSERS_=L.a.makeStructureNS(A.GX_NAMESPACE_URIS_,{Track:L.a.makeArrayPusher(A.readGxTrack_)}),A.NETWORK_LINK_PARSERS_=L.a.makeStructureNS(A.NAMESPACE_URIS_,{ExtendedData:A.ExtendedDataParser_,Region:A.RegionParser_,Link:A.LinkParser_,address:L.a.makeObjectPropertySetter(h.a.readString),description:L.a.makeObjectPropertySetter(h.a.readString),name:L.a.makeObjectPropertySetter(h.a.readString),open:L.a.makeObjectPropertySetter(h.a.readBoolean),phoneNumber:L.a.makeObjectPropertySetter(h.a.readString),visibility:L.a.makeObjectPropertySetter(h.a.readBoolean)}),A.LINK_PARSERS_=L.a.makeStructureNS(A.NAMESPACE_URIS_,{href:L.a.makeObjectPropertySetter(A.readURI_)}),A.OUTER_BOUNDARY_IS_PARSERS_=L.a.makeStructureNS(A.NAMESPACE_URIS_,{LinearRing:L.a.makeReplacer(A.readFlatLinearRing_)}),A.PAIR_PARSERS_=L.a.makeStructureNS(A.NAMESPACE_URIS_,{Style:L.a.makeObjectPropertySetter(A.readStyle_),key:L.a.makeObjectPropertySetter(h.a.readString),styleUrl:L.a.makeObjectPropertySetter(A.readURI_)}),A.PLACEMARK_PARSERS_=L.a.makeStructureNS(A.NAMESPACE_URIS_,{ExtendedData:A.ExtendedDataParser_,Region:A.RegionParser_,MultiGeometry:L.a.makeObjectPropertySetter(A.readMultiGeometry_,"geometry"),LineString:L.a.makeObjectPropertySetter(A.readLineString_,"geometry"),LinearRing:L.a.makeObjectPropertySetter(A.readLinearRing_,"geometry"),Point:L.a.makeObjectPropertySetter(A.readPoint_,"geometry"),Polygon:L.a.makeObjectPropertySetter(A.readPolygon_,"geometry"),Style:L.a.makeObjectPropertySetter(A.readStyle_),StyleMap:A.PlacemarkStyleMapParser_,address:L.a.makeObjectPropertySetter(h.a.readString),description:L.a.makeObjectPropertySetter(h.a.readString),name:L.a.makeObjectPropertySetter(h.a.readString),open:L.a.makeObjectPropertySetter(h.a.readBoolean),phoneNumber:L.a.makeObjectPropertySetter(h.a.readString),styleUrl:L.a.makeObjectPropertySetter(A.readURI_),visibility:L.a.makeObjectPropertySetter(h.a.readBoolean)},L.a.makeStructureNS(A.GX_NAMESPACE_URIS_,{MultiTrack:L.a.makeObjectPropertySetter(A.readGxMultiTrack_,"geometry"),Track:L.a.makeObjectPropertySetter(A.readGxTrack_,"geometry")})),A.POLY_STYLE_PARSERS_=L.a.makeStructureNS(A.NAMESPACE_URIS_,{color:L.a.makeObjectPropertySetter(A.readColor_),fill:L.a.makeObjectPropertySetter(h.a.readBoolean),outline:L.a.makeObjectPropertySetter(h.a.readBoolean)}),A.SCHEMA_DATA_PARSERS_=L.a.makeStructureNS(A.NAMESPACE_URIS_,{SimpleData:A.SimpleDataParser_}),A.STYLE_PARSERS_=L.a.makeStructureNS(A.NAMESPACE_URIS_,{IconStyle:A.IconStyleParser_,LabelStyle:A.LabelStyleParser_,LineStyle:A.LineStyleParser_,PolyStyle:A.PolyStyleParser_}),A.STYLE_MAP_PARSERS_=L.a.makeStructureNS(A.NAMESPACE_URIS_,{Pair:A.PairDataParser_}),A.prototype.readDocumentOrFolder_=function(t,e){var i=L.a.makeStructureNS(A.NAMESPACE_URIS_,{Document:L.a.makeArrayExtender(this.readDocumentOrFolder_,this),Folder:L.a.makeArrayExtender(this.readDocumentOrFolder_,this),Placemark:L.a.makeArrayPusher(this.readPlacemark_,this),Style:this.readSharedStyle_.bind(this),StyleMap:this.readSharedStyleMap_.bind(this)}),r=L.a.pushParseAndPop([],i,t,e,this);return r||void 0},A.prototype.readPlacemark_=function(t,e){var i=L.a.pushParseAndPop({geometry:null},A.PLACEMARK_PARSERS_,t,e);if(i){var r=new n.a,o=t.getAttribute("id");null!==o&&r.setId(o);var a=e[0],s=i.geometry;if(s&&l.a.transformWithOptions(s,!1,a),r.setGeometry(s),delete i.geometry,this.extractStyles_){var u=i.Style,h=i.styleUrl,c=A.createFeatureStyleFunction_(u,h,this.defaultStyle_,this.sharedStyles_,this.showPointNames_);r.setStyle(c)}return delete i.Style,r.setProperties(i),r}},A.prototype.readSharedStyle_=function(t,e){var i=t.getAttribute("id");if(null!==i){var r=A.readStyle_(t,e);if(r){var n,o=t.baseURI;if(o&&"about:blank"!=o||(o=window.location.href),o){n=new URL("#"+i,o).href}else n="#"+i;this.sharedStyles_[n]=r}}},A.prototype.readSharedStyleMap_=function(t,e){var i=t.getAttribute("id");if(null!==i){var r=A.readStyleMapValue_(t,e);if(r){var n,o=t.baseURI;if(o&&"about:blank"!=o||(o=window.location.href),o){n=new URL("#"+i,o).href}else n="#"+i;this.sharedStyles_[n]=r}}},A.prototype.readFeature,A.prototype.readFeatureFromNode=function(t,e){if(!o.a.includes(A.NAMESPACE_URIS_,t.namespaceURI))return null;var i=this.readPlacemark_(t,[this.getReadOptions(t,e)]);return i||null},A.prototype.readFeatures,A.prototype.readFeaturesFromNode=function(t,e){if(!o.a.includes(A.NAMESPACE_URIS_,t.namespaceURI))return[];var i,r=t.localName;if("Document"==r||"Folder"==r)return(i=this.readDocumentOrFolder_(t,[this.getReadOptions(t,e)]))||[];if("Placemark"==r){var n=this.readPlacemark_(t,[this.getReadOptions(t,e)]);return n?[n]:[]}if("kml"==r){i=[];var a;for(a=t.firstElementChild;a;a=a.nextElementSibling){var s=this.readFeaturesFromNode(a,e);s&&o.a.extend(i,s)}return i}return[]},A.prototype.readName=function(t){if(L.a.isDocument(t))return this.readNameFromDocument(t);if(L.a.isNode(t))return this.readNameFromNode(t);if("string"==typeof t){var e=L.a.parse(t);return this.readNameFromDocument(e)}},A.prototype.readNameFromDocument=function(t){var e;for(e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE){var i=this.readNameFromNode(e);if(i)return i}},A.prototype.readNameFromNode=function(t){var e;for(e=t.firstElementChild;e;e=e.nextElementSibling)if(o.a.includes(A.NAMESPACE_URIS_,e.namespaceURI)&&"name"==e.localName)return h.a.readString(e);for(e=t.firstElementChild;e;e=e.nextElementSibling){var i=e.localName;if(o.a.includes(A.NAMESPACE_URIS_,e.namespaceURI)&&("Document"==i||"Folder"==i||"Placemark"==i||"kml"==i)){var r=this.readNameFromNode(e);if(r)return r}}},A.prototype.readNetworkLinks=function(t){var e=[];if(L.a.isDocument(t))o.a.extend(e,this.readNetworkLinksFromDocument(t));else if(L.a.isNode(t))o.a.extend(e,this.readNetworkLinksFromNode(t));else if("string"==typeof t){var i=L.a.parse(t);o.a.extend(e,this.readNetworkLinksFromDocument(i))}return e},A.prototype.readNetworkLinksFromDocument=function(t){var e,i=[];for(e=t.firstChild;e;e=e.nextSibling)e.nodeType==Node.ELEMENT_NODE&&o.a.extend(i,this.readNetworkLinksFromNode(e));return i},A.prototype.readNetworkLinksFromNode=function(t){var e,i=[];for(e=t.firstElementChild;e;e=e.nextElementSibling)if(o.a.includes(A.NAMESPACE_URIS_,e.namespaceURI)&&"NetworkLink"==e.localName){var r=L.a.pushParseAndPop({},A.NETWORK_LINK_PARSERS_,e,[]);i.push(r)}for(e=t.firstElementChild;e;e=e.nextElementSibling){var n=e.localName;!o.a.includes(A.NAMESPACE_URIS_,e.namespaceURI)||"Document"!=n&&"Folder"!=n&&"kml"!=n||o.a.extend(i,this.readNetworkLinksFromNode(e))}return i},A.prototype.readRegion=function(t){var e=[];if(L.a.isDocument(t))o.a.extend(e,this.readRegionFromDocument(t));else if(L.a.isNode(t))o.a.extend(e,this.readRegionFromNode(t));else if("string"==typeof t){var i=L.a.parse(t);o.a.extend(e,this.readRegionFromDocument(i))}return e},A.prototype.readRegionFromDocument=function(t){var e,i=[];for(e=t.firstChild;e;e=e.nextSibling)e.nodeType==Node.ELEMENT_NODE&&o.a.extend(i,this.readRegionFromNode(e));return i},A.prototype.readRegionFromNode=function(t){var e,i=[];for(e=t.firstElementChild;e;e=e.nextElementSibling)if(o.a.includes(A.NAMESPACE_URIS_,e.namespaceURI)&&"Region"==e.localName){var r=L.a.pushParseAndPop({},A.REGION_PARSERS_,e,[]);i.push(r)}for(e=t.firstElementChild;e;e=e.nextElementSibling){var n=e.localName;!o.a.includes(A.NAMESPACE_URIS_,e.namespaceURI)||"Document"!=n&&"Folder"!=n&&"kml"!=n||o.a.extend(i,this.readRegionFromNode(e))}return i},A.prototype.readProjection,A.writeColorTextNode_=function(t,e){var i,r=s.a.asArray(e),n=4==r.length?r[3]:1,o=[255*n,r[2],r[1],r[0]];for(i=0;i<4;++i){var a=parseInt(o[i],10).toString(16);o[i]=1==a.length?"0"+a:a}h.a.writeStringTextNode(t,o.join(""))},A.writeCoordinatesTextNode_=function(t,e,i){var r,n=i[i.length-1],o=n.layout,s=n.stride;o==p.a.XY||o==p.a.XYM?r=2:o==p.a.XYZ||o==p.a.XYZM?r=3:a.a.assert(!1,34);var l,u,c=e.length,d="";if(c>0){for(d+=e[0],l=1;l<r;++l)d+=","+e[l];for(u=s;u<c;u+=s)for(d+=" "+e[u],l=1;l<r;++l)d+=","+e[u+l]}h.a.writeStringTextNode(t,d)},A.writeDataNode_=function(t,e,i){t.setAttribute("name",e.name);var r={node:t},n=e.value;"object"==typeof n?(null!==n&&n.displayName&&L.a.pushSerializeAndPop(r,A.EXTENDEDDATA_NODE_SERIALIZERS_,L.a.OBJECT_PROPERTY_NODE_FACTORY,[n.displayName],i,["displayName"]),null!==n&&n.value&&L.a.pushSerializeAndPop(r,A.EXTENDEDDATA_NODE_SERIALIZERS_,L.a.OBJECT_PROPERTY_NODE_FACTORY,[n.value],i,["value"])):L.a.pushSerializeAndPop(r,A.EXTENDEDDATA_NODE_SERIALIZERS_,L.a.OBJECT_PROPERTY_NODE_FACTORY,[n],i,["value"])},A.writeDataNodeName_=function(t,e){h.a.writeCDATASection(t,e)},A.writeDataNodeValue_=function(t,e){h.a.writeStringTextNode(t,e)},A.writeDocument_=function(t,e,i){var r={node:t};L.a.pushSerializeAndPop(r,A.DOCUMENT_SERIALIZERS_,A.DOCUMENT_NODE_FACTORY_,e,i,void 0,this)},A.writeExtendedData_=function(t,e,i){for(var r={node:t},n=e.names,o=e.values,a=n.length,s=0;s<a;s++)L.a.pushSerializeAndPop(r,A.EXTENDEDDATA_NODE_SERIALIZERS_,A.DATA_NODE_FACTORY_,[{name:n[s],value:o[s]}],i)},A.writeIcon_=function(t,e,i){var r={node:t},n=i[i.length-1].node,o=A.ICON_SEQUENCE_[n.namespaceURI],a=L.a.makeSequence(e,o);L.a.pushSerializeAndPop(r,A.ICON_SERIALIZERS_,L.a.OBJECT_PROPERTY_NODE_FACTORY,a,i,o),o=A.ICON_SEQUENCE_[A.GX_NAMESPACE_URIS_[0]],a=L.a.makeSequence(e,o),L.a.pushSerializeAndPop(r,A.ICON_SERIALIZERS_,A.GX_NODE_FACTORY_,a,i,o)},A.writeIconStyle_=function(t,e,i){var r={node:t},n={},o=e.getSrc(),a=e.getSize(),s=e.getImageSize(),l={href:o};if(a){l.w=a[0],l.h=a[1];var u=e.getAnchor(),h=e.getOrigin();if(h&&s&&0!==h[0]&&h[1]!==a[1]&&(l.x=h[0],l.y=s[1]-(h[1]+a[1])),u&&(u[0]!==a[0]/2||u[1]!==a[1]/2)){var c={x:u[0],xunits:I.a.PIXELS,y:a[1]-u[1],yunits:I.a.PIXELS};n.hotSpot=c}}n.Icon=l;var p=e.getScale();1!==p&&(n.scale=p);var d=e.getRotation();0!==d&&(n.heading=d);var f=i[i.length-1].node,_=A.ICON_STYLE_SEQUENCE_[f.namespaceURI],g=L.a.makeSequence(n,_);L.a.pushSerializeAndPop(r,A.ICON_STYLE_SERIALIZERS_,L.a.OBJECT_PROPERTY_NODE_FACTORY,g,i,_)},A.writeLabelStyle_=function(t,e,i){var r={node:t},n={},o=e.getFill();o&&(n.color=o.getColor());var a=e.getScale();a&&1!==a&&(n.scale=a);var s=i[i.length-1].node,l=A.LABEL_STYLE_SEQUENCE_[s.namespaceURI],u=L.a.makeSequence(n,l);L.a.pushSerializeAndPop(r,A.LABEL_STYLE_SERIALIZERS_,L.a.OBJECT_PROPERTY_NODE_FACTORY,u,i,l)},A.writeLineStyle_=function(t,e,i){var r={node:t},n={color:e.getColor(),width:e.getWidth()},o=i[i.length-1].node,a=A.LINE_STYLE_SEQUENCE_[o.namespaceURI],s=L.a.makeSequence(n,a);L.a.pushSerializeAndPop(r,A.LINE_STYLE_SERIALIZERS_,L.a.OBJECT_PROPERTY_NODE_FACTORY,s,i,a)},A.writeMultiGeometry_=function(t,e,i){var r,n,o={node:t},s=e.getType();s==d.a.GEOMETRY_COLLECTION?(r=e.getGeometries(),n=A.GEOMETRY_NODE_FACTORY_):s==d.a.MULTI_POINT?(r=e.getPoints(),n=A.POINT_NODE_FACTORY_):s==d.a.MULTI_LINE_STRING?(r=e.getLineStrings(),n=A.LINE_STRING_NODE_FACTORY_):s==d.a.MULTI_POLYGON?(r=e.getPolygons(),n=A.POLYGON_NODE_FACTORY_):a.a.assert(!1,39),L.a.pushSerializeAndPop(o,A.MULTI_GEOMETRY_SERIALIZERS_,n,r,i)},A.writeBoundaryIs_=function(t,e,i){var r={node:t};L.a.pushSerializeAndPop(r,A.BOUNDARY_IS_SERIALIZERS_,A.LINEAR_RING_NODE_FACTORY_,[e],i)},A.writePlacemark_=function(t,e,i){var r={node:t};e.getId()&&t.setAttribute("id",e.getId());var n=e.getProperties(),o={address:1,description:1,name:1,open:1,phoneNumber:1,styleUrl:1,visibility:1};o[e.getGeometryName()]=1;var a=Object.keys(n||{}).sort().filter(function(t){return!o[t]});if(a.length>0){var s=L.a.makeSequence(n,a),u={names:a,values:s};L.a.pushSerializeAndPop(r,A.PLACEMARK_SERIALIZERS_,A.EXTENDEDDATA_NODE_FACTORY_,[u],i)}var h=e.getStyleFunction();if(h){var c=h.call(e,0);if(c){var p=Array.isArray(c)?c[0]:c;this.writeStyles_&&(n.Style=p);var d=p.getText();d&&(n.name=d.getText())}}var f=i[i.length-1].node,_=A.PLACEMARK_SEQUENCE_[f.namespaceURI],g=L.a.makeSequence(n,_);L.a.pushSerializeAndPop(r,A.PLACEMARK_SERIALIZERS_,L.a.OBJECT_PROPERTY_NODE_FACTORY,g,i,_);var y=i[0],v=e.getGeometry();v&&(v=l.a.transformWithOptions(v,!0,y)),L.a.pushSerializeAndPop(r,A.PLACEMARK_SERIALIZERS_,A.GEOMETRY_NODE_FACTORY_,[v],i)},A.writePrimitiveGeometry_=function(t,e,i){var r=e.getFlatCoordinates(),n={node:t};n.layout=e.getLayout(),n.stride=e.getStride();var o=e.getProperties();o.coordinates=r;var a=i[i.length-1].node,s=A.PRIMITIVE_GEOMETRY_SEQUENCE_[a.namespaceURI],l=L.a.makeSequence(o,s);L.a.pushSerializeAndPop(n,A.PRIMITIVE_GEOMETRY_SERIALIZERS_,L.a.OBJECT_PROPERTY_NODE_FACTORY,l,i,s)},A.writePolygon_=function(t,e,i){var r=e.getLinearRings(),n=r.shift(),o={node:t};L.a.pushSerializeAndPop(o,A.POLYGON_SERIALIZERS_,A.INNER_BOUNDARY_NODE_FACTORY_,r,i),L.a.pushSerializeAndPop(o,A.POLYGON_SERIALIZERS_,A.OUTER_BOUNDARY_NODE_FACTORY_,[n],i)},A.writePolyStyle_=function(t,e,i){var r={node:t};L.a.pushSerializeAndPop(r,A.POLY_STYLE_SERIALIZERS_,A.COLOR_NODE_FACTORY_,[e.getColor()],i)},A.writeScaleTextNode_=function(t,e){h.a.writeDecimalTextNode(t,Math.round(1e6*e)/1e6)},A.writeStyle_=function(t,e,i){var r={node:t},n={},o=e.getFill(),a=e.getStroke(),s=e.getImage(),l=e.getText();s instanceof R.a&&(n.IconStyle=s),l&&(n.LabelStyle=l),a&&(n.LineStyle=a),o&&(n.PolyStyle=o);var u=i[i.length-1].node,h=A.STYLE_SEQUENCE_[u.namespaceURI],c=L.a.makeSequence(n,h);L.a.pushSerializeAndPop(r,A.STYLE_SERIALIZERS_,L.a.OBJECT_PROPERTY_NODE_FACTORY,c,i,h)},A.writeVec2_=function(t,e){t.setAttribute("x",e.x),t.setAttribute("y",e.y),t.setAttribute("xunits",e.xunits),t.setAttribute("yunits",e.yunits)},A.KML_SEQUENCE_=L.a.makeStructureNS(A.NAMESPACE_URIS_,["Document","Placemark"]),A.KML_SERIALIZERS_=L.a.makeStructureNS(A.NAMESPACE_URIS_,{Document:L.a.makeChildAppender(A.writeDocument_),Placemark:L.a.makeChildAppender(A.writePlacemark_)}),A.DOCUMENT_SERIALIZERS_=L.a.makeStructureNS(A.NAMESPACE_URIS_,{Placemark:L.a.makeChildAppender(A.writePlacemark_)}),A.EXTENDEDDATA_NODE_SERIALIZERS_=L.a.makeStructureNS(A.NAMESPACE_URIS_,{Data:L.a.makeChildAppender(A.writeDataNode_),value:L.a.makeChildAppender(A.writeDataNodeValue_),displayName:L.a.makeChildAppender(A.writeDataNodeName_)}),A.GEOMETRY_TYPE_TO_NODENAME_={Point:"Point",LineString:"LineString",LinearRing:"LinearRing",Polygon:"Polygon",MultiPoint:"MultiGeometry",MultiLineString:"MultiGeometry",MultiPolygon:"MultiGeometry",GeometryCollection:"MultiGeometry"},A.ICON_SEQUENCE_=L.a.makeStructureNS(A.NAMESPACE_URIS_,["href"],L.a.makeStructureNS(A.GX_NAMESPACE_URIS_,["x","y","w","h"])),A.ICON_SERIALIZERS_=L.a.makeStructureNS(A.NAMESPACE_URIS_,{href:L.a.makeChildAppender(h.a.writeStringTextNode)},L.a.makeStructureNS(A.GX_NAMESPACE_URIS_,{x:L.a.makeChildAppender(h.a.writeDecimalTextNode),y:L.a.makeChildAppender(h.a.writeDecimalTextNode),w:L.a.makeChildAppender(h.a.writeDecimalTextNode),h:L.a.makeChildAppender(h.a.writeDecimalTextNode)})),A.ICON_STYLE_SEQUENCE_=L.a.makeStructureNS(A.NAMESPACE_URIS_,["scale","heading","Icon","hotSpot"]),A.ICON_STYLE_SERIALIZERS_=L.a.makeStructureNS(A.NAMESPACE_URIS_,{Icon:L.a.makeChildAppender(A.writeIcon_),heading:L.a.makeChildAppender(h.a.writeDecimalTextNode),hotSpot:L.a.makeChildAppender(A.writeVec2_),scale:L.a.makeChildAppender(A.writeScaleTextNode_)}),A.LABEL_STYLE_SEQUENCE_=L.a.makeStructureNS(A.NAMESPACE_URIS_,["color","scale"]),A.LABEL_STYLE_SERIALIZERS_=L.a.makeStructureNS(A.NAMESPACE_URIS_,{color:L.a.makeChildAppender(A.writeColorTextNode_),scale:L.a.makeChildAppender(A.writeScaleTextNode_)}),A.LINE_STYLE_SEQUENCE_=L.a.makeStructureNS(A.NAMESPACE_URIS_,["color","width"]),A.LINE_STYLE_SERIALIZERS_=L.a.makeStructureNS(A.NAMESPACE_URIS_,{color:L.a.makeChildAppender(A.writeColorTextNode_),width:L.a.makeChildAppender(h.a.writeDecimalTextNode)}),A.BOUNDARY_IS_SERIALIZERS_=L.a.makeStructureNS(A.NAMESPACE_URIS_,{LinearRing:L.a.makeChildAppender(A.writePrimitiveGeometry_)}),A.MULTI_GEOMETRY_SERIALIZERS_=L.a.makeStructureNS(A.NAMESPACE_URIS_,{LineString:L.a.makeChildAppender(A.writePrimitiveGeometry_),Point:L.a.makeChildAppender(A.writePrimitiveGeometry_),Polygon:L.a.makeChildAppender(A.writePolygon_),GeometryCollection:L.a.makeChildAppender(A.writeMultiGeometry_)}),A.PLACEMARK_SEQUENCE_=L.a.makeStructureNS(A.NAMESPACE_URIS_,["name","open","visibility","address","phoneNumber","description","styleUrl","Style"]),A.PLACEMARK_SERIALIZERS_=L.a.makeStructureNS(A.NAMESPACE_URIS_,{ExtendedData:L.a.makeChildAppender(A.writeExtendedData_),MultiGeometry:L.a.makeChildAppender(A.writeMultiGeometry_),LineString:L.a.makeChildAppender(A.writePrimitiveGeometry_),LinearRing:L.a.makeChildAppender(A.writePrimitiveGeometry_),Point:L.a.makeChildAppender(A.writePrimitiveGeometry_),Polygon:L.a.makeChildAppender(A.writePolygon_),Style:L.a.makeChildAppender(A.writeStyle_),address:L.a.makeChildAppender(h.a.writeStringTextNode),description:L.a.makeChildAppender(h.a.writeStringTextNode),name:L.a.makeChildAppender(h.a.writeStringTextNode),open:L.a.makeChildAppender(h.a.writeBooleanTextNode),phoneNumber:L.a.makeChildAppender(h.a.writeStringTextNode),styleUrl:L.a.makeChildAppender(h.a.writeStringTextNode),visibility:L.a.makeChildAppender(h.a.writeBooleanTextNode)}),A.PRIMITIVE_GEOMETRY_SEQUENCE_=L.a.makeStructureNS(A.NAMESPACE_URIS_,["extrude","tessellate","altitudeMode","coordinates"]),A.PRIMITIVE_GEOMETRY_SERIALIZERS_=L.a.makeStructureNS(A.NAMESPACE_URIS_,{extrude:L.a.makeChildAppender(h.a.writeBooleanTextNode),tessellate:L.a.makeChildAppender(h.a.writeBooleanTextNode),altitudeMode:L.a.makeChildAppender(h.a.writeStringTextNode),coordinates:L.a.makeChildAppender(A.writeCoordinatesTextNode_)}),A.POLYGON_SERIALIZERS_=L.a.makeStructureNS(A.NAMESPACE_URIS_,{outerBoundaryIs:L.a.makeChildAppender(A.writeBoundaryIs_),innerBoundaryIs:L.a.makeChildAppender(A.writeBoundaryIs_)}),A.POLY_STYLE_SERIALIZERS_=L.a.makeStructureNS(A.NAMESPACE_URIS_,{color:L.a.makeChildAppender(A.writeColorTextNode_)}),A.STYLE_SEQUENCE_=L.a.makeStructureNS(A.NAMESPACE_URIS_,["IconStyle","LabelStyle","LineStyle","PolyStyle"]),A.STYLE_SERIALIZERS_=L.a.makeStructureNS(A.NAMESPACE_URIS_,{IconStyle:L.a.makeChildAppender(A.writeIconStyle_),LabelStyle:L.a.makeChildAppender(A.writeLabelStyle_),LineStyle:L.a.makeChildAppender(A.writeLineStyle_),PolyStyle:L.a.makeChildAppender(A.writePolyStyle_)}),A.GX_NODE_FACTORY_=function(t,e,i){return L.a.createElementNS(A.GX_NAMESPACE_URIS_[0],"gx:"+i)},A.DOCUMENT_NODE_FACTORY_=function(t,e,i){var r=e[e.length-1].node;return L.a.createElementNS(r.namespaceURI,"Placemark")},A.GEOMETRY_NODE_FACTORY_=function(t,e,i){if(t){var r=e[e.length-1].node;return L.a.createElementNS(r.namespaceURI,A.GEOMETRY_TYPE_TO_NODENAME_[t.getType()])}},A.COLOR_NODE_FACTORY_=L.a.makeSimpleNodeFactory("color"),A.DATA_NODE_FACTORY_=L.a.makeSimpleNodeFactory("Data"),A.EXTENDEDDATA_NODE_FACTORY_=L.a.makeSimpleNodeFactory("ExtendedData"),A.INNER_BOUNDARY_NODE_FACTORY_=L.a.makeSimpleNodeFactory("innerBoundaryIs"),A.POINT_NODE_FACTORY_=L.a.makeSimpleNodeFactory("Point"),A.LINE_STRING_NODE_FACTORY_=L.a.makeSimpleNodeFactory("LineString"),A.LINEAR_RING_NODE_FACTORY_=L.a.makeSimpleNodeFactory("LinearRing"),A.POLYGON_NODE_FACTORY_=L.a.makeSimpleNodeFactory("Polygon"),A.OUTER_BOUNDARY_NODE_FACTORY_=L.a.makeSimpleNodeFactory("outerBoundaryIs"),A.prototype.writeFeatures,A.prototype.writeFeaturesNode=function(t,e){e=this.adaptOptions(e);var i=L.a.createElementNS(A.NAMESPACE_URIS_[4],"kml"),r="http://www.w3.org/2000/xmlns/";L.a.setAttributeNS(i,r,"xmlns:gx",A.GX_NAMESPACE_URIS_[0]),L.a.setAttributeNS(i,r,"xmlns:xsi","http://www.w3.org/2001/XMLSchema-instance"),L.a.setAttributeNS(i,"http://www.w3.org/2001/XMLSchema-instance","xsi:schemaLocation",A.SCHEMA_LOCATION_);var n={node:i},o={};t.length>1?o.Document=t:1==t.length&&(o.Placemark=t[0]);var a=A.KML_SEQUENCE_[i.namespaceURI],s=L.a.makeSequence(o,a);return L.a.pushSerializeAndPop(n,A.KML_SERIALIZERS_,L.a.OBJECT_PROPERTY_NODE_FACTORY,s,[e],a,this),i},e.a=A},function(t,e,i){"use strict";var r=i(191),n=r.a;n.prototype.writeFeatures,n.prototype.writeFeaturesNode,e.a=n},function(t,e,i){"use strict";var r=i(0),n=i(9),o=i(270),a=i(191),s=i(192),l=i(431),u=i(190),h=i(145),c=i(70),p=i(2),d=i(8),f=i(64),_=function(t){var e=t||{};this.featureType_=e.featureType,this.featureNS_=e.featureNS,this.gmlFormat_=e.gmlFormat?e.gmlFormat:new a.a,this.schemaLocation_=e.schemaLocation?e.schemaLocation:_.SCHEMA_LOCATIONS[_.DEFAULT_VERSION],u.a.call(this)};r.a.inherits(_,u.a),_.FEATURE_PREFIX="feature",_.XMLNS="http://www.w3.org/2000/xmlns/",_.OGCNS="http://www.opengis.net/ogc",_.WFSNS="http://www.opengis.net/wfs",_.FESNS="http://www.opengis.net/fes",_.SCHEMA_LOCATIONS={"1.1.0":"http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.1.0/wfs.xsd","1.0.0":"http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.0.0/wfs.xsd"},_.DEFAULT_VERSION="1.1.0",_.prototype.getFeatureType=function(){return this.featureType_},_.prototype.setFeatureType=function(t){this.featureType_=t},_.prototype.readFeatures,_.prototype.readFeaturesFromNode=function(t,e){var i={featureType:this.featureType_,featureNS:this.featureNS_};p.a.assign(i,this.getReadOptions(t,e||{}));var r=[i];this.gmlFormat_.FEATURE_COLLECTION_PARSERS[s.a.GMLNS].featureMember=f.a.makeArrayPusher(s.a.prototype.readFeaturesInternal);var n=f.a.pushParseAndPop([],this.gmlFormat_.FEATURE_COLLECTION_PARSERS,t,r,this.gmlFormat_);return n||(n=[]),n},_.prototype.readTransactionResponse=function(t){if(f.a.isDocument(t))return this.readTransactionResponseFromDocument(t);if(f.a.isNode(t))return this.readTransactionResponseFromNode(t);if("string"==typeof t){var e=f.a.parse(t);return this.readTransactionResponseFromDocument(e)}},_.prototype.readFeatureCollectionMetadata=function(t){if(f.a.isDocument(t))return this.readFeatureCollectionMetadataFromDocument(t);if(f.a.isNode(t))return this.readFeatureCollectionMetadataFromNode(t);if("string"==typeof t){var e=f.a.parse(t);return this.readFeatureCollectionMetadataFromDocument(e)}},_.prototype.readFeatureCollectionMetadataFromDocument=function(t){for(var e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE)return this.readFeatureCollectionMetadataFromNode(e)},_.FEATURE_COLLECTION_PARSERS_={"http://www.opengis.net/gml":{boundedBy:f.a.makeObjectPropertySetter(s.a.prototype.readGeometryElement,"bounds")}},_.prototype.readFeatureCollectionMetadataFromNode=function(t){var e={},i=h.a.readNonNegativeIntegerString(t.getAttribute("numberOfFeatures"));return e.numberOfFeatures=i,f.a.pushParseAndPop(e,_.FEATURE_COLLECTION_PARSERS_,t,[],this.gmlFormat_)},_.TRANSACTION_SUMMARY_PARSERS_={"http://www.opengis.net/wfs":{totalInserted:f.a.makeObjectPropertySetter(h.a.readNonNegativeInteger),totalUpdated:f.a.makeObjectPropertySetter(h.a.readNonNegativeInteger),totalDeleted:f.a.makeObjectPropertySetter(h.a.readNonNegativeInteger)}},_.readTransactionSummary_=function(t,e){return f.a.pushParseAndPop({},_.TRANSACTION_SUMMARY_PARSERS_,t,e)},_.OGC_FID_PARSERS_={"http://www.opengis.net/ogc":{FeatureId:f.a.makeArrayPusher(function(t,e){return t.getAttribute("fid")})}},_.fidParser_=function(t,e){f.a.parseNode(_.OGC_FID_PARSERS_,t,e)},_.INSERT_RESULTS_PARSERS_={"http://www.opengis.net/wfs":{Feature:_.fidParser_}},_.readInsertResults_=function(t,e){return f.a.pushParseAndPop([],_.INSERT_RESULTS_PARSERS_,t,e)},_.TRANSACTION_RESPONSE_PARSERS_={"http://www.opengis.net/wfs":{TransactionSummary:f.a.makeObjectPropertySetter(_.readTransactionSummary_,"transactionSummary"),InsertResults:f.a.makeObjectPropertySetter(_.readInsertResults_,"insertIds")}},_.prototype.readTransactionResponseFromDocument=function(t){for(var e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE)return this.readTransactionResponseFromNode(e)},_.prototype.readTransactionResponseFromNode=function(t){return f.a.pushParseAndPop({},_.TRANSACTION_RESPONSE_PARSERS_,t,[])},_.QUERY_SERIALIZERS_={"http://www.opengis.net/wfs":{PropertyName:f.a.makeChildAppender(h.a.writeStringTextNode)}},_.writeFeature_=function(t,e,i){var r=i[i.length-1],n=r.featureType,s=r.featureNS,l=r.gmlVersion,u=f.a.createElementNS(s,n);t.appendChild(u),2===l?o.a.prototype.writeFeatureElement(u,e,i):a.a.prototype.writeFeatureElement(u,e,i)},_.writeOgcFidFilter_=function(t,e,i){var r=f.a.createElementNS(_.OGCNS,"Filter"),n=f.a.createElementNS(_.OGCNS,"FeatureId");r.appendChild(n),n.setAttribute("fid",e),t.appendChild(r)},_.getTypeName_=function(t,e){t=t||_.FEATURE_PREFIX;var i=t+":";return 0===e.indexOf(i)?e:i+e},_.writeDelete_=function(t,e,i){var r=i[i.length-1];n.a.assert(void 0!==e.getId(),26);var o=r.featureType,a=r.featurePrefix,s=r.featureNS,l=_.getTypeName_(a,o);t.setAttribute("typeName",l),f.a.setAttributeNS(t,_.XMLNS,"xmlns:"+a,s);var u=e.getId();void 0!==u&&_.writeOgcFidFilter_(t,u,i)},_.writeUpdate_=function(t,e,i){var r=i[i.length-1];n.a.assert(void 0!==e.getId(),27);var o=r.featureType,a=r.featurePrefix,s=r.featureNS,l=_.getTypeName_(a,o),u=e.getGeometryName();t.setAttribute("typeName",l),f.a.setAttributeNS(t,_.XMLNS,"xmlns:"+a,s);var h=e.getId();if(void 0!==h){for(var p=e.getKeys(),d=[],g=0,y=p.length;g<y;g++){var v=e.get(p[g]);if(void 0!==v){var m=p[g];v instanceof c.a&&(m=u),d.push({name:m,value:v})}}f.a.pushSerializeAndPop({gmlVersion:r.gmlVersion,node:t,hasZ:r.hasZ,srsName:r.srsName},_.TRANSACTION_SERIALIZERS_,f.a.makeSimpleNodeFactory("Property"),d,i),_.writeOgcFidFilter_(t,h,i)}},_.writeProperty_=function(t,e,i){var r=f.a.createElementNS(_.WFSNS,"Name"),n=i[i.length-1],s=n.gmlVersion;if(t.appendChild(r),h.a.writeStringTextNode(r,e.name),void 0!==e.value&&null!==e.value){var l=f.a.createElementNS(_.WFSNS,"Value");t.appendChild(l),e.value instanceof c.a?2===s?o.a.prototype.writeGeometryElement(l,e.value,i):a.a.prototype.writeGeometryElement(l,e.value,i):h.a.writeStringTextNode(l,e.value)}},_.writeNative_=function(t,e,i){e.vendorId&&t.setAttribute("vendorId",e.vendorId),void 0!==e.safeToIgnore&&t.setAttribute("safeToIgnore",e.safeToIgnore),void 0!==e.value&&h.a.writeStringTextNode(t,e.value)},_.TRANSACTION_SERIALIZERS_={"http://www.opengis.net/wfs":{Insert:f.a.makeChildAppender(_.writeFeature_),Update:f.a.makeChildAppender(_.writeUpdate_),Delete:f.a.makeChildAppender(_.writeDelete_),Property:f.a.makeChildAppender(_.writeProperty_),Native:f.a.makeChildAppender(_.writeNative_)}},_.writeQuery_=function(t,e,i){var r,n=i[i.length-1],o=n.featurePrefix,a=n.featureNS,s=n.propertyNames,l=n.srsName;r=o?_.getTypeName_(o,e):e,t.setAttribute("typeName",r),l&&t.setAttribute("srsName",l),a&&f.a.setAttributeNS(t,_.XMLNS,"xmlns:"+o,a);var u=p.a.assign({},n);u.node=t,f.a.pushSerializeAndPop(u,_.QUERY_SERIALIZERS_,f.a.makeSimpleNodeFactory("PropertyName"),s,i);var h=n.filter;if(h){var c=f.a.createElementNS(_.OGCNS,"Filter");t.appendChild(c),_.writeFilterCondition_(c,h,i)}},_.writeFilterCondition_=function(t,e,i){var r={node:t};f.a.pushSerializeAndPop(r,_.GETFEATURE_SERIALIZERS_,f.a.makeSimpleNodeFactory(e.getTagName()),[e],i)},_.writeBboxFilter_=function(t,e,i){i[i.length-1].srsName=e.srsName,_.writeOgcPropertyName_(t,e.geometryName),a.a.prototype.writeGeometryElement(t,e.extent,i)},_.writeContainsFilter_=function(t,e,i){i[i.length-1].srsName=e.srsName,_.writeOgcPropertyName_(t,e.geometryName),a.a.prototype.writeGeometryElement(t,e.geometry,i)},_.writeIntersectsFilter_=function(t,e,i){i[i.length-1].srsName=e.srsName,_.writeOgcPropertyName_(t,e.geometryName),a.a.prototype.writeGeometryElement(t,e.geometry,i)},_.writeWithinFilter_=function(t,e,i){i[i.length-1].srsName=e.srsName,_.writeOgcPropertyName_(t,e.geometryName),a.a.prototype.writeGeometryElement(t,e.geometry,i)},_.writeDuringFilter_=function(t,e,i){var r=f.a.createElementNS(_.FESNS,"ValueReference");h.a.writeStringTextNode(r,e.propertyName),t.appendChild(r);var n=f.a.createElementNS(s.a.GMLNS,"TimePeriod");t.appendChild(n);var o=f.a.createElementNS(s.a.GMLNS,"begin");n.appendChild(o),_.writeTimeInstant_(o,e.begin);var a=f.a.createElementNS(s.a.GMLNS,"end");n.appendChild(a),_.writeTimeInstant_(a,e.end)},_.writeLogicalFilter_=function(t,e,i){for(var r={node:t},n=e.conditions,o=0,a=n.length;o<a;++o){var s=n[o];f.a.pushSerializeAndPop(r,_.GETFEATURE_SERIALIZERS_,f.a.makeSimpleNodeFactory(s.getTagName()),[s],i)}},_.writeNotFilter_=function(t,e,i){var r={node:t},n=e.condition;f.a.pushSerializeAndPop(r,_.GETFEATURE_SERIALIZERS_,f.a.makeSimpleNodeFactory(n.getTagName()),[n],i)},_.writeComparisonFilter_=function(t,e,i){void 0!==e.matchCase&&t.setAttribute("matchCase",e.matchCase.toString()),_.writeOgcPropertyName_(t,e.propertyName),_.writeOgcLiteral_(t,""+e.expression)},_.writeIsNullFilter_=function(t,e,i){_.writeOgcPropertyName_(t,e.propertyName)},_.writeIsBetweenFilter_=function(t,e,i){_.writeOgcPropertyName_(t,e.propertyName);var r=f.a.createElementNS(_.OGCNS,"LowerBoundary");t.appendChild(r),_.writeOgcLiteral_(r,""+e.lowerBoundary);var n=f.a.createElementNS(_.OGCNS,"UpperBoundary");t.appendChild(n),_.writeOgcLiteral_(n,""+e.upperBoundary)},_.writeIsLikeFilter_=function(t,e,i){t.setAttribute("wildCard",e.wildCard),t.setAttribute("singleChar",e.singleChar),t.setAttribute("escapeChar",e.escapeChar),void 0!==e.matchCase&&t.setAttribute("matchCase",e.matchCase.toString()),_.writeOgcPropertyName_(t,e.propertyName),_.writeOgcLiteral_(t,""+e.pattern)},_.writeOgcExpression_=function(t,e,i){var r=f.a.createElementNS(_.OGCNS,t);h.a.writeStringTextNode(r,i),e.appendChild(r)},_.writeOgcPropertyName_=function(t,e){_.writeOgcExpression_("PropertyName",t,e)},_.writeOgcLiteral_=function(t,e){_.writeOgcExpression_("Literal",t,e)},_.writeTimeInstant_=function(t,e){var i=f.a.createElementNS(s.a.GMLNS,"TimeInstant");t.appendChild(i);var r=f.a.createElementNS(s.a.GMLNS,"timePosition");i.appendChild(r),h.a.writeStringTextNode(r,e)},_.GETFEATURE_SERIALIZERS_={"http://www.opengis.net/wfs":{Query:f.a.makeChildAppender(_.writeQuery_)},"http://www.opengis.net/ogc":{During:f.a.makeChildAppender(_.writeDuringFilter_),And:f.a.makeChildAppender(_.writeLogicalFilter_),Or:f.a.makeChildAppender(_.writeLogicalFilter_),Not:f.a.makeChildAppender(_.writeNotFilter_),BBOX:f.a.makeChildAppender(_.writeBboxFilter_),Contains:f.a.makeChildAppender(_.writeContainsFilter_),Intersects:f.a.makeChildAppender(_.writeIntersectsFilter_),Within:f.a.makeChildAppender(_.writeWithinFilter_),PropertyIsEqualTo:f.a.makeChildAppender(_.writeComparisonFilter_),PropertyIsNotEqualTo:f.a.makeChildAppender(_.writeComparisonFilter_),PropertyIsLessThan:f.a.makeChildAppender(_.writeComparisonFilter_),PropertyIsLessThanOrEqualTo:f.a.makeChildAppender(_.writeComparisonFilter_),PropertyIsGreaterThan:f.a.makeChildAppender(_.writeComparisonFilter_),PropertyIsGreaterThanOrEqualTo:f.a.makeChildAppender(_.writeComparisonFilter_),PropertyIsNull:f.a.makeChildAppender(_.writeIsNullFilter_),PropertyIsBetween:f.a.makeChildAppender(_.writeIsBetweenFilter_),PropertyIsLike:f.a.makeChildAppender(_.writeIsLikeFilter_)}},_.writeFilter=function(t){var e=f.a.createElementNS(_.OGCNS,"Filter");return _.writeFilterCondition_(e,t,[]),e},_.writeGetFeature_=function(t,e,i){var r=i[i.length-1],n=p.a.assign({},r);n.node=t,f.a.pushSerializeAndPop(n,_.GETFEATURE_SERIALIZERS_,f.a.makeSimpleNodeFactory("Query"),e,i)},_.prototype.writeGetFeature=function(t){var e=f.a.createElementNS(_.WFSNS,"GetFeature");e.setAttribute("service","WFS"),e.setAttribute("version","1.1.0");var i;if(t&&(t.handle&&e.setAttribute("handle",t.handle),t.outputFormat&&e.setAttribute("outputFormat",t.outputFormat),void 0!==t.maxFeatures&&e.setAttribute("maxFeatures",t.maxFeatures),t.resultType&&e.setAttribute("resultType",t.resultType),void 0!==t.startIndex&&e.setAttribute("startIndex",t.startIndex),void 0!==t.count&&e.setAttribute("count",t.count),i=t.filter,t.bbox)){n.a.assert(t.geometryName,12);var r=l.a.bbox(t.geometryName,t.bbox,t.srsName);i=i?l.a.and(i,r):r}f.a.setAttributeNS(e,"http://www.w3.org/2001/XMLSchema-instance","xsi:schemaLocation",this.schemaLocation_);var o={node:e,srsName:t.srsName,featureNS:t.featureNS?t.featureNS:this.featureNS_,featurePrefix:t.featurePrefix,geometryName:t.geometryName,filter:i,propertyNames:t.propertyNames?t.propertyNames:[]};return n.a.assert(Array.isArray(t.featureTypes),11),_.writeGetFeature_(e,t.featureTypes,[o]),e},_.prototype.writeTransaction=function(t,e,i,r){var n=[],o=f.a.createElementNS(_.WFSNS,"Transaction"),a=r.version?r.version:_.DEFAULT_VERSION,s="1.0.0"===a?2:3;o.setAttribute("service","WFS"),o.setAttribute("version",a);var l,u;r&&(l=r.gmlOptions?r.gmlOptions:{},r.handle&&o.setAttribute("handle",r.handle));var h=_.SCHEMA_LOCATIONS[a];f.a.setAttributeNS(o,"http://www.w3.org/2001/XMLSchema-instance","xsi:schemaLocation",h);var c=r.featurePrefix?r.featurePrefix:_.FEATURE_PREFIX;return t&&(u={node:o,featureNS:r.featureNS,featureType:r.featureType,featurePrefix:c,gmlVersion:s,hasZ:r.hasZ,srsName:r.srsName},p.a.assign(u,l),f.a.pushSerializeAndPop(u,_.TRANSACTION_SERIALIZERS_,f.a.makeSimpleNodeFactory("Insert"),t,n)),e&&(u={node:o,featureNS:r.featureNS,featureType:r.featureType,featurePrefix:c,gmlVersion:s,hasZ:r.hasZ,srsName:r.srsName},p.a.assign(u,l),f.a.pushSerializeAndPop(u,_.TRANSACTION_SERIALIZERS_,f.a.makeSimpleNodeFactory("Update"),e,n)),i&&f.a.pushSerializeAndPop({node:o,featureNS:r.featureNS,featureType:r.featureType,featurePrefix:c,gmlVersion:s,srsName:r.srsName},_.TRANSACTION_SERIALIZERS_,f.a.makeSimpleNodeFactory("Delete"),i,n),r.nativeElements&&f.a.pushSerializeAndPop({node:o,featureNS:r.featureNS,featureType:r.featureType,featurePrefix:c,gmlVersion:s,srsName:r.srsName},_.TRANSACTION_SERIALIZERS_,f.a.makeSimpleNodeFactory("Native"),r.nativeElements,n),o},_.prototype.readProjection,_.prototype.readProjectionFromDocument=function(t){for(var e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE)return this.readProjectionFromNode(e);return null},_.prototype.readProjectionFromNode=function(t){if(t.firstElementChild&&t.firstElementChild.firstElementChild){t=t.firstElementChild.firstElementChild;for(var e=t.firstElementChild;e;e=e.nextElementSibling)if(0!==e.childNodes.length&&(1!==e.childNodes.length||3!==e.firstChild.nodeType)){var i=[{}];return this.gmlFormat_.readGeometryElement(e,i),d.a.get(i.pop().srsName)}}return null},e.a=_},function(t,e,i){"use strict";var r=i(432),n=i(433),o=i(434),a=i(435),s=i(436),l=i(437),u=i(438),h=i(439),c=i(440),p=i(441),d=i(442),f=i(443),_=i(444),g=i(445),y=i(446),v=i(447),m=i(448),E={};E.and=function(t){var e=[null].concat(Array.prototype.slice.call(arguments));return new(Function.prototype.bind.apply(r.a,e))},E.or=function(t){var e=[null].concat(Array.prototype.slice.call(arguments));return new(Function.prototype.bind.apply(v.a,e))},E.not=function(t){return new g.a(t)},E.bbox=function(t,e,i){return new n.a(t,e,i)},E.contains=function(t,e,i){return new o.a(t,e,i)},E.intersects=function(t,e,i){return new h.a(t,e,i)},E.within=function(t,e,i){return new m.a(t,e,i)},E.equalTo=function(t,e,i){return new s.a(t,e,i)},E.notEqualTo=function(t,e,i){return new y.a(t,e,i)},E.lessThan=function(t,e){return new f.a(t,e)},E.lessThanOrEqualTo=function(t,e){return new _.a(t,e)},E.greaterThan=function(t,e){return new l.a(t,e)},E.greaterThanOrEqualTo=function(t,e){return new u.a(t,e)},E.isNull=function(t){return new d.a(t)},E.between=function(t,e,i){return new c.a(t,e,i)},E.like=function(t,e,i,r,n,o){return new p.a(t,e,i,r,n,o)},E.during=function(t,e,i){return new a.a(t,e,i)},e.a=E},function(t,e,i){"use strict";var r=i(0),n=i(271),o=function(t){var e=["And"].concat(Array.prototype.slice.call(arguments));n.a.apply(this,e)};r.a.inherits(o,n.a),e.a=o},function(t,e,i){"use strict";var r=i(0),n=i(106),o=function(t,e,i){n.a.call(this,"BBOX"),this.geometryName=t,this.extent=e,this.srsName=i};r.a.inherits(o,n.a),e.a=o},function(t,e,i){"use strict";var r=i(0),n=i(193),o=function(t,e,i){n.a.call(this,"Contains",t,e,i)};r.a.inherits(o,n.a),e.a=o},function(t,e,i){"use strict";var r=i(0),n=i(107),o=function(t,e,i){n.a.call(this,"During",t),this.begin=e,this.end=i};r.a.inherits(o,n.a),e.a=o},function(t,e,i){"use strict";var r=i(0),n=i(83),o=function(t,e,i){n.a.call(this,"PropertyIsEqualTo",t,e,i)};r.a.inherits(o,n.a),e.a=o},function(t,e,i){"use strict";var r=i(0),n=i(83),o=function(t,e){n.a.call(this,"PropertyIsGreaterThan",t,e)};r.a.inherits(o,n.a),e.a=o},function(t,e,i){"use strict";var r=i(0),n=i(83),o=function(t,e){n.a.call(this,"PropertyIsGreaterThanOrEqualTo",t,e)};r.a.inherits(o,n.a),e.a=o},function(t,e,i){"use strict";var r=i(0),n=i(193),o=function(t,e,i){n.a.call(this,"Intersects",t,e,i)};r.a.inherits(o,n.a),e.a=o},function(t,e,i){"use strict";var r=i(0),n=i(107),o=function(t,e,i){n.a.call(this,"PropertyIsBetween",t),this.lowerBoundary=e,this.upperBoundary=i};r.a.inherits(o,n.a),e.a=o},function(t,e,i){"use strict";var r=i(0),n=i(107),o=function(t,e,i,r,o,a){n.a.call(this,"PropertyIsLike",t),this.pattern=e,this.wildCard=void 0!==i?i:"*",this.singleChar=void 0!==r?r:".",this.escapeChar=void 0!==o?o:"!",this.matchCase=a};r.a.inherits(o,n.a),e.a=o},function(t,e,i){"use strict";var r=i(0),n=i(107),o=function(t){n.a.call(this,"PropertyIsNull",t)};r.a.inherits(o,n.a),e.a=o},function(t,e,i){"use strict";var r=i(0),n=i(83),o=function(t,e){n.a.call(this,"PropertyIsLessThan",t,e)};r.a.inherits(o,n.a),e.a=o},function(t,e,i){"use strict";var r=i(0),n=i(83),o=function(t,e){n.a.call(this,"PropertyIsLessThanOrEqualTo",t,e)};r.a.inherits(o,n.a),e.a=o},function(t,e,i){"use strict";var r=i(0),n=i(106),o=function(t){n.a.call(this,"Not"),this.condition=t};r.a.inherits(o,n.a),e.a=o},function(t,e,i){"use strict";var r=i(0),n=i(83),o=function(t,e,i){n.a.call(this,"PropertyIsNotEqualTo",t,e,i)};r.a.inherits(o,n.a),e.a=o},function(t,e,i){"use strict";var r=i(0),n=i(271),o=function(t){var e=["Or"].concat(Array.prototype.slice.call(arguments));n.a.apply(this,e)};r.a.inherits(o,n.a),e.a=o},function(t,e,i){"use strict";var r=i(0),n=i(193),o=function(t,e,i){n.a.call(this,"Within",t,e,i)};r.a.inherits(o,n.a),e.a=o},function(t,e,i){"use strict";var r=i(25),n=i(0),o=i(44),a=i(68),s=i(450),l=function(t){a.a.call(this,{handleDownEvent:l.handleDownEvent_,handleDragEvent:l.handleDragEvent_,handleUpEvent:l.handleUpEvent_});var e=t||{};this.box_=new s.a(e.className||"ol-dragbox"),this.minArea_=void 0!==e.minArea?e.minArea:64,this.startPixel_=null,this.condition_=e.condition?e.condition:o.a.always,this.boxEndCondition_=e.boxEndCondition?e.boxEndCondition:l.defaultBoxEndCondition};n.a.inherits(l,a.a),l.defaultBoxEndCondition=function(t,e,i){var r=i[0]-e[0],n=i[1]-e[1];return r*r+n*n>=this.minArea_},l.handleDragEvent_=function(t){o.a.mouseOnly(t)&&(this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new l.Event(l.EventType_.BOXDRAG,t.coordinate,t)))},l.prototype.getGeometry=function(){return this.box_.getGeometry()},l.prototype.onBoxEnd=n.a.nullFunction,l.handleUpEvent_=function(t){return!o.a.mouseOnly(t)||(this.box_.setMap(null),this.boxEndCondition_(t,this.startPixel_,t.pixel)&&(this.onBoxEnd(t),this.dispatchEvent(new l.Event(l.EventType_.BOXEND,t.coordinate,t))),!1)},l.handleDownEvent_=function(t){return!!o.a.mouseOnly(t)&&(!(!o.a.mouseActionButton(t)||!this.condition_(t))&&(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new l.Event(l.EventType_.BOXSTART,t.coordinate,t)),!0))},l.EventType_={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend"},l.Event=function(t,e,i){r.a.call(this,t),this.coordinate=e,this.mapBrowserEvent=i},n.a.inherits(l.Event,r.a),e.a=l},function(t,e,i){"use strict";var r=i(0),n=i(119),o=i(27),a=function(t){this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.className="ol-box "+t,this.map_=null,this.startPixel_=null,this.endPixel_=null};r.a.inherits(a,n.a),a.prototype.disposeInternal=function(){this.setMap(null)},a.prototype.render_=function(){var t=this.startPixel_,e=this.endPixel_,i=this.element_.style;i.left=Math.min(t[0],e[0])+"px",i.top=Math.min(t[1],e[1])+"px",i.width=Math.abs(e[0]-t[0])+"px",i.height=Math.abs(e[1]-t[1])+"px"},a.prototype.setMap=function(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);var e=this.element_.style;e.left=e.top=e.width=e.height="inherit"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)},a.prototype.setPixels=function(t,e){this.startPixel_=t,this.endPixel_=e,this.createOrUpdateGeometry(),this.render_()},a.prototype.createOrUpdateGeometry=function(){var t=this.startPixel_,e=this.endPixel_,i=[t,[t[0],e[1]],e,[e[0],t[1]]],r=i.map(this.map_.getCoordinateFromPixel,this.map_);r[4]=r[0].slice(),this.geometry_?this.geometry_.setCoordinates([r]):this.geometry_=new o.a([r])},a.prototype.getGeometry=function(){return this.geometry_},e.a=a},function(t,e,i){"use strict";var r=i(0),n=i(274),o=i(139),a=function(t){var e=t.layer.indexOf("-"),i=-1==e?t.layer:t.layer.slice(0,e),r=a.ProviderConfig[i],n=a.LayerConfig[t.layer],s=void 0!==t.url?t.url:"https://stamen-tiles-{a-d}.a.ssl.fastly.net/"+t.layer+"/{z}/{x}/{y}."+n.extension;o.a.call(this,{attributions:a.ATTRIBUTIONS,cacheSize:t.cacheSize,crossOrigin:"anonymous",maxZoom:void 0!=t.maxZoom?t.maxZoom:r.maxZoom,minZoom:void 0!=t.minZoom?t.minZoom:r.minZoom,opaque:n.opaque,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileLoadFunction:t.tileLoadFunction,url:s,wrapX:t.wrapX})};r.a.inherits(a,o.a),a.ATTRIBUTIONS=['Map tiles by <a href="https://stamen.com/">Stamen Design</a>, under <a href="https://creativecommons.org/licenses/by/3.0/">CC BY 3.0</a>.',n.a.ATTRIBUTION],a.LayerConfig={terrain:{extension:"jpg",opaque:!0},"terrain-background":{extension:"jpg",opaque:!0},"terrain-labels":{extension:"png",opaque:!1},"terrain-lines":{extension:"png",opaque:!1},"toner-background":{extension:"png",opaque:!0},toner:{extension:"png",opaque:!0},"toner-hybrid":{extension:"png",opaque:!1},"toner-labels":{extension:"png",opaque:!1},"toner-lines":{extension:"png",opaque:!1},"toner-lite":{extension:"png",opaque:!0},watercolor:{extension:"jpg",opaque:!0}},a.ProviderConfig={terrain:{minZoom:4,maxZoom:18},toner:{minZoom:0,maxZoom:20},watercolor:{minZoom:1,maxZoom:16}},e.a=a},function(t,e,i){"use strict";i.d(e,"b",function(){return r}),i.d(e,"a",function(){return n});var r={StartDraw:"",Street:"",City:"",Province:"",Country:"",Title:"",Area:"",TotalDistance:"",ZoomLevel:"",ZoomIn:"",ZoomOut:""},n={StartDraw:"Start draw",Street:"str",City:"city",Province:"pro",Country:"cou",Title:"Change img Style",Area:"Area",TotalDistance:"Total",ZoomLevel:"level",ZoomIn:"Zoom in",ZoomOut:"Zoom out"}},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}i.d(e,"a",function(){return v});var n=i(3),o=i.n(n),a=i(142),s=i(129),l=i(178),u=i(10),h=i(132),c=i(195),p=i(276),d=i(62),f=i(135),_=i(26),g=i(42),y=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),o()(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),v=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.styleType,n=e.poiEvent,o=e.zIndex,l=e.minZoom,u=e.maxZoom;r(this,t),this._styleType=i,this._poiEvent=n,this._zIndex=o||a.b.poiZIndex,this._minZoom=l||a.c.indoorZoomMin,this._maxZoom=u||a.c.indoorZoomMax,this._layer=new s.a({zIndex:this._zIndex,zoomRange:{minZoom:this._minZoom,maxZoom:this._maxZoom}}),this._tempMoveFeatureData={}}return y(t,[{key:"addLayer",value:function(t){this._layer&&(t.addLayer([this._layer]),this._map=t,this._addPoiEvent())}},{key:"_addPoiEvent",value:function(){var e=this;this._layer.on(l.a.POINTEROVER,function(i){var r=i.feature,n=i.layer;if(n&&r){for(var o in e._tempMoveFeatureData)if("boxObj"===o){var s=e._tempMoveFeatureData[o].getId(),l=r.getId();if(l.indexOf("_")>-1&&s.indexOf("_")>-1&&l.split("_")[1]===s.split("_")[1])return}else if(e._tempMoveFeatureData[o].getId()===r.getId())return;(e._tempMoveFeatureData.hasOwnProperty("boxObj")||e._tempMoveFeatureData.hasOwnProperty("txtObj0"))&&(e.removeRactangleBox(),e._tempMoveFeatureData={});var c=r.get("data"),p={infor:c};if(c.hasOwnProperty("icon")){var d=e.addRactangleBox(p);e._tempMoveFeatureData.boxObj=d}var f=!1;if(e._poiEvent&&e._poiEvent.hasOwnProperty("pointerover")&&u.i(e._poiEvent.pointerover)&&(f=e._poiEvent.pointerover(i)),!f){var _=r.get("data").poiname;_=u.m(_,"^");var g=a.a[e._styleType].popupStyle,y=t.getPopupContent({styleType:e._styleType,styleObj:g,context:_});h.e({mapId:n._currMap._currOlMap.getTarget(),position:e._map.transform4326ToMap(r.get("data").coord),anchor:"bottom-center",element:y})}var v=c.id,m=c.txt;if(m&&m.size&&m.size.length>0)for(var E=void 0,T=void 0,S=0;S<m.size.length;S++)E="txt_"+v+"_"+S,(T=e._layer.getFeatureById(E))&&(T.getStyle().getImage().setOpacity(a.a[e._styleType].poiStyle.highOpacity),e._tempMoveFeatureData["txtObj"+S]=T)}}),this._layer.on(l.a.POINTEROUT,function(t){if(e._tempMoveFeatureData.hasOwnProperty("boxObj")||e._tempMoveFeatureData.hasOwnProperty("txtObj0")){e.removeRactangleBox(),e._tempMoveFeatureData={};var i=!1;e._poiEvent&&e._poiEvent.hasOwnProperty("pointerout")&&u.i(e._poiEvent.pointerout)&&(i=e._poiEvent.pointerout(t)),i||h.c(e._layer._currMap._currOlMap.getTarget())}}),this._layer.on(l.a.CLICK,function(t){e._poiEvent.click(t)})}},{key:"render",value:function(e){var i=this;if(0!==e.length){var r=[],n={};if(e){var o=c.a.POI_ICON_SIZE;e.forEach(function(e){var a=i._map.transform4326ToMap(e.coord);if(e.hasOwnProperty("icon")){var s={anchor:[o/2,o/2],src:e.icon.src,scale:e.icon.size[0]/o},l=n[e.icon.src];l||(l=t.createStyle(s),n[e.src]=l);var u=new g.a({geometry:new _.a(a)});u.setId("icon_"+e.id),u.setStyle(l),u.set("data",e),r.push(u)}if(e.hasOwnProperty("txt")){var h=e.txt.offset||[],c=e.txt.size,p=e.txt.anchor,d=void 0;d=!!(p&&p.length>0);for(var f=0;f<c.length;f++){var y={offset:h[f],size:c[f],src:e.txt.src};y.anchor=d?p[f]:void 0,d||(y.anchorXUnits="fraction",y.anchorYUnits="fraction");var v=t.createStyle(y),m=new g.a({geometry:new _.a(a)}),E="txt_"+e.id+"_"+f;m.setStyle(v),m.setId(E),m.set("data",e),r.push(m)}}}),this._layer.addFeature(r)}n={}}}},{key:"removeRactangleBox",value:function(){var t=a.a[this._styleType].poiStyle.defOpacity;for(var e in this._tempMoveFeatureData)if("boxObj"==e){var i=this._tempMoveFeatureData.boxObj;this._layer.removeFeature([i])}else{var r=this._tempMoveFeatureData[e];r.getStyle().getImage().setOpacity(t)}}},{key:"addRactangleBox",value:function(e){if(e&&e.infor){var i=e.infor,r="box_"+i.id,n=this._map.transform4326ToMap(i.coord),o=new g.a({geometry:new _.a(n)}),s=i.icon.size,l=s[0]>s[1]?s[0]:s[1],u=this._styleType+l,h=t.poiStyleCache[u];if(!h){var c=l/2+1,p={xaxis:0,yaxis:0,width:l+2,height:l+2,radius:c},y=a.a[this._styleType].poiStyle.fillColor,v=t.getRoundRectCanvas(p,y);h=new d.a({image:new f.a({img:v,imgSize:[v.width,v.height]}),zIndex:-1}),t.poiStyleCache[u]=h}return o.setStyle(h),o.setId(r),this._layer.addFeature([o]),o}}},{key:"clearData",value:function(){this.removeRactangleBox(),this._tempMoveFeatureData={},this._layer&&this._layer.clearAllFeature()}},{key:"destroy",value:function(){this._layer&&this._map&&(this._layer.off(),this._map.removeLayer([this._layer]),this._poiEvent=null,this._layer=null,this._map=null,t.poiStyleCache={}),Object(p.b)()}}],[{key:"createStyle",value:function(t){return new d.a({image:new f.a({anchor:t.anchor,anchorXUnits:t.anchorXUnits||"pixels",anchorYUnits:t.anchorYUnits||"pixels",src:t.src,scale:t.scale,offset:t.offset,size:t.size})})}},{key:"getRoundRectCanvas",value:function(t,e){var i=t.xaxis||0,r=t.yaxis||0,n=t.width,o=t.height,a=t.radius,s=document.createElement("canvas");s.width=n,s.height=o;var l=s.getContext("2d");return n<4*a&&(a=n/4),o<4*a&&(a=o/4),l.beginPath(),l.moveTo(i+a,r),l.arcTo(i+n,r,i+n,r+o,a),l.arcTo(i+n,r+o,i,r+o,a),l.arcTo(i,r+o,i,r,a),l.arcTo(i,r,i+n,r,a),l.closePath(),l.fillStyle=e,l.fill(),s}},{key:"getPopupContent",value:function(t){var e=t.styleObj;return'<div><pre style="margin:0;padding:0;"><div style="text-align: center;"><span style="font-size:'+e.textFontSize+";font-family:"+e.textFontFamily+";color:"+e.textColor+';">'+t.context+"</span></div></pre></div>"}}]),t}();v.poiStyleCache={}},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}i.d(e,"a",function(){return m});var n=i(87),o=i.n(n),a=i(92),s=i.n(a),l=i(3),u=i.n(l),h=i(10),c=i(82),p=i(195),d=i(105),f=i(104),_=i(277),g=i(108),y="function"==typeof s.a&&"symbol"==typeof o.a?function(t){return typeof t}:function(t){return t&&"function"==typeof s.a&&t.constructor===s.a&&t!==s.a.prototype?"symbol":typeof t},v=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),u()(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),m=function(){function t(){r(this,t)}return v(t,null,[{key:"checkJsonValueType",value:function(t,e){switch(t){case c.a.DT_NUMBER:return h.j(e);case c.a.DT_STR:return h.l(e);case c.a.DT_ARRAY:return h.g(e);case c.a.DT_BOOL:return h.h(e);case c.a.DT_OBJ:return"object"===(void 0===e?"undefined":y(e))}return!1}},{key:"parserJsonData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.sourceObj,r=e.txtImgURL,n=e.iBuildId,o=e.iFloorId,a=e.styleType,s=e.languageType,l=[],u=null;if(i&&t.parserJsonFloorRoot.length>0){var h=t.parserJsonFloorRoot[0];if(i.hasOwnProperty(h.key)){var c=i[h.key];t.checkJsonValueType(h.type,c)&&(u=c)}}if(u)for(var p=0;p<t.parserJsonFloorInfo.length;p++){var d=t.parserJsonFloorInfo[p];if(!u.hasOwnProperty(d.key))return l;var f=u[d.key];if(!t.checkJsonValueType(d.type,f))return l;if(d.check){var _=d.parserHandler;_&&(l=_({poiData:f,txtImgURL:r,iBuildId:n,iFloorId:o,styleType:a,languageType:s}))}}return l}},{key:"getPoiData",value:function(t,e){for(var i=0;i<t.length;i++)if(e==t[i].properties.poi_id)return t[i]}},{key:"parserPoi",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.poiData,r=e.txtImgURL,n=e.iBuildId,o=e.iFloorId,a=e.styleType,s=e.languageType,l=Object(d.getIndoorDataManager)(n),u=l.getFeatureData(o,"poi_info");if(!l||!u)return[];var h=Object(f.getStyleManager)(a);if(!h)return[];for(var c=[],p=0;p<i.length;++p){for(var _=i[p],g={},y=0;y<t.parserPoiInfo.length;++y){var v=t.parserPoiInfo[y];if(_.hasOwnProperty(v.key)){var m=_[v.key];t.checkJsonValueType(v.type,m)&&(g[v.key]=m)}}var E=t._createPoi({poiInfo:g,txtImgURL:r,styleType:a,languageType:s,poiTopoJsonDatas:u,styleManager:h});E&&c.push(E)}return c}},{key:"_createPoi",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.poiInfo,r=e.txtImgURL,n=e.styleType,o=e.languageType,a=e.poiTopoJsonDatas,s=e.styleManager,l=i[t.poiJsonInDataType.POI_IN_ID],u=t.getPoiData(a,l);if(!u||!u.properties.hasOwnProperty("category"))return null;var c=s.getStyleByFilter("symbol","poi_info",{category:u.properties.category});if(!c)return null;var d=o===g.LanguageType.ENGLISH?u.properties.name_en:u.properties.name,f=c.get("iconImage"),_=c.get("iconSize"),y=c.get("textAnchors"),v=u.geometry.coordinates,m=c.get("maxZoom"),E=c.get("minZoom"),T=c.get("minTextZ"),S=c.get("maxTextZ"),R=i[t.poiJsonInDataType.POI_IN_TYPE];if(t.poiDisplayType.POI_TYPE_ICON_TXT===R){var I=_,x=t._POIImg({poi_id:l,poi_name:d,poi_url:p.a.getPoiImagesUrlByStyleType(n,f),poi_coord:v,imgSize:I}),C=i[t.poiJsonInDataType.POI_IN_POS],O=0,P=0;if(h.g(C))for(var L=0;L<C.length;++L){var A=C[L][t.poiJsonInDataType.POI_IN_W],w=C[L][t.poiJsonInDataType.POI_IN_H];O<A&&(O=A),P+=w}return{poiCoord:v,poiImg:x,poiTxt:t._POITxt({poi_id:l,txtImgURL:r,poi_coord:v,txtPos:C,poi_name:d}),type:R,txtLayArray:y,txtSize:{w:O,h:P},poiImgLonlat:{coordinate:v,width:I[0],height:I[1]},poiBound:void 0,zoomLevel:{maxZoom:m,minZoom:E,minTextZoom:T,maxTextZoom:S}}}if(t.poiDisplayType.POI_TYPE_ICON===R){var M=_;return{poiCoord:v,poiImg:t._POIImg({poi_id:l,poi_name:d,poi_url:p.a.getPoiImagesUrlByStyleType(n,f),poi_coord:v,imgSize:M}),type:R,poiImgLonlat:{coordinate:v,width:M[0],height:M[1]},poiBound:void 0,zoomLevel:{maxZoom:m,minZoom:E}}}if(t.poiDisplayType.POI_TYPE_TXT===R){var F=i[t.poiJsonInDataType.POI_IN_POS],N=0,b=0;if(h.g(F))for(var D=0;D<F.length;++D){var k=F[D][t.poiJsonInDataType.POI_IN_W],G=F[D][t.poiJsonInDataType.POI_IN_H];N<k&&(N=k),b+=G}for(var U=t._POITxt({poi_id:l,txtImgURL:r,poi_coord:v,txtPos:F,poi_name:d}),B=0,Y=0;Y<F.length;++Y){var j=N/2-F[Y][t.poiJsonInDataType.POI_IN_W]/2;U.anchor.push([N/2-j,b/2-B]),B+=F[Y][t.poiJsonInDataType.POI_IN_H]}return{poiCoord:v,poiTxt:U,type:R,poiImgLonlat:{coordinate:v,width:N,height:b},txtSize:{w:N,h:b},poiBound:void 0,zoomLevel:{maxZoom:m,minZoom:E,minTextZoom:T,maxTextZoom:S}}}}},{key:"_POIImg",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.poi_id,r=e.poi_name,n=e.poi_url,o=e.poi_coord,a=e.imgSize,s={};return h.j(i)&&(s[t.poiRenderDataType.POI_OUT_ID]=i),s[t.poiRenderDataType.POI_OUT_TYPE]=t.poiRenderDataType.POI_OUT_TYPE_ICON,h.l(r)&&(s[t.poiRenderDataType.POI_OUT_POINAME]=r),h.l(n)&&(s[t.poiRenderDataType.POI_OUT_SCR]=n),h.g(o)&&(s[t.poiRenderDataType.POI_OUT_COORD]=o),h.g(a)&&(s[t.poiRenderDataType.POI_OUT_SIZE]=a),s}},{key:"_POITxt",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.poi_id,r=e.txtImgURL,n=e.poi_coord,o=e.txtPos,a=e.poi_name,s={};if(h.j(i)&&(s[t.poiRenderDataType.POI_OUT_ID]=i),s[t.poiRenderDataType.POI_OUT_TYPE]=t.poiRenderDataType.POI_OUT_TYPE_TXT,h.l(a)&&(s[t.poiRenderDataType.POI_OUT_POINAME]=a),h.l(r)&&(s[t.poiRenderDataType.POI_OUT_SCR]=r),h.g(n)&&(s[t.poiRenderDataType.POI_OUT_COORD]=n),h.g(o)){for(var l=[],u=[],c=0;c<o.length;++c)l.push([o[c].w,o[c].h]),u.push([o[c].x,o[c].y]);s[t.poiRenderDataType.POI_OUT_SIZE]=l,s[t.poiRenderDataType.POI_OUT_OFFSET]=u}return s[t.poiRenderDataType.POI_OUT_ANCHOR]=[],s}},{key:"adjustPoiTxtBounds",value:function(e,i){if(!(h.k(e.poiImageFrame)&&h.l(e.txtLay)&&h.j(i)&&h.k(e.txtSize)))return null;var r=e.poiTxt.size;e.poiTxt.anchor.length=0;var n=null,o=0;if(t.poiTxtLayType.TXT_LAY_BOTTOM===e.txtLay){for(var a=0;a<r.length;++a)e.poiTxt.anchor.push([r[a][0]/2,-i-e.poiImageSize[1]/2-o]),o+=r[a][1];var s=i+(e.poiImageFrame._height+e.txtSize.h)/2;n=_.a.toLonLatBounds({coordinate:[e.poiImageFrame._center[0],e.poiImageFrame._center[1]+s],width:e.txtSize.w,height:e.txtSize.h})}else if(t.poiTxtLayType.TXT_LAY_RIGHT===e.txtLay){for(var l=0;l<r.length;++l)e.poiTxt.anchor.push([-i-e.poiImageSize[0]/2,e.txtSize.h/2+o]),o-=r[l][1];var u=i+(e.poiImageFrame._width+e.txtSize.w)/2;n=_.a.toLonLatBounds({coordinate:[e.poiImageFrame._center[0]+u,e.poiImageFrame._center[1]],width:e.txtSize.w,height:e.txtSize.h})}else if(t.poiTxtLayType.TXT_LAY_LEFT===e.txtLay){for(var c=0;c<r.length;++c)e.poiTxt.anchor.push([i+e.poiImageSize[0]/2+r[c][0],e.txtSize.h/2+o]),o-=r[c][1];var p=i+(e.poiImageFrame._width+e.txtSize.w)/2;n=_.a.toLonLatBounds({coordinate:[e.poiImageFrame._center[0]-p,e.poiImageFrame._center[1]],width:e.txtSize.w,height:e.txtSize.h})}else if(t.poiTxtLayType.TXT_LAY_TOP===e.txtLay){for(var d=0;d<r.length;++d)e.poiTxt.anchor.push([r[d][0]/2,i+e.txtSize.h+e.poiImageSize[1]/2+o]),o-=r[d][1];var f=i+(e.poiImageFrame._height+e.txtSize.h)/2;n=_.a.toLonLatBounds({coordinate:[e.poiImageFrame._center[0],e.poiImageFrame._center[1]-f],width:e.txtSize.w,height:e.txtSize.h})}else if(t.poiTxtLayType.TXT_LAY_BOTTOM_LEFT===e.txtLay){i=0;for(var g=0;g<r.length;++g){var y=e.txtSize.w-r[g][0];e.poiTxt.anchor.push([i+e.txtSize.w+e.poiImageSize[0]/2-y,-i-e.poiImageSize[1]/2-o]),o+=r[g][1]}var v=i+e.poiImageFrame._width/2+e.txtSize.w/2,m=i+e.poiImageFrame._height/2+e.txtSize.h/2;n=_.a.toLonLatBounds({coordinate:[e.poiImageFrame._center[0]-v,e.poiImageFrame._center[1]+m],width:e.txtSize.w,height:e.txtSize.h})}else if(t.poiTxtLayType.TXT_LAY_BOTTOM_RIGHT===e.txtLay){i=0;for(var E=0;E<r.length;++E)e.poiTxt.anchor.push([-i-e.poiImageSize[0]/2,-i-e.poiImageSize[1]/2-o]),o+=r[E][1];var T=i+e.poiImageFrame._width/2+e.txtSize.w/2,S=i+e.poiImageFrame._height/2+e.txtSize.h/2;n=_.a.toLonLatBounds({coordinate:[e.poiImageFrame._center[0]+T,e.poiImageFrame._center[1]+S],width:e.txtSize.w,height:e.txtSize.h})}else if(t.poiTxtLayType.TXT_LAY_BOTTOM_LEFT===e.txtLay){i=0;for(var R=0;R<r.length;++R){var I=e.txtSize.w-r[R][0];e.poiTxt.anchor.push([i+e.txtSize.w+e.poiImageSize[0]/2-I,i+e.txtSize.h+e.poiImageSize[1]/2+o]),o-=r[R][1]}var x=i+e.poiImageFrame._width/2+e.txtSize.w/2,C=i+e.poiImageFrame._height/2+e.txtSize.h/2;n=_.a.toLonLatBounds({coordinate:[e.poiImageFrame._center[0]+x,e.poiImageFrame._center[1]-C],width:e.txtSize.w,height:e.txtSize.h})}else if(t.poiTxtLayType.TXT_LAY_TOP_RIGHT===e.txtLay){i=0;for(var O=0;O<r.length;++O)e.poiTxt.anchor.push([-i-e.poiImageSize[0]/2,i+e.txtSize.h+e.poiImageSize[1]/2+o]),o-=r[O][1];var P=i+e.poiImageFrame._width/2+e.txtSize.w/2,L=i+e.poiImageFrame._height/2+e.txtSize.h/2;n=_.a.toLonLatBounds({coordinate:[e.poiImageFrame._center[0]+P,e.poiImageFrame._center[1]-L],width:e.txtSize.w,height:e.txtSize.h})}else if(t.poiTxtLayType.TXT_LAY_TOP_LEFT===e.txtLay){i=0;for(var A=0;A<r.length;++A){var w=e.txtSize.w-r[A][0];e.poiTxt.anchor.push([i+e.txtSize.w+e.poiImageSize[0]/2-w,i+e.txtSize.h+e.poiImageSize[1]/2+o]),o-=r[A][1]}var M=i+e.poiImageFrame._height/2+e.txtSize.h/2,F=i+e.poiImageFrame._width/2+e.txtSize.w/2;n=_.a.toLonLatBounds({coordinate:[e.poiImageFrame._center[0]-F,e.poiImageFrame._center[1]-M],width:e.txtSize.w,height:e.txtSize.h})}return n}}]),t}();m.poiJsonInDataType={POI_IN_FJ:"fj",POI_IN_FI:"fi",POI_IN_POI:"poi",POI_IN_ID:"id",POI_IN_TYPE:"type",POI_IN_POS:"pos",POI_IN_X:"x",POI_IN_Y:"y",POI_IN_W:"w",POI_IN_H:"h"},m.parserJsonFloorRoot=[{check:!0,key:m.poiJsonInDataType.POI_IN_FJ,type:c.a.DT_OBJ}],m.parserJsonFloorInfo=[{check:!0,key:m.poiJsonInDataType.POI_IN_FI,type:c.a.DT_NUMBER},{check:!0,key:m.poiJsonInDataType.POI_IN_POI,type:c.a.DT_ARRAY,parserHandler:m.parserPoi}],m.parserPoiInfo=[{check:!0,key:m.poiJsonInDataType.POI_IN_ID,type:c.a.DT_NUMBER},{check:!0,key:m.poiJsonInDataType.POI_IN_TYPE,type:c.a.DT_NUMBER},{check:!0,key:m.poiJsonInDataType.POI_IN_POS,type:c.a.DT_ARRAY}],m.poiRenderDataType={POI_OUT_ID:"id",POI_OUT_TYPE:"type",POI_OUT_TYPE_ICON:"icon",POI_OUT_TYPE_TXT:"txt",POI_OUT_POINAME:"poiname",POI_OUT_SCR:"src",POI_OUT_COORD:"coord",POI_OUT_SIZE:"size",POI_OUT_OFFSET:"offset",POI_OUT_ANCHOR:"anchor"},m.poiTxtLayType={TXT_LAY_BOTTOM:"bottom",TXT_LAY_TOP:"top",TXT_LAY_LEFT:"left",TXT_LAY_RIGHT:"right",TXT_LAY_TOP_LEFT:"top_left",TXT_LAY_TOP_RIGHT:"top_right",TXT_LAY_BOTTOM_LEFT:"bottom_left",TXT_LAY_BOTTOM_RIGHT:"bottom_right"},m.poiDisplayType={POI_TYPE_ICON:1,POI_TYPE_TXT:2,POI_TYPE_ICON_TXT:3}},function(t,e,i){"use strict";i.d(e,"a",function(){return r});var r={LOAD:"load",SWITCHFLOOR:"switchfloor",CLICK:"click",POINTEROVER:"pointerover",POINTEROUT:"pointerout"}},function(t,e,i){"use strict";var r=i(457),n=i(458),o=i(460),a=i(140),s=i(461);i.d(e,"d",function(){return r}),i.d(e,"e",function(){return n}),i.d(e,"b",function(){return o}),i.d(e,"a",function(){return a}),i.d(e,"c",function(){return s})},function(t,e,i){"use strict";function r(t,e){var i=0;if(u.g(t)&&u.g(e)){i=new l.a(h).haversineDistance(t,e)}return i}function n(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=e.projection,r=e.radius;return l.a.getLength(t,{projection:i,radius:r||h})}function o(t,e,i){var r=Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2),n=Math.pow(e[0]-i[0],2)+Math.pow(e[1]-i[1],2),o=((e[0]-t[0])*(i[0]-e[0])+(e[1]-t[1])*(i[1]-e[1]))/Math.sqrt(r*n),s=180*Math.acos(o)/Math.PI,l=a(t,e,i);return s=0===l?0:1===l?180-s:180+s,u.e(s,6)}function a(t,e,i){var r=(e[0]-t[0])*(i[1]-e[1]),n=(e[1]-t[1])*(i[0]-e[0]),o=r-n;return o>0?1:o<0?2:0}function s(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=e.projection,r=e.radius;return l.a.getArea(t,{projection:i,radius:r||h})}Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"distance",function(){return r}),i.d(e,"geomLength",function(){return n}),i.d(e,"angle",function(){return o}),i.d(e,"geomArea",function(){return s});var l=i(167),u=i(10),h=6378137},function(t,e,i){"use strict";function r(t,e){var i=void 0,r=void 0;return t.geometry.coordinates?(i=t,r=e):(i=t.geometry,Object(s.g)(i)&&(i=a(i,t.type)),r=e.geometry,Object(s.g)(r)&&(r=a(r,e.type))),u.a.difference(i,r)}function n(t,e){var i=void 0,r=void 0;return t.geometry.coordinates?(i=t,r=e):(i=t.geometry,Object(s.g)(i)&&(i=a(i,t.type)),r=e.geometry,Object(s.g)(r)&&(r=a(r,e.type))),u.a.intersect(i,r)}function o(t,e){var i=void 0,r=void 0;return t.geometry.coordinates?(i=t,r=e):(i=t.geometry,Object(s.g)(i)&&(i=a(i,t.type)),r=e.geometry,Object(s.g)(r)&&(r=a(r,e.type))),u.a.union(i,r)}function a(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return{type:"Feature",geometry:{type:e||"Polygon",coordinates:t},properties:i}}Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"difference",function(){return r}),i.d(e,"intersect",function(){return n}),i.d(e,"union",function(){return o});var s=i(10),l=i(459),u=i.n(l)},function(t,e){t.exports=i},function(t,e,i){"use strict";function r(t,e){var i=e[0]-t[0],r=e[1]-t[1],n=0;return i>0&&r>0?n=Math.PI/2-Math.atan(r/i):i>0&&0===r?n=Math.PI/2:i>0&&r<0?n=Math.PI/2+Math.atan(Math.abs(r)/i):0===i&&r<0?n=Math.PI:i<0&&r<0?n=3*Math.PI/2-Math.atan(r/i):i<0&&0===r?n=3*Math.PI/2:i<0&&r>0?n=3*Math.PI/2+Math.atan(r/Math.abs(i)):0===i&&r>0&&(n=2*Math.PI),n}function n(t,e,i,r){var n=2*Math.PI/720,a=0,s=[];if(i<r)for(var l=0;l<720;l++)(a=l*n)>=i&&a<=r&&s.push(o(t,e,a));if(i>r){for(var u=[],h=[],c=0;c<720;c++)a=c*n,a>=i&&a<=2*Math.PI&&u.push(o(t,e,a)),a>=0&&a<=r&&h.push(o(t,e,a));s=u.concat(h)}return s}function o(t,e,i){var r=void 0,n=void 0;return i>0&&i<Math.PI/2?(r=t[0]+Math.sin(i)*e,n=t[1]+Math.cos(i)*e):i===Math.PI/2?(r=t[0]+e,n=t[1]):i>Math.PI/2&&i<Math.PI?(r=t[0]+Math.cos(i-Math.PI/2)*e,n=t[1]-Math.sin(i-Math.PI/2)*e):i===Math.PI?(r=t[0],n=t[1]-e):i>Math.PI&&i<3*Math.PI/2?(r=t[0]-Math.cos(3*Math.PI/2-i)*e,n=t[1]-Math.sin(3*Math.PI/2-i)*e):i===3*Math.PI/2?(r=t[0]-e,n=t[1]):i>3*Math.PI/2&&i<2*Math.PI?(r=t[0]-Math.cos(i-3*Math.PI/2)*e,n=t[1]+Math.sin(i-3*Math.PI/2)*e):0!==i&&i!==2*Math.PI||(r=t[0],n=t[1]+e),[r,n]}Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"calAzimuthVal",function(){return r}),i.d(e,"calArcCoords",function(){return n}),i.d(e,"calEndPointCoords",function(){return o})},function(t,e,i){"use strict";function r(t){if(2===t.coordinates.length){var e=[],i=t.coordinates[0],r=t.coordinates[1],n=t.radius[0],l=t.radius[1],u=t.azimuth[0],h=t.azimuth[1],c=s.a.fromLonLat(i),p=s.a.fromLonLat(r),d=Math.PI/2-u/180*Math.PI,f=Math.PI/2-h/180*Math.PI,_=c[0]+n*Math.cos(d),g=c[1]+n*Math.sin(d),y=p[0]+l*Math.cos(f),v=p[1]+l*Math.sin(f),m=s.a.fromLonLat(i),E=s.a.fromLonLat(r),T=[_,g],S=[y,v],R=[new o(m[0],m[1]),new o(T[0],T[1]),new o(S[0],S[1]),new o(E[0],E[1])],I=t.numberOfPoints,x=[];if(a(R,I,x),x.length>0)for(var C=0;C<x.length;C++)e.push(s.a.toLonLat([x[C].x,x[C].y]));return e}}function n(t,e){var i=void 0,r=void 0,n=void 0,a=void 0,s=void 0,l=void 0,u=void 0,h=void 0,c=new o;return n=3*(t[1].x-t[0].x),r=3*(t[2].x-t[1].x)-n,i=t[3].x-t[0].x-n-r,l=3*(t[1].y-t[0].y),s=3*(t[2].y-t[1].y)-l,a=t[3].y-t[0].y-l-s,u=e*e,h=u*e,c.x=i*h+r*u+n*e+t[0].x,c.y=a*h+s*u+l*e+t[0].y,c}function o(t,e){this.x=t||0,this.y=e||0}function a(t,e,i){var r=void 0,o=void 0;for(r=1/(e-1),o=0;o<e;o++)i[o]=n(t,o*r)}Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"getBezierLine",function(){return r});var s=i(8)},function(t,e,i){"use strict";var r=i(194),n=i(275);i.d(e,"b",function(){return r}),i.d(e,"a",function(){return n})},function(t,e,i){"use strict";var r=i(464),n=i(38);i.d(e,"b",function(){return r.a}),i.d(e,"a",function(){return n})},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=d()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(c.a?c()(t,e):t.__proto__=e)}i.d(e,"a",function(){return V});var a=i(3),s=i.n(a),l=i(37),u=i.n(l),h=i(14),c=i.n(h),p=i(11),d=i.n(p),f=i(31),_=i.n(f),g=i(166),y=i.n(g),v=i(15),m=i.n(v),E=i(176),T=i(38),S=i(194),R=i(465),I=i(470),x=i(196),C=i(102),O=i(10),P=i(132),L=i(81),A=i(257),w=i(278),M=i.n(w),F=i(471),N=i.n(F),b=i(474),D=i(181),k=i(279),G=i(29),U=i(136),B=i(280),Y=i(281),j=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),s()(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),X=function t(e,i,r){null===e&&(e=Function.prototype);var n=u()(e,i);if(void 0===n){var o=m()(e);return null===o?void 0:t(o,i,r)}if("value"in n)return n.value;var a=n.get;if(void 0!==a)return a.call(r)},V=function(t){function e(t){r(this,e);var i=n(this,(e.__proto__||m()(e)).call(this));if(i._properties={},i._options=t,i._baseLayer=new U.a,i._isGCJProjection=!1,void 0===t.divId||null===t.divId||void 0===t.center||null===t.center||void 0===t.zoom||null===t.zoom){var o;return o=null,n(i,o)}return i.mapLoadFunc=function(t){this.fire(x.c.LOAD,t)},i._createBaseLayer(),i}return o(e,t),j(e,[{key:"_createBaseLayer",value:function(){this._options.projection&&T.SystemProj.PROJ4326===this._options.projection?this._currProj=T.SystemProj.PROJ4326:this._currProj=T.SystemProj.PROJ3857,this._transformInd=T.MapProperty.PROJECTION===this._currProj,this._currMapType=this._options.mapType||T.MapType.BLANK_MAP,this._gmapDiv=document.getElementById(this._options.divId+"Gmap"),T.OutMapType.hasOwnProperty(this._currMapType.toLocaleUpperCase())?(this._gmapDiv?(this._gmapDiv.innerHTML="",this._gmapDiv.style.cssText=""):(this._gmapDiv=C.b("div","gmap"),C.g(this._gmapDiv,C.e("ol-viewport")),this._gmapDiv.id=this._options.divId+"Gmap",C.d(this._options.divId).style.position="relative"),this._isGCJProjection=!0):(this._gmapDiv&&C.h(this._gmapDiv),this._isGCJProjection=!1);var t=Object(R.a)(this._options);this._baseLayer.setSource(t.source);var e=t.gmap,i={};this._options.zoomRange&&(i=this._options.zoomRange);var r=i.minZoom,n=i.maxZoom;isNaN(r)||((r=Number(r))<T.MapProperty.MIN_ZOOM||r>T.MapProperty.MAX_ZOOM)&&(r=T.MapProperty.MIN_ZOOM),isNaN(n)||((n=Number(n))<T.MapProperty.MIN_ZOOM||n>T.MapProperty.MAX_ZOOM)&&(n=T.MapProperty.MAX_ZOOM),r>n&&(r=T.MapProperty.MIN_ZOOM,n=T.MapProperty.MAX_ZOOM);var o=T.MapProperty.ZOOM;!isNaN(this._options.zoom)&&Number(this._options.zoom)>=0&&(o=Number(this._options.zoom)),this._options.resolutions&&this._options.resolutions.length<=n&&(this._options.resolutions=O.c(this._options.resolutions,n)),this._currOlView=new D.a({projection:this._currProj,extent:this._options.extent||void 0,resolutions:this._options.resolutions||void 0,minZoom:r,maxZoom:n,center:this._normalTransform(this._options.center),zoom:o}),e&&(this._currOlView.on("change:center",function(t){var i=this._normalTransform(t.target.getCenter(),!0);T.OutMapType.GAODE_ROAD_MAP===this._currMapType||T.OutMapType.GAODE_AERIAL_MAP===this._currMapType?e.setCenter(i):e.setCenter(new M.a.maps.LatLng(i[1],i[0]))},this),this._currOlView.on("change:resolution",function(t){var i=t.target.getZoom();T.OutMapType.GAODE_ROAD_MAP===this._currMapType||(T.OutMapType.GAODE_AERIAL_MAP,this._currMapType),e.setZoom(i)},this))}},{key:"loadMap",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this._currOlMap=new b.a({layers:[this._baseLayer],interactions:Y.a.defaults({doubleClickZoom:!1}),controls:k.a.defaults({attribution:!1,rotate:!1,zoom:!1}).extend(this._setControls(t)),target:this._options.divId,logo:this._options.logo}),this._currOlMap.setView(this._currOlView),this._mapEventObj=new I.a(this),Object(P.a)({map:this._currOlMap})}},{key:"switchBaseMap",value:function(t){if(t.center||(t.center=this.getCenter()),!t.zoom){var e=this.getZoom();t.hasOwnProperty("zoomRange")&&t.zoomRange.hasOwnProperty("maxZoom")&&t.zoomRange.maxZoom<e&&(e=t.zoomRange.maxZoom),t.zoom=e}y()(this._options,t),this._createBaseLayer(),this._currOlMap.setView(this._currOlView);for(var i in this._currOlMap.controls.array_){var r=this._currOlMap.controls.array_[i],n=r.name;if(n&&"showZoomControl"==n){r._createListen(this._currOlMap);break}}}},{key:"_registerEvent",value:function(t,e){this._mapEventObj.registerEvent(t,e)}},{key:"_unRegisterEvent",value:function(t,e){this._mapEventObj.unRegisterEvent(t,e)}},{key:"on",value:function(t,e){return this._registerEvent(t,e),this.addEventListener(t,e)}},{key:"once",value:function(t,i){X(e.prototype.__proto__||m()(e.prototype),"once",this).call(this,t,i),x.c.LOAD===t?this._baseLayer.getSource().once("tileloadend",this.mapLoadFunc,this):this._registerEvent(t,i)}},{key:"off",value:function(t,e){this.removeEventListener(t,e),this._unRegisterEvent(t,e)}},{key:"_setControls",value:function(t){var e=[new B.a({collapsible:!1})],i=!0,r=!1,n=void 0;try{for(var o,a=_()(t);!(i=(o=a.next()).done);i=!0){var s=o.value;s instanceof G.a?e.push(s):(s._olMousePostionControl&&e.push(s._olMousePostionControl),s._olZoomS&&e.push(s._olZoomS),s._olZoom&&e.push(s._olZoom),s._olSlider&&e.push(s._olSlider))}}catch(t){r=!0,n=t}finally{try{!i&&a.return&&a.return()}finally{if(r)throw n}}return e}},{key:"getOlMap",value:function(){return this._currOlMap}},{key:"destoryMap",value:function(){this.removeEventListener(),this._mapEventObj=null,Object(P.b)(this._currOlMap),this._currOlView=null,this._baseLayer=null,this._currOlMap.setTarget(void 0),this._currOlMap=null,this._options=null}},{key:"resizeMap",value:function(){this._currOlMap.updateSize()}},{key:"getLayer",value:function(){return this._currOlMap.getLayers()}},{key:"exportMap",value:function(){this._currOlMap.once("postcompose",function(t){var e=t.context.canvas;navigator.msSaveBlob?navigator.msSaveBlob(e.msToBlob(),"map.png"):e.toBlob(function(t){window.saveAs?window.saveAs(t,"map.png"):N.a.saveAs(t,"map.png")})}),this._currOlMap.renderSync()}},{key:"setMapFilter",value:function(t){console.log(t)}},{key:"setZoom",value:function(t){if(O.j(t)){var e=this._currOlView;t>=e.getMinZoom()&&t<=e.getMaxZoom()&&e.setZoom(t)}}},{key:"getZoom",value:function(){return this._currOlView.getZoom()}},{key:"setCenter",value:function(t){if(t&&O.g(t)){var e=this._gcjTransform(t);e=this._normalTransform(e),this._currOlView.setCenter(e)}}},{key:"getCenter",value:function(){var t=this._normalTransform(this._currOlView.getCenter(),!0);return this._gcjTransform(t,!0)}},{key:"_gcjTransform",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this._isGCJProjection?S.gcjTransform(t,e):t}},{key:"_normalTransform",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this._transformInd?S.normalTransform(t,e):t}},{key:"transform4326ToMap",value:function(t){if(O.g(t)){this._gcjTransform(t,!1);return this._normalTransform(t,!1)}}},{key:"transformMapTo4326",value:function(t){if(O.g(t)){this._gcjTransform(t,!0);return this._normalTransform(t,!0)}}},{key:"setExtent",value:function(t){t&&O.g(t)&&4===t.length&&(this._transformInd&&(t=S.normalExtentTransform(t,!1)),this._currOlView.fit(t,this._currOlMap.getSize()))}},{key:"getExtent",value:function(){var t=this._currOlView.calculateExtent(this._currOlMap.getSize());return this._transformInd?S.normalExtentTransform(t,!0):t}},{key:"addLayer",value:function(t){var e=!0,i=!1,r=void 0;try{for(var n,o=_()(t);!(e=(n=o.next()).done);e=!0){var a=n.value;a instanceof L.a&&this._currOlMap.addLayer(a._olLayer),a._setMap(this),this.fire(x.b.LAYERADD,a)}}catch(t){i=!0,r=t}finally{try{!e&&o.return&&o.return()}finally{if(i)throw r}}}},{key:"removeLayer",value:function(t){var e=!0,i=!1,r=void 0;try{for(var n,o=_()(t);!(e=(n=o.next()).done);e=!0){var a=n.value;this.fire(x.b.LAYERREMOVE,a),(a instanceof L.a||a instanceof A.a)&&(a._olLayer&&this._currOlMap.removeLayer(a._olLayer),a.destroy())}}catch(t){i=!0,r=t}finally{try{!e&&o.return&&o.return()}finally{if(i)throw r}}}},{key:"addControl",value:function(t){var e=!0,i=!1,r=void 0;try{for(var n,o=_()(t);!(e=(n=o.next()).done);e=!0){var a=n.value;a instanceof G.a?a._setMap?(a._setMap(this._currOlMap),"showZoomControl"==a.name&&this._currOlMap.addControl(a)):this._currOlMap.addControl(a):a._setMap(this._currOlMap)}}catch(t){i=!0,r=t}finally{try{!e&&o.return&&o.return()}finally{if(i)throw r}}}},{key:"removeControl",value:function(t){var e=!0,i=!1,r=void 0;try{for(var n,o=_()(t);!(e=(n=o.next()).done);e=!0){var a=n.value;a instanceof G.a?a._destroy?(a._destroy(this._currOlMap),"showZoomControl"==a.name&&this._currOlMap.removeControl(a)):this._currOlMap.removeControl(a):a._destroy(this._currOlMap)}}catch(t){i=!0,r=t}finally{try{!e&&o.return&&o.return()}finally{if(i)throw r}}}},{key:"addPopup",value:function(t){t._setMap(this._currOlMap)}},{key:"removePopup",value:function(t){t._destroy(this._currOlMap)}},{key:"setZoomRange",value:function(t){t.hasOwnProperty("minZoom")&&t.minZoom>=T.MapProperty.MIN_ZOOM&&t.minZoom<=T.MapProperty.MAX_ZOOM&&this._currOlView.setMinZoom(t.minZoom),t.hasOwnProperty("maxZoom")&&t.maxZoom>=T.MapProperty.MIN_ZOOM&&t.maxZoom<=T.MapProperty.MAX_ZOOM&&this._currOlView.setMaxZoom(t.maxZoom)}},{key:"getZoomRange",value:function(){return{minZoom:this._currOlView.getMinZoom(),maxZoom:this._currOlView.getMaxZoom()}}},{key:"setGCJProjection",value:function(t){this._isGCJProjection=t}},{key:"getGCJProjection",value:function(){return this._isGCJProjection}},{key:"getTransformInd",value:function(){return this._transformInd}},{key:"getProjection",value:function(){return this._currProj}},{key:"getMapType",value:function(){return this._currMapType}},{key:"setCustomeAttr",value:function(t){this._properties=t}},{key:"getCustomeAttr",value:function(){return this._properties}}]),e}(E.a)},function(t,e,i){"use strict";function r(t){var e=t.wrapX||!1,i=t.copyrightStr||"",r=t.mapType,p=t.key,f=t.url,v=document.getElementById(t.divId+"Gmap"),m=new n.a({wrapX:e}),E=null;return c.MapType.OPENSTREET_MAP===r?m=new o.a({url:f,wrapX:e}):c.MapType.BING_ROAD_MAP===r?m=new a.a({wrapX:e,key:p,imagerySet:y.ROAD}):c.MapType.BING_AERIAL_MAP===r?m=new a.a({wrapX:e,key:p,imagerySet:y.AERIAL}):c.MapType.BING_AERIALWITHLABELS_MAP===r?m=new a.a({wrapX:e,key:p,imagerySet:y.AERIALWITHLABELS}):c.MapType.ARCGIS_MAP===r?m=new s.a({wrapX:e,url:f}):c.MapType.XYZ_MAP===r?m=h.g(f)?new n.a({urls:f,wrapX:e}):new n.a({url:f,wrapX:e,tileGrid:t.tileGrid,projection:t.projection||c.MapProperty.PROJECTION,crossOrigin:t.crossOrigin||void 0}):c.MapType.WMS_MAP===r?m=new u.a({wrapX:e,url:f,params:t.layerParams,tileGrid:t.tileGrid,crossOrigin:t.crossOrigin||void 0}):c.OutMapType.GAODE_ROAD_MAP===r?E=new _.a.Map(v.id,{rotateEnable:!1,resizeEnable:!0,dragEnable:!1,doubleClickZoom:!1,keyboardEnable:!1,scrollWheel:!1}):c.OutMapType.GAODE_AERIAL_MAP===r?E=new _.a.Map(v.id,{layers:[new _.a.TileLayer.Satellite,new _.a.TileLayer.RoadNet],rotateEnable:!1,resizeEnable:!0,dragEnable:!1,doubleClickZoom:!1,keyboardEnable:!1,scrollWheel:!1}):c.OutMapType.GOOGLE_ROAD_MAP===r?E=new d.a.maps.Map(v,{mapTypeId:d.a.maps.MapTypeId.ROADMAP,disableDefaultUI:!0,keyboardShortcuts:!1,draggable:!1,disableDoubleClickZoom:!0,scrollwheel:!1,streetViewControl:!1}):c.OutMapType.GOOGLE_SATELLITE_MAP===r?E=new d.a.maps.Map(v,{mapTypeId:d.a.maps.MapTypeId.SATELLITE,disableDefaultUI:!0,keyboardShortcuts:!1,draggable:!1,disableDoubleClickZoom:!0,scrollwheel:!1,streetViewControl:!1}):c.OutMapType.GOOGLE_HYBRID_MAP===r?E=new d.a.maps.Map(v,{mapTypeId:d.a.maps.MapTypeId.HYBRID,disableDefaultUI:!0,keyboardShortcuts:!1,draggable:!1,disableDoubleClickZoom:!0,scrollwheel:!1,streetViewControl:!1}):c.OutMapType.GOOGLE_TERRAIN_MAP===r?E=new d.a.maps.Map(v,{mapTypeId:d.a.maps.MapTypeId.TERRAIN,disableDefaultUI:!0,keyboardShortcuts:!1,draggable:!1,disableDoubleClickZoom:!0,scrollwheel:!1,streetViewControl:!1}):c.MapType.WMTS_MAP===r&&(m=new g.a({url:f,layer:t.layer,style:t.style||"default",requestEncoding:t.requestEncoding||"KVP",tilePixelRatio:t.tilePixelRatio,format:t.format,matrixSet:t.matrixSet,tileGrid:t.tileGrid,projection:t.projection})),m.setAttributions(new l.a({html:i})),{source:m,gmap:E}}e.a=r;var n=i(139),o=i(274),a=i(466),s=i(468),l=i(228),u=i(248),h=i(10),c=i(38),p=i(278),d=i.n(p),f=i(469),_=i.n(f),g=i(255),y={ROAD:"Road",AERIAL:"Aerial",AERIALWITHLABELS:"AerialWithLabels"}},function(t,e,i){"use strict";var r=i(0),n=i(183),o=i(1),a=i(467),s=i(8),l=i(63),u=i(103),h=i(56),c=i(101),p=function(t){this.hidpi_=void 0!==t.hidpi&&t.hidpi,u.a.call(this,{cacheSize:t.cacheSize,crossOrigin:"anonymous",opaque:!0,projection:s.a.get("EPSG:3857"),reprojectionErrorThreshold:t.reprojectionErrorThreshold,state:l.a.LOADING,tileLoadFunction:t.tileLoadFunction,tilePixelRatio:this.hidpi_?2:1,wrapX:void 0===t.wrapX||t.wrapX,transition:t.transition}),this.culture_=void 0!==t.culture?t.culture:"en-us",this.maxZoom_=void 0!==t.maxZoom?t.maxZoom:-1,this.apiKey_=t.key,this.imagerySet_=t.imagerySet;var e="https://dev.virtualearth.net/REST/v1/Imagery/Metadata/"+this.imagerySet_+"?uriScheme=https&include=ImageryProviders&key="+this.apiKey_+"&c="+this.culture_;a.a.jsonp(e,this.handleImageryMetadataResponse.bind(this),void 0,"jsonp")};r.a.inherits(p,u.a),p.TOS_ATTRIBUTION='<a class="ol-attribution-bing-tos" href="https://www.microsoft.com/maps/product/terms.html">Terms of Use</a>',p.prototype.getApiKey=function(){return this.apiKey_},p.prototype.getImagerySet=function(){return this.imagerySet_},p.prototype.handleImageryMetadataResponse=function(t){if(200!=t.statusCode||"OK"!=t.statusDescription||"ValidCredentials"!=t.authenticationResultCode||1!=t.resourceSets.length||1!=t.resourceSets[0].resources.length)return void this.setState(l.a.ERROR);var e=t.brandLogoUri;-1==e.indexOf("https")&&(e=e.replace("http","https"));var i=t.resourceSets[0].resources[0],r=-1==this.maxZoom_?i.zoomMax:this.maxZoom_,a=this.getProjection(),u=c.a.extentFromProjection(a),d=i.imageWidth==i.imageHeight?i.imageWidth:[i.imageWidth,i.imageHeight],f=c.a.createXYZ({extent:u,minZoom:i.zoomMin,maxZoom:r,tileSize:d/(this.hidpi_?2:1)});this.tileGrid=f;var _=this.culture_,g=this.hidpi_;if(this.tileUrlFunction=n.a.createFromTileUrlFunctions(i.imageUrlSubdomains.map(function(t){var e=[0,0,0],r=i.imageUrl.replace("{subdomain}",t).replace("{culture}",_);return function(t,i,n){if(t){h.a.createOrUpdate(t[0],t[1],-t[2]-1,e);var o=r;return g&&(o+="&dpi=d1&device=mobile"),o.replace("{quadkey}",h.a.quadKey(e))}}})),i.imageryProviders){var y=s.a.getTransformFromProjections(s.a.get("EPSG:4326"),this.getProjection());this.setAttributions(function(t){var e=[],r=t.viewState.zoom;return i.imageryProviders.map(function(i){for(var n=!1,a=i.coverageAreas,s=0,l=a.length;s<l;++s){var u=a[s];if(r>=u.zoomMin&&r<=u.zoomMax){var h=u.bbox,c=[h[1],h[0],h[3],h[2]],p=o.a.applyTransform(c,y);if(o.a.intersects(p,t.extent)){n=!0;break}}}n&&e.push(i.attribution)}),e.push(p.TOS_ATTRIBUTION),e})}this.setLogo(e),this.setState(l.a.READY)},e.a=p},function(t,e,i){"use strict";var r=i(0),n={};n.jsonp=function(t,e,i,n){function o(){delete window[s],a.parentNode.removeChild(a)}var a=document.createElement("script"),s="olc_"+r.a.getUid(e);a.async=!0,a.src=t+(-1==t.indexOf("?")?"?":"&")+(n||"callback")+"="+s;var l=setTimeout(function(){o(),i&&i()},1e4);window[s]=function(t){clearTimeout(l),o(),e(t)},document.getElementsByTagName("head")[0].appendChild(a)},e.a=n},function(t,e,i){"use strict";var r=i(0),n=i(1),o=i(7),a=i(2),s=i(75),l=i(103),u=i(56),h=i(138),c=function(t){var e=t||{};l.a.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,logo:e.logo,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction,url:e.url,urls:e.urls,wrapX:void 0===e.wrapX||e.wrapX,transition:e.transition}),this.params_=e.params||{},this.tmpExtent_=n.a.createEmpty(),this.setKey(this.getKeyForParams_())};r.a.inherits(c,l.a),c.prototype.getKeyForParams_=function(){var t=0,e=[];for(var i in this.params_)e[t++]=i+"-"+this.params_[i];return e.join("/")},c.prototype.getParams=function(){return this.params_},c.prototype.getRequestUrl_=function(t,e,i,r,n,a){var s=this.urls;if(s){var l=n.getCode().split(":").pop();a.SIZE=e[0]+","+e[1],a.BBOX=i.join(","),a.BBOXSR=l,a.IMAGESR=l,a.DPI=Math.round(a.DPI?a.DPI*r:90*r);var c;if(1==s.length)c=s[0];else{c=s[o.a.modulo(u.a.hash(t),s.length)]}var p=c.replace(/MapServer\/?$/,"MapServer/export").replace(/ImageServer\/?$/,"ImageServer/exportImage");return h.a.appendParams(p,a)}},c.prototype.getTilePixelRatio=function(t){return t},c.prototype.fixedTileUrlFunction=function(t,e,i){var r=this.getTileGrid();if(r||(r=this.getTileGridForProjection(i)),!(r.getResolutions().length<=t[0])){var n=r.getTileCoordExtent(t,this.tmpExtent_),o=s.a.toSize(r.getTileSize(t[0]),this.tmpSize);1!=e&&(o=s.a.scale(o,e,this.tmpSize));var l={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};return a.a.assign(l,this.params_),this.getRequestUrl_(t,o,n,e,i,l)}},c.prototype.updateParams=function(t){a.a.assign(this.params_,t),this.setKey(this.getKeyForParams_())},e.a=c},function(t,i){t.exports=e},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}i.d(e,"a",function(){return h});var n=i(3),o=i.n(n),a=i(31),s=i.n(a),l=i(196),u=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),o()(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),h=function(){function t(e){var i=this;r(this,t),this._mapObj=e,this._olMap=e._currOlMap,this._allEventObj={},this._allEventObj[l.a.SINGLECLICK]={mapEvtKey:"singleclick",type:"map",mapFunc:function(t){i._singleclickEventFunc(t,i.mapEvtKey)}},this._allEventObj[l.a.DBLCLICK]={mapEvtKey:"dblclick",type:"map",mapFunc:function(t){i._dblclickEventFunc(t,i.mapEvtKey)}},this._allEventObj[l.a.CLICK]={mapEvtKey:"click",type:"map",mapFunc:function(t){i._clickEventFunc(t,i.mapEvtKey)}},this._allEventObj[l.a.POINTERDOWN]={mapEvtKey:"pointerdown",type:"map",mapFunc:function(t){i._pointerdownEventFunc(t,i.mapEvtKey)}},this._allEventObj[l.a.POINTERUP]={mapEvtKey:"pointerup",type:"map",mapFunc:function(t){i._pointerupEventFunc(t,i.mapEvtKey)}},this._allEventObj[l.a.CONTEXTMENU]={mapEvtKey:"contextmenu",type:"dom",mapFunc:function(t){i._contextmenuEventFunc(t)}},this._allEventObj[l.a.POINTERMOVE]={mapEvtKey:"pointermove",type:"map",mapFunc:function(t){i._pointerMoveEventFunc(t)}},this._allEventObj[l.a.POINTEROVER]={mapEvtKey:"pointermove",type:"map",mapFunc:function(t){i._pointerMoveEventFunc(t)}},this._allEventObj[l.a.POINTEROUT]={mapEvtKey:"pointermove",type:"map",mapFunc:function(t){i._pointerMoveEventFunc(t)}},this._allEventObj[l.c.MOVESTART]={mapEvtKey:"movestart",type:"map",mapFunc:function(t){i._mapObj.fire(l.c.MOVESTART,t)}},this._allEventObj[l.c.MOVEEND]={mapEvtKey:"moveend",type:"map",mapFunc:function(t){i._mapObj.fire(l.c.MOVEEND,t)}},this._allEventObj[l.c.RESIZE]={mapEvtKey:"change:size",type:"map",mapFunc:function(t){i._mapObj.fire(l.c.RESIZE,t)}},this._allEventObj[l.c.ZOOMCHANGE]={mapEvtKey:"change:resolution",type:"view",mapFunc:function(t){i._mapObj.fire(l.c.ZOOMCHANGE,t)}},this._allEventObj[l.c.CENTERCHANGE]={mapEvtKey:"change:center",type:"view",mapFunc:function(t){i._mapObj.fire(l.c.CENTERCHANGE,t)}},this._mapEvent={};var n=[l.a.SINGLECLICK,l.a.POINTERMOVE,l.c.MOVEEND],o=!0,a=!1,u=void 0;try{for(var h,c=s()(n);!(o=(h=c.next()).done);o=!0){var p=h.value;this.registerEvent(p)}}catch(t){a=!0,u=t}finally{try{!o&&c.return&&c.return()}finally{if(a)throw u}}this._lastLayer=null}return u(t,[{key:"_hasOn",value:function(t){return this._allEventObj.hasOwnProperty(t)}},{key:"registerEvent",value:function(t,e){if(this._hasOn(t)){var i=this._allEventObj[t].mapEvtKey;if(this._mapEvent.hasOwnProperty(i)||(this._mapEvent[i]=[]),this._mapEvent[i].indexOf(e)>0)return;switch(this._mapEvent[i].push(e),this._allEventObj[t].type){case"map":this._olMap.on(i,this._allEventObj[t].mapFunc,this._mapObj);break;case"view":this._mapObj._currOlView.on(i,this._allEventObj[t].mapFunc,this._mapObj);break;case"dom":this._olMap.getViewport().addEventListener(i,this._allEventObj[t].mapFunc,!1)}}}},{key:"unRegisterEvent",value:function(t,e){if(this._hasOn(t)){var i=this._allEventObj[t].mapEvtKey;if(!this._mapEvent.hasOwnProperty(i))return;if(e&&this._mapEvent[i].length>1)this._mapEvent[i].splice(this._mapEvent[i].indexOf(e),1);else switch(delete this._mapEvent[i],this._allEventObj[t].type){case"map":this._olMap.un(i,this._allEventObj[t].mapFunc,this._mapObj);break;case"view":this._mapObj._currOlView.un(i,this._allEventObj[t].mapFunc,this._mapObj);break;case"dom":this._olMap.getViewport().removeEventListener(i,this._allEventObj[t].mapFunc,!1)}}}},{key:"_singleclickEventFunc",value:function(t){var e=[],i=[];this._olMap.forEachFeatureAtPixel(t.pixel,function(t,r){e.push(r.get("currLayerObj")),i.push(t)},{layerFilter:function(t){return!(!t.get("currLayerObj")||!t.get("currLayerObj")._interactive)}});for(var r=0;r<e.length;r++){var n=e[r];if(n.fire(l.a.SINGLECLICK,{e:t,layer:n,feature:i[r]}),!n._ifBubbling)break}this._mapObj.fire(l.a.SINGLECLICK,{e:t,layer:e,feature:i})}},{key:"_clickEventFunc",value:function(t){var e=[],i=[];this._olMap.forEachFeatureAtPixel(t.pixel,function(t,r){e.push(r.get("currLayerObj")),i.push(t)},{layerFilter:function(t){return!(!t.get("currLayerObj")||!t.get("currLayerObj")._interactive)}});for(var r=0;r<e.length;r++){var n=e[r];if(n.fire(l.a.CLICK,{e:t,layer:n,feature:i[r]}),!n._ifBubbling)break}this._mapObj.fire(l.a.CLICK,{e:t,layer:e,feature:i})}},{key:"_pointerdownEventFunc",value:function(t){var e=[],i=[];this._olMap.forEachFeatureAtPixel(t.pixel,function(t,r){e.push(r.get("currLayerObj")),i.push(t)},{layerFilter:function(t){return!(!t.get("currLayerObj")||!t.get("currLayerObj")._interactive)}});for(var r=0;r<e.length;r++){var n=e[r];if(n.fire(l.a.POINTERDOWN,{e:t,layer:n,feature:i[r]}),!n._ifBubbling)break}this._mapObj.fire(l.a.POINTERDOWN,{e:t,layer:e,feature:i})}},{key:"_pointerupEventFunc",value:function(t){var e=[],i=[];this._olMap.forEachFeatureAtPixel(t.pixel,function(t,r){e.push(r.get("currLayerObj")),i.push(t)},{layerFilter:function(t){return!(!t.get("currLayerObj")||!t.get("currLayerObj")._interactive)}});for(var r=0;r<e.length;r++){var n=e[r];if(n.fire(l.a.POINTERUP,{e:t,layer:n,feature:i[r]}),!n._ifBubbling)break}this._mapObj.fire(l.a.POINTERUP,{e:t,layer:e,feature:i})}},{key:"_dblclickEventFunc",value:function(t){var e=[],i=[];this._olMap.forEachFeatureAtPixel(t.pixel,function(t,r){e.push(r.get("currLayerObj")),i.push(t)},{layerFilter:function(t){return!(!t.get("currLayerObj")||!t.get("currLayerObj")._interactive)}});for(var r=0;r<e.length;r++){var n=e[r];if(n.fire(l.a.DBLCLICK,{e:t,layer:n,feature:i[r]}),!n._ifBubbling)break}this._mapObj.fire(l.a.DBLCLICK,{e:t,layer:e,feature:i})}},{key:"_pointerMoveEventFunc",value:function(t){if(!t.dragging){var e=[void 0],i=e[0],r=e[1];r=this._olMap.forEachFeatureAtPixel(t.pixel,function(t,e){return i=e.get("currLayerObj"),t},{layerFilter:function(t){return!(!t.get("currLayerObj")||!t.get("currLayerObj")._interactive)}}),this._olMap.getTargetElement().style.cursor=void 0!==r?"pointer":"",i&&this._lastLayer&&i===this._lastLayer?i.fire(l.a.POINTEROVER,{e:t,layer:i,feature:r}):this._lastLayer&&(this._lastLayer.fire(l.a.POINTEROUT,{e:t,layer:this._lastLayer,feature:null}),this._lastLayer=null),i&&i!==this._lastLayer&&(i.fire(l.a.POINTEROVER,{e:t,layer:i,feature:r}),this._lastLayer=i),i&&i.fire(l.a.POINTERMOVE,{e:t,layer:i,feature:r}),this._mapObj.fire(l.a.POINTERMOVE,{e:t,layer:i,feature:r})}}},{key:"_contextmenuEventFunc",value:function(t){t.preventDefault();var e=[],i=[];this._olMap.forEachFeatureAtPixel(this._olMap.getEventPixel(t),function(t,r){e.push(r.get("currLayerObj")),i.push(t)},{layerFilter:function(t){return!(!t.get("currLayerObj")||!t.get("currLayerObj")._interactive)}});for(var r=0;r<e.length;r++){var n=e[r];if(n.fire(l.a.CONTEXTMENU,{e:t,layer:n,feature:i[r]}),!n._ifBubbling)break}this._mapObj.fire(l.a.CONTEXTMENU,{e:t,layer:e,feature:i})}}]),t}()},function(t,e,i){var r,n=n||function(t){"use strict";if(!(void 0===t||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var e=t.document,i=function(){return t.URL||t.webkitURL||t},r=e.createElementNS("http://www.w3.org/1999/xhtml","a"),n="download"in r,o=function(t){var e=new MouseEvent("click");t.dispatchEvent(e)},a=/constructor/i.test(t.HTMLElement)||t.safari,s=/CriOS\/[\d]+/.test(navigator.userAgent),l=function(e){(t.setImmediate||t.setTimeout)(function(){throw e},0)},u=function(t){var e=function(){"string"==typeof t?i().revokeObjectURL(t):t.remove()};setTimeout(e,4e4)},h=function(t,e,i){e=[].concat(e);for(var r=e.length;r--;){var n=t["on"+e[r]];if("function"==typeof n)try{n.call(t,i||t)}catch(t){l(t)}}},c=function(t){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob([String.fromCharCode(65279),t],{type:t.type}):t},p=function(e,l,p){p||(e=c(e));var d,f=this,_=e.type,g="application/octet-stream"===_,y=function(){h(f,"writestart progress write writeend".split(" "))};if(f.readyState=f.INIT,n)return d=i().createObjectURL(e),void setTimeout(function(){r.href=d,r.download=l,o(r),y(),u(d),f.readyState=f.DONE});!function(){if((s||g&&a)&&t.FileReader){var r=new FileReader;return r.onloadend=function(){var e=s?r.result:r.result.replace(/^data:[^;]*;/,"data:attachment/file;");t.open(e,"_blank")||(t.location.href=e),e=void 0,f.readyState=f.DONE,y()},r.readAsDataURL(e),void(f.readyState=f.INIT)}if(d||(d=i().createObjectURL(e)),g)t.location.href=d;else{t.open(d,"_blank")||(t.location.href=d)}f.readyState=f.DONE,y(),u(d)}()},d=p.prototype,f=function(t,e,i){return new p(t,e||t.name||"download",i)};return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(t,e,i){return e=e||t.name||"download",i||(t=c(t)),navigator.msSaveOrOpenBlob(t,e)}:(d.abort=function(){},d.readyState=d.INIT=0,d.WRITING=1,d.DONE=2,d.error=d.onwritestart=d.onprogress=d.onwrite=d.onabort=d.onerror=d.onwriteend=null,f)}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);void 0!==t&&t.exports?t.exports.saveAs=n:null!==i(472)&&null!==i(473)&&void 0!==(r=function(){return n}.call(e,i,e,t))&&(t.exports=r)},function(t,e){t.exports=function(){throw new Error("define cannot be used indirect")}},function(t,e){(function(e){t.exports=e}).call(e,{})},function(t,e,i){"use strict";var r=i(0),n=i(239),o=i(243),a=i(279),s=i(281),l=i(2),u=i(134),h=i(484),c=i(486),p=i(287),d=i(487),f=i(494),_=i(496),g=i(515),y=i(516),v=i(519);r.a.ENABLE_CANVAS&&(u.a.register(o.a.MAP_RENDERER,c.a),u.a.registerMultiple(o.a.LAYER_RENDERER,[h.a,p.a,d.a,f.a])),r.a.ENABLE_WEBGL&&(u.a.register(o.a.MAP_RENDERER,g.a),u.a.registerMultiple(o.a.LAYER_RENDERER,[_.a,y.a,v.a]));var m=function(t){t=l.a.assign({},t),t.controls||(t.controls=a.a.defaults()),t.interactions||(t.interactions=s.a.defaults()),n.a.call(this,t)};r.a.inherits(m,n.a),e.a=m},function(t,e,i){"use strict";var r=function(t,e,i){this.decay_=t,this.minVelocity_=e,this.delay_=i,this.points_=[],this.angle_=0,this.initialVelocity_=0};r.prototype.begin=function(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0},r.prototype.update=function(t,e){this.points_.push(t,e,Date.now())},r.prototype.end=function(){if(this.points_.length<6)return!1;var t=Date.now()-this.delay_,e=this.points_.length-3;if(this.points_[e+2]<t)return!1;for(var i=e-3;i>0&&this.points_[i+2]>t;)i-=3;var r=this.points_[e+2]-this.points_[i+2];if(r<1e3/60)return!1;var n=this.points_[e]-this.points_[i],o=this.points_[e+1]-this.points_[i+1];return this.angle_=Math.atan2(o,n),this.initialVelocity_=Math.sqrt(n*n+o*o)/r,this.initialVelocity_>this.minVelocity_},r.prototype.getDistance=function(){return(this.minVelocity_-this.initialVelocity_)/this.decay_},r.prototype.getAngle=function(){return this.angle_},e.a=r},function(t,e,i){"use strict";var r=i(0),n=i(28),o=i(54),a=i(50),s=i(44),l=i(19),u=i(68),h=function(t){u.a.call(this,{handleDownEvent:h.handleDownEvent_,handleDragEvent:h.handleDragEvent_,handleUpEvent:h.handleUpEvent_});var e=t||{};this.kinetic_=e.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.condition_=e.condition?e.condition:s.a.noModifierKeys,this.noKinetic_=!1};r.a.inherits(h,u.a),h.handleDragEvent_=function(t){var e=this.targetPointers,i=u.a.centroid(e);if(e.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(i[0],i[1]),this.lastCentroid){var r=this.lastCentroid[0]-i[0],n=i[1]-this.lastCentroid[1],a=t.map,s=a.getView(),l=s.getState(),h=[r,n];o.a.scale(h,l.resolution),o.a.rotate(h,l.rotation),o.a.add(h,l.center),h=s.constrainCenter(h),s.setCenter(h)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=i,this.lastPointersCount_=e.length},h.handleUpEvent_=function(t){var e=t.map,i=e.getView();if(0===this.targetPointers.length){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){var r=this.kinetic_.getDistance(),o=this.kinetic_.getAngle(),s=i.getCenter(),l=e.getPixelFromCoordinate(s),u=e.getCoordinateFromPixel([l[0]-r*Math.cos(o),l[1]-r*Math.sin(o)]);i.animate({center:i.constrainCenter(u),duration:500,easing:a.a.easeOut})}return i.setHint(n.a.INTERACTING,-1),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0},h.handleDownEvent_=function(t){if(this.targetPointers.length>0&&this.condition_(t)){var e=t.map,i=e.getView();return this.lastCentroid=null,this.handlingDownUpSequence||i.setHint(n.a.INTERACTING,1),i.getAnimating()&&i.setCenter(t.frameState.viewState.center),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1},h.prototype.shouldStopEvent=l.a.FALSE,e.a=h},function(t,e,i){"use strict";var r=i(0),n=i(182),o=i(28),a=i(44),s=i(19),l=i(61),u=i(68),h=function(t){var e=t||{};u.a.call(this,{handleDownEvent:h.handleDownEvent_,handleDragEvent:h.handleDragEvent_,handleUpEvent:h.handleUpEvent_}),this.condition_=e.condition?e.condition:a.a.altShiftKeysOnly,this.lastAngle_=void 0,this.duration_=void 0!==e.duration?e.duration:250};r.a.inherits(h,u.a),h.handleDragEvent_=function(t){if(a.a.mouseOnly(t)){var e=t.map,i=e.getView();if(i.getConstraints().rotation!==n.a.disable){var r=e.getSize(),o=t.pixel,s=Math.atan2(r[1]/2-o[1],o[0]-r[0]/2);if(void 0!==this.lastAngle_){var u=s-this.lastAngle_,h=i.getRotation();l.a.rotateWithoutConstraints(i,h-u)}this.lastAngle_=s}}},h.handleUpEvent_=function(t){if(!a.a.mouseOnly(t))return!0;var e=t.map,i=e.getView();i.setHint(o.a.INTERACTING,-1);var r=i.getRotation();return l.a.rotate(i,r,void 0,this.duration_),!1},h.handleDownEvent_=function(t){if(!a.a.mouseOnly(t))return!1;if(a.a.mouseActionButton(t)&&this.condition_(t)){return t.map.getView().setHint(o.a.INTERACTING,1),this.lastAngle_=void 0,!0}return!1},h.prototype.shouldStopEvent=s.a.FALSE,e.a=h},function(t,e,i){"use strict";var r=i(0),n=i(54),o=i(5),a=i(479),s=i(44),l=i(61),u=function(t){l.a.call(this,{handleEvent:u.handleEvent});var e=t||{};this.defaultCondition_=function(t){return s.a.noModifierKeys(t)&&s.a.targetNotEditable(t)},this.condition_=void 0!==e.condition?e.condition:this.defaultCondition_,this.duration_=void 0!==e.duration?e.duration:100,this.pixelDelta_=void 0!==e.pixelDelta?e.pixelDelta:128};r.a.inherits(u,l.a),u.handleEvent=function(t){var e=!1;if(t.type==o.a.KEYDOWN){var i=t.originalEvent,r=i.keyCode;if(this.condition_(t)&&(r==a.a.DOWN||r==a.a.LEFT||r==a.a.RIGHT||r==a.a.UP)){var s=t.map,u=s.getView(),h=u.getResolution()*this.pixelDelta_,c=0,p=0;r==a.a.DOWN?p=-h:r==a.a.LEFT?c=-h:r==a.a.RIGHT?c=h:p=h;var d=[c,p];n.a.rotate(d,u.getRotation()),l.a.pan(u,d,this.duration_),t.preventDefault(),e=!0}}return!e},e.a=u},function(t,e,i){"use strict";var r={LEFT:37,UP:38,RIGHT:39,DOWN:40};e.a=r},function(t,e,i){"use strict";var r=i(0),n=i(5),o=i(44),a=i(61),s=function(t){a.a.call(this,{handleEvent:s.handleEvent});var e=t||{};this.condition_=e.condition?e.condition:o.a.targetNotEditable,this.delta_=e.delta?e.delta:1,this.duration_=void 0!==e.duration?e.duration:100};r.a.inherits(s,a.a),s.handleEvent=function(t){var e=!1;if(t.type==n.a.KEYDOWN||t.type==n.a.KEYPRESS){var i=t.originalEvent,r=i.charCode;if(this.condition_(t)&&(r=="+".charCodeAt(0)||r=="-".charCodeAt(0))){var o=t.map,s=r=="+".charCodeAt(0)?this.delta_:-this.delta_,l=o.getView();a.a.zoomByDelta(l,s,void 0,this.duration_),t.preventDefault(),e=!0}}return!e},e.a=s},function(t,e,i){"use strict";var r=i(0),n=i(28),o=i(50),a=i(5),s=i(33),l=i(61),u=i(7),h=function(t){l.a.call(this,{handleEvent:h.handleEvent});var e=t||{};this.delta_=0,this.duration_=void 0!==e.duration?e.duration:250,this.timeout_=void 0!==e.timeout?e.timeout:80,this.useAnchor_=void 0===e.useAnchor||e.useAnchor,this.constrainResolution_=e.constrainResolution||!1,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_=void 0,this.trackpadDeltaPerZoom_=300,this.trackpadZoomBuffer_=1.5};r.a.inherits(h,l.a),h.handleEvent=function(t){var e=t.type;if(e!==a.a.WHEEL&&e!==a.a.MOUSEWHEEL)return!0;t.preventDefault();var i=t.map,r=t.originalEvent;this.useAnchor_&&(this.lastAnchor_=t.coordinate);var l;if(t.type==a.a.WHEEL?(l=r.deltaY,s.a.FIREFOX&&r.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(l/=s.a.DEVICE_PIXEL_RATIO),r.deltaMode===WheelEvent.DOM_DELTA_LINE&&(l*=40)):t.type==a.a.MOUSEWHEEL&&(l=-r.wheelDeltaY,s.a.SAFARI&&(l/=3)),0===l)return!1;var u=Date.now();if(void 0===this.startTime_&&(this.startTime_=u),(!this.mode_||u-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(l)<4?h.Mode_.TRACKPAD:h.Mode_.WHEEL),this.mode_===h.Mode_.TRACKPAD){var c=i.getView();this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):c.setHint(n.a.INTERACTING,1),this.trackpadTimeoutId_=setTimeout(this.decrementInteractingHint_.bind(this),this.trackpadEventGap_);var p=c.getResolution()*Math.pow(2,l/this.trackpadDeltaPerZoom_),d=c.getMinResolution(),f=c.getMaxResolution(),_=0;if(p<d?(p=Math.max(p,d/this.trackpadZoomBuffer_),_=1):p>f&&(p=Math.min(p,f*this.trackpadZoomBuffer_),_=-1),this.lastAnchor_){var g=c.calculateCenterZoom(p,this.lastAnchor_);c.setCenter(c.constrainCenter(g))}return c.setResolution(p),0===_&&this.constrainResolution_&&c.animate({resolution:c.constrainResolution(p,l>0?-1:1),easing:o.a.easeOut,anchor:this.lastAnchor_,duration:this.duration_}),_>0?c.animate({resolution:d,easing:o.a.easeOut,anchor:this.lastAnchor_,duration:500}):_<0&&c.animate({resolution:f,easing:o.a.easeOut,anchor:this.lastAnchor_,duration:500}),this.startTime_=u,!1}this.delta_+=l;var y=Math.max(this.timeout_-(u-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,i),y),!1},h.prototype.decrementInteractingHint_=function(){this.trackpadTimeoutId_=void 0,this.getMap().getView().setHint(n.a.INTERACTING,-1)},h.prototype.handleWheelZoom_=function(t){var e=t.getView();e.getAnimating()&&e.cancelAnimations();var i=r.a.MOUSEWHEELZOOM_MAXDELTA,n=u.a.clamp(this.delta_,-i,i);l.a.zoomByDelta(e,-n,this.lastAnchor_,this.duration_),this.mode_=void 0,this.delta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0},h.prototype.setMouseAnchor=function(t){this.useAnchor_=t,t||(this.lastAnchor_=null)},h.Mode_={TRACKPAD:"trackpad",WHEEL:"wheel"},e.a=h},function(t,e,i){"use strict";var r=i(0),n=i(28),o=i(19),a=i(61),s=i(68),l=i(182),u=function(t){s.a.call(this,{handleDownEvent:u.handleDownEvent_,handleDragEvent:u.handleDragEvent_,handleUpEvent:u.handleUpEvent_});var e=t||{};this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=void 0!==e.threshold?e.threshold:.3,this.duration_=void 0!==e.duration?e.duration:250};r.a.inherits(u,s.a),u.handleDragEvent_=function(t){var e=0,i=this.targetPointers[0],r=this.targetPointers[1],n=Math.atan2(r.clientY-i.clientY,r.clientX-i.clientX);if(void 0!==this.lastAngle_){var o=n-this.lastAngle_;this.rotationDelta_+=o,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),e=o}this.lastAngle_=n;var u=t.map,h=u.getView();if(h.getConstraints().rotation!==l.a.disable){var c=u.getViewport().getBoundingClientRect(),p=s.a.centroid(this.targetPointers);if(p[0]-=c.left,p[1]-=c.top,this.anchor_=u.getCoordinateFromPixel(p),this.rotating_){var d=h.getRotation();u.render(),a.a.rotateWithoutConstraints(h,d+e,this.anchor_)}}},u.handleUpEvent_=function(t){if(this.targetPointers.length<2){var e=t.map,i=e.getView();if(i.setHint(n.a.INTERACTING,-1),this.rotating_){var r=i.getRotation();a.a.rotate(i,r,this.anchor_,this.duration_)}return!1}return!0},u.handleDownEvent_=function(t){if(this.targetPointers.length>=2){var e=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||e.getView().setHint(n.a.INTERACTING,1),!0}return!1},u.prototype.shouldStopEvent=o.a.FALSE,e.a=u},function(t,e,i){"use strict";var r=i(0),n=i(28),o=i(19),a=i(61),s=i(68),l=function(t){s.a.call(this,{handleDownEvent:l.handleDownEvent_,handleDragEvent:l.handleDragEvent_,handleUpEvent:l.handleUpEvent_});var e=t||{};this.constrainResolution_=e.constrainResolution||!1,this.anchor_=null,this.duration_=void 0!==e.duration?e.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1};r.a.inherits(l,s.a),l.handleDragEvent_=function(t){var e=1,i=this.targetPointers[0],r=this.targetPointers[1],n=i.clientX-r.clientX,o=i.clientY-r.clientY,l=Math.sqrt(n*n+o*o);void 0!==this.lastDistance_&&(e=this.lastDistance_/l),this.lastDistance_=l;var u=t.map,h=u.getView(),c=h.getResolution(),p=h.getMaxResolution(),d=h.getMinResolution(),f=c*e;f>p?(e=p/c,f=p):f<d&&(e=d/c,f=d),1!=e&&(this.lastScaleDelta_=e);var _=u.getViewport().getBoundingClientRect(),g=s.a.centroid(this.targetPointers);g[0]-=_.left,g[1]-=_.top,this.anchor_=u.getCoordinateFromPixel(g),u.render(),a.a.zoomWithoutConstraints(h,f,this.anchor_)},l.handleUpEvent_=function(t){if(this.targetPointers.length<2){var e=t.map,i=e.getView();i.setHint(n.a.INTERACTING,-1);var r=i.getResolution();if(this.constrainResolution_||r<i.getMinResolution()||r>i.getMaxResolution()){var o=this.lastScaleDelta_-1;a.a.zoom(i,r,this.anchor_,this.duration_,o)}return!1}return!0},l.handleDownEvent_=function(t){if(this.targetPointers.length>=2){var e=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||e.getView().setHint(n.a.INTERACTING,1),!0}return!1},l.prototype.shouldStopEvent=o.a.FALSE,e.a=l},function(t,e,i){"use strict";var r=i(0),n=i(485),o=i(48),a=i(28),s=i(6),l=i(1),u=i(227),h=i(2),c=i(134),p=i(49),d=i(282),f=i(16),_=function(t){d.a.call(this,t),this.image_=null,this.imageTransform_=f.a.create(),this.skippedFeatures_=[],this.vectorRenderer_=null};r.a.inherits(_,d.a),_.handles=function(t,e){return t===p.a.CANVAS&&(e.getType()===o.a.IMAGE||e.getType()===o.a.VECTOR&&e.getRenderMode()===u.a.IMAGE)},_.create=function(t,e){var i=new _(e);if(e.getType()===o.a.VECTOR)for(var r=c.a.getLayerRendererPlugins(),n=0,a=r.length;n<a;++n){var s=r[n];s!==_&&s.handles(p.a.CANVAS,e)&&i.setVectorRenderer(s.create(t,e))}return i},_.prototype.getImage=function(){return this.image_?this.image_.getImage():null},_.prototype.getImageTransform=function(){return this.imageTransform_},_.prototype.prepareFrame=function(t,e){var i,o=t.pixelRatio,u=t.size,c=t.viewState,p=c.center,d=c.resolution,_=this.getLayer(),g=_.getSource(),y=t.viewHints,v=t.extent;if(void 0!==e.extent&&(v=l.a.getIntersection(v,e.extent)),!y[a.a.ANIMATING]&&!y[a.a.INTERACTING]&&!l.a.isEmpty(v)){var m=c.projection;if(!r.a.ENABLE_RASTER_REPROJECTION){var E=g.getProjection();E&&(m=E)}var T=this.vectorRenderer_;if(T){var S=T.context,R=h.a.assign({},t,{size:[l.a.getWidth(v)/d,l.a.getHeight(v)/d],viewState:h.a.assign({},t.viewState,{rotation:0})}),I=Object.keys(R.skippedFeatureUids).sort();!T.prepareFrame(R,e)||!T.replayGroupChanged&&s.a.equals(I,this.skippedFeatures_)||(S.canvas.width=R.size[0]*o,S.canvas.height=R.size[1]*o,T.composeFrame(R,e,S),this.image_=new n.a(v,d,o,S.canvas),this.skippedFeatures_=I)}else if(i=g.getImage(v,d,o,m)){var x=this.loadImage(i);x&&(this.image_=i)}}if(this.image_){i=this.image_;var C=i.getExtent(),O=i.getResolution(),P=i.getPixelRatio(),L=o*O/(d*P),A=f.a.compose(this.imageTransform_,o*u[0]/2,o*u[1]/2,L,L,0,P*(C[0]-p[0])/O,P*(p[1]-C[3])/O);f.a.compose(this.coordinateToCanvasPixelTransform,o*u[0]/2-A[4],o*u[1]/2-A[5],o/d,-o/d,0,-p[0],-p[1]),this.updateLogos(t,g),this.renderedResolution=O*o/P}return!!this.image_},_.prototype.forEachFeatureAtCoordinate=function(t,e,i,r,n){return this.vectorRenderer_?this.vectorRenderer_.forEachFeatureAtCoordinate(t,e,i,r,n):d.a.prototype.forEachFeatureAtCoordinate.call(this,t,e,i,r,n)},_.prototype.setVectorRenderer=function(t){this.vectorRenderer_=t},e.a=_},function(t,e,i){"use strict";var r=i(0),n=i(184),o=i(43),a=function(t,e,i,r,a){this.loader_=void 0!==a?a:null;var s=void 0!==a?o.a.IDLE:o.a.LOADED;n.a.call(this,t,e,i,s),this.canvas_=r,this.error_=null};r.a.inherits(a,n.a),a.prototype.getError=function(){return this.error_},a.prototype.handleLoad_=function(t){t?(this.error_=t,this.state=o.a.ERROR):this.state=o.a.LOADED,this.changed()},a.prototype.load=function(){this.state==o.a.IDLE&&(this.state=o.a.LOADING,this.changed(),this.loader_(this.handleLoad_.bind(this)))},a.prototype.getImage=function(){return this.canvas_},e.a=a},function(t,e,i){"use strict";var r=i(16),n=i(0),o=i(6),a=i(34),s=i(13),l=i(72),u=i(146),h=i(73),c=i(53),p=i(284),d=i(286),f=i(49),_=i(63),g=function(t,e){d.a.call(this,t,e),this.context_=s.a.createCanvasContext2D(),this.canvas_=this.context_.canvas,this.canvas_.style.width="100%",this.canvas_.style.height="100%",this.canvas_.style.display="block",this.canvas_.className=a.a.CLASS_UNSELECTABLE,t.insertBefore(this.canvas_,t.childNodes[0]||null),this.renderedVisible_=!0,this.transform_=r.a.create()};n.a.inherits(g,d.a),g.handles=function(t){return t===f.a.CANVAS},g.create=function(t,e){return new g(t,e)},g.prototype.dispatchComposeEvent_=function(t,e){var i=this.getMap(),r=this.context_;if(i.hasListener(t)){var n=e.extent,o=e.pixelRatio,a=e.viewState,s=a.rotation,l=this.getTransform(e),h=new p.a(r,o,n,l,s),c=new u.a(t,h,e,r,null);i.dispatchEvent(c)}},g.prototype.getTransform=function(t){var e=t.viewState,i=this.canvas_.width/2,n=this.canvas_.height/2,o=t.pixelRatio/e.resolution,a=-o,s=-e.rotation,l=-e.center[0],u=-e.center[1];return r.a.compose(this.transform_,i,n,o,a,s,l,u)},g.prototype.getType=function(){return f.a.CANVAS},g.prototype.renderFrame=function(t){if(!t)return void(this.renderedVisible_&&(this.canvas_.style.display="none",this.renderedVisible_=!1));var e=this.context_,i=t.pixelRatio,r=Math.round(t.size[0]*i),n=Math.round(t.size[1]*i);this.canvas_.width!=r||this.canvas_.height!=n?(this.canvas_.width=r,this.canvas_.height=n):e.clearRect(0,0,r,n);var a=t.viewState.rotation;this.calculateMatrices2D(t),this.dispatchComposeEvent_(h.a.PRECOMPOSE,t);var s=t.layerStatesArray;o.a.stableSort(s,d.a.sortByZIndex),a&&(e.save(),c.a.rotateAtOffset(e,a,r/2,n/2));var u,p,f,g,y,v=t.viewState.resolution;for(u=0,p=s.length;u<p;++u)y=s[u],f=y.layer,g=this.getLayerRenderer(f),l.a.visibleAtResolution(y,v)&&y.sourceState==_.a.READY&&g.prepareFrame(t,y)&&g.composeFrame(t,y,e);a&&e.restore(),this.dispatchComposeEvent_(h.a.POSTCOMPOSE,t),this.renderedVisible_||(this.canvas_.style.display="",this.renderedVisible_=!0),this.scheduleRemoveUnusedLayerRenderers(t),this.scheduleExpireIconCache(t)},g.prototype.forEachLayerAtPixel=function(t,e,i,n,o,a){var s,u,h=e.viewState,c=h.resolution,p=e.layerStatesArray,d=p.length,f=r.a.apply(e.pixelToCoordinateTransform,t.slice());for(u=d-1;u>=0;--u){var _=p[u],g=_.layer;if(l.a.visibleAtResolution(_,c)&&o.call(a,g)){if(s=this.getLayerRenderer(g).forEachLayerAtCoordinate(f,e,i,n))return s}}},e.a=g},function(t,e,i){"use strict";var r=i(0),n=i(48),o=i(28),a=i(13),s=i(4),l=i(5),u=i(173),h=i.n(u),c=i(1),p=i(73),d=i(53),f=i(288),_=i(49),g=i(283),y=i(197),v=function(t){g.a.call(this,t),this.declutterTree_=t.getDeclutter()?h()(9):null,this.dirty_=!1,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=c.a.createEmpty(),this.renderedRenderOrder_=null,this.replayGroup_=null,this.replayGroupChanged=!0,this.context=a.a.createCanvasContext2D(),s.a.listen(d.a.labelCache,l.a.CLEAR,this.handleFontsChanged_,this)};r.a.inherits(v,g.a),v.handles=function(t,e){return t===_.a.CANVAS&&e.getType()===n.a.VECTOR},v.create=function(t,e){return new v(e)},v.prototype.disposeInternal=function(){s.a.unlisten(d.a.labelCache,l.a.CLEAR,this.handleFontsChanged_,this),g.a.prototype.disposeInternal.call(this)},v.prototype.composeFrame=function(t,e,i){var r=t.extent,n=t.pixelRatio,o=e.managed?t.skippedFeatureUids:{},a=t.viewState,s=a.projection,l=a.rotation,u=s.getExtent(),h=this.getLayer().getSource(),f=this.getTransform(t,0);this.preCompose(i,t,f);var _=e.extent,g=void 0!==_;g&&this.clip(i,t,_);var y=this.replayGroup_;if(y&&!y.isEmpty()){this.declutterTree_&&this.declutterTree_.clear();var v,m=this.getLayer(),E=0,T=0,S=1!==e.opacity,R=m.hasListener(p.a.RENDER);if(S||R){var I=i.canvas.width,x=i.canvas.height;if(l){var C=Math.round(Math.sqrt(I*I+x*x));E=(C-I)/2,T=(C-x)/2,I=x=C}this.context.canvas.width=I,this.context.canvas.height=x,v=this.context}else v=i;var O=v.globalAlpha;S||(v.globalAlpha=e.opacity),v!=i&&v.translate(E,T);var P=t.size[0]*n,L=t.size[1]*n;if(d.a.rotateAtOffset(v,-l,P/2,L/2),y.replay(v,f,l,o),h.getWrapX()&&s.canWrapX()&&!c.a.containsExtent(u,r)){for(var A,w=r[0],M=c.a.getWidth(u),F=0;w<u[0];)--F,A=M*F,f=this.getTransform(t,A),y.replay(v,f,l,o),w+=M;for(F=0,w=r[2];w>u[2];)++F,A=M*F,f=this.getTransform(t,A),y.replay(v,f,l,o),w-=M;f=this.getTransform(t,0)}if(d.a.rotateAtOffset(v,l,P/2,L/2),v!=i){if(R&&this.dispatchRenderEvent(v,t,f),S){var N=i.globalAlpha;i.globalAlpha=e.opacity,i.drawImage(v.canvas,-E,-T),i.globalAlpha=N}else i.drawImage(v.canvas,-E,-T);v.translate(-E,-T)}S||(v.globalAlpha=O)}g&&i.restore(),this.postCompose(i,t,e,f)},v.prototype.forEachFeatureAtCoordinate=function(t,e,i,n,o){if(this.replayGroup_){var a=e.viewState.resolution,s=e.viewState.rotation,l=this.getLayer(),u={};return this.replayGroup_.forEachFeatureAtCoordinate(t,a,s,i,{},function(t){var e=r.a.getUid(t).toString();if(!(e in u))return u[e]=!0,n.call(o,t,l)},null)}},v.prototype.handleFontsChanged_=function(t){var e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()},v.prototype.handleStyleImageChange_=function(t){this.renderIfReadyAndVisible()},v.prototype.prepareFrame=function(t,e){var i=this.getLayer(),r=i.getSource();this.updateLogos(t,r);var n=t.viewHints[o.a.ANIMATING],a=t.viewHints[o.a.INTERACTING],s=i.getUpdateWhileAnimating(),l=i.getUpdateWhileInteracting();if(!this.dirty_&&!s&&n||!l&&a)return!0;var u=t.extent,h=t.viewState,p=h.projection,d=h.resolution,_=t.pixelRatio,g=i.getRevision(),v=i.getRenderBuffer(),m=i.getRenderOrder();void 0===m&&(m=y.a.defaultOrder);var E=c.a.buffer(u,v*d),T=h.projection.getExtent();if(r.getWrapX()&&h.projection.canWrapX()&&!c.a.containsExtent(T,t.extent)){var S=c.a.getWidth(T),R=Math.max(c.a.getWidth(E)/2,S);E[0]=T[0]-R,E[2]=T[2]+R}if(!this.dirty_&&this.renderedResolution_==d&&this.renderedRevision_==g&&this.renderedRenderOrder_==m&&c.a.containsExtent(this.renderedExtent_,E))return this.replayGroupChanged=!1,!0;this.replayGroup_=null,this.dirty_=!1;var I=new f.a(y.a.getTolerance(d,_),E,d,_,r.getOverlaps(),this.declutterTree_,i.getRenderBuffer());r.loadFeatures(E,d,p);var x=function(t){var e,r=t.getStyleFunction();if(r?e=r.call(t,d):(r=i.getStyleFunction())&&(e=r(t,d)),e){var n=this.renderFeature(t,d,_,e,I);this.dirty_=this.dirty_||n}}.bind(this);if(m){var C=[];r.forEachFeatureInExtent(E,function(t){C.push(t)},this),C.sort(m);for(var O=0,P=C.length;O<P;++O)x(C[O])}else r.forEachFeatureInExtent(E,x,this);return I.finish(),this.renderedResolution_=d,this.renderedRevision_=g,this.renderedRenderOrder_=m,this.renderedExtent_=E,this.replayGroup_=I,this.replayGroupChanged=!0,!0},v.prototype.renderFeature=function(t,e,i,r,n){if(!r)return!1;var o=!1;if(Array.isArray(r))for(var a=0,s=r.length;a<s;++a)o=y.a.renderFeature(n,t,r[a],y.a.getSquaredTolerance(e,i),this.handleStyleImageChange_,this)||o;else o=y.a.renderFeature(n,t,r,y.a.getSquaredTolerance(e,i),this.handleStyleImageChange_,this);return o},e.a=v},function(t,e,i){"use strict";var r=i(7),n={};n.lineString=function(t,e,i,n,o,a,s,l){var u=[],h=t[e]>t[i-n],c=o.length,p=t[e],d=t[e+1];e+=n;for(var f,_,g,y=t[e],v=t[e+1],m=0,E=Math.sqrt(Math.pow(y-p,2)+Math.pow(v-d,2)),T="",S=0,R=0;R<c;++R){_=h?c-R-1:R;var I=o.charAt(_);T=h?I+T:T+I;var x=a(T)-S;S+=x;for(var C=s+x/2;e<i-n&&m+E<C;)p=y,d=v,e+=n,y=t[e],v=t[e+1],m+=E,E=Math.sqrt(Math.pow(y-p,2)+Math.pow(v-d,2));var O=C-m,P=Math.atan2(v-d,y-p);if(h&&(P+=P>0?-Math.PI:Math.PI),void 0!==g){var L=P-g;if(L+=L>Math.PI?-2*Math.PI:L<-Math.PI?2*Math.PI:0,Math.abs(L)>l)return null}var A=O/E,w=r.a.lerp(p,y,A),M=r.a.lerp(d,v,A);g==P?(h&&(f[0]=w,f[1]=M,f[2]=x/2),f[4]=T):(T=I,S=x,f=[w,M,x/2,P,T],h?u.unshift(f):u.push(f),g=P),s+=x}return u},e.a=n},function(t,e,i){"use strict";var r=i(0),n=i(111),o=i(110),a=function(t,e,i,r,n,a){o.a.call(this,t,e,i,r,n,a),this.declutterGroup_=null,this.hitDetectionImage_=null,this.image_=null,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.snapToPixel_=void 0,this.width_=void 0};r.a.inherits(a,o.a),a.prototype.drawCoordinates_=function(t,e,i,r){return this.appendFlatCoordinates(t,e,i,r,!1,!1)},a.prototype.drawPoint=function(t,e){if(this.image_){this.beginGeometry(t,e);var i=t.getFlatCoordinates(),r=t.getStride(),o=this.coordinates.length,a=this.drawCoordinates_(i,0,i.length,r);this.instructions.push([n.a.DRAW_IMAGE,o,a,this.image_,this.anchorX_,this.anchorY_,this.declutterGroup_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_*this.pixelRatio,this.snapToPixel_,this.width_]),this.hitDetectionInstructions.push([n.a.DRAW_IMAGE,o,a,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.declutterGroup_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.snapToPixel_,this.width_]),this.endGeometry(t,e)}},a.prototype.drawMultiPoint=function(t,e){if(this.image_){this.beginGeometry(t,e);var i=t.getFlatCoordinates(),r=t.getStride(),o=this.coordinates.length,a=this.drawCoordinates_(i,0,i.length,r);this.instructions.push([n.a.DRAW_IMAGE,o,a,this.image_,this.anchorX_,this.anchorY_,this.declutterGroup_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_*this.pixelRatio,this.snapToPixel_,this.width_]),this.hitDetectionInstructions.push([n.a.DRAW_IMAGE,o,a,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.declutterGroup_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.snapToPixel_,this.width_]),this.endGeometry(t,e)}},a.prototype.finish=function(){this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.snapToPixel_=void 0,this.width_=void 0},a.prototype.setImageStyle=function(t,e){var i=t.getAnchor(),r=t.getSize(),n=t.getHitDetectionImage(1),o=t.getImage(1),a=t.getOrigin();this.anchorX_=i[0],this.anchorY_=i[1],this.declutterGroup_=e,this.hitDetectionImage_=n,this.image_=o,this.height_=r[1],this.opacity_=t.getOpacity(),this.originX_=a[0],this.originY_=a[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScale(),this.snapToPixel_=t.getSnapToPixel(),this.width_=r[0]},e.a=a},function(t,e,i){"use strict";var r=i(0),n=i(111),o=i(110),a=function(t,e,i,r,n,a){o.a.call(this,t,e,i,r,n,a)};r.a.inherits(a,o.a),a.prototype.drawFlatCoordinates_=function(t,e,i,r){var o=this.coordinates.length,a=this.appendFlatCoordinates(t,e,i,r,!1,!1),s=[n.a.MOVE_TO_LINE_TO,o,a];return this.instructions.push(s),this.hitDetectionInstructions.push(s),i},a.prototype.drawLineString=function(t,e){var i=this.state,r=i.strokeStyle,o=i.lineWidth;if(void 0!==r&&void 0!==o){this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([n.a.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset],[n.a.BEGIN_PATH]);var a=t.getFlatCoordinates(),s=t.getStride();this.drawFlatCoordinates_(a,0,a.length,s),this.hitDetectionInstructions.push([n.a.STROKE]),this.endGeometry(t,e)}},a.prototype.drawMultiLineString=function(t,e){var i=this.state,r=i.strokeStyle,o=i.lineWidth;if(void 0!==r&&void 0!==o){this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([n.a.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset],[n.a.BEGIN_PATH]);var a,s,l=t.getEnds(),u=t.getFlatCoordinates(),h=t.getStride(),c=0;for(a=0,s=l.length;a<s;++a)c=this.drawFlatCoordinates_(u,c,l[a],h);this.hitDetectionInstructions.push([n.a.STROKE]),this.endGeometry(t,e)}},a.prototype.finish=function(){var t=this.state;void 0!=t.lastStroke&&t.lastStroke!=this.coordinates.length&&this.instructions.push([n.a.STROKE]),this.reverseHitDetectionInstructions(),this.state=null},a.prototype.applyStroke=function(t){void 0!=t.lastStroke&&t.lastStroke!=this.coordinates.length&&(this.instructions.push([n.a.STROKE]),t.lastStroke=this.coordinates.length),t.lastStroke=0,o.a.prototype.applyStroke.call(this,t),this.instructions.push([n.a.BEGIN_PATH])},e.a=a},function(t,e,i){"use strict";var r=i(0),n=i(52),o=i(79),a=i(53),s=i(111),l=i(110),u=function(t,e,i,r,n,o){l.a.call(this,t,e,i,r,n,o)};r.a.inherits(u,l.a),u.prototype.drawFlatCoordinatess_=function(t,e,i,r){var n=this.state,o=void 0!==n.fillStyle,a=void 0!=n.strokeStyle,l=i.length,u=[s.a.BEGIN_PATH];this.instructions.push(u),this.hitDetectionInstructions.push(u);for(var h=0;h<l;++h){var c=i[h],p=this.coordinates.length,d=this.appendFlatCoordinates(t,e,c,r,!0,!a),f=[s.a.MOVE_TO_LINE_TO,p,d];if(this.instructions.push(f),this.hitDetectionInstructions.push(f),a){var _=[s.a.CLOSE_PATH];this.instructions.push(_),this.hitDetectionInstructions.push(_)}e=c}var g=[s.a.FILL];if(this.hitDetectionInstructions.push(g),o&&this.instructions.push(g),a){var y=[s.a.STROKE];this.instructions.push(y),this.hitDetectionInstructions.push(y)}return e},u.prototype.drawCircle=function(t,e){var i=this.state,r=i.fillStyle,o=i.strokeStyle;if(void 0!==r||void 0!==o){this.setFillStrokeStyles_(t),this.beginGeometry(t,e),this.hitDetectionInstructions.push([s.a.SET_FILL_STYLE,n.a.asString(a.a.defaultFillStyle)]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([s.a.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);var l=t.getFlatCoordinates(),u=t.getStride(),h=this.coordinates.length;this.appendFlatCoordinates(l,0,l.length,u,!1,!1);var c=[s.a.BEGIN_PATH],p=[s.a.CIRCLE,h];this.instructions.push(c,p),this.hitDetectionInstructions.push(c,p);var d=[s.a.FILL];if(this.hitDetectionInstructions.push(d),void 0!==i.fillStyle&&this.instructions.push(d),void 0!==i.strokeStyle){var f=[s.a.STROKE];this.instructions.push(f),this.hitDetectionInstructions.push(f)}this.endGeometry(t,e)}},u.prototype.drawPolygon=function(t,e){var i=this.state;this.setFillStrokeStyles_(t),this.beginGeometry(t,e),this.hitDetectionInstructions.push([s.a.SET_FILL_STYLE,n.a.asString(a.a.defaultFillStyle)]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([s.a.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);var r=t.getEnds(),o=t.getOrientedFlatCoordinates(),l=t.getStride();this.drawFlatCoordinatess_(o,0,r,l),this.endGeometry(t,e)},u.prototype.drawMultiPolygon=function(t,e){var i=this.state,r=i.fillStyle,o=i.strokeStyle;if(void 0!==r||void 0!==o){this.setFillStrokeStyles_(t),this.beginGeometry(t,e),this.hitDetectionInstructions.push([s.a.SET_FILL_STYLE,n.a.asString(a.a.defaultFillStyle)]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([s.a.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);var l,u,h=t.getEndss(),c=t.getOrientedFlatCoordinates(),p=t.getStride(),d=0;for(l=0,u=h.length;l<u;++l)d=this.drawFlatCoordinatess_(c,d,h[l],p);this.endGeometry(t,e)}},u.prototype.finish=function(){this.reverseHitDetectionInstructions(),this.state=null;var t=this.tolerance;if(0!==t){var e,i,r=this.coordinates;for(e=0,i=r.length;e<i;++e)r[e]=o.a.snap(r[e],t)}},u.prototype.setFillStrokeStyles_=function(t){var e=this.state;void 0!==e.fillStyle&&this.updateFillStyle(e,this.applyFill,t),void 0!==e.strokeStyle&&this.updateStrokeStyle(e,this.applyStroke)},e.a=u},function(t,e,i){"use strict";var r=i(0),n=i(94),o=i(13),a=i(1),s=i(493),l=i(12),u=i(33),h=i(53),c=i(111),p=i(110),d=i(84),f=i(269),_=function(t,e,i,r,n,o){p.a.call(this,t,e,i,r,n,o),this.declutterGroup_,this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.widths_={},h.a.labelCache.prune()};r.a.inherits(_,p.a),_.measureTextWidths=function(t,e,i){var r,n,o=e.length,a=0;for(n=0;n<o;++n)r=h.a.measureTextWidth(t,e[n]),a=Math.max(a,r),i.push(r);return a},_.prototype.drawText=function(t,e){var i=this.textFillState_,r=this.textStrokeState_,n=this.textState_;if(""!==this.text_&&n&&(i||r)){var o,u,h=this.coordinates.length,c=t.getType(),p=null,d=2,_=2;if(n.placement===f.a.LINE){if(!a.a.intersects(this.getBufferedMaxExtent(),t.getExtent()))return;var g;if(p=t.getFlatCoordinates(),_=t.getStride(),c==l.a.LINE_STRING)g=[p.length];else if(c==l.a.MULTI_LINE_STRING)g=t.getEnds();else if(c==l.a.POLYGON)g=t.getEnds().slice(0,1);else if(c==l.a.MULTI_POLYGON){var y=t.getEndss();for(g=[],o=0,u=y.length;o<u;++o)g.push(y[o][0])}this.beginGeometry(t,e);for(var v,m=n.textAlign,E=0,T=0,S=g.length;T<S;++T){if(void 0==m){var R=s.a.lineString(n.maxAngle,p,E,g[T],_);E=R[0],v=R[1]}else v=g[T];for(o=E;o<v;o+=_)this.coordinates.push(p[o],p[o+1]);d=this.coordinates.length,E=g[T],this.drawChars_(h,d,this.declutterGroup_),h=d}this.endGeometry(t,e)}else{var I=this.getImage(this.text_,this.textKey_,this.fillKey_,this.strokeKey_),x=I.width/this.pixelRatio;switch(c){case l.a.POINT:case l.a.MULTI_POINT:p=t.getFlatCoordinates(),d=p.length;break;case l.a.LINE_STRING:p=t.getFlatMidpoint();break;case l.a.CIRCLE:p=t.getCenter();break;case l.a.MULTI_LINE_STRING:p=t.getFlatMidpoints(),d=p.length;break;case l.a.POLYGON:if(p=t.getFlatInteriorPoint(),!n.overflow&&p[2]/this.resolution<x)return;_=3;break;case l.a.MULTI_POLYGON:var C=t.getFlatInteriorPoints();for(p=[],o=0,u=C.length;o<u;o+=3)(n.overflow||C[o+2]/this.resolution>=x)&&p.push(C[o],C[o+1]);if(0==(d=p.length))return}d=this.appendFlatCoordinates(p,0,d,_,!1,!1),this.beginGeometry(t,e),(n.backgroundFill||n.backgroundStroke)&&(this.setFillStrokeStyle(n.backgroundFill,n.backgroundStroke),this.updateFillStyle(this.state,this.applyFill,t),this.updateStrokeStyle(this.state,this.applyStroke)),this.drawTextImage_(I,h,d),this.endGeometry(t,e)}}},_.prototype.getImage=function(t,e,i,r){var n,a=r+e+t+i+this.pixelRatio,s=h.a.labelCache;if(!s.containsKey(a)){var l=r?this.strokeStates[r]||this.textStrokeState_:null,c=i?this.fillStates[i]||this.textFillState_:null,p=this.textStates[e]||this.textState_,f=this.pixelRatio,g=p.scale*f,y=d.a.TEXT_ALIGN[p.textAlign||h.a.defaultTextAlign],v=r&&l.lineWidth?l.lineWidth:0,m=t.split("\n"),E=m.length,T=[],S=_.measureTextWidths(p.font,m,T),R=h.a.measureTextHeight(p.font),I=R*E,x=S+v,C=o.a.createCanvasContext2D(Math.ceil(x*g),Math.ceil((I+v)*g));n=C.canvas,s.set(a,n),1!=g&&C.scale(g,g),C.font=p.font,r&&(C.strokeStyle=l.strokeStyle,C.lineWidth=v*(u.a.SAFARI?g:1),C.lineCap=l.lineCap,C.lineJoin=l.lineJoin,C.miterLimit=l.miterLimit,u.a.CANVAS_LINE_DASH&&l.lineDash.length&&(C.setLineDash(l.lineDash),C.lineDashOffset=l.lineDashOffset)),i&&(C.fillStyle=c.fillStyle),C.textBaseline="middle",C.textAlign="center";var O,P=.5-y,L=y*n.width/g+P*v;if(r)for(O=0;O<E;++O)C.strokeText(m[O],L+P*T[O],.5*(v+R)+O*R);if(i)for(O=0;O<E;++O)C.fillText(m[O],L+P*T[O],.5*(v+R)+O*R)}return s.get(a)},_.prototype.drawTextImage_=function(t,e,i){var r=this.textState_,n=this.textStrokeState_,o=this.pixelRatio,a=d.a.TEXT_ALIGN[r.textAlign||h.a.defaultTextAlign],s=d.a.TEXT_ALIGN[r.textBaseline],l=n&&n.lineWidth?n.lineWidth:0,u=a*t.width/o+2*(.5-a)*l,p=s*t.height/o+2*(.5-s)*l;this.instructions.push([c.a.DRAW_IMAGE,e,i,t,(u-this.textOffsetX_)*o,(p-this.textOffsetY_)*o,this.declutterGroup_,t.height,1,0,0,this.textRotateWithView_,this.textRotation_,1,!0,t.width,r.padding==h.a.defaultPadding?h.a.defaultPadding:r.padding.map(function(t){return t*o}),!!r.backgroundFill,!!r.backgroundStroke]),this.hitDetectionInstructions.push([c.a.DRAW_IMAGE,e,i,t,(u-this.textOffsetX_)*o,(p-this.textOffsetY_)*o,this.declutterGroup_,t.height,1,0,0,this.textRotateWithView_,this.textRotation_,1/o,!0,t.width,r.padding,!!r.backgroundFill,!!r.backgroundStroke])},_.prototype.drawChars_=function(t,e,i){var r=this.textStrokeState_,n=this.textState_,o=this.textFillState_,a=this.strokeKey_;r&&(a in this.strokeStates||(this.strokeStates[a]={strokeStyle:r.strokeStyle,lineCap:r.lineCap,lineDashOffset:r.lineDashOffset,lineWidth:r.lineWidth,lineJoin:r.lineJoin,miterLimit:r.miterLimit,lineDash:r.lineDash}));var s=this.textKey_;this.textKey_ in this.textStates||(this.textStates[this.textKey_]={font:n.font,textAlign:n.textAlign||h.a.defaultTextAlign,scale:n.scale});var l=this.fillKey_;o&&(l in this.fillStates||(this.fillStates[l]={fillStyle:o.fillStyle}));var u=this.pixelRatio,p=d.a.TEXT_ALIGN[n.textBaseline],f=this.textOffsetY_*u,_=this.text_,g=n.font,y=n.scale,v=r?r.lineWidth*y/2:0,m=this.widths_[g];m||(this.widths_[g]=m={}),this.instructions.push([c.a.DRAW_CHARS,t,e,p,i,n.overflow,l,n.maxAngle,function(t){var e=m[t];return e||(e=m[t]=h.a.measureTextWidth(g,t)),e*y*u},f,a,v*u,_,s,1]),this.hitDetectionInstructions.push([c.a.DRAW_CHARS,t,e,p,i,n.overflow,l,n.maxAngle,function(t){var e=m[t];return e||(e=m[t]=h.a.measureTextWidth(g,t)),e*y},f,a,v,_,s,1/u])},_.prototype.setTextStyle=function(t,e){var i,o,a;if(t){this.declutterGroup_=e;var s=t.getFill();s?(o=this.textFillState_,o||(o=this.textFillState_={}),o.fillStyle=n.a.asColorLike(s.getColor()||h.a.defaultFillStyle)):o=this.textFillState_=null;var l=t.getStroke();if(l){a=this.textStrokeState_,a||(a=this.textStrokeState_={});var u=l.getLineDash(),c=l.getLineDashOffset(),p=l.getWidth(),d=l.getMiterLimit();a.lineCap=l.getLineCap()||h.a.defaultLineCap,a.lineDash=u?u.slice():h.a.defaultLineDash,a.lineDashOffset=void 0===c?h.a.defaultLineDashOffset:c,a.lineJoin=l.getLineJoin()||h.a.defaultLineJoin,a.lineWidth=void 0===p?h.a.defaultLineWidth:p,a.miterLimit=void 0===d?h.a.defaultMiterLimit:d,a.strokeStyle=n.a.asColorLike(l.getColor()||h.a.defaultStrokeStyle)}else a=this.textStrokeState_=null;i=this.textState_;var f=t.getFont()||h.a.defaultFont;h.a.checkFont(f);var _=t.getScale();i.overflow=t.getOverflow(),i.font=f,i.maxAngle=t.getMaxAngle(),i.placement=t.getPlacement(),i.textAlign=t.getTextAlign(),i.textBaseline=t.getTextBaseline()||h.a.defaultTextBaseline,i.backgroundFill=t.getBackgroundFill(),i.backgroundStroke=t.getBackgroundStroke(),i.padding=t.getPadding()||h.a.defaultPadding,i.scale=void 0===_?1:_;var g=t.getOffsetX(),y=t.getOffsetY(),v=t.getRotateWithView(),m=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=void 0===g?0:g,this.textOffsetY_=void 0===y?0:y,this.textRotateWithView_=void 0!==v&&v,this.textRotation_=void 0===m?0:m,this.strokeKey_=a?("string"==typeof a.strokeStyle?a.strokeStyle:r.a.getUid(a.strokeStyle))+a.lineCap+a.lineDashOffset+"|"+a.lineWidth+a.lineJoin+a.miterLimit+"["+a.lineDash.join()+"]":"",this.textKey_=i.font+i.scale+(i.textAlign||"?"),this.fillKey_=o?"string"==typeof o.fillStyle?o.fillStyle:"|"+r.a.getUid(o.fillStyle):""}else this.text_=""},e.a=_},function(t,e,i){"use strict";var r={};r.lineString=function(t,e,i,r,n){var o,a,s,l,u,h,c,p,d,f=i,_=i,g=0,y=0,v=i;for(o=i;o<r;o+=n){var m=e[o],E=e[o+1];void 0!==l&&(p=m-l,d=E-u,s=Math.sqrt(p*p+d*d),void 0!==h&&(y+=a,Math.acos((h*p+c*d)/(a*s))>t&&(y>g&&(g=y,f=v,_=o),y=0,v=o-n)),a=s,h=p,c=d),l=m,u=E}return y+=s,y>g?[v,o]:[f,_]},e.a=r},function(t,e,i){"use strict";var r=i(0),n=i(48),o=i(39),a=i(13),s=i(4),l=i(5),u=i(173),h=i.n(u),c=i(1),p=i(495),d=i(8),f=i(32),_=i(109),g=i(53),y=i(288),v=i(84),m=i(49),E=i(287),T=i(197),S=i(16),R=function(t){this.context=null,E.a.call(this,t),this.declutterTree_=t.getDeclutter()?h()(9):null,this.dirty_=!1,this.renderedLayerRevision_,this.tmpTransform_=S.a.create(),this.zDirection=t.getRenderMode()==p.a.VECTOR?1:0,s.a.listen(g.a.labelCache,l.a.CLEAR,this.handleFontsChanged_,this)};r.a.inherits(R,E.a),R.handles=function(t,e){return t===m.a.CANVAS&&e.getType()===n.a.VECTOR_TILE},R.create=function(t,e){return new R(e)},R.IMAGE_REPLAYS={image:[_.a.POLYGON,_.a.CIRCLE,_.a.LINE_STRING,_.a.IMAGE,_.a.TEXT],hybrid:[_.a.POLYGON,_.a.LINE_STRING]},R.VECTOR_REPLAYS={image:[_.a.DEFAULT],hybrid:[_.a.IMAGE,_.a.TEXT,_.a.DEFAULT],vector:v.a.ORDER},R.prototype.disposeInternal=function(){s.a.unlisten(g.a.labelCache,l.a.CLEAR,this.handleFontsChanged_,this),E.a.prototype.disposeInternal.call(this)},R.prototype.prepareFrame=function(t,e){var i=this.getLayer(),r=i.getRevision();if(this.renderedLayerRevision_!=r){this.renderedTiles.length=0;var n=i.getRenderMode();this.context||n==p.a.VECTOR||(this.context=a.a.createCanvasContext2D()),this.context&&n==p.a.VECTOR&&(this.context=null)}return this.renderedLayerRevision_=r,E.a.prototype.prepareFrame.apply(this,arguments)},R.prototype.createReplayGroup_=function(t,e){var i=this.getLayer(),r=e.pixelRatio,n=e.viewState.projection,a=i.getRevision(),s=i.getRenderOrder()||null,l=t.getReplayState(i);if(l.dirty||l.renderedRevision!=a||l.renderedRenderOrder!=s){for(var u=i.getSource(),h=u.getTileGrid(),p=u.getTileGridForProjection(n),_=p.getResolution(t.tileCoord[0]),g=p.getTileCoordExtent(t.wrappedTileCoord),v={},m=0,E=t.tileKeys.length;m<E;++m){var S=t.getTile(t.tileKeys[m]);if(S.getState()!=o.a.ERROR){var R=S.tileCoord,I=h.getTileCoordExtent(R),x=c.a.getIntersection(g,I),C=c.a.equals(I,x)?null:c.a.buffer(x,i.getRenderBuffer()*_),O=S.getProjection(),P=!1;d.a.equivalent(n,O)||(P=!0,S.setProjection(n)),l.dirty=!1;var L=new y.a(0,x,_,r,u.getOverlaps(),this.declutterTree_,i.getRenderBuffer()),A=T.a.getSquaredTolerance(_,r),w=function(t){var e,r=t.getStyleFunction();if(r?e=r.call(t,_):(r=i.getStyleFunction())&&(e=r(t,_)),e){var n=this.renderFeature(t,A,e,L);this.dirty_=this.dirty_||n,l.dirty=l.dirty||n}},M=S.getFeatures();s&&s!==l.renderedRenderOrder&&M.sort(s);for(var F,N=0,b=M.length;N<b;++N)F=M[N],P&&(O.getUnits()==f.a.TILE_PIXELS&&(O.setWorldExtent(I),O.setExtent(S.getExtent())),F.getGeometry().transform(O,n)),C&&!c.a.intersects(C,F.getGeometry().getExtent())||w.call(this,F);L.finish();for(var D in L.getReplays())v[D]=!0;S.setReplayGroup(i,t.tileCoord.toString(),L)}}l.renderedRevision=a,l.renderedRenderOrder=s}},R.prototype.drawTileImage=function(t,e,i,r,n,o,a,s,l){var u=t;this.createReplayGroup_(u,e),this.context&&(this.renderTileImage_(u,e,i),E.a.prototype.drawTileImage.apply(this,arguments))},R.prototype.forEachFeatureAtCoordinate=function(t,e,i,n,a){var s=e.viewState.resolution,l=e.viewState.rotation;i=void 0==i?0:i;var u,h,p,d,f,_,g,y,v=this.getLayer(),m={},E=this.renderedTiles,T=v.getSource(),S=T.getTileGridForProjection(e.viewState.projection);for(p=0,d=E.length;p<d;++p)if(_=E[p],g=_.wrappedTileCoord,y=S.getTileCoordExtent(g,this.tmpExtent),u=c.a.buffer(y,i*s,u),c.a.containsCoordinate(u,t))for(var R=0,I=_.tileKeys.length;R<I;++R){var x=_.getTile(_.tileKeys[R]);x.getState()!=o.a.ERROR&&(f=x.getReplayGroup(v,_.tileCoord.toString()),h=h||f.forEachFeatureAtCoordinate(t,s,l,i,{},function(t){var e=r.a.getUid(t).toString();if(!(e in m))return m[e]=!0,n.call(a,t,v)},null))}return h},R.prototype.getReplayTransform_=function(t,e){var i=this.getLayer(),r=i.getSource(),n=r.getTileGrid(),o=t.tileCoord,a=n.getResolution(o[0]),s=e.viewState,l=e.pixelRatio,u=s.resolution/l,h=n.getTileCoordExtent(o,this.tmpExtent),p=s.center,d=c.a.getTopLeft(h),f=e.size,_=Math.round(l*f[0]/2),g=Math.round(l*f[1]/2);return S.a.compose(this.tmpTransform_,_,g,a/u,a/u,s.rotation,(d[0]-p[0])/a,(p[1]-d[1])/a)},R.prototype.handleFontsChanged_=function(t){var e=this.getLayer();e.getVisible()&&void 0!==this.renderedLayerRevision_&&e.changed()},R.prototype.handleStyleImageChange_=function(t){this.renderIfReadyAndVisible()},R.prototype.postCompose=function(t,e,i){var r,n,a=this.getLayer(),s=a.getDeclutter()?{}:null,l=a.getSource(),u=a.getRenderMode(),h=R.VECTOR_REPLAYS[u],c=e.pixelRatio,d=e.viewState.rotation,f=e.size;d&&(r=Math.round(c*f[0]/2),n=Math.round(c*f[1]/2),g.a.rotateAtOffset(t,-d,r,n)),s&&this.declutterTree_.clear();for(var _=this.renderedTiles,v=l.getTileGridForProjection(e.viewState.projection),m=[],T=[],S=_.length-1;S>=0;--S){var I=_[S];if(I.getState()!=o.a.ABORT)for(var x=I.tileCoord,C=v.getTileCoordExtent(x)[0]-v.getTileCoordExtent(I.wrappedTileCoord)[0],O=void 0,P=0,L=I.tileKeys.length;P<L;++P){var A=I.getTile(I.tileKeys[P]);if(A.getState()!=o.a.ERROR){var w=A.getReplayGroup(a,x.toString());if(u==p.a.VECTOR||w.hasReplays(h)){O||(O=this.getTransform(e,C));var M=A.tileCoord[0],F=w.getClipCoords(O);t.save(),t.globalAlpha=i.opacity;for(var N=0,b=m.length;N<b;++N){var D=m[N];M<T[N]&&(t.beginPath(),t.moveTo(F[0],F[1]),t.lineTo(F[2],F[3]),t.lineTo(F[4],F[5]),t.lineTo(F[6],F[7]),t.moveTo(D[6],D[7]),t.lineTo(D[4],D[5]),t.lineTo(D[2],D[3]),t.lineTo(D[0],D[1]),t.clip())}w.replay(t,O,d,{},h,s),t.restore(),m.push(F),T.push(M)}}}}s&&y.a.replayDeclutter(s,t,d),d&&g.a.rotateAtOffset(t,d,r,n),E.a.prototype.postCompose.apply(this,arguments)},R.prototype.renderFeature=function(t,e,i,r){if(!i)return!1;var n=!1;if(Array.isArray(i))for(var o=0,a=i.length;o<a;++o)n=T.a.renderFeature(r,t,i[o],e,this.handleStyleImageChange_,this)||n;else n=T.a.renderFeature(r,t,i,e,this.handleStyleImageChange_,this);return n},R.prototype.renderTileImage_=function(t,e,i){var r=this.getLayer(),n=t.getReplayState(r),a=r.getRevision(),s=R.IMAGE_REPLAYS[r.getRenderMode()];if(s&&n.renderedTileRevision!==a){n.renderedTileRevision=a;var l=t.wrappedTileCoord,u=l[0],h=e.pixelRatio,c=r.getSource(),p=c.getTileGridForProjection(e.viewState.projection),d=p.getResolution(u),f=t.getContext(r),_=c.getTilePixelSize(u,h,e.viewState.projection);f.canvas.width=_[0],f.canvas.height=_[1];for(var g=p.getTileCoordExtent(l),y=0,v=t.tileKeys.length;y<v;++y){var m=t.getTile(t.tileKeys[y]);if(m.getState()!=o.a.ERROR){var E=h/d,T=S.a.reset(this.tmpTransform_);S.a.scale(T,E,-E),S.a.translate(T,-g[0],-g[3]);m.getReplayGroup(r,t.tileCoord.toString()).replay(f,T,0,{},s)}}}},e.a=R},function(t,e,i){"use strict";var r={IMAGE:"image",HYBRID:"hybrid",VECTOR:"vector"};e.a=r},function(t,e,i){"use strict";var r=i(0),n=i(48),o=i(28),a=i(13),s=i(1),l=i(19),u=i(49),h=i(198),c=i(16),p=i(21),d=i(150),f=function(t,e){h.a.call(this,t,e),this.image_=null,this.hitCanvasContext_=null,this.hitTransformationMatrix_=null};r.a.inherits(f,h.a),f.handles=function(t,e){return t===u.a.WEBGL&&e.getType()===n.a.IMAGE},f.create=function(t,e){return new f(t,e)},f.prototype.createTexture_=function(t){var e=t.getImage(),i=this.mapRenderer.getGL();return d.a.createTexture(i,e,p.a.CLAMP_TO_EDGE,p.a.CLAMP_TO_EDGE)},f.prototype.forEachFeatureAtCoordinate=function(t,e,i,r,n){var o=this.getLayer(),a=o.getSource(),s=e.viewState.resolution,l=e.viewState.rotation,u=e.skippedFeatureUids;return a.forEachFeatureAtCoordinate(t,s,l,i,u,function(t){return r.call(n,t,o)})},f.prototype.prepareFrame=function(t,e,i){var n=this.mapRenderer.getGL(),a=t.pixelRatio,l=t.viewState,u=l.center,h=l.resolution,p=l.rotation,d=this.image_,f=this.texture,_=this.getLayer(),g=_.getSource(),y=t.viewHints,v=t.extent;if(void 0!==e.extent&&(v=s.a.getIntersection(v,e.extent)),!y[o.a.ANIMATING]&&!y[o.a.INTERACTING]&&!s.a.isEmpty(v)){var m=l.projection;if(!r.a.ENABLE_RASTER_REPROJECTION){var E=g.getProjection();E&&(m=E)}var T=g.getImage(v,h,a,m);if(T){if(this.loadImage(T)&&(d=T,f=this.createTexture_(T),this.texture)){var S=function(t,e){t.isContextLost()||t.deleteTexture(e)}.bind(null,n,this.texture);t.postRenderFunctions.push(S)}}}if(d){var R=this.mapRenderer.getContext().getCanvas();this.updateProjectionMatrix_(R.width,R.height,a,u,h,p,d.getExtent()),this.hitTransformationMatrix_=null;var I=this.texCoordMatrix;c.a.reset(I),c.a.scale(I,1,-1),c.a.translate(I,0,-1),this.image_=d,this.texture=f,this.updateLogos(t,g)}return!!d},f.prototype.updateProjectionMatrix_=function(t,e,i,r,n,o,a){var s=t*n,l=e*n,u=this.projectionMatrix;c.a.reset(u),c.a.scale(u,2*i/s,2*i/l),c.a.rotate(u,-o),c.a.translate(u,a[0]-r[0],a[1]-r[1]),c.a.scale(u,(a[2]-a[0])/2,(a[3]-a[1])/2),c.a.translate(u,1,1)},f.prototype.hasFeatureAtCoordinate=function(t,e){return void 0!==this.forEachFeatureAtCoordinate(t,e,0,l.a.TRUE,this)},f.prototype.forEachLayerAtPixel=function(t,e,i,n){if(this.image_&&this.image_.getImage()){if(this.getLayer().getSource().forEachFeatureAtCoordinate!==r.a.nullFunction){var o=c.a.apply(e.pixelToCoordinateTransform,t.slice());return this.forEachFeatureAtCoordinate(o,e,0,l.a.TRUE,this)?i.call(n,this.getLayer(),null):void 0}var s=[this.image_.getImage().width,this.image_.getImage().height];this.hitTransformationMatrix_||(this.hitTransformationMatrix_=this.getHitTransformationMatrix_(e.size,s));var u=c.a.apply(this.hitTransformationMatrix_,t.slice());if(!(u[0]<0||u[0]>s[0]||u[1]<0||u[1]>s[1])){this.hitCanvasContext_||(this.hitCanvasContext_=a.a.createCanvasContext2D(1,1)),this.hitCanvasContext_.clearRect(0,0,1,1),this.hitCanvasContext_.drawImage(this.image_.getImage(),u[0],u[1],1,1,0,0,1,1);var h=this.hitCanvasContext_.getImageData(0,0,1,1).data;return h[3]>0?i.call(n,this.getLayer(),h):void 0}}},f.prototype.getHitTransformationMatrix_=function(t,e){var i=c.a.create();c.a.translate(i,-1,-1),c.a.scale(i,2/t[0],2/t[1]),c.a.translate(i,0,t[1]),c.a.scale(i,1,-1);var r=c.a.invert(this.projectionMatrix.slice()),n=c.a.create();return c.a.translate(n,0,e[1]),c.a.scale(n,1,-1),c.a.scale(n,e[0]/2,e[1]/2),c.a.translate(n,1,1),c.a.multiply(n,r),c.a.multiply(n,i),n},e.a=f},function(t,e,i){"use strict";var r=i(0),n=i(6),o=i(52),a=i(1),s=i(2),l=i(51),u=i(498),h=i(499),c=i(148),p=i(149),d=i(21),f=i(76),_=function(t,e){c.a.call(this,t,e),this.defaultLocations_=null,this.styles_=[],this.styleIndices_=[],this.radius_=0,this.state_={fillColor:null,strokeColor:null,lineDash:null,lineDashOffset:void 0,lineWidth:void 0,changed:!1}};r.a.inherits(_,c.a),_.prototype.drawCoordinates_=function(t,e,i,r){var n,o,a=this.vertices.length,s=this.indices.length,l=a/4;for(n=e,o=i;n<o;n+=r)this.vertices[a++]=t[n],this.vertices[a++]=t[n+1],this.vertices[a++]=0,this.vertices[a++]=this.radius_,this.vertices[a++]=t[n],this.vertices[a++]=t[n+1],this.vertices[a++]=1,this.vertices[a++]=this.radius_,this.vertices[a++]=t[n],this.vertices[a++]=t[n+1],this.vertices[a++]=2,this.vertices[a++]=this.radius_,this.vertices[a++]=t[n],this.vertices[a++]=t[n+1],this.vertices[a++]=3,this.vertices[a++]=this.radius_,this.indices[s++]=l,this.indices[s++]=l+1,this.indices[s++]=l+2,this.indices[s++]=l+2,this.indices[s++]=l+3,this.indices[s++]=l,l+=4},_.prototype.drawCircle=function(t,e){var i=t.getRadius(),r=t.getStride();if(i){this.startIndices.push(this.indices.length),this.startIndicesFeature.push(e),this.state_.changed&&(this.styleIndices_.push(this.indices.length),this.state_.changed=!1),this.radius_=i;var n=t.getFlatCoordinates();n=l.a.translate(n,0,2,r,-this.origin[0],-this.origin[1]),this.drawCoordinates_(n,0,2,r)}else if(this.state_.changed&&(this.styles_.pop(),this.styles_.length)){var o=this.styles_[this.styles_.length-1];this.state_.fillColor=o[0],this.state_.strokeColor=o[1],this.state_.lineWidth=o[2],this.state_.changed=!1}},_.prototype.finish=function(t){this.verticesBuffer=new f.a(this.vertices),this.indicesBuffer=new f.a(this.indices),this.startIndices.push(this.indices.length),0===this.styleIndices_.length&&this.styles_.length>0&&(this.styles_=[]),this.vertices=null,this.indices=null},_.prototype.getDeleteResourcesFunction=function(t){var e=this.verticesBuffer,i=this.indicesBuffer;return function(){t.deleteBuffer(e),t.deleteBuffer(i)}},_.prototype.setUpProgram=function(t,e,i,r){var n,o;n=u.a.fragment,o=u.a.vertex;var a,s=e.getProgram(n,o);return this.defaultLocations_?a=this.defaultLocations_:(a=new h.a(t,s),this.defaultLocations_=a),e.useProgram(s),t.enableVertexAttribArray(a.a_position),t.vertexAttribPointer(a.a_position,2,d.a.FLOAT,!1,16,0),t.enableVertexAttribArray(a.a_instruction),t.vertexAttribPointer(a.a_instruction,1,d.a.FLOAT,!1,16,8),t.enableVertexAttribArray(a.a_radius),t.vertexAttribPointer(a.a_radius,1,d.a.FLOAT,!1,16,12),t.uniform2fv(a.u_size,i),t.uniform1f(a.u_pixelRatio,r),a},_.prototype.shutDownProgram=function(t,e){t.disableVertexAttribArray(e.a_position),t.disableVertexAttribArray(e.a_instruction),t.disableVertexAttribArray(e.a_radius)},_.prototype.drawReplay=function(t,e,i,r){if(s.a.isEmpty(i)){var n,o,a,l;for(a=this.startIndices[this.startIndices.length-1],n=this.styleIndices_.length-1;n>=0;--n)o=this.styleIndices_[n],l=this.styles_[n],this.setFillStyle_(t,l[0]),this.setStrokeStyle_(t,l[1],l[2]),this.drawElements(t,e,o,a),a=o}else this.drawReplaySkipping_(t,e,i)},_.prototype.drawHitDetectionReplayOneByOne=function(t,e,i,n,o){var s,l,u,h,c,p,d,f;for(f=this.startIndices.length-2,u=this.startIndices[f+1],s=this.styleIndices_.length-1;s>=0;--s)for(h=this.styles_[s],this.setFillStyle_(t,h[0]),this.setStrokeStyle_(t,h[1],h[2]),c=this.styleIndices_[s];f>=0&&this.startIndices[f]>=c;){if(l=this.startIndices[f],p=this.startIndicesFeature[f],d=r.a.getUid(p).toString(),void 0===i[d]&&p.getGeometry()&&(void 0===o||a.a.intersects(o,p.getGeometry().getExtent()))){t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),this.drawElements(t,e,l,u);var _=n(p);if(_)return _}f--,u=l}},_.prototype.drawReplaySkipping_=function(t,e,i){var n,o,a,s,l,u,h,c,p;for(c=this.startIndices.length-2,a=o=this.startIndices[c+1],n=this.styleIndices_.length-1;n>=0;--n){for(s=this.styles_[n],this.setFillStyle_(t,s[0]),this.setStrokeStyle_(t,s[1],s[2]),l=this.styleIndices_[n];c>=0&&this.startIndices[c]>=l;)p=this.startIndices[c],u=this.startIndicesFeature[c],h=r.a.getUid(u).toString(),i[h]&&(o!==a&&this.drawElements(t,e,o,a),a=p),c--,o=p;o!==a&&this.drawElements(t,e,o,a),o=a=l}},_.prototype.setFillStyle_=function(t,e){t.uniform4fv(this.defaultLocations_.u_fillColor,e)},_.prototype.setStrokeStyle_=function(t,e,i){t.uniform4fv(this.defaultLocations_.u_strokeColor,e),t.uniform1f(this.defaultLocations_.u_lineWidth,i)},_.prototype.setFillStrokeStyle=function(t,e){var i,r;if(e){var a=e.getLineDash();this.state_.lineDash=a||p.a.defaultLineDash;var s=e.getLineDashOffset();this.state_.lineDashOffset=s||p.a.defaultLineDashOffset,i=e.getColor(),i=i instanceof CanvasGradient||i instanceof CanvasPattern?p.a.defaultStrokeStyle:o.a.asArray(i).map(function(t,e){return 3!=e?t/255:t})||p.a.defaultStrokeStyle,r=e.getWidth(),r=void 0!==r?r:p.a.defaultLineWidth}else i=[0,0,0,0],r=0;var l=t?t.getColor():[0,0,0,0];l=l instanceof CanvasGradient||l instanceof CanvasPattern?p.a.defaultFillStyle:o.a.asArray(l).map(function(t,e){return 3!=e?t/255:t})||p.a.defaultFillStyle,this.state_.strokeColor&&n.a.equals(this.state_.strokeColor,i)&&this.state_.fillColor&&n.a.equals(this.state_.fillColor,l)&&this.state_.lineWidth===r||(this.state_.changed=!0,this.state_.fillColor=l,this.state_.strokeColor=i,this.state_.lineWidth=r,this.styles_.push([l,i,r]))},e.a=_},function(t,e,i){"use strict";var r=i(0),n=i(85),o=i(86),a={};a.fragment=new n.a(r.a.DEBUG_WEBGL?"precision mediump float;\nvarying vec2 v_center;\nvarying vec2 v_offset;\nvarying float v_halfWidth;\nvarying float v_pixelRatio;\n\n\n\nuniform float u_opacity;\nuniform vec4 u_fillColor;\nuniform vec4 u_strokeColor;\nuniform vec2 u_size;\n\nvoid main(void) {\n  vec2 windowCenter = vec2((v_center.x + 1.0) / 2.0 * u_size.x * v_pixelRatio,\n      (v_center.y + 1.0) / 2.0 * u_size.y * v_pixelRatio);\n  vec2 windowOffset = vec2((v_offset.x + 1.0) / 2.0 * u_size.x * v_pixelRatio,\n      (v_offset.y + 1.0) / 2.0 * u_size.y * v_pixelRatio);\n  float radius = length(windowCenter - windowOffset);\n  float dist = length(windowCenter - gl_FragCoord.xy);\n  if (dist > radius + v_halfWidth) {\n    if (u_strokeColor.a == 0.0) {\n      gl_FragColor = u_fillColor;\n    } else {\n      gl_FragColor = u_strokeColor;\n    }\n    gl_FragColor.a = gl_FragColor.a - (dist - (radius + v_halfWidth));\n  } else if (u_fillColor.a == 0.0) {\n    // Hooray, no fill, just stroke. We can use real antialiasing.\n    gl_FragColor = u_strokeColor;\n    if (dist < radius - v_halfWidth) {\n      gl_FragColor.a = gl_FragColor.a - (radius - v_halfWidth - dist);\n    }\n  } else {\n    gl_FragColor = u_fillColor;\n    float strokeDist = radius - v_halfWidth;\n    float antialias = 2.0 * v_pixelRatio;\n    if (dist > strokeDist) {\n      gl_FragColor = u_strokeColor;\n    } else if (dist >= strokeDist - antialias) {\n      float step = smoothstep(strokeDist - antialias, strokeDist, dist);\n      gl_FragColor = mix(u_fillColor, u_strokeColor, step);\n    }\n  }\n  gl_FragColor.a = gl_FragColor.a * u_opacity;\n  if (gl_FragColor.a <= 0.0) {\n    discard;\n  }\n}\n":"precision mediump float;varying vec2 a;varying vec2 b;varying float c;varying float d;uniform float m;uniform vec4 n;uniform vec4 o;uniform vec2 p;void main(void){vec2 windowCenter=vec2((a.x+1.0)/2.0*p.x*d,(a.y+1.0)/2.0*p.y*d);vec2 windowOffset=vec2((b.x+1.0)/2.0*p.x*d,(b.y+1.0)/2.0*p.y*d);float radius=length(windowCenter-windowOffset);float dist=length(windowCenter-gl_FragCoord.xy);if(dist>radius+c){if(o.a==0.0){gl_FragColor=n;}else{gl_FragColor=o;}gl_FragColor.a=gl_FragColor.a-(dist-(radius+c));}else if(n.a==0.0){gl_FragColor=o;if(dist<radius-c){gl_FragColor.a=gl_FragColor.a-(radius-c-dist);}} else{gl_FragColor=n;float strokeDist=radius-c;float antialias=2.0*d;if(dist>strokeDist){gl_FragColor=o;}else if(dist>=strokeDist-antialias){float step=smoothstep(strokeDist-antialias,strokeDist,dist);gl_FragColor=mix(n,o,step);}} gl_FragColor.a=gl_FragColor.a*m;if(gl_FragColor.a<=0.0){discard;}}"),a.vertex=new o.a(r.a.DEBUG_WEBGL?"varying vec2 v_center;\nvarying vec2 v_offset;\nvarying float v_halfWidth;\nvarying float v_pixelRatio;\n\n\nattribute vec2 a_position;\nattribute float a_instruction;\nattribute float a_radius;\n\nuniform mat4 u_projectionMatrix;\nuniform mat4 u_offsetScaleMatrix;\nuniform mat4 u_offsetRotateMatrix;\nuniform float u_lineWidth;\nuniform float u_pixelRatio;\n\nvoid main(void) {\n  mat4 offsetMatrix = u_offsetScaleMatrix * u_offsetRotateMatrix;\n  v_center = vec4(u_projectionMatrix * vec4(a_position, 0.0, 1.0)).xy;\n  v_pixelRatio = u_pixelRatio;\n  float lineWidth = u_lineWidth * u_pixelRatio;\n  v_halfWidth = lineWidth / 2.0;\n  if (lineWidth == 0.0) {\n    lineWidth = 2.0 * u_pixelRatio;\n  }\n  vec2 offset;\n  // Radius with anitaliasing (roughly).\n  float radius = a_radius + 3.0 * u_pixelRatio;\n  // Until we get gl_VertexID in WebGL, we store an instruction.\n  if (a_instruction == 0.0) {\n    // Offsetting the edges of the triangle by lineWidth / 2 is necessary, however\n    // we should also leave some space for the antialiasing, thus we offset by lineWidth.\n    offset = vec2(-1.0, 1.0);\n  } else if (a_instruction == 1.0) {\n    offset = vec2(-1.0, -1.0);\n  } else if (a_instruction == 2.0) {\n    offset = vec2(1.0, -1.0);\n  } else {\n    offset = vec2(1.0, 1.0);\n  }\n\n  gl_Position = u_projectionMatrix * vec4(a_position + offset * radius, 0.0, 1.0) +\n      offsetMatrix * vec4(offset * lineWidth, 0.0, 0.0);\n  v_offset = vec4(u_projectionMatrix * vec4(a_position.x + a_radius, a_position.y,\n      0.0, 1.0)).xy;\n\n  if (distance(v_center, v_offset) > 20000.0) {\n    gl_Position = vec4(v_center, 0.0, 1.0);\n  }\n}\n\n\n":"varying vec2 a;varying vec2 b;varying float c;varying float d;attribute vec2 e;attribute float f;attribute float g;uniform mat4 h;uniform mat4 i;uniform mat4 j;uniform float k;uniform float l;void main(void){mat4 offsetMatrix=i*j;a=vec4(h*vec4(e,0.0,1.0)).xy;d=l;float lineWidth=k*l;c=lineWidth/2.0;if(lineWidth==0.0){lineWidth=2.0*l;}vec2 offset;float radius=g+3.0*l;//Until we get gl_VertexID in WebGL,we store an instruction.if(f==0.0){//Offsetting the edges of the triangle by lineWidth/2 is necessary,however//we should also leave some space for the antialiasing,thus we offset by lineWidth.offset=vec2(-1.0,1.0);}else if(f==1.0){offset=vec2(-1.0,-1.0);}else if(f==2.0){offset=vec2(1.0,-1.0);}else{offset=vec2(1.0,1.0);}gl_Position=h*vec4(e+offset*radius,0.0,1.0)+offsetMatrix*vec4(offset*lineWidth,0.0,0.0);b=vec4(h*vec4(e.x+g,e.y,0.0,1.0)).xy;if(distance(a,b)>20000.0){gl_Position=vec4(a,0.0,1.0);}}"),e.a=a},function(t,e,i){"use strict";var r=i(0),n=function(t,e){this.u_projectionMatrix=t.getUniformLocation(e,r.a.DEBUG_WEBGL?"u_projectionMatrix":"h"),this.u_offsetScaleMatrix=t.getUniformLocation(e,r.a.DEBUG_WEBGL?"u_offsetScaleMatrix":"i"),this.u_offsetRotateMatrix=t.getUniformLocation(e,r.a.DEBUG_WEBGL?"u_offsetRotateMatrix":"j"),this.u_lineWidth=t.getUniformLocation(e,r.a.DEBUG_WEBGL?"u_lineWidth":"k"),this.u_pixelRatio=t.getUniformLocation(e,r.a.DEBUG_WEBGL?"u_pixelRatio":"l"),this.u_opacity=t.getUniformLocation(e,r.a.DEBUG_WEBGL?"u_opacity":"m"),this.u_fillColor=t.getUniformLocation(e,r.a.DEBUG_WEBGL?"u_fillColor":"n"),this.u_strokeColor=t.getUniformLocation(e,r.a.DEBUG_WEBGL?"u_strokeColor":"o"),this.u_size=t.getUniformLocation(e,r.a.DEBUG_WEBGL?"u_size":"p"),this.a_position=t.getAttribLocation(e,r.a.DEBUG_WEBGL?"a_position":"e"),this.a_instruction=t.getAttribLocation(e,r.a.DEBUG_WEBGL?"a_instruction":"f"),this.a_radius=t.getAttribLocation(e,r.a.DEBUG_WEBGL?"a_radius":"g")};e.a=n},function(t,e,i){"use strict";var r=i(0),n=i(294),o=i(76),a=function(t,e){n.a.call(this,t,e),this.images_=[],this.hitDetectionImages_=[],this.textures_=[],this.hitDetectionTextures_=[]};r.a.inherits(a,n.a),a.prototype.drawMultiPoint=function(t,e){this.startIndices.push(this.indices.length),this.startIndicesFeature.push(e);var i=t.getFlatCoordinates(),r=t.getStride();this.drawCoordinates(i,0,i.length,r)},a.prototype.drawPoint=function(t,e){this.startIndices.push(this.indices.length),this.startIndicesFeature.push(e);var i=t.getFlatCoordinates(),r=t.getStride();this.drawCoordinates(i,0,i.length,r)},a.prototype.finish=function(t){var e=t.getGL();this.groupIndices.push(this.indices.length),this.hitDetectionGroupIndices.push(this.indices.length),this.verticesBuffer=new o.a(this.vertices);var i=this.indices;this.indicesBuffer=new o.a(i);var r={};this.createTextures(this.textures_,this.images_,r,e),this.createTextures(this.hitDetectionTextures_,this.hitDetectionImages_,r,e),this.images_=null,this.hitDetectionImages_=null,n.a.prototype.finish.call(this,t)},a.prototype.setImageStyle=function(t){var e,i=t.getAnchor(),n=t.getImage(1),o=t.getImageSize(),a=t.getHitDetectionImage(1),s=t.getOpacity(),l=t.getOrigin(),u=t.getRotateWithView(),h=t.getRotation(),c=t.getSize(),p=t.getScale();0===this.images_.length?this.images_.push(n):(e=this.images_[this.images_.length-1],r.a.getUid(e)!=r.a.getUid(n)&&(this.groupIndices.push(this.indices.length),this.images_.push(n))),0===this.hitDetectionImages_.length?this.hitDetectionImages_.push(a):(e=this.hitDetectionImages_[this.hitDetectionImages_.length-1],r.a.getUid(e)!=r.a.getUid(a)&&(this.hitDetectionGroupIndices.push(this.indices.length),this.hitDetectionImages_.push(a))),this.anchorX=i[0],this.anchorY=i[1],this.height=c[1],this.imageHeight=o[1],this.imageWidth=o[0],this.opacity=s,this.originX=l[0],this.originY=l[1],this.rotation=h,this.rotateWithView=u,this.scale=p,this.width=c[0]},a.prototype.getTextures=function(t){return t?this.textures_.concat(this.hitDetectionTextures_):this.textures_},a.prototype.getHitDetectionTextures=function(){return this.hitDetectionTextures_},e.a=a},function(t,e,i){"use strict";var r=i(0),n=i(85),o=i(86),a={};a.fragment=new n.a(r.a.DEBUG_WEBGL?"precision mediump float;\nvarying vec2 v_texCoord;\nvarying float v_opacity;\n\nuniform float u_opacity;\nuniform sampler2D u_image;\n\nvoid main(void) {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  gl_FragColor.rgb = texColor.rgb;\n  float alpha = texColor.a * v_opacity * u_opacity;\n  if (alpha == 0.0) {\n    discard;\n  }\n  gl_FragColor.a = alpha;\n}\n":"precision mediump float;varying vec2 a;varying float b;uniform float k;uniform sampler2D l;void main(void){vec4 texColor=texture2D(l,a);gl_FragColor.rgb=texColor.rgb;float alpha=texColor.a*b*k;if(alpha==0.0){discard;}gl_FragColor.a=alpha;}"),a.vertex=new o.a(r.a.DEBUG_WEBGL?"varying vec2 v_texCoord;\nvarying float v_opacity;\n\nattribute vec2 a_position;\nattribute vec2 a_texCoord;\nattribute vec2 a_offsets;\nattribute float a_opacity;\nattribute float a_rotateWithView;\n\nuniform mat4 u_projectionMatrix;\nuniform mat4 u_offsetScaleMatrix;\nuniform mat4 u_offsetRotateMatrix;\n\nvoid main(void) {\n  mat4 offsetMatrix = u_offsetScaleMatrix;\n  if (a_rotateWithView == 1.0) {\n    offsetMatrix = u_offsetScaleMatrix * u_offsetRotateMatrix;\n  }\n  vec4 offsets = offsetMatrix * vec4(a_offsets, 0.0, 0.0);\n  gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0) + offsets;\n  v_texCoord = a_texCoord;\n  v_opacity = a_opacity;\n}\n\n\n":"varying vec2 a;varying float b;attribute vec2 c;attribute vec2 d;attribute vec2 e;attribute float f;attribute float g;uniform mat4 h;uniform mat4 i;uniform mat4 j;void main(void){mat4 offsetMatrix=i;if(g==1.0){offsetMatrix=i*j;}vec4 offsets=offsetMatrix*vec4(e,0.0,0.0);gl_Position=h*vec4(c,0.0,1.0)+offsets;a=d;b=f;}"),e.a=a},function(t,e,i){"use strict";var r=i(0),n=function(t,e){this.u_projectionMatrix=t.getUniformLocation(e,r.a.DEBUG_WEBGL?"u_projectionMatrix":"h"),this.u_offsetScaleMatrix=t.getUniformLocation(e,r.a.DEBUG_WEBGL?"u_offsetScaleMatrix":"i"),this.u_offsetRotateMatrix=t.getUniformLocation(e,r.a.DEBUG_WEBGL?"u_offsetRotateMatrix":"j"),this.u_opacity=t.getUniformLocation(e,r.a.DEBUG_WEBGL?"u_opacity":"k"),this.u_image=t.getUniformLocation(e,r.a.DEBUG_WEBGL?"u_image":"l"),this.a_position=t.getAttribLocation(e,r.a.DEBUG_WEBGL?"a_position":"c"),this.a_texCoord=t.getAttribLocation(e,r.a.DEBUG_WEBGL?"a_texCoord":"d"),this.a_offsets=t.getAttribLocation(e,r.a.DEBUG_WEBGL?"a_offsets":"e"),this.a_opacity=t.getAttribLocation(e,r.a.DEBUG_WEBGL?"a_opacity":"f"),this.a_rotateWithView=t.getAttribLocation(e,r.a.DEBUG_WEBGL?"a_rotateWithView":"g")};e.a=n},function(t,e,i){"use strict";var r=i(125),n={};n.lineStringIsClosed=function(t,e,i,n){var o=i-n;return t[e]===t[o]&&t[e+1]===t[o+1]&&(i-e)/n>3&&!!r.a.linearRing(t,e,i,n)},e.a=n},function(t,e,i){"use strict";var r=i(0),n=i(85),o=i(86),a={};a.fragment=new n.a(r.a.DEBUG_WEBGL?"precision mediump float;\nvarying float v_round;\nvarying vec2 v_roundVertex;\nvarying float v_halfWidth;\n\n\n\nuniform float u_opacity;\nuniform vec4 u_color;\nuniform vec2 u_size;\nuniform float u_pixelRatio;\n\nvoid main(void) {\n  if (v_round > 0.0) {\n    vec2 windowCoords = vec2((v_roundVertex.x + 1.0) / 2.0 * u_size.x * u_pixelRatio,\n        (v_roundVertex.y + 1.0) / 2.0 * u_size.y * u_pixelRatio);\n    if (length(windowCoords - gl_FragCoord.xy) > v_halfWidth * u_pixelRatio) {\n      discard;\n    }\n  }\n  gl_FragColor = u_color;\n  float alpha = u_color.a * u_opacity;\n  if (alpha == 0.0) {\n    discard;\n  }\n  gl_FragColor.a = alpha;\n}\n":"precision mediump float;varying float a;varying vec2 aVertex;varying float c;uniform float m;uniform vec4 n;uniform vec2 o;uniform float p;void main(void){if(a>0.0){vec2 windowCoords=vec2((aVertex.x+1.0)/2.0*o.x*p,(aVertex.y+1.0)/2.0*o.y*p);if(length(windowCoords-gl_FragCoord.xy)>c*p){discard;}} gl_FragColor=n;float alpha=n.a*m;if(alpha==0.0){discard;}gl_FragColor.a=alpha;}"),a.vertex=new o.a(r.a.DEBUG_WEBGL?"varying float v_round;\nvarying vec2 v_roundVertex;\nvarying float v_halfWidth;\n\n\nattribute vec2 a_lastPos;\nattribute vec2 a_position;\nattribute vec2 a_nextPos;\nattribute float a_direction;\n\nuniform mat4 u_projectionMatrix;\nuniform mat4 u_offsetScaleMatrix;\nuniform mat4 u_offsetRotateMatrix;\nuniform float u_lineWidth;\nuniform float u_miterLimit;\n\nbool nearlyEquals(in float value, in float ref) {\n  float epsilon = 0.000000000001;\n  return value >= ref - epsilon && value <= ref + epsilon;\n}\n\nvoid alongNormal(out vec2 offset, in vec2 nextP, in float turnDir, in float direction) {\n  vec2 dirVect = nextP - a_position;\n  vec2 normal = normalize(vec2(-turnDir * dirVect.y, turnDir * dirVect.x));\n  offset = u_lineWidth / 2.0 * normal * direction;\n}\n\nvoid miterUp(out vec2 offset, out float round, in bool isRound, in float direction) {\n  float halfWidth = u_lineWidth / 2.0;\n  vec2 tangent = normalize(normalize(a_nextPos - a_position) + normalize(a_position - a_lastPos));\n  vec2 normal = vec2(-tangent.y, tangent.x);\n  vec2 dirVect = a_nextPos - a_position;\n  vec2 tmpNormal = normalize(vec2(-dirVect.y, dirVect.x));\n  float miterLength = abs(halfWidth / dot(normal, tmpNormal));\n  offset = normal * direction * miterLength;\n  round = 0.0;\n  if (isRound) {\n    round = 1.0;\n  } else if (miterLength > u_miterLimit + u_lineWidth) {\n    offset = halfWidth * tmpNormal * direction;\n  }\n}\n\nbool miterDown(out vec2 offset, in vec4 projPos, in mat4 offsetMatrix, in float direction) {\n  bool degenerate = false;\n  vec2 tangent = normalize(normalize(a_nextPos - a_position) + normalize(a_position - a_lastPos));\n  vec2 normal = vec2(-tangent.y, tangent.x);\n  vec2 dirVect = a_lastPos - a_position;\n  vec2 tmpNormal = normalize(vec2(-dirVect.y, dirVect.x));\n  vec2 longOffset, shortOffset, longVertex;\n  vec4 shortProjVertex;\n  float halfWidth = u_lineWidth / 2.0;\n  if (length(a_nextPos - a_position) > length(a_lastPos - a_position)) {\n    longOffset = tmpNormal * direction * halfWidth;\n    shortOffset = normalize(vec2(dirVect.y, -dirVect.x)) * direction * halfWidth;\n    longVertex = a_nextPos;\n    shortProjVertex = u_projectionMatrix * vec4(a_lastPos, 0.0, 1.0);\n  } else {\n    shortOffset = tmpNormal * direction * halfWidth;\n    longOffset = normalize(vec2(dirVect.y, -dirVect.x)) * direction * halfWidth;\n    longVertex = a_lastPos;\n    shortProjVertex = u_projectionMatrix * vec4(a_nextPos, 0.0, 1.0);\n  }\n  //Intersection algorithm based on theory by Paul Bourke (http://paulbourke.net/geometry/pointlineplane/).\n  vec4 p1 = u_projectionMatrix * vec4(longVertex, 0.0, 1.0) + offsetMatrix * vec4(longOffset, 0.0, 0.0);\n  vec4 p2 = projPos + offsetMatrix * vec4(longOffset, 0.0, 0.0);\n  vec4 p3 = shortProjVertex + offsetMatrix * vec4(-shortOffset, 0.0, 0.0);\n  vec4 p4 = shortProjVertex + offsetMatrix * vec4(shortOffset, 0.0, 0.0);\n  float denom = (p4.y - p3.y) * (p2.x - p1.x) - (p4.x - p3.x) * (p2.y - p1.y);\n  float firstU = ((p4.x - p3.x) * (p1.y - p3.y) - (p4.y - p3.y) * (p1.x - p3.x)) / denom;\n  float secondU = ((p2.x - p1.x) * (p1.y - p3.y) - (p2.y - p1.y) * (p1.x - p3.x)) / denom;\n  float epsilon = 0.000000000001;\n  if (firstU > epsilon && firstU < 1.0 - epsilon && secondU > epsilon && secondU < 1.0 - epsilon) {\n    shortProjVertex.x = p1.x + firstU * (p2.x - p1.x);\n    shortProjVertex.y = p1.y + firstU * (p2.y - p1.y);\n    offset = shortProjVertex.xy;\n    degenerate = true;\n  } else {\n    float miterLength = abs(halfWidth / dot(normal, tmpNormal));\n    offset = normal * direction * miterLength;\n  }\n  return degenerate;\n}\n\nvoid squareCap(out vec2 offset, out float round, in bool isRound, in vec2 nextP,\n    in float turnDir, in float direction) {\n  round = 0.0;\n  vec2 dirVect = a_position - nextP;\n  vec2 firstNormal = normalize(dirVect);\n  vec2 secondNormal = vec2(turnDir * firstNormal.y * direction, -turnDir * firstNormal.x * direction);\n  vec2 hypotenuse = normalize(firstNormal - secondNormal);\n  vec2 normal = vec2(turnDir * hypotenuse.y * direction, -turnDir * hypotenuse.x * direction);\n  float length = sqrt(v_halfWidth * v_halfWidth * 2.0);\n  offset = normal * length;\n  if (isRound) {\n    round = 1.0;\n  }\n}\n\nvoid main(void) {\n  bool degenerate = false;\n  float direction = float(sign(a_direction));\n  mat4 offsetMatrix = u_offsetScaleMatrix * u_offsetRotateMatrix;\n  vec2 offset;\n  vec4 projPos = u_projectionMatrix * vec4(a_position, 0.0, 1.0);\n  bool round = nearlyEquals(mod(a_direction, 2.0), 0.0);\n\n  v_round = 0.0;\n  v_halfWidth = u_lineWidth / 2.0;\n  v_roundVertex = projPos.xy;\n\n  if (nearlyEquals(mod(a_direction, 3.0), 0.0) || nearlyEquals(mod(a_direction, 17.0), 0.0)) {\n    alongNormal(offset, a_nextPos, 1.0, direction);\n  } else if (nearlyEquals(mod(a_direction, 5.0), 0.0) || nearlyEquals(mod(a_direction, 13.0), 0.0)) {\n    alongNormal(offset, a_lastPos, -1.0, direction);\n  } else if (nearlyEquals(mod(a_direction, 23.0), 0.0)) {\n    miterUp(offset, v_round, round, direction);\n  } else if (nearlyEquals(mod(a_direction, 19.0), 0.0)) {\n    degenerate = miterDown(offset, projPos, offsetMatrix, direction);\n  } else if (nearlyEquals(mod(a_direction, 7.0), 0.0)) {\n    squareCap(offset, v_round, round, a_nextPos, 1.0, direction);\n  } else if (nearlyEquals(mod(a_direction, 11.0), 0.0)) {\n    squareCap(offset, v_round, round, a_lastPos, -1.0, direction);\n  }\n  if (!degenerate) {\n    vec4 offsets = offsetMatrix * vec4(offset, 0.0, 0.0);\n    gl_Position = projPos + offsets;\n  } else {\n    gl_Position = vec4(offset, 0.0, 1.0);\n  }\n}\n\n\n":"varying float a;varying vec2 aVertex;varying float c;attribute vec2 d;attribute vec2 e;attribute vec2 f;attribute float g;uniform mat4 h;uniform mat4 i;uniform mat4 j;uniform float k;uniform float l;bool nearlyEquals(in float value,in float ref){float epsilon=0.000000000001;return value>=ref-epsilon&&value<=ref+epsilon;}void alongNormal(out vec2 offset,in vec2 nextP,in float turnDir,in float direction){vec2 dirVect=nextP-e;vec2 normal=normalize(vec2(-turnDir*dirVect.y,turnDir*dirVect.x));offset=k/2.0*normal*direction;}void miterUp(out vec2 offset,out float round,in bool isRound,in float direction){float halfWidth=k/2.0;vec2 tangent=normalize(normalize(f-e)+normalize(e-d));vec2 normal=vec2(-tangent.y,tangent.x);vec2 dirVect=f-e;vec2 tmpNormal=normalize(vec2(-dirVect.y,dirVect.x));float miterLength=abs(halfWidth/dot(normal,tmpNormal));offset=normal*direction*miterLength;round=0.0;if(isRound){round=1.0;}else if(miterLength>l+k){offset=halfWidth*tmpNormal*direction;}} bool miterDown(out vec2 offset,in vec4 projPos,in mat4 offsetMatrix,in float direction){bool degenerate=false;vec2 tangent=normalize(normalize(f-e)+normalize(e-d));vec2 normal=vec2(-tangent.y,tangent.x);vec2 dirVect=d-e;vec2 tmpNormal=normalize(vec2(-dirVect.y,dirVect.x));vec2 longOffset,shortOffset,longVertex;vec4 shortProjVertex;float halfWidth=k/2.0;if(length(f-e)>length(d-e)){longOffset=tmpNormal*direction*halfWidth;shortOffset=normalize(vec2(dirVect.y,-dirVect.x))*direction*halfWidth;longVertex=f;shortProjVertex=h*vec4(d,0.0,1.0);}else{shortOffset=tmpNormal*direction*halfWidth;longOffset=normalize(vec2(dirVect.y,-dirVect.x))*direction*halfWidth;longVertex=d;shortProjVertex=h*vec4(f,0.0,1.0);}vec4 p1=h*vec4(longVertex,0.0,1.0)+offsetMatrix*vec4(longOffset,0.0,0.0);vec4 p2=projPos+offsetMatrix*vec4(longOffset,0.0,0.0);vec4 p3=shortProjVertex+offsetMatrix*vec4(-shortOffset,0.0,0.0);vec4 p4=shortProjVertex+offsetMatrix*vec4(shortOffset,0.0,0.0);float denom=(p4.y-p3.y)*(p2.x-p1.x)-(p4.x-p3.x)*(p2.y-p1.y);float firstU=((p4.x-p3.x)*(p1.y-p3.y)-(p4.y-p3.y)*(p1.x-p3.x))/denom;float secondU=((p2.x-p1.x)*(p1.y-p3.y)-(p2.y-p1.y)*(p1.x-p3.x))/denom;float epsilon=0.000000000001;if(firstU>epsilon&&firstU<1.0-epsilon&&secondU>epsilon&&secondU<1.0-epsilon){shortProjVertex.x=p1.x+firstU*(p2.x-p1.x);shortProjVertex.y=p1.y+firstU*(p2.y-p1.y);offset=shortProjVertex.xy;degenerate=true;}else{float miterLength=abs(halfWidth/dot(normal,tmpNormal));offset=normal*direction*miterLength;}return degenerate;}void squareCap(out vec2 offset,out float round,in bool isRound,in vec2 nextP,in float turnDir,in float direction){round=0.0;vec2 dirVect=e-nextP;vec2 firstNormal=normalize(dirVect);vec2 secondNormal=vec2(turnDir*firstNormal.y*direction,-turnDir*firstNormal.x*direction);vec2 hypotenuse=normalize(firstNormal-secondNormal);vec2 normal=vec2(turnDir*hypotenuse.y*direction,-turnDir*hypotenuse.x*direction);float length=sqrt(c*c*2.0);offset=normal*length;if(isRound){round=1.0;}} void main(void){bool degenerate=false;float direction=float(sign(g));mat4 offsetMatrix=i*j;vec2 offset;vec4 projPos=h*vec4(e,0.0,1.0);bool round=nearlyEquals(mod(g,2.0),0.0);a=0.0;c=k/2.0;aVertex=projPos.xy;if(nearlyEquals(mod(g,3.0),0.0)||nearlyEquals(mod(g,17.0),0.0)){alongNormal(offset,f,1.0,direction);}else if(nearlyEquals(mod(g,5.0),0.0)||nearlyEquals(mod(g,13.0),0.0)){alongNormal(offset,d,-1.0,direction);}else if(nearlyEquals(mod(g,23.0),0.0)){miterUp(offset,a,round,direction);}else if(nearlyEquals(mod(g,19.0),0.0)){degenerate=miterDown(offset,projPos,offsetMatrix,direction);}else if(nearlyEquals(mod(g,7.0),0.0)){squareCap(offset,a,round,f,1.0,direction);}else if(nearlyEquals(mod(g,11.0),0.0)){squareCap(offset,a,round,d,-1.0,direction);}if(!degenerate){vec4 offsets=offsetMatrix*vec4(offset,0.0,0.0);gl_Position=projPos+offsets;}else{gl_Position=vec4(offset,0.0,1.0);}}"),e.a=a},function(t,e,i){"use strict";var r=i(0),n=function(t,e){this.u_projectionMatrix=t.getUniformLocation(e,r.a.DEBUG_WEBGL?"u_projectionMatrix":"h"),this.u_offsetScaleMatrix=t.getUniformLocation(e,r.a.DEBUG_WEBGL?"u_offsetScaleMatrix":"i"),this.u_offsetRotateMatrix=t.getUniformLocation(e,r.a.DEBUG_WEBGL?"u_offsetRotateMatrix":"j"),this.u_lineWidth=t.getUniformLocation(e,r.a.DEBUG_WEBGL?"u_lineWidth":"k"),this.u_miterLimit=t.getUniformLocation(e,r.a.DEBUG_WEBGL?"u_miterLimit":"l"),this.u_opacity=t.getUniformLocation(e,r.a.DEBUG_WEBGL?"u_opacity":"m"),this.u_color=t.getUniformLocation(e,r.a.DEBUG_WEBGL?"u_color":"n"),this.u_size=t.getUniformLocation(e,r.a.DEBUG_WEBGL?"u_size":"o"),this.u_pixelRatio=t.getUniformLocation(e,r.a.DEBUG_WEBGL?"u_pixelRatio":"p"),this.a_lastPos=t.getAttribLocation(e,r.a.DEBUG_WEBGL?"a_lastPos":"d"),this.a_position=t.getAttribLocation(e,r.a.DEBUG_WEBGL?"a_position":"e"),this.a_nextPos=t.getAttribLocation(e,r.a.DEBUG_WEBGL?"a_nextPos":"f"),this.a_direction=t.getAttribLocation(e,r.a.DEBUG_WEBGL?"a_direction":"g")};e.a=n},function(t,e,i){"use strict";var r=i(0),n=i(6),o=i(52),a=i(1),s=i(2),l=i(98),u=i(80),h=i(51),c=i(507),p=i(508),d=i(296),f=i(148),_=i(149),g=i(96),y=i(509),v=i(229),m=i(21),E=i(76),T=function(t,e){f.a.call(this,t,e),this.lineStringReplay=new d.a(t,e),this.defaultLocations_=null,this.styles_=[],this.styleIndices_=[],this.state_={fillColor:null,changed:!1}};r.a.inherits(T,f.a),T.prototype.drawCoordinates_=function(t,e,i){var r=new y.a,n=new v.a;this.processFlatCoordinates_(t,i,r,n,!0);var o=this.getMaxCoords_(r);if(e.length){var a,s,l=[];for(a=0,s=e.length;a<s;++a){var u={list:new y.a,maxCoords:void 0,rtree:new v.a};l.push(u),this.processFlatCoordinates_(e[a],i,u.list,u.rtree,!1),this.classifyPoints_(u.list,u.rtree,!0),u.maxCoords=this.getMaxCoords_(u.list)}for(l.sort(function(t,e){return e.maxCoords[0]===t.maxCoords[0]?t.maxCoords[1]-e.maxCoords[1]:e.maxCoords[0]-t.maxCoords[0]}),a=0;a<l.length;++a){var h,c=l[a].list,p=c.firstItem(),d=p;do{if(this.getIntersections_(d,n).length){h=!0;break}d=c.nextItem()}while(p!==d);h||this.bridgeHole_(c,l[a].maxCoords[0],r,o[0],n)&&(n.concat(l[a].rtree),this.classifyPoints_(r,n,!1))}}else this.classifyPoints_(r,n,!1);this.triangulate_(r,n)},T.prototype.processFlatCoordinates_=function(t,e,i,r,n){var o,a,s,l,h,c=u.a.linearRingIsClockwise(t,0,t.length,e),p=this.vertices.length/2,d=[],f=[];if(n===c){for(s=this.createPoint_(t[0],t[1],p++),l=s,o=e,a=t.length;o<a;o+=e)h=this.createPoint_(t[o],t[o+1],p++),f.push(this.insertItem_(l,h,i)),d.push([Math.min(l.x,h.x),Math.min(l.y,h.y),Math.max(l.x,h.x),Math.max(l.y,h.y)]),l=h;f.push(this.insertItem_(h,s,i)),d.push([Math.min(l.x,h.x),Math.min(l.y,h.y),Math.max(l.x,h.x),Math.max(l.y,h.y)])}else{var _=t.length-e;for(s=this.createPoint_(t[_],t[_+1],p++),l=s,o=_-e,a=0;o>=a;o-=e)h=this.createPoint_(t[o],t[o+1],p++),f.push(this.insertItem_(l,h,i)),d.push([Math.min(l.x,h.x),Math.min(l.y,h.y),Math.max(l.x,h.x),Math.max(l.y,h.y)]),l=h;f.push(this.insertItem_(h,s,i)),d.push([Math.min(l.x,h.x),Math.min(l.y,h.y),Math.max(l.x,h.x),Math.max(l.y,h.y)])}r.load(d,f)},T.prototype.getMaxCoords_=function(t){var e=t.firstItem(),i=e,r=[i.p0.x,i.p0.y];do{i=t.nextItem(),i.p0.x>r[0]&&(r=[i.p0.x,i.p0.y])}while(i!==e);return r},T.prototype.classifyPoints_=function(t,e,i){var r=t.firstItem(),n=r,o=t.nextItem(),a=!1;do{var s=i?_.a.triangleIsCounterClockwise(o.p1.x,o.p1.y,n.p1.x,n.p1.y,n.p0.x,n.p0.y):_.a.triangleIsCounterClockwise(n.p0.x,n.p0.y,n.p1.x,n.p1.y,o.p1.x,o.p1.y);void 0===s?(this.removeItem_(n,o,t,e),a=!0,o===r&&(r=t.getNextItem()),o=n,t.prevItem()):n.p1.reflex!==s&&(n.p1.reflex=s,a=!0),n=o,o=t.nextItem()}while(n!==r);return a},T.prototype.bridgeHole_=function(t,e,i,r,n){for(var o=t.firstItem();o.p1.x!==e;)o=t.nextItem();var a,s,l,u,h=o.p1,c={x:r,y:h.y,i:-1},p=1/0,d=this.getIntersections_({p0:h,p1:c},n,!0);for(a=0,s=d.length;a<s;++a){var f=d[a],g=this.calculateIntersection_(h,c,f.p0,f.p1,!0),y=Math.abs(h.x-g[0]);y<p&&void 0!==_.a.triangleIsCounterClockwise(h.x,h.y,f.p0.x,f.p0.y,f.p1.x,f.p1.y)&&(p=y,u={x:g[0],y:g[1],i:-1},o=f)}if(p===1/0)return!1;if(l=o.p1,p>0){var v=this.getPointsInTriangle_(h,u,o.p1,n);if(v.length){var m=1/0;for(a=0,s=v.length;a<s;++a){var E=v[a],T=Math.atan2(h.y-E.y,c.x-E.x);(T<m||T===m&&E.x<l.x)&&(m=T,l=E)}}}for(o=i.firstItem();o.p1.x!==l.x||o.p1.y!==l.y;)o=i.nextItem();var S={x:h.x,y:h.y,i:h.i,reflex:void 0},R={x:o.p1.x,y:o.p1.y,i:o.p1.i,reflex:void 0};return t.getNextItem().p0=S,this.insertItem_(h,o.p1,t,n),this.insertItem_(R,S,t,n),o.p1=R,t.setFirstItem(),i.concat(t),!0},T.prototype.triangulate_=function(t,e){for(var i=!1,r=this.isSimple_(t,e);t.getLength()>3;)if(r){if(!this.clipEars_(t,e,r,i)&&!this.classifyPoints_(t,e,i)&&!this.resolveSelfIntersections_(t,e,!0))break}else if(!this.clipEars_(t,e,r,i)&&!this.classifyPoints_(t,e,i)&&!this.resolveSelfIntersections_(t,e)){if(!(r=this.isSimple_(t,e))){this.splitPolygon_(t,e);break}i=!this.isClockwise_(t),this.classifyPoints_(t,e,i)}if(3===t.getLength()){var n=this.indices.length;this.indices[n++]=t.getPrevItem().p0.i,this.indices[n++]=t.getCurrItem().p0.i,this.indices[n++]=t.getNextItem().p0.i}},T.prototype.clipEars_=function(t,e,i,r){var n,o,a,s=this.indices.length,l=t.firstItem(),h=t.getPrevItem(),c=l,p=t.nextItem(),d=t.getNextItem(),f=!1;do{if(n=c.p0,o=c.p1,a=p.p1,!1===o.reflex){var _;_=i?0===this.getPointsInTriangle_(n,o,a,e,!0).length:r?this.diagonalIsInside_(d.p1,a,o,n,h.p0):this.diagonalIsInside_(h.p0,n,o,a,d.p1),(i||0===this.getIntersections_({p0:n,p1:a},e).length)&&_&&(i||!1===n.reflex||!1===a.reflex||u.a.linearRingIsClockwise([h.p0.x,h.p0.y,n.x,n.y,o.x,o.y,a.x,a.y,d.p1.x,d.p1.y],0,10,2)===!r)&&(this.indices[s++]=n.i,this.indices[s++]=o.i,this.indices[s++]=a.i,this.removeItem_(c,p,t,e),p===l&&(l=d),f=!0)}h=t.getPrevItem(),c=t.getCurrItem(),p=t.nextItem(),d=t.getNextItem()}while(c!==l&&t.getLength()>3);return f},T.prototype.resolveSelfIntersections_=function(t,e,i){var r=t.firstItem();t.nextItem();var n=r,o=t.nextItem(),a=!1;do{var s=this.calculateIntersection_(n.p0,n.p1,o.p0,o.p1,i);if(s){var l=!1,u=this.vertices.length,h=this.indices.length,c=u/2,p=t.prevItem();t.removeItem(),e.remove(p),l=p===r;var d;if(i?(s[0]===n.p0.x&&s[1]===n.p0.y?(t.prevItem(),d=n.p0,o.p0=d,e.remove(n),l=l||n===r):(d=o.p1,n.p1=d,e.remove(o),l=l||o===r),t.removeItem()):(d=this.createPoint_(s[0],s[1],c),n.p1=d,o.p0=d,e.update([Math.min(n.p0.x,n.p1.x),Math.min(n.p0.y,n.p1.y),Math.max(n.p0.x,n.p1.x),Math.max(n.p0.y,n.p1.y)],n),e.update([Math.min(o.p0.x,o.p1.x),Math.min(o.p0.y,o.p1.y),Math.max(o.p0.x,o.p1.x),Math.max(o.p0.y,o.p1.y)],o)),this.indices[h++]=p.p0.i,this.indices[h++]=p.p1.i,this.indices[h++]=d.i,a=!0,l)break}n=t.getPrevItem(),o=t.nextItem()}while(n!==r);return a},T.prototype.isSimple_=function(t,e){var i=t.firstItem(),r=i;do{if(this.getIntersections_(r,e).length)return!1;r=t.nextItem()}while(r!==i);return!0},T.prototype.isClockwise_=function(t){var e=2*t.getLength(),i=new Array(e),r=t.firstItem(),n=r,o=0;do{i[o++]=n.p0.x,i[o++]=n.p0.y,n=t.nextItem()}while(n!==r);return u.a.linearRingIsClockwise(i,0,e,2)},T.prototype.splitPolygon_=function(t,e){var i=t.firstItem(),r=i;do{var n=this.getIntersections_(r,e);if(n.length){var o=n[0],a=this.vertices.length/2,s=this.calculateIntersection_(r.p0,r.p1,o.p0,o.p1),l=this.createPoint_(s[0],s[1],a),u=new y.a,h=new v.a;this.insertItem_(l,r.p1,u,h),r.p1=l,e.update([Math.min(r.p0.x,l.x),Math.min(r.p0.y,l.y),Math.max(r.p0.x,l.x),Math.max(r.p0.y,l.y)],r);for(var c=t.nextItem();c!==o;)this.insertItem_(c.p0,c.p1,u,h),e.remove(c),t.removeItem(),c=t.getCurrItem();this.insertItem_(o.p0,l,u,h),o.p0=l,e.update([Math.min(o.p1.x,l.x),Math.min(o.p1.y,l.y),Math.max(o.p1.x,l.x),Math.max(o.p1.y,l.y)],o),this.classifyPoints_(t,e,!1),this.triangulate_(t,e),this.classifyPoints_(u,h,!1),this.triangulate_(u,h);break}r=t.nextItem()}while(r!==i)},T.prototype.createPoint_=function(t,e,i){var r=this.vertices.length;return this.vertices[r++]=t,this.vertices[r++]=e,{x:t,y:e,i:i,reflex:void 0}},T.prototype.insertItem_=function(t,e,i,r){var n={p0:t,p1:e};return i.insertItem(n),r&&r.insert([Math.min(t.x,e.x),Math.min(t.y,e.y),Math.max(t.x,e.x),Math.max(t.y,e.y)],n),n},T.prototype.removeItem_=function(t,e,i,r){i.getCurrItem()===e&&(i.removeItem(),t.p1=e.p1,r.remove(e),r.update([Math.min(t.p0.x,t.p1.x),Math.min(t.p0.y,t.p1.y),Math.max(t.p0.x,t.p1.x),Math.max(t.p0.y,t.p1.y)],t))},T.prototype.getPointsInTriangle_=function(t,e,i,r,n){var o,a,s,u,h=[],c=r.getInExtent([Math.min(t.x,e.x,i.x),Math.min(t.y,e.y,i.y),Math.max(t.x,e.x,i.x),Math.max(t.y,e.y,i.y)]);for(o=0,a=c.length;o<a;++o)for(s in c[o])"object"!=typeof(u=c[o][s])||n&&!u.reflex||u.x===t.x&&u.y===t.y||u.x===e.x&&u.y===e.y||u.x===i.x&&u.y===i.y||-1!==h.indexOf(u)||!l.a.linearRingContainsXY([t.x,t.y,e.x,e.y,i.x,i.y],0,6,2,u.x,u.y)||h.push(u);return h},T.prototype.getIntersections_=function(t,e,i){var r,n,o=t.p0,a=t.p1,s=e.getInExtent([Math.min(o.x,a.x),Math.min(o.y,a.y),Math.max(o.x,a.x),Math.max(o.y,a.y)]),l=[];for(r=0,n=s.length;r<n;++r){var u=s[r];t!==u&&(i||u.p0!==a||u.p1!==o)&&this.calculateIntersection_(o,a,u.p0,u.p1,i)&&l.push(u)}return l},T.prototype.calculateIntersection_=function(t,e,i,r,n){var o=(r.y-i.y)*(e.x-t.x)-(r.x-i.x)*(e.y-t.y);if(0!==o){var a=((r.x-i.x)*(t.y-i.y)-(r.y-i.y)*(t.x-i.x))/o,s=((e.x-t.x)*(t.y-i.y)-(e.y-t.y)*(t.x-i.x))/o;if(!n&&a>_.a.EPSILON&&a<1-_.a.EPSILON&&s>_.a.EPSILON&&s<1-_.a.EPSILON||n&&a>=0&&a<=1&&s>=0&&s<=1)return[t.x+a*(e.x-t.x),t.y+a*(e.y-t.y)]}},T.prototype.diagonalIsInside_=function(t,e,i,r,n){if(void 0===e.reflex||void 0===r.reflex)return!1;var o=(i.x-r.x)*(e.y-r.y)>(i.y-r.y)*(e.x-r.x),a=(n.x-r.x)*(e.y-r.y)<(n.y-r.y)*(e.x-r.x),s=(t.x-e.x)*(r.y-e.y)>(t.y-e.y)*(r.x-e.x),l=(i.x-e.x)*(r.y-e.y)<(i.y-e.y)*(r.x-e.x),u=r.reflex?a||o:a&&o,h=e.reflex?l||s:l&&s;return u&&h},T.prototype.drawMultiPolygon=function(t,e){var i,r,n,o,a=t.getEndss(),s=t.getStride(),l=this.indices.length,u=this.lineStringReplay.getCurrentIndex(),c=t.getFlatCoordinates(),p=0;for(i=0,r=a.length;i<r;++i){var d=a[i];if(d.length>0){var f=h.a.translate(c,p,d[0],s,-this.origin[0],-this.origin[1]);if(f.length){var _,g=[];for(n=1,o=d.length;n<o;++n)d[n]!==d[n-1]&&(_=h.a.translate(c,d[n-1],d[n],s,-this.origin[0],-this.origin[1]),g.push(_));this.lineStringReplay.drawPolygonCoordinates(f,g,s),this.drawCoordinates_(f,g,s)}}p=d[d.length-1]}this.indices.length>l&&(this.startIndices.push(l),this.startIndicesFeature.push(e),this.state_.changed&&(this.styleIndices_.push(l),this.state_.changed=!1)),this.lineStringReplay.getCurrentIndex()>u&&this.lineStringReplay.setPolygonStyle(e,u)},T.prototype.drawPolygon=function(t,e){var i=t.getEnds(),r=t.getStride();if(i.length>0){var n=t.getFlatCoordinates().map(Number),o=h.a.translate(n,0,i[0],r,-this.origin[0],-this.origin[1]);if(o.length){var a,s,l,u=[];for(a=1,s=i.length;a<s;++a)i[a]!==i[a-1]&&(l=h.a.translate(n,i[a-1],i[a],r,-this.origin[0],-this.origin[1]),u.push(l));this.startIndices.push(this.indices.length),this.startIndicesFeature.push(e),this.state_.changed&&(this.styleIndices_.push(this.indices.length),this.state_.changed=!1),this.lineStringReplay.setPolygonStyle(e),this.lineStringReplay.drawPolygonCoordinates(o,u,r),this.drawCoordinates_(o,u,r)}}},T.prototype.finish=function(t){this.verticesBuffer=new E.a(this.vertices),this.indicesBuffer=new E.a(this.indices),this.startIndices.push(this.indices.length),this.lineStringReplay.finish(t),0===this.styleIndices_.length&&this.styles_.length>0&&(this.styles_=[]),this.vertices=null,this.indices=null},T.prototype.getDeleteResourcesFunction=function(t){var e=this.verticesBuffer,i=this.indicesBuffer,r=this.lineStringReplay.getDeleteResourcesFunction(t);return function(){t.deleteBuffer(e),t.deleteBuffer(i),r()}},T.prototype.setUpProgram=function(t,e,i,r){var n,o;n=c.a.fragment,o=c.a.vertex;var a,s=e.getProgram(n,o);return this.defaultLocations_?a=this.defaultLocations_:(a=new p.a(t,s),this.defaultLocations_=a),e.useProgram(s),t.enableVertexAttribArray(a.a_position),t.vertexAttribPointer(a.a_position,2,m.a.FLOAT,!1,8,0),a},T.prototype.shutDownProgram=function(t,e){t.disableVertexAttribArray(e.a_position)},T.prototype.drawReplay=function(t,e,i,r){var n=t.getParameter(t.DEPTH_FUNC),o=t.getParameter(t.DEPTH_WRITEMASK);if(r||(t.enable(t.DEPTH_TEST),t.depthMask(!0),t.depthFunc(t.NOTEQUAL)),s.a.isEmpty(i)){var a,l,u,h;for(u=this.startIndices[this.startIndices.length-1],a=this.styleIndices_.length-1;a>=0;--a)l=this.styleIndices_[a],h=this.styles_[a],this.setFillStyle_(t,h),this.drawElements(t,e,l,u),u=l}else this.drawReplaySkipping_(t,e,i);r||(t.disable(t.DEPTH_TEST),t.clear(t.DEPTH_BUFFER_BIT),t.depthMask(o),t.depthFunc(n))},T.prototype.drawHitDetectionReplayOneByOne=function(t,e,i,n,o){var s,l,u,h,c,p,d,f;for(f=this.startIndices.length-2,u=this.startIndices[f+1],s=this.styleIndices_.length-1;s>=0;--s)for(h=this.styles_[s],this.setFillStyle_(t,h),c=this.styleIndices_[s];f>=0&&this.startIndices[f]>=c;){if(l=this.startIndices[f],p=this.startIndicesFeature[f],d=r.a.getUid(p).toString(),void 0===i[d]&&p.getGeometry()&&(void 0===o||a.a.intersects(o,p.getGeometry().getExtent()))){t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),this.drawElements(t,e,l,u);var _=n(p);if(_)return _}f--,u=l}},T.prototype.drawReplaySkipping_=function(t,e,i){var n,o,a,s,l,u,h,c,p;for(c=this.startIndices.length-2,a=o=this.startIndices[c+1],n=this.styleIndices_.length-1;n>=0;--n){for(s=this.styles_[n],this.setFillStyle_(t,s),l=this.styleIndices_[n];c>=0&&this.startIndices[c]>=l;)p=this.startIndices[c],u=this.startIndicesFeature[c],h=r.a.getUid(u).toString(),i[h]&&(o!==a&&(this.drawElements(t,e,o,a),t.clear(t.DEPTH_BUFFER_BIT)),a=p),c--,o=p;o!==a&&(this.drawElements(t,e,o,a),t.clear(t.DEPTH_BUFFER_BIT)),o=a=l}},T.prototype.setFillStyle_=function(t,e){t.uniform4fv(this.defaultLocations_.u_color,e)},T.prototype.setFillStrokeStyle=function(t,e){var i=t?t.getColor():[0,0,0,0];if(i=i instanceof CanvasGradient||i instanceof CanvasPattern?_.a.defaultFillStyle:o.a.asArray(i).map(function(t,e){return 3!=e?t/255:t})||_.a.defaultFillStyle,this.state_.fillColor&&n.a.equals(i,this.state_.fillColor)||(this.state_.fillColor=i,this.state_.changed=!0,this.styles_.push(i)),e)this.lineStringReplay.setFillStrokeStyle(null,e);else{var r=new g.a({color:[0,0,0,0],lineWidth:0});this.lineStringReplay.setFillStrokeStyle(null,r)}},e.a=T},function(t,e,i){"use strict";var r=i(0),n=i(85),o=i(86),a={};a.fragment=new n.a(r.a.DEBUG_WEBGL?"precision mediump float;\n\n\n\nuniform vec4 u_color;\nuniform float u_opacity;\n\nvoid main(void) {\n  gl_FragColor = u_color;\n  float alpha = u_color.a * u_opacity;\n  if (alpha == 0.0) {\n    discard;\n  }\n  gl_FragColor.a = alpha;\n}\n":"precision mediump float;uniform vec4 e;uniform float f;void main(void){gl_FragColor=e;float alpha=e.a*f;if(alpha==0.0){discard;}gl_FragColor.a=alpha;}"),a.vertex=new o.a(r.a.DEBUG_WEBGL?"\n\nattribute vec2 a_position;\n\nuniform mat4 u_projectionMatrix;\nuniform mat4 u_offsetScaleMatrix;\nuniform mat4 u_offsetRotateMatrix;\n\nvoid main(void) {\n  gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0);\n}\n\n\n":"attribute vec2 a;uniform mat4 b;uniform mat4 c;uniform mat4 d;void main(void){gl_Position=b*vec4(a,0.0,1.0);}"),e.a=a},function(t,e,i){"use strict";var r=i(0),n=function(t,e){this.u_projectionMatrix=t.getUniformLocation(e,r.a.DEBUG_WEBGL?"u_projectionMatrix":"b"),this.u_offsetScaleMatrix=t.getUniformLocation(e,r.a.DEBUG_WEBGL?"u_offsetScaleMatrix":"c"),this.u_offsetRotateMatrix=t.getUniformLocation(e,r.a.DEBUG_WEBGL?"u_offsetRotateMatrix":"d"),this.u_color=t.getUniformLocation(e,r.a.DEBUG_WEBGL?"u_color":"e"),this.u_opacity=t.getUniformLocation(e,r.a.DEBUG_WEBGL?"u_opacity":"f"),this.a_position=t.getAttribLocation(e,r.a.DEBUG_WEBGL?"a_position":"a")};e.a=n},function(t,e,i){"use strict";var r=function(t){this.first_=void 0,this.last_=void 0,this.head_=void 0,this.circular_=void 0===t||t,this.length_=0};r.prototype.insertItem=function(t){var e={prev:void 0,next:void 0,data:t},i=this.head_;if(i){var r=i.next;e.prev=i,e.next=r,i.next=e,r&&(r.prev=e),i===this.last_&&(this.last_=e)}else this.first_=e,this.last_=e,this.circular_&&(e.next=e,e.prev=e);this.head_=e,this.length_++},r.prototype.removeItem=function(){var t=this.head_;if(t){var e=t.next,i=t.prev;e&&(e.prev=i),i&&(i.next=e),this.head_=e||i,this.first_===this.last_?(this.head_=void 0,this.first_=void 0,this.last_=void 0):this.first_===t?this.first_=this.head_:this.last_===t&&(this.last_=i?this.head_.prev:this.head_),this.length_--}},r.prototype.firstItem=function(){if(this.head_=this.first_,this.head_)return this.head_.data},r.prototype.lastItem=function(){if(this.head_=this.last_,this.head_)return this.head_.data},r.prototype.nextItem=function(){if(this.head_&&this.head_.next)return this.head_=this.head_.next,this.head_.data},r.prototype.getNextItem=function(){if(this.head_&&this.head_.next)return this.head_.next.data},r.prototype.prevItem=function(){if(this.head_&&this.head_.prev)return this.head_=this.head_.prev,this.head_.data},r.prototype.getPrevItem=function(){if(this.head_&&this.head_.prev)return this.head_.prev.data},r.prototype.getCurrItem=function(){if(this.head_)return this.head_.data},r.prototype.setFirstItem=function(){this.circular_&&this.head_&&(this.first_=this.head_,this.last_=this.head_.prev)},r.prototype.concat=function(t){if(t.head_){if(this.head_){var e=this.head_.next;this.head_.next=t.first_,t.first_.prev=this.head_,e.prev=t.last_,t.last_.next=e,this.length_+=t.length_}else this.head_=t.head_,this.first_=t.first_,this.last_=t.last_,this.length_=t.length_;t.head_=void 0,t.first_=void 0,t.last_=void 0,t.length_=0}},r.prototype.getLength=function(){return this.length_},e.a=r},function(t,e,i){"use strict";var r=i(0),n=i(94),o=i(13),a=i(12),s=i(33),l=i(84),u=i(149),h=i(294),c=i(511),p=i(76),d=function(t,e){h.a.call(this,t,e),this.images_=[],this.textures_=[],this.measureCanvas_=o.a.createCanvasContext2D(0,0).canvas,this.state_={strokeColor:null,lineCap:void 0,lineDash:null,lineDashOffset:void 0,lineJoin:void 0,lineWidth:0,miterLimit:void 0,fillColor:null,font:void 0,scale:void 0},this.text_="",this.textAlign_=void 0,this.textBaseline_=void 0,this.offsetX_=void 0,this.offsetY_=void 0,this.atlases_={},this.currAtlas_=void 0,this.scale=1,this.opacity=1};r.a.inherits(d,h.a),d.prototype.drawText=function(t,e){if(this.text_){var i=null,n=2,o=2;switch(t.getType()){case a.a.POINT:case a.a.MULTI_POINT:i=t.getFlatCoordinates(),n=i.length,o=t.getStride();break;case a.a.CIRCLE:i=t.getCenter();break;case a.a.LINE_STRING:i=t.getFlatMidpoint();break;case a.a.MULTI_LINE_STRING:i=t.getFlatMidpoints(),n=i.length;break;case a.a.POLYGON:i=t.getFlatInteriorPoint();break;case a.a.MULTI_POLYGON:i=t.getFlatInteriorPoints(),n=i.length}this.startIndices.push(this.indices.length),this.startIndicesFeature.push(e);var s,l,u,h,c,p,d,f,_=this.currAtlas_,g=this.text_.split("\n"),y=this.getTextSize_(g),v=Math.round(y[0]*this.textAlign_-this.offsetX_),m=Math.round(y[1]*this.textBaseline_-this.offsetY_),E=this.state_.lineWidth/2*this.state_.scale;for(s=0,l=g.length;s<l;++s)for(c=0,p=_.height*s,d=g[s].split(""),u=0,h=d.length;u<h;++u){if(f=_.atlas.getInfo(d[u])){var T=f.image;this.anchorX=v-c,this.anchorY=m-p,this.originX=0===u?f.offsetX-E:f.offsetX,this.originY=f.offsetY,this.height=_.height,this.width=0===u||u===d.length-1?_.width[d[u]]+E:_.width[d[u]],this.imageHeight=T.height,this.imageWidth=T.width;var S;0===this.images_.length?this.images_.push(T):(S=this.images_[this.images_.length-1],r.a.getUid(S)!=r.a.getUid(T)&&(this.groupIndices.push(this.indices.length),this.images_.push(T))),this.drawText_(i,0,n,o)}c+=this.width}}},d.prototype.getTextSize_=function(t){var e=this,i=this.currAtlas_,r=t.length*i.height;return[t.map(function(t){var r,n,o=0;for(r=0,n=t.length;r<n;++r){var a=t[r];i.width[a]||e.addCharToAtlas_(a),o+=i.width[a]?i.width[a]:0}return o}).reduce(function(t,e){return Math.max(t,e)}),r]},d.prototype.drawText_=function(t,e,i,r){var n,o;for(n=e,o=i;n<o;n+=r)this.drawCoordinates(t,e,i,r)},d.prototype.addCharToAtlas_=function(t){if(1===t.length){var e=this.currAtlas_,i=this.state_,r=this.measureCanvas_.getContext("2d");r.font=i.font;var n=Math.ceil(r.measureText(t).width*i.scale);e.atlas.add(t,n,e.height,function(e,r,n){e.font=i.font,e.fillStyle=i.fillColor,e.strokeStyle=i.strokeColor,e.lineWidth=i.lineWidth,e.lineCap=i.lineCap,e.lineJoin=i.lineJoin,e.miterLimit=i.miterLimit,e.textAlign="left",e.textBaseline="top",s.a.CANVAS_LINE_DASH&&i.lineDash&&(e.setLineDash(i.lineDash),e.lineDashOffset=i.lineDashOffset),1!==i.scale&&e.setTransform(i.scale,0,0,i.scale,0,0),i.strokeColor&&e.strokeText(t,r,n),i.fillColor&&e.fillText(t,r,n)})&&(e.width[t]=n)}},d.prototype.finish=function(t){var e=t.getGL();this.groupIndices.push(this.indices.length),this.hitDetectionGroupIndices=this.groupIndices,this.verticesBuffer=new p.a(this.vertices),this.indicesBuffer=new p.a(this.indices);var i={};this.createTextures(this.textures_,this.images_,i,e),this.state_={strokeColor:null,lineCap:void 0,lineDash:null,lineDashOffset:void 0,lineJoin:void 0,lineWidth:0,miterLimit:void 0,fillColor:null,font:void 0,scale:void 0},this.text_="",this.textAlign_=void 0,this.textBaseline_=void 0,this.offsetX_=void 0,this.offsetY_=void 0,this.images_=null,this.atlases_={},this.currAtlas_=void 0,h.a.prototype.finish.call(this,t)},d.prototype.setTextStyle=function(t){var e=this.state_,i=t.getFill(),r=t.getStroke();if(t&&t.getText()&&(i||r)){if(i){var o=i.getColor();e.fillColor=n.a.asColorLike(o||u.a.defaultFillStyle)}else e.fillColor=null;if(r){var a=r.getColor();e.strokeColor=n.a.asColorLike(a||u.a.defaultStrokeStyle),e.lineWidth=r.getWidth()||u.a.defaultLineWidth,e.lineCap=r.getLineCap()||u.a.defaultLineCap,e.lineDashOffset=r.getLineDashOffset()||u.a.defaultLineDashOffset,e.lineJoin=r.getLineJoin()||u.a.defaultLineJoin,e.miterLimit=r.getMiterLimit()||u.a.defaultMiterLimit;var s=r.getLineDash();e.lineDash=s?s.slice():u.a.defaultLineDash}else e.strokeColor=null,e.lineWidth=0;e.font=t.getFont()||u.a.defaultFont,e.scale=t.getScale()||1,this.text_=t.getText();var h=l.a.TEXT_ALIGN[t.getTextAlign()],c=l.a.TEXT_ALIGN[t.getTextBaseline()];this.textAlign_=void 0===h?u.a.defaultTextAlign:h,this.textBaseline_=void 0===c?u.a.defaultTextBaseline:c,this.offsetX_=t.getOffsetX()||0,this.offsetY_=t.getOffsetY()||0,this.rotateWithView=!!t.getRotateWithView(),this.rotation=t.getRotation()||0,this.currAtlas_=this.getAtlas_(e)}else this.text_=""},d.prototype.getAtlas_=function(t){var e,i=[];for(e in t)(t[e]||0===t[e])&&(Array.isArray(t[e])?i=i.concat(t[e]):i.push(t[e]));var r=this.calculateHash_(i);if(!this.atlases_[r]){var n=this.measureCanvas_.getContext("2d");n.font=t.font;var o=Math.ceil((1.5*n.measureText("M").width+t.lineWidth/2)*t.scale);this.atlases_[r]={atlas:new c.a({space:t.lineWidth+1}),width:{},height:o}}return this.atlases_[r]},d.prototype.calculateHash_=function(t){var e,i,r="";for(e=0,i=t.length;e<i;++e)r+=t[e];return r},d.prototype.getTextures=function(t){return this.textures_},d.prototype.getHitDetectionTextures=function(){return this.textures_},e.a=d},function(t,e,i){"use strict";var r=i(0),n=i(512),o=function(t){var e=t||{};this.currentSize_=void 0!==e.initialSize?e.initialSize:r.a.INITIAL_ATLAS_SIZE,this.maxSize_=void 0!==e.maxSize?e.maxSize:-1!=r.a.MAX_ATLAS_SIZE?r.a.MAX_ATLAS_SIZE:void 0!==r.a.WEBGL_MAX_TEXTURE_SIZE?r.a.WEBGL_MAX_TEXTURE_SIZE:2048,this.space_=void 0!==e.space?e.space:1,this.atlases_=[new n.a(this.currentSize_,this.space_)],this.currentHitSize_=this.currentSize_,this.hitAtlases_=[new n.a(this.currentHitSize_,this.space_)]};o.prototype.getInfo=function(t){var e=this.getInfo_(this.atlases_,t);if(!e)return null;var i=this.getInfo_(this.hitAtlases_,t);return this.mergeInfos_(e,i)},o.prototype.getInfo_=function(t,e){var i,r,n,o;for(n=0,o=t.length;n<o;++n)if(i=t[n],r=i.get(e))return r;return null},o.prototype.mergeInfos_=function(t,e){return{offsetX:t.offsetX,offsetY:t.offsetY,image:t.image,hitImage:e.image}},o.prototype.add=function(t,e,i,n,o,a){if(e+this.space_>this.maxSize_||i+this.space_>this.maxSize_)return null;var s=this.add_(!1,t,e,i,n,a);if(!s)return null;var l=void 0!==o?o:r.a.nullFunction,u=this.add_(!0,t,e,i,l,a);return this.mergeInfos_(s,u)},o.prototype.add_=function(t,e,i,r,o,a){var s,l,u,h,c=t?this.hitAtlases_:this.atlases_;for(u=0,h=c.length;u<h;++u){if(s=c[u],l=s.add(e,i,r,o,a))return l;if(!l&&u===h-1){var p;t?(p=Math.min(2*this.currentHitSize_,this.maxSize_),this.currentHitSize_=p):(p=Math.min(2*this.currentSize_,this.maxSize_),this.currentSize_=p),s=new n.a(p,this.space_),c.push(s),++h}}return null},e.a=o},function(t,e,i){"use strict";var r=i(13),n=function(t,e){this.space_=e,this.emptyBlocks_=[{x:0,y:0,width:t,height:t}],this.entries_={},this.context_=r.a.createCanvasContext2D(t,t),this.canvas_=this.context_.canvas};n.prototype.get=function(t){return this.entries_[t]||null},n.prototype.add=function(t,e,i,r,n){var o,a,s;for(a=0,s=this.emptyBlocks_.length;a<s;++a)if(o=this.emptyBlocks_[a],o.width>=e+this.space_&&o.height>=i+this.space_){var l={offsetX:o.x+this.space_,offsetY:o.y+this.space_,image:this.canvas_};return this.entries_[t]=l,r.call(n,this.context_,o.x+this.space_,o.y+this.space_),this.split_(a,o,e+this.space_,i+this.space_),l}return null},n.prototype.split_=function(t,e,i,r){var n,o,a=e.width-i,s=e.height-r;a>s?(n={x:e.x+i,y:e.y,width:e.width-i,height:e.height},o={x:e.x,y:e.y+r,width:i,height:e.height-r},this.updateBlocks_(t,n,o)):(n={x:e.x+i,y:e.y,width:e.width-i,height:r},o={x:e.x,y:e.y+r,width:e.width,height:e.height-r},this.updateBlocks_(t,n,o))},n.prototype.updateBlocks_=function(t,e,i){var r=[t,1];e.width>0&&e.height>0&&r.push(e),i.width>0&&i.height>0&&r.push(i),this.emptyBlocks_.splice.apply(this.emptyBlocks_,r)},e.a=n},function(t,e,i){"use strict";var r=i(0),n=i(85),o=i(86),a={};a.fragment=new n.a(r.a.DEBUG_WEBGL?"precision mediump float;\nvarying vec2 v_texCoord;\n\n\nuniform float u_opacity;\nuniform sampler2D u_texture;\n\nvoid main(void) {\n  vec4 texColor = texture2D(u_texture, v_texCoord);\n  gl_FragColor.rgb = texColor.rgb;\n  gl_FragColor.a = texColor.a * u_opacity;\n}\n":"precision mediump float;varying vec2 a;uniform float f;uniform sampler2D g;void main(void){vec4 texColor=texture2D(g,a);gl_FragColor.rgb=texColor.rgb;gl_FragColor.a=texColor.a*f;}"),a.vertex=new o.a(r.a.DEBUG_WEBGL?"varying vec2 v_texCoord;\n\n\nattribute vec2 a_position;\nattribute vec2 a_texCoord;\n\nuniform mat4 u_texCoordMatrix;\nuniform mat4 u_projectionMatrix;\n\nvoid main(void) {\n  gl_Position = u_projectionMatrix * vec4(a_position, 0., 1.);\n  v_texCoord = (u_texCoordMatrix * vec4(a_texCoord, 0., 1.)).st;\n}\n\n\n":"varying vec2 a;attribute vec2 b;attribute vec2 c;uniform mat4 d;uniform mat4 e;void main(void){gl_Position=e*vec4(b,0.,1.);a=(d*vec4(c,0.,1.)).st;}"),e.a=a},function(t,e,i){"use strict";var r=i(0),n=function(t,e){this.u_texCoordMatrix=t.getUniformLocation(e,r.a.DEBUG_WEBGL?"u_texCoordMatrix":"d"),this.u_projectionMatrix=t.getUniformLocation(e,r.a.DEBUG_WEBGL?"u_projectionMatrix":"e"),this.u_opacity=t.getUniformLocation(e,r.a.DEBUG_WEBGL?"u_opacity":"f"),this.u_texture=t.getUniformLocation(e,r.a.DEBUG_WEBGL?"u_texture":"g"),this.a_position=t.getAttribLocation(e,r.a.DEBUG_WEBGL?"a_position":"b"),this.a_texCoord=t.getAttribLocation(e,r.a.DEBUG_WEBGL?"a_texCoord":"c")};e.a=n},function(t,e,i){"use strict";var r=i(0),n=i(6),o=i(34),a=i(13),s=i(4),l=i(33),u=i(72),h=i(146),c=i(73),p=i(290),d=i(286),f=i(49),_=i(63),g=i(121),y=i(180),v=i(21),m=i(150),E=i(295),T=function(t,e){d.a.call(this,t,e),this.canvas_=document.createElement("CANVAS"),this.canvas_.style.width="100%",this.canvas_.style.height="100%",this.canvas_.style.display="block",this.canvas_.className=o.a.CLASS_UNSELECTABLE,t.insertBefore(this.canvas_,t.childNodes[0]||null),this.clipTileCanvasWidth_=0,this.clipTileCanvasHeight_=0,this.clipTileContext_=a.a.createCanvasContext2D(),this.renderedVisible_=!0,this.gl_=v.a.getContext(this.canvas_,{antialias:!0,depth:!0,failIfMajorPerformanceCaveat:!0,preserveDrawingBuffer:!1,stencil:!0}),this.context_=new m.a(this.canvas_,this.gl_),s.a.listen(this.canvas_,E.a.LOST,this.handleWebGLContextLost,this),s.a.listen(this.canvas_,E.a.RESTORED,this.handleWebGLContextRestored,this),this.textureCache_=new g.a,this.focus_=null,this.tileTextureQueue_=new y.a(function(t){var e=t[1],i=t[2],r=e[0]-this.focus_[0],n=e[1]-this.focus_[1];return 65536*Math.log(i)+Math.sqrt(r*r+n*n)/i}.bind(this),function(t){return t[0].getKey()}),this.loadNextTileTexture_=function(t,e){if(!this.tileTextureQueue_.isEmpty()){this.tileTextureQueue_.reprioritize();var i=this.tileTextureQueue_.dequeue(),r=i[0],n=i[3],o=i[4];this.bindTileTexture(r,n,o,v.a.LINEAR,v.a.LINEAR)}return!1}.bind(this),this.textureCacheFrameMarkerCount_=0,this.initializeGL_()};r.a.inherits(T,d.a),T.handles=function(t){return l.a.WEBGL&&t===f.a.WEBGL},T.create=function(t,e){return new T(t,e)},T.prototype.bindTileTexture=function(t,e,i,r,n){var o=this.getGL(),a=t.getKey();if(this.textureCache_.containsKey(a)){var s=this.textureCache_.get(a);o.bindTexture(v.a.TEXTURE_2D,s.texture),s.magFilter!=r&&(o.texParameteri(v.a.TEXTURE_2D,v.a.TEXTURE_MAG_FILTER,r),s.magFilter=r),s.minFilter!=n&&(o.texParameteri(v.a.TEXTURE_2D,v.a.TEXTURE_MIN_FILTER,n),s.minFilter=n)}else{var l=o.createTexture();if(o.bindTexture(v.a.TEXTURE_2D,l),i>0){var u=this.clipTileContext_.canvas,h=this.clipTileContext_;this.clipTileCanvasWidth_!==e[0]||this.clipTileCanvasHeight_!==e[1]?(u.width=e[0],u.height=e[1],this.clipTileCanvasWidth_=e[0],this.clipTileCanvasHeight_=e[1]):h.clearRect(0,0,e[0],e[1]),h.drawImage(t.getImage(),i,i,e[0],e[1],0,0,e[0],e[1]),o.texImage2D(v.a.TEXTURE_2D,0,v.a.RGBA,v.a.RGBA,v.a.UNSIGNED_BYTE,u)}else o.texImage2D(v.a.TEXTURE_2D,0,v.a.RGBA,v.a.RGBA,v.a.UNSIGNED_BYTE,t.getImage());o.texParameteri(v.a.TEXTURE_2D,v.a.TEXTURE_MAG_FILTER,r),o.texParameteri(v.a.TEXTURE_2D,v.a.TEXTURE_MIN_FILTER,n),o.texParameteri(v.a.TEXTURE_2D,v.a.TEXTURE_WRAP_S,v.a.CLAMP_TO_EDGE),o.texParameteri(v.a.TEXTURE_2D,v.a.TEXTURE_WRAP_T,v.a.CLAMP_TO_EDGE),this.textureCache_.set(a,{texture:l,magFilter:r,minFilter:n})}},T.prototype.dispatchComposeEvent_=function(t,e){var i=this.getMap();if(i.hasListener(t)){var r=this.context_,n=e.extent,o=e.size,a=e.viewState,s=e.pixelRatio,l=a.resolution,u=a.center,c=a.rotation,d=new p.a(r,u,l,c,o,n,s),f=new h.a(t,d,e,null,r);i.dispatchEvent(f)}},T.prototype.disposeInternal=function(){var t=this.getGL();t.isContextLost()||this.textureCache_.forEach(function(e){e&&t.deleteTexture(e.texture)}),this.context_.dispose(),d.a.prototype.disposeInternal.call(this)},T.prototype.expireCache_=function(t,e){for(var i,n=this.getGL();this.textureCache_.getCount()-this.textureCacheFrameMarkerCount_>r.a.WEBGL_TEXTURE_CACHE_HIGH_WATER_MARK;){if(i=this.textureCache_.peekLast())n.deleteTexture(i.texture);else{if(+this.textureCache_.peekLastKey()==e.index)break;--this.textureCacheFrameMarkerCount_}this.textureCache_.pop()}},T.prototype.getContext=function(){return this.context_},T.prototype.getGL=function(){return this.gl_},T.prototype.getTileTextureQueue=function(){return this.tileTextureQueue_},T.prototype.getType=function(){return f.a.WEBGL},T.prototype.handleWebGLContextLost=function(t){t.preventDefault(),this.textureCache_.clear(),this.textureCacheFrameMarkerCount_=0;var e=this.getLayerRenderers();for(var i in e){e[i].handleWebGLContextLost()}},T.prototype.handleWebGLContextRestored=function(){this.initializeGL_(),this.getMap().render()},T.prototype.initializeGL_=function(){var t=this.gl_;t.activeTexture(v.a.TEXTURE0),t.blendFuncSeparate(v.a.SRC_ALPHA,v.a.ONE_MINUS_SRC_ALPHA,v.a.ONE,v.a.ONE_MINUS_SRC_ALPHA),t.disable(v.a.CULL_FACE),t.disable(v.a.DEPTH_TEST),t.disable(v.a.SCISSOR_TEST),t.disable(v.a.STENCIL_TEST)},T.prototype.isTileTextureLoaded=function(t){return this.textureCache_.containsKey(t.getKey())},T.prototype.renderFrame=function(t){var e=this.getContext(),i=this.getGL();if(i.isContextLost())return!1;if(!t)return this.renderedVisible_&&(this.canvas_.style.display="none",this.renderedVisible_=!1),!1;this.focus_=t.focus,this.textureCache_.set((-t.index).toString(),null),++this.textureCacheFrameMarkerCount_,this.dispatchComposeEvent_(c.a.PRECOMPOSE,t);var o=[],a=t.layerStatesArray;n.a.stableSort(a,d.a.sortByZIndex);var s,l,h,p,f=t.viewState.resolution;for(s=0,l=a.length;s<l;++s)p=a[s],u.a.visibleAtResolution(p,f)&&p.sourceState==_.a.READY&&(h=this.getLayerRenderer(p.layer),h.prepareFrame(t,p,e)&&o.push(p));var g=t.size[0]*t.pixelRatio,y=t.size[1]*t.pixelRatio;for(this.canvas_.width==g&&this.canvas_.height==y||(this.canvas_.width=g,this.canvas_.height=y),i.bindFramebuffer(v.a.FRAMEBUFFER,null),i.clearColor(0,0,0,0),i.clear(v.a.COLOR_BUFFER_BIT),i.enable(v.a.BLEND),i.viewport(0,0,this.canvas_.width,this.canvas_.height),s=0,l=o.length;s<l;++s)p=o[s],h=this.getLayerRenderer(p.layer),h.composeFrame(t,p,e);this.renderedVisible_||(this.canvas_.style.display="",this.renderedVisible_=!0),this.calculateMatrices2D(t),this.textureCache_.getCount()-this.textureCacheFrameMarkerCount_>r.a.WEBGL_TEXTURE_CACHE_HIGH_WATER_MARK&&t.postRenderFunctions.push(this.expireCache_.bind(this)),this.tileTextureQueue_.isEmpty()||(t.postRenderFunctions.push(this.loadNextTileTexture_),t.animate=!0),this.dispatchComposeEvent_(c.a.POSTCOMPOSE,t),this.scheduleRemoveUnusedLayerRenderers(t),this.scheduleExpireIconCache(t)},T.prototype.forEachFeatureAtCoordinate=function(t,e,i,r,n,o,a){var s;if(this.getGL().isContextLost())return!1;var l,h=e.viewState,c=e.layerStatesArray,p=c.length;for(l=p-1;l>=0;--l){var d=c[l],f=d.layer;if(u.a.visibleAtResolution(d,h.resolution)&&o.call(a,f)){if(s=this.getLayerRenderer(f).forEachFeatureAtCoordinate(t,e,i,r,n))return s}}},T.prototype.hasFeatureAtCoordinate=function(t,e,i,r,n){var o=!1;if(this.getGL().isContextLost())return!1;var a,s=e.viewState,l=e.layerStatesArray,h=l.length;for(a=h-1;a>=0;--a){var c=l[a],p=c.layer;if(u.a.visibleAtResolution(c,s.resolution)&&r.call(n,p)){if(o=this.getLayerRenderer(p).hasFeatureAtCoordinate(t,e))return!0}}return o},T.prototype.forEachLayerAtPixel=function(t,e,i,r,n,o){if(this.getGL().isContextLost())return!1;var a,s,l=e.viewState,h=e.layerStatesArray,c=h.length;for(s=c-1;s>=0;--s){var p=h[s],d=p.layer;if(u.a.visibleAtResolution(p,l.resolution)&&n.call(r,d)){if(a=this.getLayerRenderer(d).forEachLayerAtPixel(t,e,i,r))return a}}},e.a=T},function(t,e,i){"use strict";var r=i(0),n=i(48),o=i(128),a=i(39),s=i(6),l=i(1),u=i(7),h=i(49),c=i(198),p=i(517),d=i(518),f=i(75),_=i(16),g=i(21),y=i(76),v=function(t,e){c.a.call(this,t,e),this.fragmentShader_=p.a.fragment,this.vertexShader_=p.a.vertex,this.locations_=null,this.renderArrayBuffer_=new y.a([0,0,0,1,1,0,1,1,0,1,0,0,1,1,1,0]),this.renderedTileRange_=null,this.renderedFramebufferExtent_=null,this.renderedRevision_=-1,this.tmpSize_=[0,0]};r.a.inherits(v,c.a),v.handles=function(t,e){return t===h.a.WEBGL&&e.getType()===n.a.TILE},v.create=function(t,e){return new v(t,e)},v.prototype.disposeInternal=function(){this.mapRenderer.getContext().deleteBuffer(this.renderArrayBuffer_),c.a.prototype.disposeInternal.call(this)},v.prototype.createLoadedTileFinder=function(t,e,i){var r=this.mapRenderer;return function(n,o){function a(t){var e=r.isTileTextureLoaded(t);return e&&(i[n]||(i[n]={}),i[n][t.tileCoord.toString()]=t),e}return t.forEachLoadedTile(e,n,o,a)}},v.prototype.handleWebGLContextLost=function(){c.a.prototype.handleWebGLContextLost.call(this),this.locations_=null},v.prototype.prepareFrame=function(t,e,i){var r,n=this.mapRenderer,h=i.getGL(),c=t.viewState,p=c.projection,y=this.getLayer(),v=y.getSource(),m=v.getTileGridForProjection(p),E=m.getZForResolution(c.resolution),T=m.getResolution(E),S=v.getTilePixelSize(E,t.pixelRatio,p),R=S[0]/f.a.toSize(m.getTileSize(E),this.tmpSize_)[0],I=T/R,x=v.getTilePixelRatio(R)*v.getGutter(p),C=c.center,O=t.extent,P=m.getTileRangeForExtentAndZ(O,E);if(this.renderedTileRange_&&this.renderedTileRange_.equals(P)&&this.renderedRevision_==v.getRevision())r=this.renderedFramebufferExtent_;else{var L=P.getSize(),A=Math.max(L[0]*S[0],L[1]*S[1]),w=u.a.roundUpToPowerOfTwo(A),M=I*w,F=m.getOrigin(E),N=F[0]+P.minX*S[0]*I,b=F[1]+P.minY*S[1]*I;r=[N,b,N+M,b+M],this.bindFramebuffer(t,w),h.viewport(0,0,w,w),h.clearColor(0,0,0,0),h.clear(g.a.COLOR_BUFFER_BIT),h.disable(g.a.BLEND);var D=i.getProgram(this.fragmentShader_,this.vertexShader_);i.useProgram(D),this.locations_||(this.locations_=new d.a(h,D)),i.bindBuffer(g.a.ARRAY_BUFFER,this.renderArrayBuffer_),h.enableVertexAttribArray(this.locations_.a_position),h.vertexAttribPointer(this.locations_.a_position,2,g.a.FLOAT,!1,16,0),h.enableVertexAttribArray(this.locations_.a_texCoord),h.vertexAttribPointer(this.locations_.a_texCoord,2,g.a.FLOAT,!1,16,8),h.uniform1i(this.locations_.u_texture,0);var k={};k[E]={};var G,U,B,Y,j,X,V,z,W=this.createLoadedTileFinder(v,p,k),Z=y.getUseInterimTilesOnError(),H=!0,K=l.a.createEmpty(),q=new o.a(0,0,0,0);for(X=P.minX;X<=P.maxX;++X)for(V=P.minY;V<=P.maxY;++V)if(Y=v.getTile(E,X,V,R,p),void 0===e.extent||(z=m.getTileCoordExtent(Y.tileCoord,K),l.a.intersects(z,e.extent))){if(j=Y.getState(),U=j==a.a.LOADED||j==a.a.EMPTY||j==a.a.ERROR&&!Z,U||(Y=Y.getInterimTile()),(j=Y.getState())==a.a.LOADED){if(n.isTileTextureLoaded(Y)){k[E][Y.tileCoord.toString()]=Y;continue}}else if(j==a.a.EMPTY||j==a.a.ERROR&&!Z)continue;H=!1,B=m.forEachTileCoordParentTileRange(Y.tileCoord,W,null,q,K),B||(G=m.getTileCoordChildTileRange(Y.tileCoord,q,K))&&W(E+1,G)}var J=Object.keys(k).map(Number);J.sort(s.a.numberSafeCompareFunction);var Q,$,tt,et,it=new Float32Array(4);for(Q=0,$=J.length;Q<$;++Q){et=k[J[Q]];for(tt in et)Y=et[tt],z=m.getTileCoordExtent(Y.tileCoord,K),it[0]=2*(z[2]-z[0])/M,it[1]=2*(z[3]-z[1])/M,it[2]=2*(z[0]-r[0])/M-1,it[3]=2*(z[1]-r[1])/M-1,h.uniform4fv(this.locations_.u_tileOffset,it),n.bindTileTexture(Y,S,x*R,g.a.LINEAR,g.a.LINEAR),h.drawArrays(g.a.TRIANGLE_STRIP,0,4)}H?(this.renderedTileRange_=P,this.renderedFramebufferExtent_=r,this.renderedRevision_=v.getRevision()):(this.renderedTileRange_=null,this.renderedFramebufferExtent_=null,this.renderedRevision_=-1,t.animate=!0)}this.updateUsedTiles(t.usedTiles,v,E,P);var rt=n.getTileTextureQueue();this.manageTilePyramid(t,v,m,R,p,O,E,y.getPreload(),function(t){t.getState()!=a.a.LOADED||n.isTileTextureLoaded(t)||rt.isKeyQueued(t.getKey())||rt.enqueue([t,m.getTileCoordCenter(t.tileCoord),m.getResolution(t.tileCoord[0]),S,x*R])},this),this.scheduleExpireCache(t,v),this.updateLogos(t,v);var nt=this.texCoordMatrix;return _.a.reset(nt),_.a.translate(nt,(Math.round(C[0]/T)*T-r[0])/(r[2]-r[0]),(Math.round(C[1]/T)*T-r[1])/(r[3]-r[1])),0!==c.rotation&&_.a.rotate(nt,c.rotation),_.a.scale(nt,t.size[0]*c.resolution/(r[2]-r[0]),t.size[1]*c.resolution/(r[3]-r[1])),_.a.translate(nt,-.5,-.5),!0},v.prototype.forEachLayerAtPixel=function(t,e,i,r){if(this.framebuffer){var n=[t[0]/e.size[0],(e.size[1]-t[1])/e.size[1]],o=_.a.apply(this.texCoordMatrix,n.slice()),a=[o[0]*this.framebufferDimension,o[1]*this.framebufferDimension],s=this.mapRenderer.getContext().getGL();s.bindFramebuffer(s.FRAMEBUFFER,this.framebuffer);var l=new Uint8Array(4);return s.readPixels(a[0],a[1],1,1,s.RGBA,s.UNSIGNED_BYTE,l),l[3]>0?i.call(r,this.getLayer(),l):void 0}},e.a=v},function(t,e,i){"use strict";var r=i(0),n=i(85),o=i(86),a={};a.fragment=new n.a(r.a.DEBUG_WEBGL?"precision mediump float;\nvarying vec2 v_texCoord;\n\n\nuniform sampler2D u_texture;\n\nvoid main(void) {\n  gl_FragColor = texture2D(u_texture, v_texCoord);\n}\n":"precision mediump float;varying vec2 a;uniform sampler2D e;void main(void){gl_FragColor=texture2D(e,a);}"),a.vertex=new o.a(r.a.DEBUG_WEBGL?"varying vec2 v_texCoord;\n\n\nattribute vec2 a_position;\nattribute vec2 a_texCoord;\nuniform vec4 u_tileOffset;\n\nvoid main(void) {\n  gl_Position = vec4(a_position * u_tileOffset.xy + u_tileOffset.zw, 0., 1.);\n  v_texCoord = a_texCoord;\n}\n\n\n":"varying vec2 a;attribute vec2 b;attribute vec2 c;uniform vec4 d;void main(void){gl_Position=vec4(b*d.xy+d.zw,0.,1.);a=c;}"),e.a=a},function(t,e,i){"use strict";var r=i(0),n=function(t,e){this.u_tileOffset=t.getUniformLocation(e,r.a.DEBUG_WEBGL?"u_tileOffset":"d"),this.u_texture=t.getUniformLocation(e,r.a.DEBUG_WEBGL?"u_texture":"e"),this.a_position=t.getAttribLocation(e,r.a.DEBUG_WEBGL?"a_position":"b"),this.a_texCoord=t.getAttribLocation(e,r.a.DEBUG_WEBGL?"a_texCoord":"c")};e.a=n},function(t,e,i){"use strict";var r=i(0),n=i(48),o=i(28),a=i(1),s=i(291),l=i(49),u=i(197),h=i(198),c=i(16),p=function(t,e){h.a.call(this,t,e),this.dirty_=!1,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=a.a.createEmpty(),this.renderedRenderOrder_=null,this.replayGroup_=null,this.layerState_=null};r.a.inherits(p,h.a),p.handles=function(t,e){return t===l.a.WEBGL&&e.getType()===n.a.VECTOR},p.create=function(t,e){return new p(t,e)},p.prototype.composeFrame=function(t,e,i){this.layerState_=e;var r=t.viewState,n=this.replayGroup_,o=t.size,a=t.pixelRatio,s=this.mapRenderer.getGL();n&&!n.isEmpty()&&(s.enable(s.SCISSOR_TEST),s.scissor(0,0,o[0]*a,o[1]*a),n.replay(i,r.center,r.resolution,r.rotation,o,a,e.opacity,e.managed?t.skippedFeatureUids:{}),s.disable(s.SCISSOR_TEST))},p.prototype.disposeInternal=function(){var t=this.replayGroup_;if(t){var e=this.mapRenderer.getContext();t.getDeleteResourcesFunction(e)(),this.replayGroup_=null}h.a.prototype.disposeInternal.call(this)},p.prototype.forEachFeatureAtCoordinate=function(t,e,i,n,o){if(this.replayGroup_&&this.layerState_){var a=this.mapRenderer.getContext(),s=e.viewState,l=this.getLayer(),u=this.layerState_,h={};return this.replayGroup_.forEachFeatureAtCoordinate(t,a,s.center,s.resolution,s.rotation,e.size,e.pixelRatio,u.opacity,{},function(t){var e=r.a.getUid(t).toString();if(!(e in h))return h[e]=!0,n.call(o,t,l)})}},p.prototype.hasFeatureAtCoordinate=function(t,e){if(this.replayGroup_&&this.layerState_){var i=this.mapRenderer.getContext(),r=e.viewState,n=this.layerState_;return this.replayGroup_.hasFeatureAtCoordinate(t,i,r.center,r.resolution,r.rotation,e.size,e.pixelRatio,n.opacity,e.skippedFeatureUids)}return!1},p.prototype.forEachLayerAtPixel=function(t,e,i,r){var n=c.a.apply(e.pixelToCoordinateTransform,t.slice());return this.hasFeatureAtCoordinate(n,e)?i.call(r,this.getLayer(),null):void 0},p.prototype.handleStyleImageChange_=function(t){this.renderIfReadyAndVisible()},p.prototype.prepareFrame=function(t,e,i){var r=this.getLayer(),n=r.getSource();this.updateLogos(t,n);var l=t.viewHints[o.a.ANIMATING],h=t.viewHints[o.a.INTERACTING],c=r.getUpdateWhileAnimating(),p=r.getUpdateWhileInteracting();if(!this.dirty_&&!c&&l||!p&&h)return!0;var d=t.extent,f=t.viewState,_=f.projection,g=f.resolution,y=t.pixelRatio,v=r.getRevision(),m=r.getRenderBuffer(),E=r.getRenderOrder();void 0===E&&(E=u.a.defaultOrder);var T=a.a.buffer(d,m*g);if(!this.dirty_&&this.renderedResolution_==g&&this.renderedRevision_==v&&this.renderedRenderOrder_==E&&a.a.containsExtent(this.renderedExtent_,T))return!0;this.replayGroup_&&t.postRenderFunctions.push(this.replayGroup_.getDeleteResourcesFunction(i)),this.dirty_=!1;var S=new s.a(u.a.getTolerance(g,y),T,r.getRenderBuffer());n.loadFeatures(T,g,_);var R=function(t){var e,i=t.getStyleFunction();if(i?e=i.call(t,g):(i=r.getStyleFunction())&&(e=i(t,g)),e){var n=this.renderFeature(t,g,y,e,S);this.dirty_=this.dirty_||n}};if(E){var I=[];n.forEachFeatureInExtent(T,function(t){I.push(t)},this),I.sort(E),I.forEach(R,this)}else n.forEachFeatureInExtent(T,R,this);return S.finish(i),this.renderedResolution_=g,this.renderedRevision_=v,this.renderedRenderOrder_=E,this.renderedExtent_=T,this.replayGroup_=S,!0},p.prototype.renderFeature=function(t,e,i,r,n){if(!r)return!1;var o=!1;if(Array.isArray(r))for(var a=r.length-1;a>=0;--a)o=u.a.renderFeature(n,t,r[a],u.a.getSquaredTolerance(e,i),this.handleStyleImageChange_,this)||o;else o=u.a.renderFeature(n,t,r,u.a.getSquaredTolerance(e,i),this.handleStyleImageChange_,this)||o;return o},e.a=p},function(t,e,i){"use strict";var r=i(108);i.d(e,"a",function(){return r})}])});
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("lm"),require("html2canvas")):"function"==typeof define&&define.amd?define(["lm","html2canvas"],t):"object"==typeof exports?exports.commongis=t(require("lm"),require("html2canvas")):e.commongis=t(e.lm,e.html2canvas)}("undefined"!=typeof self?self:this,function(e,t){return function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var r={};return t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=58)}([function(t,r){t.exports=e},function(e,t,r){"use strict";r.d(t,"d",function(){return o}),r.d(t,"c",function(){return a}),r.d(t,"b",function(){return i}),r.d(t,"a",function(){return l});var n=r(81),o=new n.a,a=new n.a,i=new n.a,l=new n.a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r.d(t,"INNERMAPTYPE",function(){return o}),r.d(t,"MAPTYPE",function(){return n}),r.d(t,"PROJ",function(){return a}),r.d(t,"CONTROL_TYPE",function(){return i}),r.d(t,"MAPPROPERTY",function(){return l}),r.d(t,"BUSINESSTYPE",function(){return u}),r.d(t,"CUSTOMTYPE",function(){return s}),r.d(t,"I18N",function(){return c}),r.d(t,"LAYERTYPE",function(){return f}),r.d(t,"Search_Engine",function(){return d}),r.d(t,"Z_INDEX",function(){return p}),r.d(t,"HTYPE",function(){return y}),r.d(t,"Joiner",function(){return m}),r.d(t,"GoogleMapTypes",function(){return g}),r.d(t,"BingMapTypes",function(){return v}),r.d(t,"Tolerance",function(){return h}),r.d(t,"POPUP_PROPERTY",function(){return I}),r.d(t,"UIEVENT",function(){return b}),r.d(t,"customEventList",function(){return S}),r.d(t,"GisResourceURL",function(){return w}),r.d(t,"GisRootUrl",function(){return P});var n={OSM_MAP:"OSM_MAP",HUAWEI_MAP:"HUAWEI_MAP",BING_MAP:"BING_MAP",GOOGLE_MAP:"GOOGLE_MAP",WMS_MAP:"WMS_MAP",ARCGISTILE_LAYER:"ARCGISTILE_LAYER",CUSTOMARCGISTILE_LAYER:"CUSTOMARCGISTILE_LAYER",GOOGLE_ROAD_MAP:"GOOGLE_ROAD_MAP",GAODE_MAP:"GAODE_MAP",WMTS_MAP:"WMTS_MAP"},o={BLANK_MAP:"blank_map",OSM_MAP:"openstreet_map",WMS_MAP:"wms_map",CUSTOMARCGISTILE_LAYER:"xyz_map",WMTS_MAP:"wmts_map"},a={EPSG_4326:"EPSG:4326",EPSG_3857:"EPSG:3857"},i={SCALELINE:"scaleLine",MOUSEPOSITION:"mousePosition",ZOOMCONTENT:"zoomContent",OVERVIEWMAP:"overviewMap"},l={DEFAULT_PROJECTION:"EPSG:3857",TRANSFORMIND:!0,DEFAULT_UNITS:"metric",DEFAULT_ZOOM:10,DEFAULT_MIN_ZOOM:0,DEFAULT_MAX_ZOOM:17,CURRENT_PROJECTION:"EPSG:3857",DEFAULT_CENTER:[116.38229370117188,39.90868283513285],BASE_LAYER_ID:"base_layer",MAPTYPE:""},u={ICON:"ICON",GRID:"GRID",MARKPOINT:"MARKPOINT",LINE:"LINE",POLYGON:"POLYGON",POINT:"POINT",POINTCLUSTER:"POINTCLUSTER",SERVICEPOLYGON:"SERVICEPOLYGON",SERVICEPOINT:"SERVICEPOINT",SERVICELINE:"SERVICELINE",HEAT_MAP:"HEAT_MAP",STRAIGHTLINE:"STRAIGHTLINE",BEZIERLINE:"BEZIERLINE",ICON_FONT_STYLE:"ICON_FONT_STYLE",BUBBLE_CIRCLE_LABEL:"BUBBLE_CIRCLE_LABEL",ICONCLUSTER:"ICON_CLUSTER"},s={MAPTYPE:"ol.Map",LAYERTYPE:"ol.layer.Vector",LAYERTILETYPE:"ol.layer.Tile",LAYERIMGTYPE:"ol.layer.Image",LAYERHEATTYPE:"ol.layer.Heatmap",SOURCETYPE:"ol.source.Vector"},c={EN:"en",ZH:"zh"},f={POINT:"POINT",LINE:"LINE",POLYGON:"POLYGON"},d={OSM:"OSM",GOOGLE:"GOOGLE"},p={BASELAYER:0,GRID:100,POLYGON:300,CELL:400,SITE:450,RADAR:500,TEMPPOLYGON:600,LINE:800,LANDMARKER:850,ROUTEPOINT:900,MARKER:1e3,ROADMAIN_1:530,ROADMAIN_2:520,ROADMAIN_3:510,INFOPOP:1999,VECTORLINE:2e3},y={CLICK:"click",SINGLE:"single",MULlTI:"multi",VECTOR:"vector",SERVICE:"service"},m={UNDERLINE:"_",SHORT_TERM:"-"},g={HYBRID:"hybrid",ROADMAP:"roadmap",SATELLITE:"satellite",TERRAIN:"terrain"},v={ROAD:"Road",AERIAL:"Aerial",AERIALWITHLABELS:"AerialWithLabels",BIRDSEYE:"Birdseye",BIRDSEYEWITHLABELS:"BirdseyeWithLabels",COLLINSBART:"CollinsBart",ORDNANCESURVEY:"OrdnanceSurvey"};window.requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame,window.cancelAnimationFrame=window.cancelAnimationFrame||window.mozCancelAnimationFrame;var h={POINT:[15e3,8e3,3e3,2e3,1e3,600,300,150,70,40,20,15,10,8,4,2,1,.6],LINE:[15e3,8e3,3e3,2e3,1e3,600,300,150,70,40,18,10,4,2,1,.5,.3,.2]},I={PANDARATION:1e3,MARGIN:0},b={removePopup:!1,type:void 0},S={CLICK:"click",RIGHTCLICK:"rightClick",MOUSEMOVE:"mouseMove",POINTERMOVE:"pointermove",POINTEROVER:"pointerover",POINTEROUT:"pointerout",CONTEXTMENU:"contextmenu",ZOOMCHANGE:"zoomchange"},w=function(){var e=document.scripts;return e=e[e.length-1].src.substring(0,e[e.length-1].src.lastIndexOf("/")+1),function(e){var t=document.createElement("div");t.innerHTML=e;var r=t.innerText||t.textContent;return t=null,r}(e+"resources/imgs/")}(),P="/fusiongisaccess"},function(e,t,r){"use strict";function n(){var e={};return e.mozilla=/firefox/.test(navigator.userAgent.toLowerCase()),e.webkit=/webkit/.test(navigator.userAgent.toLowerCase()),e.opera=/opera/.test(navigator.userAgent.toLowerCase()),e.msie=/msie/.test(navigator.userAgent.toLowerCase())||!!navigator.userAgent.match(/Trident.*rv\:11\./),e}function o(e){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t}function a(e,t){for(var r in t)e[r]=t[r]}function i(){for(var e=arguments,t=e[0],r=1,n=e.length;r<n;r++){var o=e[r];if(void 0===o)return;for(var a=x()(o),i=0,l=a.length;i<l;i++){var u=a[i];"undefined"!==o[u]&&null!==o[u]&&(t[u]=o[u])}}return t}function l(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function u(e){return l(e).split(/\s+/)}function s(e){return void 0!==e&&null!==e}function c(e){for(var t={},r=[],n=e.length,o=void 0,a=void 0,i=0;i<n;i++)o=e[i],a=void 0===o?"undefined":R(o),t[o]?t[o].indexOf(a)<0&&(t[o].push(a),r.push(o)):(t[o]=[a],r.push(o));return r}function f(e,t){if(!N(e)&&!e.length)return null;if(e.find)return e.find(t);for(var r=e.length,n=void 0,o=0;o<r;o++)if(t(e[o])){n=e[o];break}return n}function d(e,t){if(A.MAPPROPERTY.MAPTYPE!==A.MAPTYPE.GAODE_MAP)return e;if(null===e)return null;if(e instanceof Array){var r=[],n={};if(!(e[0]instanceof Array))return n=t?M.gcjTransform.gcjToWgs84(e[1],e[0]):M.gcjTransform.wgs84ToGcj(e[1],e[0]),[n.lon,n.lat];for(var o in e)e.hasOwnProperty(o)&&(r[o]=d(e[o],t));return r}return e}function p(e,t){var r=e;return A.MAPPROPERTY.MAPTYPE!==A.MAPTYPE.GAODE_MAP?r:r=t?r.map(function(e){return e=M.proj.normalTransform(e,!0),e=M.gcjTransform.wgs84ToGcj(e[1],e[0]),e=[e.lon,e.lat],M.proj.normalTransform(e)}):r.map(function(e){return e=M.gcjTransform.wgs84ToGcj(e[1],e[0]),e=[e.lon,e.lat]})}function y(e,t,r){var n=e[0],o=e[1],a=t[0],i=t[1],l=r[0],u=r[1],s=Math.max(i,u),c=Math.min(i,u),f=Math.max(a,l),d=Math.min(a,l);if(o>=c&&o<=s&&n>=d&&n<=f){var p=(a-n)*(u-o)-(l-n)*(i-o);return Math.abs(p)<F}return!1}function m(e,t){var r=e[0],n=e[1],o=t[0],a=t[1];return a>=n&&o>=r?1:a>=n&&o<r?2:a<n&&o<=r?3:a<n&&o>=r?4:void 0}function g(e){for(var t in e)return!1;return!0}function v(e){var t=new M.format.WKT;if(e){var r=t.readFeature(e);return!!r.getGeometry()&&{geoType:r.getGeometry().getType(),coordinates:r.getGeometry().getCoordinates()}}}function h(e){var t;return e instanceof Array&&e.forEach(function(e){e instanceof Array?e.forEach(function(e){t=e instanceof Array?"Polygon":"LineString"}):t="Point"}),t}function I(e){var t="",r=0,n=e.replace(/\),\(/g,"&").replace(/\s/g,","),o=n.split(",");return o.forEach(function(e,n){e.indexOf("&")>0?(r=0,t=t+e+" "):r%2==0&&n<o.length-1?t=t+e+" ":n<o.length-1?t=t+e+",":t+=e,r++}),t=t.replace(/\&/g,"),(")}function b(e){var t=new M.format.WKT,r=void 0,n=h(e);if("Polygon"===n)r=new M.Feature({geometry:new M.geom.Polygon(e)});else{if("LineString"!==n)return!1;r=new M.Feature({geometry:new M.geom.LineString(e)})}return I(t.writeFeature(r))}function S(e){for(var t=e.split(";"),r=[],n=0,o=t.length-1;n<o;n++){var a=t[n];if(a){var i=a.split(",");r.push(i)}}return r}function w(e,t){return e=Math.abs(e),e>Math.PI&&(e=2*Math.PI-e),t>0&&(e=0-e),e}function P(e,t){var r=t[0],n=t[1],o=null;o="string"==typeof e?S(e):e;for(var a=0,i=o.length,l=i-1,u=0;u<i;l=u++){if(F>Math.abs(o[l][0]-r)&&F>Math.abs(o[l][1]-n))return!0;if(y(t,o[l],o[u]))return!0;var s=o[l][0]-r,c=o[l][1]-n,f=o[u][0]-r,d=o[u][1]-n,p=Math.atan2(d,f)-Math.atan2(c,s);p=w(p,s*d-f*c),a+=p}return Math.abs(2*Math.PI-a)<F||Math.abs(a+2*Math.PI)<F}function E(e){return isFinite(e)&&!isNaN(parseFloat(e))}function O(e){if(null===e)return null;if(e instanceof Array){var t=[];if(!(e[0]instanceof Array)){return M.proj.normalTransform(e)}for(var r in e)e.hasOwnProperty(r)&&(t[r]=O(e[r]));return t}return e}r.d(t,"d",function(){return n}),r.d(t,"a",function(){return o}),r.d(t,"m",function(){return a}),r.d(t,"s",function(){return l}),r.d(t,"o",function(){return u}),r.d(t,"l",function(){return s}),r.d(t,"g",function(){return N}),r.d(t,"b",function(){return i}),r.d(t,"t",function(){return c}),r.d(t,"c",function(){return f}),r.d(t,"q",function(){return d}),r.d(t,"n",function(){return p}),r.d(t,"k",function(){return y}),r.d(t,"e",function(){return m}),r.d(t,"h",function(){return g}),r.d(t,"f",function(){return v}),r.d(t,"r",function(){return b}),r.d(t,"j",function(){return P}),r.d(t,"i",function(){return E}),r.d(t,"p",function(){return O});var C=r(48),T=r.n(C),k=r(49),_=r.n(k),L=r(47),x=r.n(L),M=r(0),A=(r.n(M),r(2)),R="function"==typeof _.a&&"symbol"==typeof T.a?function(e){return typeof e}:function(e){return e&&"function"==typeof _.a&&e.constructor===_.a&&e!==_.a.prototype?"symbol":typeof e},F=1e-7,N=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},function(e,t){var r=e.exports={version:"2.5.5"};"number"==typeof __e&&(__e=r)},function(e,t){var r=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},function(e,t,r){var n=r(32)("wks"),o=r(23),a=r(5).Symbol,i="function"==typeof a;(e.exports=function(e){return n[e]||(n[e]=i&&a[e]||(i?a:o)("Symbol."+e))}).store=n},function(e,t,r){var n=r(67),o=r(27);e.exports=function(e){return n(o(e))}},function(e,t,r){var n=r(16),o=r(40),a=r(29),i=Object.defineProperty;t.f=r(9)?Object.defineProperty:function(e,t,r){if(n(e),t=a(t,!0),n(r),o)try{return i(e,t,r)}catch(e){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(e[t]=r.value),e}},function(e,t,r){e.exports=!r(18)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t){var r={}.hasOwnProperty;e.exports=function(e,t){return r.call(e,t)}},function(e,t,r){"use strict";function n(e){var t=e.getStyleFunction();return t?t.call(e):D[e.getGeometry().getType()]}function o(e){var t=e.strokeColor,r=e.fillColor,n=e.strokeWidth;return[new L.style.Style({image:new L.style.Circle({radius:e.radius,fill:new L.style.Fill({color:r}),stroke:new L.style.Stroke({color:t,width:n})}),text:new L.style.Text({text:e.label,fill:new L.style.Fill({color:"white"})})})]}function a(e){var t=e.get("features"),r=t.length,n={};return r>1?(n.radius=10*r*.4,n.label=r.toString(),n.strokeColor="white",n.strokeWidht=1*r*.4,n.fillColor="rgba(250,139,46, 0.9)"):n=t[0].get("property"),o(n)}function i(e){var t=e.get("features"),r=t.length,n={};return r>1?(n.radius=15,n.label=r.toString(),n.strokeColor="white",n.strokeWidht=1*r*.4,n.fillColor="rgba(250,139,46, 0.9)"):n=t[0].get("property"),o(n)}function l(e){var t=e.mapId,r=e.layerId,o=e.isCluster,l=x.d.get(t),u=e.layerIdentify||t+"_"+r,s=void 0==e.isShow||e.isShow,c={};void 0!=e.minShowLevel&&(c.minZoom=parseInt(e.minShowLevel)),void 0!=e.maxShowLevel&&(c.maxZoom=parseInt(e.maxShowLevel));var f={distance:o?e.distance?e.distance:20:void 0,visible:s,zoomRange:c,zIndex:e.zindex,opacity:e.opacity||1,ifBubbling:e.ifBubbling,interactive:e.interactive,wrapX:!1},d=null;return t&&r&&(o?e.isClusterVariableSize?(f.style=e.style||a,d=new L.layer.VClusterLayer(f)):(f.style=e.style||i,d=new L.layer.VClusterLayer(f)):(f.style=e.style||n,d=new L.layer.VectorLayer(f)),d.set("layerId",e.layerId),d.set("layer_id",u),void 0!=e.customAttribute&&d.set("customAttribute",e.customAttribute),l.addLayer([d]),x.c.put(u,d)),d}function u(e){var t=e.mapId,r=e.layerIds;if(t&&r&&r.length>0)for(var n=0;n<r.length;n++){var o=t+"_"+r[n];Object(R.c)({mapId:t,layer_id:o})}}function s(e){var t=e.layerIds;A.l(t)&&t.length>0&&t.forEach(function(t){var r=x.c.get(e.mapId+"_"+t);r&&r.setVisible(e.isShow)})}function c(e){return x.c.get(e.mapId+"_"+e.layerId).getVisible()}function f(e){var t=e.mapId,r=e.layerId,n=e.zIndex;Object(R.a)({layer_id:t+"_"+r}).setZIndex(n)}function d(e){var t=e.mapId,r=e.layerId,n=Object(R.a)({layer_id:t+"_"+r});return n&&n.getZIndex()}function p(e){var t=e.mapId,r=e.layerId;return!!Object(R.a)({layer_id:t+"_"+r})}function y(e){var t=e.mapId+"_"+e.layerId,r=x.c.get(t),n=e.featureId||e.geoId,o=r&&r.getFeatureById(n);o&&r&&r.removeFeature([o])}function m(e){var t=e.mapId+"_"+e.layerId,r=x.c.get(t);return r&&r.getFeatureById(e.featureId)}function g(e){if(e.layerId&&e.mapId){Object(R.a)({layer_id:e.mapId+"_"+e.layerId}).setOpacity(e.opacity)}}function v(e){var t=Object(R.a)({layer_id:e.mapId+"_"+e.layerId});return t&&t.getOpacity()}function h(e){var t=e+"_",r=[];return x.c.getKeys().forEach(function(e){e&&-1!==e.indexOf(t)&&r.push(x.c.get(e))}),r}function I(e){var t=x.d.get(e),r=x.c.getValues();t.removeLayer(r),x.c.clear()}function b(e,t){var r=e.getGeometry().getType(),n=null,o=null,a=null;switch(r){case"Point":t&&t.star&&(n=new L.style.Style({image:new L.style.Circle({fill:new L.style.Fill({color:t.starFillColor}),radius:t.radius,stroke:new L.style.Stroke({color:t.starStrokeColor,width:t.width})})})),t&&t.now&&(o=new L.style.Style({image:new L.style.Circle({fill:new L.style.Fill({color:t.nowFillColor}),radius:t.radius,stroke:new L.style.Stroke({color:t.nowStrokeColor,width:t.width})})})),t&&t.end&&(a=new L.style.Style({image:new L.style.Circle({fill:new L.style.Fill({color:t.endFillColor}),radius:t.radius,stroke:new L.style.Stroke({color:t.endStrokeColor,width:t.width})})}));break;case"Polygon":case"LineString":t&&t.star&&(n=new L.style.Style({fill:new L.style.Fill({color:t.starFillColor}),stroke:new L.style.Stroke({color:t.starStrokeColor,width:t.width})})),t&&t.now&&(o=new L.style.Style({fill:new L.style.Fill({color:t.nowFillColor}),stroke:new L.style.Stroke({color:t.nowStrokeColor,width:t.width})})),t&&t.end&&(a=new L.style.Style({fill:new L.style.Fill({color:t.endFillColor}),stroke:new L.style.Stroke({color:t.endStrokeColor,width:t.width})}))}return{starStyle:n,nowStyle:o,endStyle:a}}function S(e){var t=e.mapId,r=e.layerId,n=m({mapId:t,layerId:r,featureId:e.featureId});if(n){var o=e.timestamp||800,a=n.get("data").radius,i=e.starFillColor||"blue",l=e.nowFillColor||"red",u=e.endFillColor||"yellow",s=e.starStrokeColor||"red",c=e.nowStrokeColor||"blue",f=e.endStrokeColor||"green",d="flickerFeature_"+r+M.Joiner.UNDERLINE+t,p="feature_"+r+M.Joiner.UNDERLINE+t;F[d]||(F[d]=[]),F[p]||(F[p]=x.b);var y=setInterval(function(){var e=b(n,{starFillColor:i,starStrokeColor:s,radius:a,width:2,star:"star"}).starStyle,t=b(n,{nowFillColor:l,nowStrokeColor:c,radius:a,width:2,now:"now"}).nowStyle,r=b(n,{endFillColor:u,endStrokeColor:f,radius:a,width:2,end:"end"}).endStyle,o=n.get("customStyle");o===u?(n.setStyle(t),n.set("customStyle",l)):o===l?(n.setStyle(e),n.set("customStyle",i)):(n.setStyle(r),n.set("customStyle",u))},o);return F[d].push(y),F[p].put(y,n),y}}function w(e){var t=e.layerId,r=e.mapId,n="flickerFeature_"+t+"_"+r,o="feature_"+t+"_"+r,a=function(e){var t=F[o].get(e),r=t.get("defaultStyle");t.setStyle(r)};F[n].length>0&&(e.intervals&&e.intervals.length>0?F[n].forEach(function(t){e.intervals.forEach(function(e){t===e&&(clearInterval(e),a(e))})}):F[n].forEach(function(e){clearInterval(e),a(e)}))}function P(e){if(!e||!e.mapId)return null;var t=[],r=x.c.getKeys();return r&&r.length>0&&r.forEach(function(r){if(r&&-1!==r.indexOf(e.mapId)){var n=x.c.get(r);t.push({layerId:n.get("layerId"),visible:n.getVisible&&n.getVisible(),zIndex:n.getZIndex&&n.getZIndex(),layerType:n.get("businessType")})}}),t}function E(e){if(e){var t=e.getSource();if(t)if(t.getSource){var r=t.getSource();r.clear()}else t.clear()}}function O(e){if("function"==typeof e.callbackfunc){var t=e.mapId,r=Object(R.a)({layer_id:e.mapId+"_"+e.layerId});if(!r)return null;var n=e.type+"func";r[n]&&(e.type===M.customEventList.MOUSEMOVE?(r.off(M.customEventList.POINTEROVER,r[n]),r.off(M.customEventList.POINTEROUT,r[n])):e.type===M.customEventList.RIGHTCLICK?r.off(M.customEventList.CONTEXTMENU,r[n]):r.off(e.type,r[n])),r[n]=e.callbackfunc,e.type===M.customEventList.MOUSEMOVE?(r.on(M.customEventList.POINTEROVER,r[n]),r.on(M.customEventList.POINTEROUT,r[n])):e.type===M.customEventList.RIGHTCLICK?(r[n]=function(r){var n=x.d.get(t).getOlMap();r.clickCenter=Object(R.b)(n.getEventCoordinate(r.e)),e.callbackfunc(r)},r.on(M.customEventList.CONTEXTMENU,r[n])):r.on(e.type,r[n])}}function C(e){var t=Object(R.a)({layer_id:e.mapId+"_"+e.layerId});t&&(e.type===M.customEventList.MOUSEMOVE?(t.off(M.customEventList.POINTEROVER),t.off(M.customEventList.POINTEROUT)):e.type===M.customEventList.RIGHTCLICK?t.off(M.customEventList.CONTEXTMENU):t.off(e.type))}function T(e){var t=e.mapId+"_"+e.layerId,r=e.callbackfunc,n=x.d.get(e.mapId),o=M.customEventList.ZOOMCHANGE;N[t]||(N[t]=r),n&&!j&&(n.on(o,function(e){for(var t in N)if("function"==typeof N[t]&&x.c.get(t)){var r=n._currOlMap.getSize(),o=n._currOlMap.getView(),a=o.calculateExtent(r);M.MAPPROPERTY.TRANSFORMIND&&(a=Object(R.d)(a,!0)),N[t]({layer:x.c.get(t),extent:a,zoom:o.getZoom()},e)}}),j=!0)}function k(e){var t=e.mapId+"_"+e.layerId,r=x.d.get(e.mapId),n=M.customEventList.ZOOMCHANGE;N[t]&&delete N[t],j&&r&&A.h(N)&&(r.off(n),j=!1)}function _(e){var t=e.mapId+"_"+e.layerId,r=x.c.get(t);e.hasOwnProperty("callbackfunc")&&"function"==typeof e.callbackfunc&&r&&r.on("contextmenu",e.callbackfunc)}Object.defineProperty(t,"__esModule",{value:!0}),r.d(t,"createLayer",function(){return l}),r.d(t,"removeLayer",function(){return u}),r.d(t,"setVisible",function(){return s}),r.d(t,"getVisible",function(){return c}),r.d(t,"setLayerOpacity",function(){return g}),r.d(t,"getLayerOpacity",function(){return v}),r.d(t,"setLayerZIndex",function(){return f}),r.d(t,"getLayerZIndex",function(){return d}),r.d(t,"isLayerExist",function(){return p}),r.d(t,"getLayers",function(){return h}),r.d(t,"getLayersInfo",function(){return P}),r.d(t,"clearLayers",function(){return I}),r.d(t,"setLayerVisibleLevel",function(){return G}),r.d(t,"getFeatureById",function(){return m}),r.d(t,"removeFeatureById",function(){return y}),r.d(t,"removeGeometry",function(){return y}),r.d(t,"clearFeatureOnLayer",function(){return E}),r.d(t,"flickerFeature",function(){return S}),r.d(t,"clearFeatureFlicker",function(){return w}),r.d(t,"addCustomEvent",function(){return O}),r.d(t,"removeCustomEvent",function(){return C}),r.d(t,"registerZoom",function(){return T}),r.d(t,"unregisterZoom",function(){return k}),r.d(t,"registerRightClick",function(){return _});var L=r(0),x=(r.n(L),r(1)),M=r(2),A=r(3),R=r(13);r.d(t,"getLayer",function(){return R.a});var F={},N={},j=!1,D={Point:[new L.style.Style({image:new L.style.Circle({fill:new L.style.Fill({color:"#319FD3"}),radius:5,stroke:new L.style.Stroke({color:"#ff0",width:1})})})],Circle:[new L.style.Style({fill:new L.style.Fill({color:"#319FD3"}),stroke:new L.style.Stroke({color:"#ff0",width:1})})],Polygon:[new L.style.Style({fill:new L.style.Fill({color:"#319FD3"}),stroke:new L.style.Stroke({color:"#ff0",width:1})})],LineString:[new L.style.Style({stroke:new L.style.Stroke({color:"#2C89E8",width:3})})],MultiPolygon:[new L.style.Style({stroke:new L.style.Stroke({color:"#2C89E8",width:3})})]},G=function(e){var t=e.minShowLevel,r=e.maxShowLevel,n=Object(R.a)({layer_id:e.mapId+"_"+e.layerId});void 0!=n&&(void 0!=t&&n.set("minShowLevel",parseInt(t)),void 0!=r&&n.set("maxShowLevel",parseInt(r)))}},function(e,t,r){var n=r(8),o=r(22);e.exports=r(9)?function(e,t,r){return n.f(e,t,o(1,r))}:function(e,t,r){return e[t]=r,e}},function(e,t,r){"use strict";function n(e){var t=null;return e.hasOwnProperty("layer_id")?t=l.c.get(e.layer_id):e.mapId&&e.layerId&&(t=l.c.get(e.mapId+"_"+e.layerId)),t}function o(e){if(!e.mapId)return null;var t=e.layer_id;t||(t=e.mapId+"_"+e.layerId);var r=l.d.get(e.mapId),n=l.c.get(t);r&&n&&(r.removeLayer([n]),l.c.remove(t),n=null)}function a(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return s.MAPPROPERTY.TRANSFORMIND?t?u.proj.normalExtentTransform(e):u.proj.normalTransform(e):e}function i(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return s.MAPPROPERTY.TRANSFORMIND?t?u.proj.normalExtentTransform(e,!0):u.proj.normalTransform(e,!0):e}r.d(t,"a",function(){return n}),r.d(t,"c",function(){return o}),r.d(t,"d",function(){return a}),r.d(t,"b",function(){return i});var l=r(1),u=r(0),s=(r.n(u),r(2))},function(e,t,r){"use strict";function n(e){return"string"==typeof e?document.getElementById(e):e}function o(e,t,r){var n=document.createElement(e);return t&&(n.className=t),r&&r.appendChild(n),n}function a(e,t){if(void 0!==e.classList)return e.classList.contains(t);var r=u(e);return r.length>0&&new RegExp("(^|\\s)"+t+"(\\s|$)").test(r)}function i(e,t){if(void 0!==e.classList)for(var r=y.o(t),n=0,o=r.length;n<o;n++)e.classList.add(r[n]);else if(!a(e,t)){var i=u(e);l(e,(i?i+" ":"")+t)}}function l(e,t){void 0===e.className.baseVal?e.className=t:e.className.baseVal=t}function u(e){return void 0===e.className.baseVal?e.className:e.className.baseVal}function s(e){return"."===e.substring(0,1)?document.getElementsByClassName(e.substring(1)):document.getElementById(e)}function c(e){var t=e.tagName,r=e.attributes,n=e.text,o=document.createElement(t);for(var a in r)o.setAttribute(a,r[a]);return void 0!=n&&(o.innerHTML=n),o}function f(e,t,r){e.addEventListener(t,r)}function d(e,t,r){e.removeEventListener(t,r)}function p(e){var t=document.createElement("div");t.innerHTML=e;var r=t.innerText||t.textContent;return t=null,r}r.d(t,"d",function(){return n}),r.d(t,"b",function(){return o}),r.d(t,"a",function(){return i}),r.d(t,"e",function(){return s}),r.d(t,"c",function(){return c}),r.d(t,"h",function(){return f}),r.d(t,"g",function(){return d}),r.d(t,"f",function(){return p});var y=r(3)},function(e,t,r){var n=r(5),o=r(4),a=r(68),i=r(12),l=r(10),u=function(e,t,r){var s,c,f,d=e&u.F,p=e&u.G,y=e&u.S,m=e&u.P,g=e&u.B,v=e&u.W,h=p?o:o[t]||(o[t]={}),I=h.prototype,b=p?n:y?n[t]:(n[t]||{}).prototype;p&&(r=t);for(s in r)(c=!d&&b&&void 0!==b[s])&&l(h,s)||(f=c?b[s]:r[s],h[s]=p&&"function"!=typeof b[s]?r[s]:g&&c?a(f,n):v&&b[s]==f?function(e){var t=function(t,r,n){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,r)}return new e(t,r,n)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(f):m&&"function"==typeof f?a(Function.call,f):f,m&&((h.virtual||(h.virtual={}))[s]=f,e&u.R&&I&&!I[s]&&i(I,s,f)))};u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,e.exports=u},function(e,t,r){var n=r(17);e.exports=function(e){if(!n(e))throw TypeError(e+" is not an object!");return e}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,r){var n=r(44),o=r(33);e.exports=Object.keys||function(e){return n(e,o)}},function(e,t,r){"use strict";function n(e){var t=void 0;return e===l.BUSINESSTYPE.POINT&&(t=u),e===l.BUSINESSTYPE.LINE&&(t=s),e===l.BUSINESSTYPE.POLYGON&&(t=c),e===l.BUSINESSTYPE.ICON&&(t=f),e===l.BUSINESSTYPE.ICONCLUSTER&&(t=d),t}function o(e){var t=Object(i.a)({layer_id:e.mapId+"_"+e.layerId});if(t){var r=t._olLayer,n="";n=r.getSource().hasOwnProperty("getSource")?r.getSource().getSource():r.getSource();n.getFeatures().forEach(function(e){e.setStyle(null)})}}function a(e){var t=Object(i.a)({layer_id:e.mapId+"_"+e.layerId});if(t){var r=t.get("businessType"),o=n(r);o&&o.highlight&&o.highlight(t,e.highlightType,e)}}Object.defineProperty(t,"__esModule",{value:!0}),r.d(t,"highlight",function(){return a}),r.d(t,"removeHighlight",function(){return o});var i=r(13),l=r(2),u=r(52),s=r(53),c=r(54),f=r(37),d=r(55)},function(e,t){e.exports={}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t){var r=0,n=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++r+n).toString(36))}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,r){"use strict";function n(e){l=e,i.i18n.setI18n(e.toLocaleUpperCase())}function o(){return i.i18n.getI18n().toLocaleLowerCase()}function a(e){return c[l][e]}Object.defineProperty(t,"__esModule",{value:!0}),r.d(t,"setLang",function(){return n}),r.d(t,"getLang",function(){return o}),r.d(t,"prop",function(){return a});var i=r(0),l=(r.n(i),i.i18n.LanguageType.CHINESE.toLocaleLowerCase()),u={},s={},c={},f=i.i18n.LanguageType.ENGLISH.toLocaleLowerCase(),d=i.i18n.LanguageType.CHINESE.toLocaleLowerCase();c[f]=u,c[d]=s,s["common.km"]="",s["common.m"]="",s["mapClick.popup.title"]="",s["measure.message.startHelper"]="",s["measure.message.helper"]="",s["measure.message.start"]="",s["measure.message.total"]="",s["measure.angle.now"]="",s["measureArea.message.total"]="",s["layerManager.title"]="",s["LayerLabel.BASELAYER"]="",s["LayerLabel.BASELAYER_MARKER"]="",s["LayerLabel.NE"]="",s["components.drawPolygon"]="",s["components.exportImage.title"]="",s["components.exportImage.saveType"]="",s["components.exportImage.OK"]="",s["components.exportImage.Cancel"]="",s["components.exportImage.Layers"]="",s["components.exportImage.format"]="",s["components.exportImage.closeExportBox"]="",s["search.layerName"]="",s["search.propertyName"]="",s["search.propertyValue"]="",s["search.online"]="",s["search.offline"]="",s["search.title"]="",s["search.click.search"]="",s["search.current.map.not.support"]="OSM",s["search.elementList"]="",s["search.cell"]="",s["search.site"]="",s["search.systemPolygon"]="",s["search.choose"]="",s["toolbar.layerManger"]="",s["toolbar.exportImage"]="",s["toolbar.exportData"]="",s["toolbar.search"]=" &  ",s["toolbar.lonLatGridLine"]="",s["toolbar.drawPolygon"]="",s["toolbar.drawLine"]="",s["toolbar.drawPoint"]="",s["toolbar.measureDistance"]="",s["toolbar.measureArea"]="",s["toolbar.measureAngle"]="",s["toolbar.polygonFilter"]="",s["toolbar.roadMap"]="",s["toolbar.grayMap"]="",s["toolbar.legendSwitch"]="",s["filterFeature.wind.head.title"]="",s["filterFeature.wind.close.title"]="",s["filterFeature.body.layerId"]="ID",s["map.zoomIn"]="",s["map.zoomOut"]="",s["imageExport.title"]="",s["imageExport.exportTypeSel"]="----",s["dataExport.title"]="",s["dataExport.exportTypeSel"]="----",s["featureFilter.title"]="----",s["featureFilter.layerTypeSel"]="----",s["MapMsg.mousePositionMsg"]="",s["onclickLayer.noData"]="",s["multifeature.popup.title"]="",s["multifeature.popup.layer"]=":",s["multifeature.popup.feature"]="ID:",u["common.km"]="km",u["common.m"]="m",u["mapClick.popup.title"]="Layer Select",u["measure.message.startHelper"]="Click to determine the location.",u["measure.message.helper"]="Click to determine the location<br> or double-click to finish.",u["measure.message.start"]="Start",u["measure.message.total"]="Total Distance:",u["measure.angle.now"]="Current angle  ",u["measureArea.message.total"]="Total Area",u["layerManager.title"]="Layer Management",u["LayerLabel.BASELAYER"]="Base Layer",u["LayerLabel.BASELAYER_MARKER"]="Base Layer Maker",u["LayerLabel.NE"]="NE",u["components.drawPolygon"]="Draw Polygon",u["components.exportImage.title"]="Export",u["components.exportImage.saveType"]="Save as:",u["components.exportImage.OK"]="OK",u["components.exportImage.Cancel"]="Cancel",u["components.exportImage.Layers"]="Layers",u["components.exportImage.format"]="format",u["components.exportImage.closeExportBox"]="Close the Export Box interface",u["search.layerName"]="layer name",u["search.propertyName"]="attr_ name",u["search.propertyValue"]="attr_ value",u["search.online"]="Online search",u["search.offline"]="Offline search",u["search.title"]="search",u["search.click.search"]="click search",u["search.current.map.not.support"]="current map not support search, please use osm or google",u["search.elementList"]="element list",u["search.cell"]="cell",u["search.site"]="site",u["search.systemPolygon"]="system polygon",u["search.choose"]="please choose",u["toolbar.layerManger"]="layer manager",u["toolbar.exportImage"]="export image",u["toolbar.exportData"]="export data",u["toolbar.search"]="online & offline search",u["toolbar.lonLatGridLine"]="lonLat grid line",u["toolbar.drawPolygon"]="draw polygon",u["toolbar.drawLine"]="draw line",u["toolbar.drawPoint"]="draw point",u["toolbar.measureDistance"]="measure distance",u["toolbar.measureArea"]="measure area",u["toolbar.measureAngle"]="measure angle",u["toolbar.polygonFilter"]="filter feature by polygon",u["toolbar.roadMap"]="road map",u["toolbar.grayMap"]="gray map",u["toolbar.legendSwitch"]="legend switch",u["filterFeature.wind.head.title"]="The layer you want to filter",u["filterFeature.wind.close.title"]="Click the button to close the window",u["filterFeature.body.layerId"]="layer ID",u["map.zoomIn"]="zoom in",u["map.zoomOut"]="zoom out",u["imageExport.title"]="image export",u["imageExport.exportTypeSel"]="--save image type--",u["dataExport.title"]="data export",u["dataExport.exportTypeSel"]="--Export type--",u["featureFilter.title"]="--feature filter--",u["featureFilter.layerTypeSel"]="--select a layer--",u["MapMsg.mousePositionMsg"]="Position of the mouse on the map range.",u["onclickLayer.noDat"]="No Data",u["multifeature.popup.title"]="feature select",u["multifeature.popup.layer"]="layer:",u["multifeature.popup.feature"]="featureID:"},function(e,t){var r={}.toString;e.exports=function(e){return r.call(e).slice(8,-1)}},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t){e.exports=!0},function(e,t,r){var n=r(17);e.exports=function(e,t){if(!n(e))return e;var r,o;if(t&&"function"==typeof(r=e.toString)&&!n(o=r.call(e)))return o;if("function"==typeof(r=e.valueOf)&&!n(o=r.call(e)))return o;if(!t&&"function"==typeof(r=e.toString)&&!n(o=r.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},function(e,t){var r=Math.ceil,n=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?n:r)(e)}},function(e,t,r){var n=r(32)("keys"),o=r(23);e.exports=function(e){return n[e]||(n[e]=o(e))}},function(e,t,r){var n=r(5),o=n["__core-js_shared__"]||(n["__core-js_shared__"]={});e.exports=function(e){return o[e]||(o[e]={})}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,r){var n=r(8).f,o=r(10),a=r(6)("toStringTag");e.exports=function(e,t,r){e&&!o(e=r?e:e.prototype,a)&&n(e,a,{configurable:!0,value:t})}},function(e,t,r){t.f=r(6)},function(e,t,r){var n=r(5),o=r(4),a=r(28),i=r(35),l=r(8).f;e.exports=function(e){var t=o.Symbol||(o.Symbol=a?{}:n.Symbol||{});"_"==e.charAt(0)||e in t||l(t,e,{value:i.f(e)})}},function(e,t,r){"use strict";function n(e){var t=e.mapId+"_"+e.layerId,r=null;s.c.containsKey(t)?r=s.c.get(t):(e.layerIdentify=t,e.style=function(e){return i(e.get("data"))},r=f.createLayer(e),r.set("businessType",c.BUSINESSTYPE.ICON)),o(e)}function o(e){var t=s.d.get(e.mapId),r=s.c.get(e.mapId+"_"+e.layerId),n=[],o=e.datas;e.imgPath&&(m=e.imgPath),o&&(o.forEach(function(e){var r=new u.geom.Point(e.coordinate);t._transformInd&&r.transform(c.PROJ.EPSG_4326,c.PROJ.EPSG_3857);var o=d.a(e);delete o.highlight,e.highlight&&d.m(o,e.highlight);var a=new u.Feature({geometry:r,data:e,select:o});a.setId(e.id),n.push(a)}),r.addFeature(n))}function a(e,t,r){if(e){var n=r&&r.mapId,o=r&&r.layerId;if(p.removeHighlight({mapId:n,layerId:o}),t===c.HTYPE.CLICK){if(r.feature){var a=r.feature,l=null;if(a.get("features")&&1===a.get("features").length){var u=a.get("features")[0];l=u.get("select")}else l=a.get("select");if(l){var s=i(l);a.setStyle(s)}}}else if(t===c.HTYPE.VECTOR){var f=r.geoIds;f&&f.forEach(function(t){var n=e.getFeatureById(t),o=n.get("select")||{};r.highlight&&d.m(o,r.highlight);var a=i(o);n.setStyle(a)})}}}function i(e){var t=null;t=e.imageName?-1!==e.imageName.indexOf("data:image/png;base64")?e.imageName:m+e.imageName:c.GisResourceURL+"marker/ne_default.png",e.src&&(t=e.src);var r=e.rotation||0;return new u.style.Style({image:new u.style.Icon({src:t,color:e.color,scale:e.scale||1,rotation:r,anchor:e.anchor||[.5,.5],opacity:e.opacity||1}),text:new u.style.Text({font:void 0!=e.font?e.font:"normal 14px Arial",offsetX:e.labelOffsetX||0,offsetY:e.labelOffsetY||0,text:void 0!=e.label?e.label:"",textAlign:e.textAlign||"center",fill:new u.style.Fill({color:e.labelFillColor||"black"}),stroke:new u.style.Stroke({color:e.labelStrokeColor||"black",width:e.labelStrokeWidth})})})}function l(e){var t=/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/;if(/\#/g.test(e)){var r=e.toLowerCase();if(r&&t.test(r)){if(4===r.length){for(var n="#",o=1;o<4;o+=1)n+=r.slice(o,o+1).concat(r.slice(o,o+1));r=n}for(var a=[],i=1;i<7;i+=2)a.push(parseInt("0x"+r.slice(i,i+2)));return"rgb("+a.join(",")+")"}return r}return e}Object.defineProperty(t,"__esModule",{value:!0}),r.d(t,"addIcon",function(){return n}),r.d(t,"addLayer",function(){return n}),r.d(t,"setLayerData",function(){return o}),r.d(t,"updateFeatures",function(){return g}),r.d(t,"highlight",function(){return a}),r.d(t,"hexadecimalColorToRGB",function(){return l});var u=r(0),s=(r.n(u),r(1)),c=r(2),f=r(11),d=r(3),p=r(20),y=r(13),m=c.GisResourceURL+"marker/",g=function(e){var t=e.mapId+"_"+e.layerId,r=e.datas,n=s.d.get(e.mapId),o=s.c.get(t);r.forEach(function(e){var t=e.coordinate,r=o&&o.getFeatureById(e.id);r&&(t=u.proj.gcjTransform(t),n._transformInd&&(t=Object(y.d)(t,!1)),r.getGeometry().setCoordinates(t),d.m(r.get("data"),e))})}},function(e,t,r){r(64);for(var n=r(5),o=r(12),a=r(21),i=r(6)("toStringTag"),l="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),u=0;u<l.length;u++){var s=l[u],c=n[s],f=c&&c.prototype;f&&!f[i]&&o(f,i,s),a[s]=a.Array}},function(e,t,r){"use strict";var n=r(28),o=r(15),a=r(42),i=r(12),l=r(21),u=r(70),s=r(34),c=r(76),f=r(6)("iterator"),d=!([].keys&&"next"in[].keys()),p=function(){return this};e.exports=function(e,t,r,y,m,g,v){u(r,t,y);var h,I,b,S=function(e){if(!d&&e in O)return O[e];switch(e){case"keys":case"values":return function(){return new r(this,e)}}return function(){return new r(this,e)}},w=t+" Iterator",P="values"==m,E=!1,O=e.prototype,C=O[f]||O["@@iterator"]||m&&O[m],T=C||S(m),k=m?P?S("entries"):T:void 0,_="Array"==t?O.entries||C:C;if(_&&(b=c(_.call(new e)))!==Object.prototype&&b.next&&(s(b,w,!0),n||"function"==typeof b[f]||i(b,f,p)),P&&C&&"values"!==C.name&&(E=!0,T=function(){return C.call(this)}),n&&!v||!d&&!E&&O[f]||i(O,f,T),l[t]=T,l[w]=p,m)if(h={values:P?T:S("values"),keys:g?T:S("keys"),entries:k},v)for(I in h)I in O||a(O,I,h[I]);else o(o.P+o.F*(d||E),t,h);return h}},function(e,t,r){e.exports=!r(9)&&!r(18)(function(){return 7!=Object.defineProperty(r(41)("div"),"a",{get:function(){return 7}}).a})},function(e,t,r){var n=r(17),o=r(5).document,a=n(o)&&n(o.createElement);e.exports=function(e){return a?o.createElement(e):{}}},function(e,t,r){e.exports=r(12)},function(e,t,r){var n=r(16),o=r(71),a=r(33),i=r(31)("IE_PROTO"),l=function(){},u=function(){var e,t=r(41)("iframe"),n=a.length;for(t.style.display="none",r(75).appendChild(t),t.src="javascript:",e=t.contentWindow.document,e.open(),e.write("<script>document.F=Object<\/script>"),e.close(),u=e.F;n--;)delete u.prototype[a[n]];return u()};e.exports=Object.create||function(e,t){var r;return null!==e?(l.prototype=n(e),r=new l,l.prototype=null,r[i]=e):r=u(),void 0===t?r:o(r,t)}},function(e,t,r){var n=r(10),o=r(7),a=r(72)(!1),i=r(31)("IE_PROTO");e.exports=function(e,t){var r,l=o(e),u=0,s=[];for(r in l)r!=i&&n(l,r)&&s.push(r);for(;t.length>u;)n(l,r=t[u++])&&(~a(s,r)||s.push(r));return s}},function(e,t,r){var n=r(27);e.exports=function(e){return Object(n(e))}},function(e,t,r){"use strict";var n=r(77)(!0);r(39)(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,r=this._i;return r>=t.length?{value:void 0,done:!0}:(e=n(t,r),this._i+=e.length,{value:e,done:!1})})},function(e,t,r){e.exports={default:r(89),__esModule:!0}},function(e,t,r){e.exports={default:r(92),__esModule:!0}},function(e,t,r){e.exports={default:r(93),__esModule:!0}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,r){var n=r(44),o=r(33).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return n(e,o)}},function(e,t,r){"use strict";function n(e){var t=e.mapId+"_"+e.layerId,r=null;if(s.c.containsKey(t))r=s.c.get(t);else{var n=function(e){var t=e.get("data");return i({fillColor:t.fillColor,strokeColor:t.strokeColor,strokeWidth:t.strokeWidth,radius:t.radius,type:t.pointStyle||"",labelStrokeWidth:t.labelStrokeWidth,labelOffsetX:t.labelOffsetX,labelOffsetY:t.labelOffsetY,fontStyle:t.fontStyle||"normal",fontSize:t.fontSize||"14px",fontFamily:t.fontFamily||"Arial",labelFillColor:t.labelFillColor,labelStrokeColor:t.labelStrokeColor,label:t.label})};e.style=n,e.layerIdentify=t;var o=void 0!==e.zindex?e.zindex:p.Z_INDEX.LANDMARKER;e.zindex=o,r=f.createLayer(e),r.set("businessType",p.BUSINESSTYPE.POINT)}}function o(e){var t=[],r=e.datas,n=s.d.get(e.mapId),o=s.c.get(e.mapId+"_"+e.layerId);(d.l(r)||r.length>0)&&(r.forEach(function(r){var o=new u.geom.Point(r.coordinate);n._transformInd&&o.transform(p.PROJ.EPSG_4326,p.PROJ.EPSG_3857);var a={fillColor:r.fillColor,strokeColor:"black",strokeWidth:r.strokeWidth,labelFillColor:r.labelFillColor||"black",labelStrokeColor:r.labelStrokeColor||"#ffffff",radius:r.radius||5};r.highlight&&d.m(a,r.highlight);var i=new u.Feature({geometry:o,data:r,layerId:e.layerId,mapId:e.mapId,businessType:p.BUSINESSTYPE.POINT,select:a});i.setId(r.id),i.set("vectorType",p.BUSINESSTYPE.POINT),t.push(i)}),o.addFeature(t))}function a(e,t,r){if(e)if(y.removeHighlight({mapId:r.mapId,layerId:r.layerId}),t===p.HTYPE.CLICK){if(r.feature){var n=r.feature,o=n.get("select");r.highlight&&d.m(o,r.highlight);var a=i({fillColor:o.fillColor,strokeColor:o.strokeColor,strokeWidth:o.strokeWidth,radius:o.radius,type:n.get("data").pointStyle||"",labelStrokeWidth:o.labelStrokeWidth,labelOffsetX:o.labelOffsetX,labelOffsetY:o.labelOffsetY,fontStyle:o.fontStyle||"normal",fontSize:o.fontSize||"14px",fontFamily:o.fontFamily||"Arial",labelFillColor:o.labelFillColor,labelStrokeColor:o.labelStrokeColor,label:o.label});n.setStyle(a)}}else t===p.HTYPE.VECTOR&&r.geoIds.forEach(function(t){var n=e.getFeatureById(t);if(n){var o=n.get("select");r.highlight&&d.m(o,r.highlight);var a=i({fillColor:o.fillColor,strokeColor:o.strokeColor,strokeWidth:o.strokeWidth,radius:o.radius,type:n.get("data").pointStyle||"",labelStrokeWidth:o.labelStrokeWidth,labelOffsetX:o.labelOffsetX,labelOffsetY:o.labelOffsetY,fontStyle:o.fontStyle||"normal",fontSize:o.fontSize||"14px",fontFamily:o.fontFamily||"Arial",labelFillColor:o.labelFillColor,labelStrokeColor:o.labelStrokeColor,label:o.label});n.setStyle(a)}})}function i(e){var t=e.type,r=null,n=e.fontStyle+" "+e.fontSize+" "+e.fontFamily,o=e.labelOffsetX||30,a=e.labelOffsetY||-15,i=parseInt(e.labelStrokeWidth)||1,l=new u.style.Fill({color:e.fillColor||"red"}),s=new u.style.Stroke({color:e.strokeColor||"#319FD3",width:parseInt(e.strokeWidth)||0}),c=new u.style.Style({image:new u.style.Circle({radius:e.radius||5,fill:l,stroke:s}),text:new u.style.Text({text:e.label||"",fill:new u.style.Fill({color:e.labelFillColor||"black"}),font:n,offsetX:o,offsetY:a,stroke:new u.style.Stroke({color:e.labelStrokeColor||"#ffffff",width:i})})}),f=new u.style.Style({image:new u.style.RegularShape({fill:l,stroke:s,points:4,radius:e.radius||10,radius2:0,angle:Math.PI/4})}),d=new u.style.Style({image:new u.style.RegularShape({fill:l,stroke:s,points:4,radius:e.radius||10,radius2:0,angle:0})}),p=new u.style.Style({image:new u.style.RegularShape({fill:l,stroke:s,points:5,radius:e.radius||10,radius2:4,angle:0})}),y=new u.style.Style({image:new u.style.RegularShape({fill:l,stroke:s,points:3,radius:e.radius||10,rotation:Math.PI/4,angle:0})}),m=new u.style.Style({image:new u.style.RegularShape({fill:l,stroke:s,points:4,radius:e.radius||10,angle:Math.PI/4})}),g=new u.style.Style({text:new u.style.Text({text:e.label||"",fill:l,stroke:s,font:n||"10px sans-seri",textAlign:e.textAlign||"start",textBaseline:e.textBaseline||"alphabetic",offsetY:a,offsetX:o})});switch(t){case"":r=c;break;case"x":r=f;break;case"cross":r=d;break;case"star":r=p;break;case"triangle":r=y;break;case"square":r=m;break;case"isUnique":r=g}return r}function l(e){var t=e.mapId+"_"+e.layerId,r=s.d.get(e.mapId),n=s.c.get(t),o=e.datas;(d.l(o)||o.length>0)&&o.forEach(function(e){var t=e.id;if(n.getFeatureById(t)){var o=n.getFeatureById(t),a=o.get("data");d.m(a,e),o.set("data",a);var l=a.coordinate;l=u.proj.gcjTransform(l),r._transformInd&&(l=Object(c.d)(l,!1)),o.getGeometry().setCoordinates(l);var s=a.pointStyle||"",f=i({fillColor:a.fillColor,strokeColor:a.strokeColor,strokeWidth:a.strokeWidth,radius:a.radius,type:s,labelStrokeWidth:a.labelStrokeWidth,labelOffsetX:a.labelOffsetX,labelOffsetY:a.labelOffsetY,fontStyle:a.fontStyle||"normal",fontSize:a.fontSize||"14px",fontFamily:a.fontFamily||"Arial",labelFillColor:a.labelFillColor,labelStrokeColor:a.labelStrokeColor,label:a.label});o.setStyle(f);var p=o.get("select"),y={fillColor:a.fillColor||"red",strokeWidth:parseInt(a.strokeWidth)||0,labelFillColor:a.labelFillColor||"black",labelStrokeColor:a.labelStrokeColor||"#ffffff",radius:a.radius||5};d.b(p,y),e.highlight&&(d.m(p,e.highlight),o.set("select",p))}})}Object.defineProperty(t,"__esModule",{value:!0}),r.d(t,"addLayer",function(){return n}),r.d(t,"setLayerData",function(){return o}),r.d(t,"highlight",function(){return a}),r.d(t,"updateFeatures",function(){return l});var u=r(0),s=(r.n(u),r(1)),c=r(13),f=r(11),d=r(3),p=r(2),y=r(20)},function(e,t,r){"use strict";function n(e){var t=e.mapId+"_"+e.layerId,r=null;if(u.c.containsKey(t))r=u.c.get(t);else{var n=function(e){var t=e.get("data"),r=t.fontStyle||"normal",n=t.fontSize||"14px",o=t.fontFamily||"Arial",a=r+" "+n+" "+o;return new l.style.Style({fill:new l.style.Fill({color:t.fillColor?t.fillColor:"rgba(0,0,0,0)"}),stroke:new l.style.Stroke({color:t.strokeColor||"#000",width:t.strokeWidth||2}),text:new l.style.Text({text:t.label||"",fill:new l.style.Fill({color:t.labelFillColor||"black"}),font:a,stroke:new l.style.Stroke({color:t.labelStrokeColor||"#ffffff",width:t.labelStrokeWidth||1})})})};e.style=n,e.layerIdentify=t;var o=void 0!==e.zindex?e.zindex:s.Z_INDEX.LINE;e.zindex=o,r=d.createLayer(e),r.set("businessType",s.BUSINESSTYPE.LINE)}}function o(e){var t=[],r=e.datas,n=u.d.get(e.mapId),o=u.c.get(e.mapId+"_"+e.layerId);(c.l(r)||r.length>0)&&(r.forEach(function(e){var r={strokeColor:"black",fillColor:e.fillColor||"rgba(255,0,255,0.3)",strokeWidth:e.strokeWidth||2,labelFillColor:e.labelFillColor||"black",labelStrokeColor:e.labelStrokeColor||"#ffffff"},o=e.highlight;o&&c.m(r,o);var a=n._gcjTransform(e.coordinates),i=new l.geom.LineString(a);n._transformInd&&i.transform(s.PROJ.EPSG_4326,s.PROJ.EPSG_3857);var u=new l.Feature({geometry:i,data:e,select:o||r});u.setId(e.id),t.push(u)}),o.addFeature(t))}function a(e,t,r){if(e)if(f.removeHighlight({mapId:r.mapId,layerId:r.layerId}),t===s.HTYPE.CLICK){if(r.feature){var n=r.feature,o=n.get("select");r.highlight&&c.m(o,r.highlight);var a=new l.style.Style({stroke:new l.style.Stroke({width:o.strokeWidth,color:o.strokeColor})});n.setStyle(a)}}else if(t===s.HTYPE.VECTOR){var i=r.geoIds;i&&i.length>0&&i.forEach(function(t){var n=e.getFeatureById(t);if(n){var o=n.get("select");r.highlight&&c.m(o,r.highlight);var a=new l.style.Style({stroke:new l.style.Stroke({color:o.strokeColor,width:o.strokeWidth})});n.setStyle(a)}})}}function i(e){var t=e.mapId+"_"+e.layerId,r=e.datas,n=u.d.get(e.mapId),o=u.c.get(t);(c.l(r)||r.length>0)&&r.forEach(function(e){var t=e.id,r=o.getFeatureById(t);if(r){var a=r.get("data");c.m(a,e),r.set("data",a);var i=a.coordinates,u=a.fontStyle||"normal",f=a.fontSize||"14px",d=a.fontFamily||"Arial",p=u+" "+f+" "+d;i=n._gcjTransform(i),r.getGeometry().setCoordinates(i),n._transformInd&&r.getGeometry().transform(s.PROJ.EPSG_4326,s.PROJ.EPSG_3857);var y={};y.fillColor=a.fillColor||"rgba(0,0,0,0)",y.strokeWidth=a.strokeWidth||2,y.labelFillColor=a.labelFillColor||"black",y.labelStrokeColor=a.labelStrokeColor||"#ffffff";var m=new l.style.Style({fill:new l.style.Fill({color:y.fillColor}),stroke:new l.style.Stroke({color:a.strokeColor||"#000",width:y.strokeWidth}),text:new l.style.Text({text:a.label||"",fill:new l.style.Fill({color:y.labelFillColor}),font:p,stroke:new l.style.Stroke({color:y.labelStrokeColor,width:a.labelStrokeWidth||1})})});r.setStyle(m);var g=r.get("select");c.b(g,y),a.highlight&&(c.m(g,a.highlight),r.set("select",g))}})}Object.defineProperty(t,"__esModule",{value:!0}),r.d(t,"addLayer",function(){return n}),r.d(t,"setLayerData",function(){return o}),r.d(t,"highlight",function(){return a}),r.d(t,"updateFeatures",function(){return i});var l=r(0),u=(r.n(l),r(1)),s=r(2),c=r(3),f=r(20),d=r(11)},function(e,t,r){"use strict";function n(e){var t=e.mapId+"_"+e.layerId,r=null;if(u.c.containsKey(t))r=u.c.get(t);else{var n=function(e){var t=e.get("data"),r=t.fontStyle||"normal",n=t.fontSize||"14px",o=t.fontFamily||"Arial",a=r+" "+n+" "+o;return new l.style.Style({fill:new l.style.Fill({color:t.fillColor||"rgba(0,0,0,0)"}),stroke:new l.style.Stroke({color:t.strokeColor||"#000",width:t.strokeWidth||2}),text:new l.style.Text({text:t.label?t.label:"",fill:new l.style.Fill({color:t.labelFillColor||"black"}),font:a,stroke:new l.style.Stroke({color:t.labelStrokeColor||"#ffffff",width:t.labelStrokeWidth||1})})})};e.style=n,e.layerIdentify=t;var o=void 0!==e.zindex?e.zindex:s.Z_INDEX.TEMPPOLYGON;e.zindex=o,r=d.createLayer(e),r.set("businessType",s.BUSINESSTYPE.POLYGON)}}function o(e){var t=[],r=e.datas,n=u.d.get(e.mapId),o=u.c.get(e.mapId+"_"+e.layerId);(c.l(r)||r.length>0)&&(r.forEach(function(e){var r=e.coordinates,o=new l.geom.Polygon([r]);n._transformInd&&o.transform(s.PROJ.EPSG_4326,s.PROJ.EPSG_3857);var a={fillColor:e.fillColor||"rgba(255,0,255,0.3)",strokeColor:"black",strokeWidth:e.strokeWidth||2,labelFillColor:e.labelFillColor||"black",labelStrokeColor:e.labelStrokeColor||"#ffffff"};e.highlight&&c.m(a,e.highlight);var i=new l.Feature({geometry:o,data:e,select:a});i.setId(e.id),t.push(i)}),o.addFeature(t))}function a(e,t,r){if(e)if(f.removeHighlight({mapId:r.mapId,layerId:r.layerId}),t===s.HTYPE.CLICK){if(r.feature){var n=r.feature,o=n.get("select");r.highlight&&c.m(o,r.highlight);var a=n.get("data"),i=a.fontStyle||"normal",u=a.fontSize||"14px",d=a.fontFamily||"Arial",p=i+" "+u+" "+d,y=new l.style.Style({fill:new l.style.Fill({color:o.fillColor}),stroke:new l.style.Stroke({width:o.strokeWidth,color:o.strokeColor}),text:new l.style.Text({text:a.label||"",fill:new l.style.Fill({color:o.labelFillColor}),font:p,stroke:new l.style.Stroke({color:o.labelStrokeColor,width:a.labelStrokeWidth||1})})});n.setStyle(y)}}else if(t===s.HTYPE.VECTOR){var m=r.geoIds;m.length>0&&m.forEach(function(t){var n=e.getFeatureById(t);if(!n)return null;var o=n.get("select");r.highlight&&c.m(o,r.highlight);var a=n.get("data"),i=a.fontStyle||"normal",u=a.fontSize||"14px",s=a.fontFamily||"Arial",f=i+" "+u+" "+s,d=new l.style.Style({fill:new l.style.Fill({color:o.fillColor}),stroke:new l.style.Stroke({width:o.strokeWidth,color:o.strokeColor}),text:new l.style.Text({text:a.label||"",fill:new l.style.Fill({color:o.labelFillColor}),font:f,stroke:new l.style.Stroke({color:o.labelStrokeColor,width:a.labelStrokeWidth||1})})});n.setStyle(d)})}}function i(e){var t=e.mapId+"_"+e.layerId,r=e.datas,n=u.d.get(e.mapId),o=u.c.get(t);(c.l(r)||r.length>0)&&r.forEach(function(e){var t=e.id,r=o.getFeatureById(t);if(r){var a=r.get("data");if(c.m(a,e),r.set("data",a),e.highlight){var i=r.get("select");c.m(i,e.highlight),r.set("select",i)}var u=a.coordinates;u=n._gcjTransform(u),r.getGeometry().setCoordinates([u]),n._transformInd&&r.getGeometry().transform(s.PROJ.EPSG_4326,s.PROJ.EPSG_3857);var f=a.fontStyle||"normal",d=a.fontSize||"14px",p=a.fontFamily||"Arial",y=f+" "+d+" "+p,m=new l.style.Style({fill:new l.style.Fill({color:a.fillColor||"rgba(0,0,0,0)"}),stroke:new l.style.Stroke({color:a.strokeColor||"#000",width:a.strokeWidth||2}),text:new l.style.Text({text:a.label?a.label:"",fill:new l.style.Fill({color:a.labelFillColor||"black"}),font:y,stroke:new l.style.Stroke({color:a.labelStrokeColor||"#ffffff",width:a.labelStrokeWidth||1})})});r.setStyle(m)}})}Object.defineProperty(t,"__esModule",{value:!0}),r.d(t,"addLayer",function(){return n}),r.d(t,"setLayerData",function(){return o}),r.d(t,"highlight",function(){return a}),r.d(t,"updateFeatures",function(){return i});var l=r(0),u=(r.n(l),r(1)),s=r(2),c=r(3),f=r(20),d=r(11)},function(e,t,r){"use strict";function n(e){function t(e){var t=null,r=void 0,o=e.get("features"),u=o[0].get("data"),f=o.length;v&&(r=p+v),t=u&&u.imageName?-1!==u.imageName.indexOf("data:image/png;base64")?u.imageName:p+u.imageName:s.GisResourceURL+"marker/ne_default.png";var m=u.rotation||0;return f>1?[new l.style.Style({image:new l.style.Icon({src:r||s.GisResourceURL+"marker/ne_default.png",rotation:m,scale:g,opacity:u.opacity||1,anchor:u.anchor||[0,0],anchorXUnits:"pixels",anchorYUnits:"pixels"}),text:new l.style.Text({scale:1.5,text:f.toString(),font:a||"normal 14px Arial",fill:new l.style.Fill({color:i}),stroke:new l.style.Stroke({width:n.labelStrokeWidth||3,color:n.labelStrokeColor||"black"}),offsetX:n.labelOffsetX||28,offsetY:n.labelOffsetY||25})})]:[new l.style.Style({image:new l.style.Icon({src:t,rotation:m,opacity:u.opacity||1,anchor:u.anchor||[.5,.5]}),text:new l.style.Text({text:u.label||"",font:d||"normal 14px Arial",fill:new l.style.Fill({color:y}),stroke:new l.style.Stroke({width:c.labelStrokeWidth||3,color:c.labelStrokeColor||"black"}),offsetX:c.labelOffsetX||28,offsetY:c.labelOffsetY||25})})]}var r=e.mapId+"_"+e.layerId,n=e.labelClusterStyle||{},a=n.labelFont,i=n.fontColor,c=e.labelStyle||{},d=c.labelFont,y=c.fontColor||"#ffffff",m=n.distance||50,g=e.scale||1;e.distance=m,e.isCluster=!0;var v=e.clusterImage,h=null;if(u.c.containsKey(r))h=u.c.get(r);else{e.layerIdentify=r,e.style=t;var I=void 0!==e.zindex?e.zindex:s.Z_INDEX.MARKER;e.zindex=I,h=f.createLayer(e),h.set("businessType",s.BUSINESSTYPE.ICONCLUSTER)}o(e)}function o(e){var t=e.mapId+"_"+e.layerId;y[t]=e.datas;var r=u.d.get(e.mapId),n=u.c.get(t);if(e.imgPath&&(p=e.imgPath),y[t]){var o=[];y[t].forEach(function(e){var t=new l.geom.Point(e.coordinate);r._transformInd&&t.transform(s.PROJ.EPSG_4326,s.PROJ.EPSG_3857);var n=c.a(e);delete n.highlight,e.highlight&&c.m(n,e.highlight);var a=new l.Feature({geometry:t,data:e,select:n});a.setId(e.id),o.push(a)}),n&&n.addFeature(o)}}function a(e,t,r){d.highlight(e,t,r)}function i(e){var t=e.mapId+"_"+e.layerId,r=u.c.get(t);if(!r)return null;var n=e.datas;r.clearAllFeature();for(var a=y[t],i=a?a.length:0,l=0,s=n.length;l<s;l++){for(var f=null,d=-1,p=0;p<i;p++)if(a[p]&&a[p].id===n[l].id){d=p,f=a[p];break}f?(c.m(f,n[l]),a.splice(d,1,f)):a.push(n[l])}e.datas=a,o(e)}Object.defineProperty(t,"__esModule",{value:!0}),r.d(t,"addLayer",function(){return n}),r.d(t,"setLayerData",function(){return o}),r.d(t,"updateFeatures",function(){return i}),r.d(t,"highlight",function(){return a});var l=r(0),u=(r.n(l),r(1)),s=r(2),c=r(3),f=r(11),d=r(37),p=s.GisResourceURL+"marker/",y={}},function(e,t,r){"use strict";function n(e){var t=e.mapId;if(d=c.d.get(t),t&&d&&!d.get("isDrawing")){var r=Object(s.d)("measureTips");r||(r=Object(s.b)("div"),r.setAttribute("id","measureTips"));var n=r.cloneNode(!0),a="toolPopup"+g;n.id=a,Object(s.a)(n,"popupTips");var b=new u.popup.VPopup({element:n,offset:[-20,-15],anchor:"bottom-left"}),S=e.pointRadius||4,w=e.pointFillColor||"#ffffff",P=e.pointStrokeColor||"#0099ff",E=e.pointStrokeWidth||2;d.addPopup(b),b._olOverlay.set("actId",g),n.parentNode.style.zIndex=999,y.push(b);var O=void 0,C=void 0,T={},k=d.get("doubleClickZoom");k&&k.setActive(!1);var _=new u.style.Style({fill:new u.style.Fill({color:"transparent"}),stroke:new u.style.Stroke({color:"rgba(0,153,255,1)",width:5}),image:new u.style.Circle({radius:6,fill:new u.style.Fill({color:"rgba(0,153,255,1)"}),stroke:new u.style.Stroke({color:"rgba(255,255,255,1)",width:1.5})})});p=new u.interaction.VDraw({map:d,type:"LineString",style:{radius:6,fillColor:"rgba(255,255,255,0)",strokeColor:e.strokeColor||"#3399CC",strokeWidth:e.strokeWidth||3},drawingStyle:_,drawStartFun:function(e){C=e.feature.getGeometry(),O=C.getCoordinates()[0];var t=r.cloneNode(!0),n="startPopup"+g;t.id=n,t.setAttribute("class","popupTips");var o=new u.popup.VPopup({element:t,position:O,offset:[-20,-15],anchor:"bottom-left"});d.addPopup(o),o._olOverlay.set("actId",g),m++,o._olOverlay.getElement().parentNode.style.zIndex=m,y.push(o),T[O]=o,Object(s.d)(n).innerHTML=f.prop("measure.message.start")},drawingFun:function(e){var t=u.Measure.geomLength(C,{projection:d.getProjection()});b.setPosition(e.coordinate),Object(s.d)(a).innerHTML=""+f.prop("measure.message.total")+o(t)+"<br>"+f.prop("measure.message.helper")},clickFun:function(e){var t=e.coordinate,n=C.getLastCoordinate();if(t.toString()===n.toString()){if(l({layer:this._vectorLayer,pointRadius:S,pointFillColor:w,pointStrokeColor:P,pointStrokeWidth:E,coordinate:t}),!T[t]){v++;var a="popup"+v,i=r.cloneNode(!0);i.id=a,i.setAttribute("class","popupTips");var c=new u.popup.VPopup({element:i,position:O,offset:[-20,-15],anchor:"bottom-left"});c.setPosition(t),d.addPopup(c),c._olOverlay.set("actId",g),m++;c._olOverlay.getElement().parentNode.style.zIndex=m,y.push(c),I=c;var f=u.Measure.geomLength(C,{projection:d.getProjection()});Object(s.d)(a).innerHTML=o(f)}}},drawEndFun:function(n){var a=n.target.sketchCoords_,c=a[a.length-1];l({layer:this._vectorLayer,pointRadius:S,pointFillColor:w,pointStrokeColor:P,pointStrokeWidth:E,coordinate:c}),b.setPosition(void 0);var v=r.cloneNode(!0),h=C.getLastCoordinate(),O="endTip"+g;v.id=O,v.setAttribute("class","popupTips");var _=new u.popup.VPopup({element:v,position:h,offset:[-20,-15],anchor:"bottom-left"});d.addPopup(_),_._olOverlay.set("actId",g),m++,_._olOverlay.getElement().parentNode.style.zIndex=m,y.push(_);var L=u.Measure.geomLength(C,{projection:d.getProjection()});Object(s.d)(O).innerHTML=""+f.prop("measure.message.total")+o(L),T={},I&&d.removePopup(I),i(h,g),g++,e.endCallback&&"function"==typeof e.endCallback&&e.endCallback({mapId:t,coordinates:a}),p.stopDraw(),d.set("state.measure.geoLine",!1),d.set("isDrawing",!1),setTimeout(function(){k&&k.setActive(!0)},500)}}),p&&(p.actId=g,h[g]=p,p.startDraw(),d.set("state.measure.geoLine",!0),d.set("isDrawing",!0))}}function o(e){return e>100?Math.round(e/1e3*100)/100+" km":Math.round(100*e)/100+" m"}function a(e){h[e]&&h[e].removeDraw(),delete h[e];for(var t=0;t<y.length;t++)e?y[t].hasOwnProperty("_olOverlay")&&y[t]._olOverlay&&y[t]._olOverlay.get("actId")==e&&d.removePopup(y[t]):d.removePopup(y[t]);p=null,d.set("state.measure.geoLine",!1),d.set("isDrawing",!1)}function i(e,t){var r=Object(s.b)("div","measure-close");m&&(r.style.zIndex=m++),r.setAttribute("actId",t);var n=new u.popup.VPopup({element:r,position:e,offset:[-20,-15]});d.addPopup(n),n._olOverlay.set("actId",t),y.push(n),r.addEventListener("click",function(e){var t=e.target.getAttribute("actId");e.stopImmediatePropagation(),a(t)})}function l(e){var t=new u.geom.Point(e.coordinate),r=new u.Feature({geometry:t});r.setStyle(new u.style.Style({image:new u.style.Circle({radius:e.pointRadius,fill:new u.style.Fill({color:e.pointFillColor}),stroke:new u.style.Stroke({color:e.pointStrokeColor,width:e.pointStrokeWidth})})})),e.layer.addFeature([r])}Object.defineProperty(t,"__esModule",{value:!0}),r.d(t,"measureLine",function(){return n}),r.d(t,"clearLastLine",function(){return a});var u=r(0),s=(r.n(u),r(14)),c=r(1),f=r(25),d=void 0,p=void 0,y=[],m=20,g=1,v=0,h={},I=void 0},function(e,t,r){"use strict";function n(e){var t=e.mapId;if(p=c.d.get(t),t&&p&&!p.get("isDrawing")){var r=Object(u.d)("measureTips");r||(r=Object(u.b)("div"),r.setAttribute("id","measureTips"));var n=r.cloneNode(!0),o="areaToolPopup"+v;n.id=o,Object(u.a)(n,"areaPopupTips");var m=void 0,g=void 0,I=n.cloneNode(!0);I.id="";var b=new l.popup.VPopup({element:I,offset:[-20,-15],anchor:"bottom-left"});p.addPopup(b);var S=e.measureType,w={fillColor:"rgba(255,255,255,0)",strokeColor:"#FFCCFF",strokeWidth:2},P=new l.style.Style({fill:new l.style.Fill({color:"transparent"}),stroke:new l.style.Stroke({color:"rgba(0,153,255,1)",width:5}),image:new l.style.Circle({radius:6,fill:new l.style.Fill({color:"rgba(0,153,255,1)"}),stroke:new l.style.Stroke({color:"rgba(255,255,255,1)",width:1.5})})});g="Box"===S?l.interaction.DrawType.RECTANGLE:"Polygon";var E=p.get("doubleClickZoom");E&&E.setActive(!1),d=new l.interaction.VDraw({map:p,type:g,style:w,drawingStyle:P,drawStartFun:function(e){m=e.feature.getGeometry()},drawingFun:function(e){var t=l.Measure.geomArea(m,{projection:p.getProjection()});b.setPosition(e.coordinate),I.innerHTML=f.prop("measureArea.message.total")+i(t)},drawEndFun:function(r){var o=new l.popup.VPopup({element:n,offset:[-30,-40]}),c=l.Measure.geomArea(m,{projection:p.getProjection()});n.innerHTML=f.prop("measureArea.message.total")+i(c),p.addPopup(o),o._olOverlay.set("actId",v),y.push(o),p.removePopup(b);var g=void 0,h=void 0;if("Box"===S){g=r.target.sketchCoords_;h=g[g.length-1]}else{g=m.getCoordinates()[0];h=g[g.length-2]}a(h,v),o.setPosition(h),v++,e.endCallback&&"function"==typeof e.endCallback&&(p._transformInd&&(g=Object(s.p)(g)),e.endCallback({mapId:t,actId:this.actId,coordinates:g,boxArea:Object(u.f)(i(c))})),d.stopDraw(),p.set("state.measure.geoArea",!1),p.set("isDrawing",!1),setTimeout(function(){E&&E.setActive(!0)},500)}}),d&&(d.actId=v,h[v]=d,d.startDraw(),p.set("state.measure.geoArea",!0),p.set("isDrawing",!0))}}function o(e){h[e]&&h[e].removeDraw(),delete h[e];for(var t=0;t<y.length;t++)e?y[t].hasOwnProperty("_olOverlay")&&y[t]._olOverlay&&y[t]._olOverlay.get("actId")==e&&p.removePopup(y[t]):p.removePopup(y[t]);d=null,p.set("state.measure.geoArea",!1),p.set("isDrawing",!1)}function a(e,t){var r=Object(u.b)("div","measure-close");m&&(r.style.zIndex=m++),r.setAttribute("actId",t);var n=new l.popup.VPopup({element:r,position:e,offset:g});p.addPopup(n),n._olOverlay.set("actId",t),y.push(n),r.addEventListener("click",function(e){var t=e.target.getAttribute("actId");e.stopImmediatePropagation(),o(t)})}function i(e){return e>1e4?Math.round(e/1e6*100)/100+" km<sup>2</sup>":Math.round(100*e)/100+" m<sup>2</sup>"}Object.defineProperty(t,"__esModule",{value:!0}),r.d(t,"measureArea",function(){return n}),r.d(t,"clearMeasure",function(){return o});var l=r(0),u=(r.n(l),r(14)),s=r(3),c=r(1),f=r(25),d=void 0,p=void 0,y=[],m=20,g=[3,-1],v=1,h={}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(59),o=(r.n(n),r(60));r.d(t,"Map",function(){return o.a});var a=r(103);r.d(t,"BaseLayer",function(){return a.b}),r.d(t,"Point",function(){return a.j}),r.d(t,"PointCluster",function(){return a.k}),r.d(t,"BubbleCircle",function(){return a.c}),r.d(t,"Line",function(){return a.i}),r.d(t,"BLine",function(){return a.a}),r.d(t,"Polygon",function(){return a.l}),r.d(t,"Icon",function(){return a.g}),r.d(t,"IconCluster",function(){return a.h}),r.d(t,"HeatMap",function(){return a.e}),r.d(t,"Wms",function(){return a.m}),r.d(t,"Wmts",function(){return a.n}),r.d(t,"GifLayer",function(){return a.d}),r.d(t,"Highlight",function(){return a.f});var i=r(110);r.d(t,"Constant",function(){return i.a}),r.d(t,"Popup",function(){return i.g}),r.d(t,"OlUtil",function(){return i.f}),r.d(t,"Util",function(){return i.i}),r.d(t,"DomUtil",function(){return i.b}),r.d(t,"ImageUtil",function(){return i.e}),r.d(t,"Transform",function(){return i.h}),r.d(t,"DragZoomInteraction",function(){return i.c}),r.d(t,"mapCache",function(){return i.l}),r.d(t,"layerCache",function(){return i.k}),r.d(t,"flickerCache",function(){return i.j}),r.d(t,"HashMap",function(){return i.d});var l=r(115);r.d(t,"I18n",function(){return l.a});var u=r(116);r.d(t,"MeasureDistance",function(){return u.f}),r.d(t,"MeasureArea",function(){return u.e}),r.d(t,"MeasureAngle",function(){return u.d}),r.d(t,"Measure",function(){return u.c}),r.d(t,"Drag",function(){return u.a}),r.d(t,"Geometry",function(){return u.b})},function(e,t){},function(e,t,r){"use strict";var n=r(61);r.d(t,"a",function(){return n})},function(e,t,r){"use strict";function n(e){var t=null;if(I.d.containsKey(e.mapId))t=d(e);else{var r={divId:e.mapId,center:e.center,zoom:e.defaultZoom,projection:e.proj||"EPSG:3857",mapType:b.INNERMAPTYPE[e.mapType],tileGrid:e.tilegrid||void 0,resolutions:e.resolutions||void 0,extent:e.extent||void 0,crossOrigin:void 0,logo:!1,zoomRange:{minZoom:e.minZoom,maxZoom:e.maxZoom},url:e.url||"http://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png",wrapX:e.wrapX||!1};h.MapPropertys.MapType.WMS_MAP===b.INNERMAPTYPE[e.mapType]&&(r.crossOrigin="anonymous",r.layerParams={LAYERS:e.layers,MAPNAME:e.mapName,VERSION:e.version||"1.1.1"}),h.MapPropertys.MapType.WMTS_MAP===b.INNERMAPTYPE[e.mapType]&&(r.layer=e.layer,r.style=e.style||"default",r.requestEncoding=e.requestEncoding||"KVP",r.tilePixelRatio=e.tilePixelRatio,r.format=e.format,r.matrixSet=e.matrixSet),t=new h.VMap(r),e.initCallback&&t.once("load",e.initCallback),t.loadMap(),e.rightClickCallback&&t.on("contextmenu",e.rightClickCallback),I.d.put(e.mapId,t);var n=[new h.control.VShowZoomControl,new h.control.VZoomSlider];if(e.controls){if(e.controls.hasOwnProperty(b.CONTROL_TYPE.SCALELINE)&&n.push(new h.control.VScaleLine),e.controls.hasOwnProperty(b.CONTROL_TYPE.MOUSEPOSITION)){var o=new h.control.VMousePosition({position:"left-bottom",rounding:e.rounding});n.push(o)}if(e.controls.hasOwnProperty(b.CONTROL_TYPE.OVERVIEWMAP)){var a=void 0,i=t._options.zoomRange;t._options.resolutions&&(a=t._options.resolutions.slice(i.minZoom,i.maxZoom+1)),P=new h.control.VOverviewMap({layers:[t._baseLayer],view:new h.OlView({projection:e.proj||"EPSG:3857",minZoom:e.minZoom,maxZoom:e.maxZoom,resolutions:a})}),t.getOlMap().addControl(P)}}t.addControl(n);var l=new h.DoubleClickZoom;t.getOlMap().addInteraction(l),t.set("doubleClickZoom",l)}b.MAPPROPERTY.CURRENT_PROJECTION=t.getProjection(),b.MAPPROPERTY.TRANSFORMIND=t.getTransformInd(),b.MAPPROPERTY.MAPTYPE=e.mapType}function o(e){return I.d.get(e)}function a(e){var t=!0,r=!1,n=void 0;try{for(var o,a=v()(e);!(t=(o=a.next()).done);t=!0){for(var i=o.value,l=I.d.get(i),u=I.c.getKeys(),s=u.length-1;s>=0;s--){var c=u[s];-1!==c.indexOf(i)&&Object(S.c)({mapId:i,layer_id:c})}l&&(l.destoryMap(),I.d.remove(i),l=null)}}catch(e){r=!0,n=e}finally{try{!t&&a.return&&a.return()}finally{if(r)throw n}}}function i(e){var t=e.zoom,r=I.d.get(e.mapId);r.setCenter(e.coordinate),void 0!==t&&null!==t&&r.setZoom(t)}function l(e){return I.d.get(e).getZoom()}function u(e,t){var r=I.d.get(e),n=r&&r.getExtent();return r&&r.getTransformInd()&&(n=h.proj.normalExtentTransform(n,!1)),t&&r&&r.getProjection()!==b.PROJ.EPSG_4326?h.proj.normalExtentTransform(n,!0):n}function s(e){return I.d.get(e).getCenter()}function c(e){I.d.get(e.mapId).setExtent(e.extent)}function f(e){if(e instanceof Array){var t=!0,r=!1,n=void 0;try{for(var o,a=v()(e);!(t=(o=a.next()).done);t=!0){var i=o.value,l=I.d.get(i);l&&l.resizeMap()}}catch(e){r=!0,n=e}finally{try{!t&&a.return&&a.return()}finally{if(r)throw n}}}}function d(e){var t=I.d.get(e.mapId);void 0!==e.mapId&&(e.divId=e.mapId),void 0!==e.defaultZoom&&(e.zoom=e.defaultZoom),void 0!==e.proj&&(e.projection=e.proj),void 0!==e.tilegrid&&(e.tileGrid=e.tilegrid),void 0!==e.minZoom&&(t._options.zoomRange.minZoom=e.minZoom),void 0!==e.maxZoom&&(t._options.zoomRange.maxZoom=e.maxZoom);var r=t._options.mapType,n=Object(w.b)(t._options,e);return void 0!==e.mapType&&(n.mapType=b.INNERMAPTYPE[e.mapType]),b.INNERMAPTYPE[e.mapType]!==r&&(n.extent=e.extent,n.resolutions=e.resolutions,n.tileGrid=e.tilegrid),h.MapPropertys.MapType.WMS_MAP===b.INNERMAPTYPE[e.mapType]&&(n.crossOrigin="anonymous",n.layerParams={LAYERS:n.layers,MAPNAME:n.mapName,VERSION:n.version||"1.1.1"}),h.MapPropertys.MapType.WMTS_MAP===b.INNERMAPTYPE[e.mapType]&&(n.style=n.style||"default",n.requestEncoding=n.requestEncoding||"KVP"),t.switchBaseMap(n),b.MAPPROPERTY.CURRENT_PROJECTION=t.getProjection(),b.MAPPROPERTY.TRANSFORMIND=t.getTransformInd(),P&&(t.getOlMap().removeControl(P),P=new h.control.VOverviewMap({layers:[t._baseLayer],view:new h.OlView({projection:e.proj||"EPSG:3857",minZoom:e.minZoom,maxZoom:e.maxZoom})}),t.getOlMap().addControl(P)),t}function p(e){var t=I.d.get(e.mapId),r=t.clickcallback;r&&t.off("singleclick",r),t&&e&&"function"==typeof e.callback&&(t.clickcallback=e.callback,t.on("singleclick",t.clickcallback))}function y(e){return I.d.containsKey(e)}function m(e){var t=I.d.getKeys(),r=[];return t.forEach(function(t){var n=I.d.get(t);n instanceof h.VMap&&("map"!==e&&e?"id"===e&&r.push(t):r.push(n))}),r}Object.defineProperty(t,"__esModule",{value:!0}),r.d(t,"createMap",function(){return n}),r.d(t,"getMapObj",function(){return o}),r.d(t,"removeMap",function(){return a}),r.d(t,"setMapCenter",function(){return i}),r.d(t,"getZoom",function(){return l}),r.d(t,"getExtent",function(){return u}),r.d(t,"getCenter",function(){return s}),r.d(t,"setExtent",function(){return c}),r.d(t,"refreshMaps",function(){return f}),r.d(t,"updateMap",function(){return d}),r.d(t,"setCustomSingleClickCallBack",function(){return p}),r.d(t,"isMapExist",function(){return y}),r.d(t,"getMapList",function(){return m});var g=r(62),v=r.n(g),h=r(0),I=(r.n(h),r(1)),b=r(2),S=r(13),w=r(3),P=null},function(e,t,r){e.exports={default:r(63),__esModule:!0}},function(e,t,r){r(38),r(46),e.exports=r(78)},function(e,t,r){"use strict";var n=r(65),o=r(66),a=r(21),i=r(7);e.exports=r(39)(Array,"Array",function(e,t){this._t=i(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,r=this._i++;return!e||r>=e.length?(this._t=void 0,o(1)):"keys"==t?o(0,r):"values"==t?o(0,e[r]):o(0,[r,e[r]])},"values"),a.Arguments=a.Array,n("keys"),n("values"),n("entries")},function(e,t){e.exports=function(){}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,r){var n=r(26);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==n(e)?e.split(""):Object(e)}},function(e,t,r){var n=r(69);e.exports=function(e,t,r){if(n(e),void 0===t)return e;switch(r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,o){return e.call(t,r,n,o)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,r){"use strict";var n=r(43),o=r(22),a=r(34),i={};r(12)(i,r(6)("iterator"),function(){return this}),e.exports=function(e,t,r){e.prototype=n(i,{next:o(1,r)}),a(e,t+" Iterator")}},function(e,t,r){var n=r(8),o=r(16),a=r(19);e.exports=r(9)?Object.defineProperties:function(e,t){o(e);for(var r,i=a(t),l=i.length,u=0;l>u;)n.f(e,r=i[u++],t[r]);return e}},function(e,t,r){var n=r(7),o=r(73),a=r(74);e.exports=function(e){return function(t,r,i){var l,u=n(t),s=o(u.length),c=a(i,s);if(e&&r!=r){for(;s>c;)if((l=u[c++])!=l)return!0}else for(;s>c;c++)if((e||c in u)&&u[c]===r)return e||c||0;return!e&&-1}}},function(e,t,r){var n=r(30),o=Math.min;e.exports=function(e){return e>0?o(n(e),9007199254740991):0}},function(e,t,r){var n=r(30),o=Math.max,a=Math.min;e.exports=function(e,t){return e=n(e),e<0?o(e+t,0):a(e,t)}},function(e,t,r){var n=r(5).document;e.exports=n&&n.documentElement},function(e,t,r){var n=r(10),o=r(45),a=r(31)("IE_PROTO"),i=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=o(e),n(e,a)?e[a]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?i:null}},function(e,t,r){var n=r(30),o=r(27);e.exports=function(e){return function(t,r){var a,i,l=String(o(t)),u=n(r),s=l.length;return u<0||u>=s?e?"":void 0:(a=l.charCodeAt(u),a<55296||a>56319||u+1===s||(i=l.charCodeAt(u+1))<56320||i>57343?e?l.charAt(u):a:e?l.slice(u,u+2):i-56320+(a-55296<<10)+65536)}}},function(e,t,r){var n=r(16),o=r(79);e.exports=r(4).getIterator=function(e){var t=o(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return n(t.call(e))}},function(e,t,r){var n=r(80),o=r(6)("iterator"),a=r(21);e.exports=r(4).getIteratorMethod=function(e){if(void 0!=e)return e[o]||e["@@iterator"]||a[n(e)]}},function(e,t,r){var n=r(26),o=r(6)("toStringTag"),a="Arguments"==n(function(){return arguments}()),i=function(e,t){try{return e[t]}catch(e){}};e.exports=function(e){var t,r,l;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=i(t=Object(e),o))?r:a?n(t):"Object"==(l=n(t))&&"function"==typeof t.callee?"Arguments":l}},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}r.d(t,"a",function(){return d});var o=r(82),a=r.n(o),i=r(85),l=r.n(i),u=r(47),s=r.n(u),c=r(3),f=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),a()(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),d=function(){function e(){n(this,e),this._length=0,this._values={}}return f(e,[{key:"put",value:function(e,t){this.containsKey(e)||this._length++,this._values[e]=t}},{key:"get",value:function(e){var t=void 0;return this._values.hasOwnProperty(e)&&(t=this._values[e]),t}},{key:"getKeys",value:function(){return s()(this._values)}},{key:"keys",value:function(){return this.getKeys()}},{key:"getValues",value:function(){return l()(Object(c.a)(this._values))}},{key:"vals",value:function(){return this.getValues()}},{key:"remove",value:function(e){e?e in this._values&&(delete this._values[e],this._length--):this.clear()}},{key:"containsKey",value:function(e){return this._values.hasOwnProperty(e)}},{key:"clear",value:function(){this._length=0,this._values={}}},{key:"isEmpty",value:function(){return 0===this._length}},{key:"size",value:function(){return this._length}}]),e}()},function(e,t,r){e.exports={default:r(83),__esModule:!0}},function(e,t,r){r(84);var n=r(4).Object;e.exports=function(e,t,r){return n.defineProperty(e,t,r)}},function(e,t,r){var n=r(15);n(n.S+n.F*!r(9),"Object",{defineProperty:r(8).f})},function(e,t,r){e.exports={default:r(86),__esModule:!0}},function(e,t,r){r(87),e.exports=r(4).Object.values},function(e,t,r){var n=r(15),o=r(88)(!1);n(n.S,"Object",{values:function(e){return o(e)}})},function(e,t,r){var n=r(19),o=r(7),a=r(24).f;e.exports=function(e){return function(t){for(var r,i=o(t),l=n(i),u=l.length,s=0,c=[];u>s;)a.call(i,r=l[s++])&&c.push(e?[r,i[r]]:i[r]);return c}}},function(e,t,r){r(90),e.exports=r(4).Object.keys},function(e,t,r){var n=r(45),o=r(19);r(91)("keys",function(){return function(e){return o(n(e))}})},function(e,t,r){var n=r(15),o=r(4),a=r(18);e.exports=function(e,t){var r=(o.Object||{})[e]||Object[e],i={};i[e]=t(r),n(n.S+n.F*a(function(){r(1)}),"Object",i)}},function(e,t,r){r(46),r(38),e.exports=r(35).f("iterator")},function(e,t,r){r(94),r(100),r(101),r(102),e.exports=r(4).Symbol},function(e,t,r){"use strict";var n=r(5),o=r(10),a=r(9),i=r(15),l=r(42),u=r(95).KEY,s=r(18),c=r(32),f=r(34),d=r(23),p=r(6),y=r(35),m=r(36),g=r(96),v=r(97),h=r(16),I=r(17),b=r(7),S=r(29),w=r(22),P=r(43),E=r(98),O=r(99),C=r(8),T=r(19),k=O.f,_=C.f,L=E.f,x=n.Symbol,M=n.JSON,A=M&&M.stringify,R=p("_hidden"),F=p("toPrimitive"),N={}.propertyIsEnumerable,j=c("symbol-registry"),D=c("symbols"),G=c("op-symbols"),Y=Object.prototype,B="function"==typeof x,V=n.QObject,W=!V||!V.prototype||!V.prototype.findChild,U=a&&s(function(){return 7!=P(_({},"a",{get:function(){return _(this,"a",{value:7}).a}})).a})?function(e,t,r){var n=k(Y,t);n&&delete Y[t],_(e,t,r),n&&e!==Y&&_(Y,t,n)}:_,z=function(e){var t=D[e]=P(x.prototype);return t._k=e,t},Z=B&&"symbol"==typeof x.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof x},H=function(e,t,r){return e===Y&&H(G,t,r),h(e),t=S(t,!0),h(r),o(D,t)?(r.enumerable?(o(e,R)&&e[R][t]&&(e[R][t]=!1),r=P(r,{enumerable:w(0,!1)})):(o(e,R)||_(e,R,w(1,{})),e[R][t]=!0),U(e,t,r)):_(e,t,r)},K=function(e,t){h(e);for(var r,n=g(t=b(t)),o=0,a=n.length;a>o;)H(e,r=n[o++],t[r]);return e},J=function(e,t){return void 0===t?P(e):K(P(e),t)},X=function(e){var t=N.call(this,e=S(e,!0));return!(this===Y&&o(D,e)&&!o(G,e))&&(!(t||!o(this,e)||!o(D,e)||o(this,R)&&this[R][e])||t)},q=function(e,t){if(e=b(e),t=S(t,!0),e!==Y||!o(D,t)||o(G,t)){var r=k(e,t);return!r||!o(D,t)||o(e,R)&&e[R][t]||(r.enumerable=!0),r}},$=function(e){for(var t,r=L(b(e)),n=[],a=0;r.length>a;)o(D,t=r[a++])||t==R||t==u||n.push(t);return n},Q=function(e){for(var t,r=e===Y,n=L(r?G:b(e)),a=[],i=0;n.length>i;)!o(D,t=n[i++])||r&&!o(Y,t)||a.push(D[t]);return a};B||(x=function(){if(this instanceof x)throw TypeError("Symbol is not a constructor!");var e=d(arguments.length>0?arguments[0]:void 0),t=function(r){this===Y&&t.call(G,r),o(this,R)&&o(this[R],e)&&(this[R][e]=!1),U(this,e,w(1,r))};return a&&W&&U(Y,e,{configurable:!0,set:t}),z(e)},l(x.prototype,"toString",function(){return this._k}),O.f=q,C.f=H,r(51).f=E.f=$,r(24).f=X,r(50).f=Q,a&&!r(28)&&l(Y,"propertyIsEnumerable",X,!0),y.f=function(e){return z(p(e))}),i(i.G+i.W+i.F*!B,{Symbol:x});for(var ee="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),te=0;ee.length>te;)p(ee[te++]);for(var re=T(p.store),ne=0;re.length>ne;)m(re[ne++]);i(i.S+i.F*!B,"Symbol",{for:function(e){return o(j,e+="")?j[e]:j[e]=x(e)},keyFor:function(e){if(!Z(e))throw TypeError(e+" is not a symbol!");for(var t in j)if(j[t]===e)return t},useSetter:function(){W=!0},useSimple:function(){W=!1}}),i(i.S+i.F*!B,"Object",{create:J,defineProperty:H,defineProperties:K,getOwnPropertyDescriptor:q,getOwnPropertyNames:$,getOwnPropertySymbols:Q}),M&&i(i.S+i.F*(!B||s(function(){var e=x();return"[null]"!=A([e])||"{}"!=A({a:e})||"{}"!=A(Object(e))})),"JSON",{stringify:function(e){for(var t,r,n=[e],o=1;arguments.length>o;)n.push(arguments[o++]);if(r=t=n[1],(I(t)||void 0!==e)&&!Z(e))return v(t)||(t=function(e,t){if("function"==typeof r&&(t=r.call(this,e,t)),!Z(t))return t}),n[1]=t,A.apply(M,n)}}),x.prototype[F]||r(12)(x.prototype,F,x.prototype.valueOf),f(x,"Symbol"),f(Math,"Math",!0),f(n.JSON,"JSON",!0)},function(e,t,r){var n=r(23)("meta"),o=r(17),a=r(10),i=r(8).f,l=0,u=Object.isExtensible||function(){return!0},s=!r(18)(function(){return u(Object.preventExtensions({}))}),c=function(e){i(e,n,{value:{i:"O"+ ++l,w:{}}})},f=function(e,t){if(!o(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!a(e,n)){if(!u(e))return"F";if(!t)return"E";c(e)}return e[n].i},d=function(e,t){if(!a(e,n)){if(!u(e))return!0;if(!t)return!1;c(e)}return e[n].w},p=function(e){return s&&y.NEED&&u(e)&&!a(e,n)&&c(e),e},y=e.exports={KEY:n,NEED:!1,fastKey:f,getWeak:d,onFreeze:p}},function(e,t,r){var n=r(19),o=r(50),a=r(24);e.exports=function(e){var t=n(e),r=o.f;if(r)for(var i,l=r(e),u=a.f,s=0;l.length>s;)u.call(e,i=l[s++])&&t.push(i);return t}},function(e,t,r){var n=r(26);e.exports=Array.isArray||function(e){return"Array"==n(e)}},function(e,t,r){var n=r(7),o=r(51).f,a={}.toString,i="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],l=function(e){try{return o(e)}catch(e){return i.slice()}};e.exports.f=function(e){return i&&"[object Window]"==a.call(e)?l(e):o(n(e))}},function(e,t,r){var n=r(24),o=r(22),a=r(7),i=r(29),l=r(10),u=r(40),s=Object.getOwnPropertyDescriptor;t.f=r(9)?s:function(e,t){if(e=a(e),t=i(t,!0),u)try{return s(e,t)}catch(e){}if(l(e,t))return o(!n.f.call(e,t),e[t])}},function(e,t){},function(e,t,r){r(36)("asyncIterator")},function(e,t,r){r(36)("observable")},function(e,t,r){"use strict";var n=r(11),o=r(52),a=r(104),i=r(105),l=r(53),u=r(54),s=r(37),c=r(55),f=r(106),d=r(107),p=r(108),y=r(109),m=r(20);r.d(t,"b",function(){return n}),r.d(t,"j",function(){return o}),r.d(t,"k",function(){return a}),r.d(t,"c",function(){return i}),r.d(t,"i",function(){return l}),r.d(t,"a",function(){return l}),r.d(t,"l",function(){return u}),r.d(t,"g",function(){return s}),r.d(t,"h",function(){return c}),r.d(t,"e",function(){return f}),r.d(t,"m",function(){return d}),r.d(t,"n",function(){return p}),r.d(t,"d",function(){return y}),r.d(t,"f",function(){return m})},function(e,t,r){"use strict";function n(e){var t=e.mapId+"_"+e.layerId,r=null,n=i.d.get(e.mapId),o=e.clusterStyle||{},u=o.strokeColor||"#aaaaaa",s=o.fillColor||"#3399cc",c=void 0!==o.strokeWidth?o.strokeWidth:1;0===c&&(u=s);var f=o.fontColor||"#ffffff",d=o.radius||20,p=o.distance||50;void 0===e.isClusterVariableSize&&(e.isClusterVariableSize=!1);var y=void 0!==e.zindex?e.zindex:l.Z_INDEX.SITE;e.distance=p;var m=function(t){var r=t.get("features"),n=r.length;if(n>1){var o=0;return o=e.isClusterVariableSize?d+n:d,[new a.style.Style({image:new a.style.Circle({radius:o,fill:new a.style.Fill({color:s}),stroke:new a.style.Stroke({color:u,width:c})}),text:new a.style.Text({text:n.toString(),fill:new a.style.Fill({color:f})})})]}var i=r[0].get("property");return[new a.style.Style({image:new a.style.Circle({radius:i.radius,fill:new a.style.Fill({color:i.fillColor}),stroke:new a.style.Stroke({color:i.strokeColor,width:i.strokeWidth})})})]};i.c.containsKey(t)?r=i.c.get(t):(r=new a.layer.VClusterLayer({style:m,zIndex:y,zoomRange:{minZoom:e.minShowLevel,maxZoom:e.maxShowLevel},distance:p}),r.set("layerId",e.layerId),r.set("layer_id",t),r.set("businessType",l.BUSINESSTYPE.POINTCLUSTER),n.addLayer([r]),i.c.put(t,r)),void 0!=e.customAttribute&&r.set("customAttribute",e.customAttribute)}function o(e){var t=e.mapId+"_"+e.layerId,r=e.datas,n=i.c.get(t),o=i.d.get(e.mapId);if(r.length>0){var u=[];r.forEach(function(e){var t=new a.geom.Point(e.coordinate);o._transformInd&&t.transform(l.PROJ.EPSG_4326,l.PROJ.EPSG_3857);var r=new a.Feature({geometry:t,property:{fillColor:e.fillColor,strokeColor:e.strokeColor,strokeWidth:e.strokeWidth,radius:e.radius||5},data:e});r.setId(e.id),u.push(r)}),n.addFeature(u)}}Object.defineProperty(t,"__esModule",{value:!0}),r.d(t,"addLayer",function(){return n}),r.d(t,"setLayerData",function(){return o});var a=r(0),i=(r.n(a),r(1)),l=r(2)},function(e,t,r){"use strict";function n(e){var t=e.mapId+"_"+e.layerId,r=null;i.c.containsKey(t)?r=i.c.get(t):(e.layerIdentify=t,r=l.createLayer(e)),r.set("businessType",s.BUSINESSTYPE.BUBBLE_CIRCLE),o(e)}function o(e){var t=e.datas,r=e.mapId+"_"+e.layerId,n=i.c.get(r),o=i.d.get(e.mapId),l=o.getProjection(),c=o.getGCJProjection();if(u.l(t)&&t.length>0){var f=[];t.forEach(function(e){var t=e.coordinate;c&&(t=a.proj.gcjTransform(t)),s.PROJ.EPSG_3857===l&&(t=a.proj.normalTransform(t));var r=l===s.PROJ.EPSG_3857?e.radius&&1e3*e.radius||1e4:(e.radius&&1e3*e.radius||1e4)/a.OlProj.METERS_PER_UNIT.degrees,n=new a.Feature({geometry:new a.geom.Circle(t,r),data:e,businessType:s.BUSINESSTYPE.BUBBLE_CIRCLE});n.setId(e.id);var o=new a.style.Style({fill:new a.style.Fill({color:e.fillColor||"#319FD3"}),stroke:new a.style.Stroke({color:e.strokeColor||"#ff0",width:e.strokeWidth||1})});n.setStyle(o),f.push(n)}),n.addFeature(f)}}Object.defineProperty(t,"__esModule",{value:!0}),r.d(t,"addBubble",function(){return n}),r.d(t,"setLayerData",function(){return o});var a=r(0),i=(r.n(a),r(1)),l=r(11),u=r(3),s=r(2)},function(e,t,r){"use strict";function n(e){var t=e.mapId+"_"+e.layerId,r=void 0;if(i.c.containsKey(t))r=i.c.get(t);else{var n=e.gradient?e.gradient:["#FF3030","#FF4500","#FF7F50","#FF8C00","#FFA54F","#FFB90F","#436EEE","#5CACEE","#54FF9F"],o=e.blur?e.blur:15,u=e.radius?e.radius:8,s=10*(u+o);r=new a.layer.VHeatMapLayer({zIndex:e.zindex||10,blur:o,gradient:n,radius:u,shadow:s,zoomRange:{minZoom:e.minShowLevel,maxZoom:e.maxShowLevel},wrapX:!1});i.d.get(e.mapId).addLayer([r]),r.set("businessType",l.BUSINESSTYPE.HEAT_MAP),r.set("layerId",e.layerId),r.set("layer_id",t),void 0!=e.customAttribute&&r.set("customAttribute",e.customAttribute),i.c.put(t,r)}return r}function o(e){var t=n(e),r=[],o=i.d.get(e.mapId);e.datas.forEach(function(e){var t=e.coordinate;o.getGCJProjection()&&(t=a.Proj.gcjTransform(t,!1));var n=new a.geom.Point(t);o._transformInd&&n.transform(l.PROJ.EPSG_4326,l.PROJ.EPSG_3857);var i=new a.Feature({geometry:n,data:e});i.setId(e.id),r.push(i)}),t.addFeature(r)}Object.defineProperty(t,"__esModule",{value:!0}),r.d(t,"addHeatMap",function(){return o}),r.d(t,"addLayer",function(){return n}),r.d(t,"setLayerData",function(){return o});var a=r(0),i=(r.n(a),r(1)),l=r(2)},function(e,t,r){"use strict";function n(e){var t=e.mapId+"_"+e.layerId,r=void 0,n=a.d.get(e.mapId);return r=e.singleTitle?new o.layer.VImageLayer({imgServerType:"imageWMS",ratio:e.ratio,url:e.url,params:e.params,projection:n.getProjection(),crossOrigin:"anonymous",zoomRange:{minZoom:e.minShowLevel,maxZoom:e.maxShowLevel}}):new o.layer.VWmsLayer({url:e.url,params:e.params,projection:n.getProjection(),tileGrid:e.tilegrid||void 0,zIndex:e.zindex,crossOrigin:"anonymous",zoomRange:{minZoom:e.minShowLevel,maxZoom:e.maxShowLevel},wrapX:!1}),r.set("businessType",i.CUSTOMTYPE.LAYERIMGTYPE),a.c.put(t,r),n.addLayer([r]),void 0!=e.customAttribute&&r.set("customAttribute",e.customAttribute),r}Object.defineProperty(t,"__esModule",{value:!0}),r.d(t,"createWmsLayer",function(){return n});var o=r(0),a=(r.n(o),r(1)),i=r(2)},function(e,t,r){"use strict";function n(e){var t=e.mapId+"_"+e.layerId,r=a.d.get(e.mapId),n=a.c.get(t);return n&&(r.removeLayer([]),a.c.remove(t)),n=new o.layer.VWMTSLayer({url:e.url,layer:e.layer,format:e.format||"image/png",tileGrid:e.tilegrid,matrixSet:e.matrixSet,style:e.style||"default",crossOrigin:e.crossOrigin||"anonymous",zIndex:e.zindex,zoomRange:{minZoom:e.minShowLevel,maxZoom:e.maxShowLevel}}),n.set("layerId",e.layerId),n.set("layer_id",t),n.set("businessType",i.CUSTOMTYPE.LAYERTILETYPE),a.c.put(t,n),r.addLayer([n]),void 0!=e.customAttribute&&n.set("customAttribute",e.customAttribute),n}Object.defineProperty(t,"__esModule",{value:!0}),r.d(t,"createLayer",function(){return n});var o=r(0),a=(r.n(o),r(1)),i=r(2)},function(e,t,r){"use strict";function n(e){var t=e.mapId+"_"+e.layerId,r=void 0;if(i.c.containsKey(t))r=i.c.get(t);else{r=new a.layer.VGifLayer({zoomRange:{minZoom:e.minShowLevel,maxZoom:e.maxShowLevel}});i.d.get(e.mapId).addLayer([r]),i.c.put(t,r)}return o(e),r}function o(e){var t=e.mapId+"_"+e.layerId,r=i.c.get(t);r&&e.datas&&r.addFeature(e.datas)}Object.defineProperty(t,"__esModule",{value:!0}),r.d(t,"addLayer",function(){return n}),r.d(t,"setLayerData",function(){return o});var a=r(0),i=(r.n(a),r(1))},function(e,t,r){"use strict";r.d(t,"f",function(){return d}),r.d(t,"i",function(){return p}),r.d(t,"b",function(){return y}),r.d(t,"h",function(){return m});var n=r(0),o=(r.n(n),r(2)),a=r(111),i=r(13),l=r(14),u=r(3),s=r(112),c=r(114),f=r(1);r.d(t,"d",function(){return f.a}),r.d(t,"j",function(){return f.b}),r.d(t,"k",function(){return f.c}),r.d(t,"l",function(){return f.d}),r.d(t,"a",function(){return o}),r.d(t,"g",function(){return a}),r.d(t,"e",function(){return s}),r.d(t,"c",function(){return c});var d={};d.getLayer=i.a,d.transform=i.d,d.reTransform=i.b;var p={};p.isArray=u.g,p.transformMultArray=u.q,p.extend=u.b,p.unique=u.t,p.gcjTransform=function(e){return o.MAPPROPERTY.MAPTYPE===o.MAPTYPE.GAODE_MAP?n.proj.gcjTransform(e):e},p.gcj_decTransform=function(e){return o.MAPPROPERTY.MAPTYPE===o.MAPTYPE.GAODE_MAP?n.proj.gcjTransform(e,!0):e},p.isValid=u.l,p.multigcjTransform=u.n,p.isPointInLine=u.k,p.transformGPS={gcj_encrypt:function(e,t){return n.gcjTransform.wgs84ToGcj(e,t)},gcj_decrypt_exact:function(e,t){return n.gcjTransform.gcjToWgs84(e,t)}},p.find=u.c,p.getPointQuadrant=u.e,p.getWKTFromText=u.f,p.translateVertexToWKT=u.r,p.isInsidePolygon=u.j,p.isFinite=u.i;var y={};y.getDom=l.e,y.createDom=l.c,y.on=l.h,y.off=l.g;var m={Transform:{transform:function(e){var t=e.coordinate,r=e.sourceProj,o=e.targetProj;return 4===t.length?n.OlProj.transformExtent(t,r,o):(t.length,n.OlProj.transform(t,r,o))}}}},function(e,t,r){"use strict";function n(e){var t=e.mapId,r=e.content,n=e.position,a=e.autoPanMargin;if(void 0!==t&&void 0!==n){var i=y.d.get(e.mapId);if(i){if(i.getProjection()!==p.MapPropertys.SystemProj.PROJ4326&&(n=i.transform4326ToMap(n)),!v.hasOwnProperty(t)){var l=e.radius?"ol-popupContainer-class-radius":"ol-popupContainer-class",u=Object(m.b)("div",l);void 0!==e.title&&(u.style.borderBottomColor="rgba(49, 177, 209, 0.9)",u.style.borderBottomStyle="solid",u.style.borderBottomWidth="2px");var s=!!e.showCloseButton,c=null;s&&(c=Object(m.b)("div","ol-popupClose-class"),c.style.position="absolute",c.style.top="0px",c.style.right="3px",c.onclick=function(){o(t)});var f=Object(m.b)("div");if(!(r&&"string"==typeof r||"object"===(void 0===r?"undefined":g(r))))return void console.warn("popup text invalid");if("string"==typeof r?f.innerHTML=r:"object"===(void 0===r?"undefined":g(r))&&f.appendChild(r),void 0!==e.title){var d=Object(m.b)("div","ol-popupHead-class");e.radius&&(d.style.borderRadius="5px 5px 0 0");var h=Object(m.b)("div","ol-popupTitle-class");h.innerHTML=e.title,d.appendChild(h),c&&d.appendChild(c),u.appendChild(d),f.style.marginTop="25px",f.style.minWidth="100px"}else c&&(f.style.marginRight="15px",u.appendChild(c));u.appendChild(f),Object(m.d)(t).appendChild(u);var I=new p.popup.VPopup({element:u,autoPan:!0,autoPanMargin:a});i.addPopup(I),u.style.display="block",I.setPosition(n),v[t]=I;var b=I._olOverlay.getElement();if(b.parentElement&&b.parentElement.parentElement){b.parentElement.parentElement.addEventListener("pointermove",function(e){e.stopImmediatePropagation()})}return I}if("string"==typeof r)v[t].getElement().lastChild.innerHTML=r;else if("object"===(void 0===r?"undefined":g(r))){var S=v[t].getElement().lastChild;S.innerHTML="",S.appendChild(r)}v[t].setPosition(n)}}}function o(e){v.hasOwnProperty(e)&&v[e].setPosition(void 0)}function a(e){if(v.hasOwnProperty(e)){y.d.get(e).removePopup(v[e]),delete v[e]}}function i(e){if(e.mapId&&e.tipsId){var t=e.mapId+e.tipsId,r=e.position,n=e.autoPanMargin,o=y.d.get(e.mapId),a=o.getProjection();if(!o)return;if(a!==p.MapPropertys.SystemProj.PROJ4326&&(r=o.transform4326ToMap(r)),h.hasOwnProperty(t))h[t].setPosition(r),h[t].setElement(e.element);else{var i=new p.popup.VPopup({element:e.element,offset:e.offset,positioning:e.positioning,position:r,autoPanMargin:n});o.addPopup(i);var l=i.getElement();if(l.parentElement&&l.parentElement.parentElement){l.parentElement.parentElement.addEventListener("pointermove",function(e){e.stopImmediatePropagation()})}h[t]=i}}}function l(e){if(e.mapId&&e.tipsId){var t=e.mapId+e.tipsId;h.hasOwnProperty(t)&&h[t].setPosition(void 0)}}function u(e){if(e.mapId&&e.tipsId){var t=e.mapId+e.tipsId;h.hasOwnProperty(t)&&(y.d.get(e.mapId).removePopup(h[t]),delete h[t])}}Object.defineProperty(t,"__esModule",{value:!0}),r.d(t,"addPopup",function(){return n}),r.d(t,"removePopup",function(){return o}),r.d(t,"deletePopup",function(){return a}),r.d(t,"addCustomPopup",function(){return i}),r.d(t,"removeCustomPopup",function(){return l}),r.d(t,"deleteCustomPopup",function(){return u}),r.d(t,"addContextMenu",function(){return S}),r.d(t,"removeContextMenu",function(){return w});var s=r(48),c=r.n(s),f=r(49),d=r.n(f),p=r(0),y=(r.n(p),r(1)),m=r(14),g="function"==typeof d.a&&"symbol"==typeof c.a?function(e){return typeof e}:function(e){return e&&"function"==typeof d.a&&e.constructor===d.a&&e!==d.a.prototype?"symbol":typeof e},v={},h={},I=null,b=null,S=function(e){var t=e.element;if(!I){var r=y.d.get(e.mapId);I=new p.popup.VPopup({element:t,autoPan:!0,autoPanDuration:1e3}),r.addPopup(I),b||(b={}),b.contextmenufunc=function(e){var t=r.getOlMap().getEventCoordinate(e.e);"canvas"==e.e.target.nodeName.toLocaleLowerCase()&&I&&I.setPosition(t)},r.on("contextmenu",b.contextmenufunc),b.mapId=e.mapId,b.mapclickfunc=function(){I.setPosition(void 0)},r.on("click",b.mapclickfunc)}},w=function(){if(I){if(I.setPosition(void 0),b&&b.mapId){if(b.mapclickfunc){y.d.get(b.mapId).off("click",b.mapclickfunc),b.mapclickfunc=null}if(b.contextmenufunc){y.d.get(b.mapId).off("contextmenu",b.contextmenufunc),b.contextmenufunc=null}b=null}I=null}}},function(e,t,r){"use strict";function n(e){return"string"==typeof e?document.getElementById(e):e}function o(e,t,r){var n=e.width,o=e.height;void 0===t&&(t=n),void 0===r&&(r=o);var a=document.createElement("canvas"),i=a.getContext("2d");return a.width=t,a.height=r,i.drawImage(e,0,0,n,o,0,0,t,r),a}function a(e,t,r,n){return e=o(e,r,n),e.toDataURL(t)}function i(e,t){if(t=t||"download",Object(y.d)().msie){var r=l(e);window.navigator.msSaveBlob(r,t)}else{var n=document.createElement("a");n.href=e,n.download=t;var o=new MouseEvent("click",{bubbles:!0,cancelable:!1,view:window,detail:0,screenX:0,screenY:0,clientX:0,clientY:0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,button:0,relatedTarget:null});n.dispatchEvent(o)}}function l(e){for(var t=e.split(","),r=t[0].match(/:(.*?);/)[1],n=atob(t[1]),o=n.length,a=new Uint8Array(o);o--;)a[o]=n.charCodeAt(o);return new Blob([a],{type:r})}function u(e){return e=e.toLowerCase().replace(/jpg/i,"jpeg"),"image/"+e.match(/png|jpeg|bmp|gif/)[0]}function s(e,t,r,n,o){if(v.canvas&&v.dataURL){"string"==typeof e&&(e=document.getElementById(e)),void 0===n&&(n="png"),o.indexOf("."+n)<0&&(o=o+"."+n),n=u(n);i(a(e,n,t,r).replace(n,h),o)}}function c(){var e=document.querySelector(".gm-style>div:first-child>div");if(!e)return null;for(var t=e.style.transform,r=t.split(","),n=parseFloat(r[4]),o=parseFloat(r[5]),a=document.querySelectorAll(".gm-style>div:first-child>div"),i=a.length,l=0;l<i;l++){var u=a[l];u.style.transform="none",u.style.left=n,u.style.top=o}return t}function f(e){if(e)for(var t=document.querySelectorAll(".gm-style>div:first-child>div"),r=t.length,n=0;n<r;n++){var o=t[n];o.style.transform=e,o.style.left=0,o.style.top=0}}function d(e,t,r){t=t.split(".");var o=t[t.length-1];t=t[0],e=n(e);var a=c();g()(e,{useCORS:!0,onrendered:function(e){s(e,e.width,e.height,o,t),r&&r(e),f(a)}})}function p(e){var t=void 0;t="string"==typeof e.targetId?e.targetId:e.targetId.id;var r=document.getElementById(t+"_overview");r&&"0"===r.style.opacity&&(r.style.display="none"),r&&"block"===r.style.display&&(r.style.zIndex=1),d(t,e.fileName,e.endCallback),r&&"0"===r.style.opacity&&(r.style.display="block"),r&&r.style.removeProperty("z-index")}Object.defineProperty(t,"__esModule",{value:!0}),r.d(t,"exportImage",function(){return p});var y=r(3),m=r(113),g=r.n(m),v=function(){var e=document.createElement("canvas"),t=e.getContext("2d");return{canvas:!!t,imageData:!!t.getImageData,dataURL:!!e.toDataURL,btoa:!!window.btoa}}(),h="image/octet-stream"},function(e,r){e.exports=t},function(e,t,r){"use strict";function n(e){i||(i=new o.DragZoomInteraction({condition:o.condition.always}),a.d.get(e.mapId)._currOlMap.addInteraction(i)),e.isActive?i.setActive(!0):i.setActive(!1)}Object.defineProperty(t,"__esModule",{value:!0}),r.d(t,"dragZoomInteraction",function(){return n});var o=r(0),a=(r.n(o),r(1)),i=null},function(e,t,r){"use strict";var n=r(25);r.d(t,"a",function(){return n})},function(e,t,r){"use strict";var n=r(56),o=r(57),a=r(117),i=r(118),l=r(119),u=r(120);r.d(t,"f",function(){return n}),r.d(t,"e",function(){return o}),r.d(t,"d",function(){return a}),r.d(t,"c",function(){return i}),r.d(t,"a",function(){return l}),r.d(t,"b",function(){return u})},function(e,t,r){"use strict";function n(e,t,r){var n=void 0;if((d=s.d.get(e))&&!d.get("isDrawing")){t||(t="#0099ff"),r||(r="#0099ff");var a=Object(u.d)("measureTips");a||(a=Object(u.b)("div"),a.setAttribute("id","measureTips")),Object(u.a)(a,"popupTips");var p=new l.popup.VPopup({element:a,offset:[-20,-15],anchor:"bottom-left"});d.addPopup(p);var y=d.get("doubleClickZoom");y&&y.setActive(!1),f=new l.interaction.VDraw({map:d,type:"LineString",style:{strokeColor:t},drawStartFun:function(e){I=e.feature.getGeometry()},drawingFun:function(e){o(),p.setPosition(e.coordinate),void 0==C&&(C=0),a.innerHTML=c.prop("measure.angle.now")+C.toFixed(2)+"<br>"+c.prop("measure.message.helper")},drawEndFun:function(){if(o(),I.getCoordinates().length>=3){null==n&&(n=new l.layer.VectorLayer({wrapX:!1}),d.addLayer([n]),h[g]=n);var e=n._olSource,a=l.AlgorithmUtil.calArcCoords(b,w,P,E),u=new l.geom.LineString(a),s=new l.Feature(u);s.setStyle(new l.style.Style({stroke:new l.style.Stroke({color:t,width:1})})),e.addFeature(s);var c=l.AlgorithmUtil.calEndPointCoords(b,1.5*w,O),m=new l.geom.Point(c),v=new l.Feature(m),T=""+C.toFixed(2),k=new l.style.Style({text:new l.style.Text({text:T+"",stroke:new l.style.Stroke({color:"#FFFFFF",width:1}),fill:new l.style.Fill({color:r}),font:"normal 16px cida Sans Unicode"})});v.setStyle(k),e.addFeature(v),i(S,g)}p&&d.removePopup(p),C=0,g++,f.stopDraw(),d.set("state.measure.geoAngle",!1),d.set("isDrawing",!1),setTimeout(function(){y&&y.setActive(!0)},500)}}),f&&(f.actId=g,v[g]=f,f.startDraw(),d.set("state.measure.geoAngle",!0),d.set("isDrawing",!0))}}function o(){var e=I.getCoordinates();if(e[0][0]==e[1][0]&&e[0][1]==e[1][1]&&e.shift(),e.length<3)return void I.setCoordinates([]);var t=e[0];b=e[1],S=e[2],I.setCoordinates([t,b,S]);var r=(t[0]-b[0])*(t[0]-b[0])+(t[1]-b[1])*(t[1]-b[1]),n=(S[0]-b[0])*(S[0]-b[0])+(S[1]-b[1])*(S[1]-b[1]);w=.2*Math.sqrt(r>n?n:r),P=l.AlgorithmUtil.calAzimuthVal(b,t),E=l.AlgorithmUtil.calAzimuthVal(b,S),T=E-P,T>0?(O=T/2+P,C=180*T/Math.PI):(O=(2*Math.PI+T)/2+P,C=180*(T+2*Math.PI)/Math.PI),C=l.Measure.angle(t,b,S),O>2*Math.PI&&(O-=2*Math.PI)}function a(e){v[e]&&v[e].removeDraw(),delete v[e],h[e]&&h[e]._olSource&&h[e]._olSource.clear(),delete h[e];for(var t=0;t<p.length;t++)e?p[t].hasOwnProperty("_olOverlay")&&p[t]._olOverlay&&p[t]._olOverlay.get("actId")==e&&d.removePopup(p[t]):d.removePopup(p[t]);f=null,d.set("state.measure.geoAngle",!1),d.set("isDrawing",!1)}function i(e,t){var r=Object(u.b)("div","measure-close");y&&(r.style.zIndex=y++),r.setAttribute("actId",t);var n=new l.popup.VPopup({element:r,position:e,offset:m});d.addPopup(n),n._olOverlay.set("actId",t),p.push(n),r.addEventListener("click",function(e){var t=e.target.getAttribute("actId");e.stopImmediatePropagation(),a(t)})}Object.defineProperty(t,"__esModule",{value:!0}),r.d(t,"measureAngle",function(){return n}),r.d(t,"clearMeasure",function(){return a});var l=r(0),u=(r.n(l),r(14)),s=r(1),c=r(25),f=void 0,d=void 0,p=[],y=20,m=[3,-1],g=1,v={},h={},I=void 0,b=void 0,S=void 0,w=void 0,P=void 0,E=void 0,O=0,C=0,T=void 0},function(e,t,r){"use strict";function n(e){a.d.get(e.mapId)&&("geoLine"===e.measureType&&e.isOpen&&i.measureLine(e),"geoArea"!==e.measureType&&"Box"!==e.measureType||e.isOpen&&l.measureArea(e))}function o(e){var t=a.d.get(e.mapId);if(t){var r=e.measureType||"geoLine";return"geoArea"!==e.measureType&&"Box"!==e.measureType||(r="geoArea"),t.get("state.measure."+r)}}Object.defineProperty(t,"__esModule",{value:!0}),r.d(t,"measure",function(){return n}),r.d(t,"isMeasuring",function(){return o});var a=r(1),i=r(56),l=r(57)},function(e,t,r){"use strict";function n(e){var t=i.d.get(e.mapId),r=i.c.get(e.mapId+"_"+e.layerId);if(t&&r){var n=e.dragStartBackFun,o=e.dragingBackFun,u=e.dragEndBackFun;l&&(l.stopDrag(),l=null),l=new a.interaction.VDrag({map:t,layerObj:r,dragStartFun:n,dragingFun:o,dragEndFun:u}),l.startDrag()}}function o(){l&&l.stopDrag()}Object.defineProperty(t,"__esModule",{value:!0}),r.d(t,"addDrag",function(){return n}),r.d(t,"removeDrag",function(){return o});var a=r(0),i=(r.n(a),r(1)),l=void 0},function(e,t,r){"use strict";function n(e){if(b=e.mapId,I=f.d.get(b),b&&I&&!I.get("isDrawing")){var t={},r=w[e.type];t.fillColor=e.fillColor||"transparent",t.strokeColor=e.strokeColor||"#0099FF",t.strokeWidth=e.strokeWidth||3,"Circle"==r&&(t.radius=e.imageRadius||7);var n=e.showCloseIcon,i=e.showGeometry,l=e.drawStartFun,u=e.drawingFun,d=I.get("doubleClickZoom");d&&d.setActive(!1);var p=function(t){var l=void 0,u=t.feature.getGeometry(),c=[],f=void 0;if(r)if("Point"==r)c=u.getCoordinates(),f=c,l=a(c);else if("Polygon"==r){c=u.getCoordinates();var p=c[0];f=p[p.length-2],l=a(p)}else if("Rectangle"==r||"Circle"==r)if(c=u.flatCoordinates,f=[c[2],c[3]],"Circle"==r){var g=u.getCenter(),v=u.getRadius(),h=o({center:g,radius:v});l={center:h.center,radius:h.radius,lastCoordinate:a(u.getLastCoordinate())}}else l=a(u.getCoordinates());else if("Square"==r){c=u.getCoordinates();var b=c[0];f=b[4],l=a(b)}else c=u.getCoordinates(),f=c[c.length-1],l=a(c);if(n&&s(f,m),y&&(y.stopDraw(),y._isDrawing=!1,I.set("state.measure."+r,!1),I.set("isDrawing",!1)),i||setTimeout(function(){y&&y.removeDraw()},500),e.endCallback){var S={actId:m,coordinates:l,mapId:t.target.map_.getTarget()};e.endCallback(S)}m++,setTimeout(function(){d&&d.setActive(!0)},500)},g=new c.style.Style({fill:new c.style.Fill({color:"transparent"}),stroke:new c.style.Stroke({color:"rgba(0,153,255,1)",width:5}),image:new c.style.Circle({radius:6,fill:new c.style.Fill({color:"rgba(0,153,255,1)"}),stroke:new c.style.Stroke({color:"rgba(255,255,255,1)",width:1.5})})});y=new c.interaction.VDraw({map:I,style:t,type:r,drawingStyle:g,drawStartFun:l,drawingFun:u,drawEndFun:p}),y&&(y.actId=m,h[b]||(h[b]={}),h[b][m]=y,y.startDraw(),y._isDrawing=!0,I.set("state.measure."+r,!0),I.set("isDrawing",!0))}}function o(e){var t={center:e.center,radius:e.radius};return t.center=a(e.center),p.MAPPROPERTY.TRANSFORMIND||(t.radius=e.radius*c.OlProj.METERS_PER_UNIT.degrees),t}function a(e){if(p.MAPPROPERTY.TRANSFORMIND&&e&&e instanceof Array){if(e[0]&&e[0]instanceof Array){if(e[0][0]&&e[0][0]instanceof Array){for(var t=[],r=0;r<e[0].length;r++)t.push(c.proj.normalTransform(e[0][r],!0));return t}for(var n=[],o=0;o<e.length;o++)n.push(c.proj.normalTransform(e[o],!0));return n}return c.proj.normalTransform(e,!0)}return e}function i(e){if(e){var t=f.d.get(e.mapId);if(!t)return;var r=w[e.type];return!!t.get("state.measure."+r)}return y._isDrawing}function l(e,t){if(void 0!==t){h[e][t]&&h[e][t].removeDraw(),delete h[e][t];for(var r=0;r<S.length;r++)if(S[r].hasOwnProperty("_olOverlay")&&S[r]._olOverlay&&S[r]._olOverlay.get("actId")==t){I.removePopup(S[r]),S.splice(r,1);break}}else{if(h[e]){for(var n in h[e])h[e][n]&&h[e][n].removeDraw(),delete h[e][n];for(var o=S.length-1;o>=0;o--)S[o].hasOwnProperty("_olOverlay")&&S[o]._olOverlay&&(I.removePopup(S[o]),S.splice(o,1))}if(y&&(y._isDrawing=!1),I){I.set("isDrawing",!1);for(var a in w){var i=w[a];I.set("state.measure."+i,!1)}}}}function u(){if(y)return y}function s(e,t){var r=Object(d.b)("div","measure-close");g&&(r.style.zIndex=g++),r.setAttribute("actId",t);var n=new c.popup.VPopup({element:r,position:e,offset:v});I.addPopup(n),n._olOverlay.set("actId",t),S.push(n),r.addEventListener("click",function(e){var t=e.target.getAttribute("actId");e.stopImmediatePropagation(),l(b,t)})}Object.defineProperty(t,"__esModule",{value:!0}),r.d(t,"DrawTypes",function(){return w}),r.d(t,"drawGeometry",function(){return n}),r.d(t,"isDrawing",function(){return i}),r.d(t,"clearGeometryDraw",function(){return l}),r.d(t,"getGeometryDrawer",function(){return u});var c=r(0),f=(r.n(c),r(1)),d=r(14),p=r(2),y=void 0,m=1,g=20,v=[8,-1],h={},I=void 0,b=void 0,S=[],w={Point:"Point",LineString:"LineString",Polygon:"Polygon",Circle:"Circle",Square:"Square",Box:"Rectangle",Rectangle:"Rectangle"}}])});
var eGIS=function(e){function t(r){if(a[r])return a[r].exports;var o=a[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var a={};return t.m=e,t.c=a,t.p="../build",t(0)}([function(e,t,a){var r=a(1),o=r.Util,n=a(2),i=o.extend({},o,n),l=r.BaseLayer,s=a(5),c=o.extend({},l,s),d=r.Transform,u=a(6),p=o.extend({},d,u),m=r.Map,y=a(7),f=o.extend({},m,y),g=r.Popup,h=a(8),v=o.extend({},g,h);e.exports={layerCache:r.layerCache,mapCache:r.mapCache,Constant:r.Constant,Popup:v,HashMap:r.HashMap,Transform:p,PreLoad:r.PreLoad,Events:r.Events,Map:f,AcrossLine:r.AcrossLine,GStreetView:r.GStreetView,WmsMap:r.WmsMap,MapBox:r.MapBox,BaseLayer:c,HeatMap:r.HeatMap,Highlight:r.Highlight,Icon:r.Icon,Line:r.Line,PointCluster:r.PointCluster,IconCluster:r.IconCluster,Wms:r.Wms,Wmts:r.Wmts,Grid:r.Grid,BLine:r.BLine,Point:r.Point,Polygon:r.Polygon,ServicePoint:r.ServicePoint,ServiceLine:r.ServiceLine,ServicePolygon:r.ServicePolygon,Render:r.Render,RenderToken:r.RenderToken,ServiceHeatMap:r.ServiceHeatMap,Measure:r.Measure,MeasureAngle:r.MeasureAngle,Geometry:r.Geometry,PolygonQuery:r.PolygonQuery,DragZoomInteraction:r.DragZoomInteraction,Drag:r.Drag,Util:i,DomUtil:r.DomUtil,OlUtil:r.OlUtil,I18n:r.I18n,ImageUtil:a(9),OriginalAjax:r.OriginalAjax,demoConstant:r.demoConstant,Algorithm:a(10),AdminRegion:a(11),Bubble:a(12),BubbleCircle:a(13),SearchObject:a(14),Overlay:a(15),Curve:a(16),LineStraight:a(17),LineAdd:a(18),Network:a(19),BaseMapControl:a(20),StaticLayer:a(21),TrackShow:a(22),SpatialCalc:a(23),DragAndDropFiles:a(24),DynamicLayers:a(25),webSDK:a(26)}},function(e,t){e.exports=window.commongis},function(e,t,a){var r=a(3),o=a(1),n=(o.Constant,a(4)),i=1e-7,l=function(e,t){return i>Math.abs(e[0]-t[0])&&i>Math.abs(e[1]-t[1])},s=function(e,t){if(t instanceof Array&&t.length>2){for(var a=0;a<t.length;a++){var r=t[a];if(a!=t.length-1){var n=t[a+1];if(o.Util.isPointInLine(e,r,n))return!0}}return!1}return o.Util.isPointInLine(e,t[0],t[1])},c=function(e,t){if(e){var a,o=e.getGeometry().clone();switch(o.getType()){case"Point":a=turf.point(o.getCoordinates());break;case"LineString":a=turf.lineString(o.getCoordinates());break;case"Polygon":a=turf.polygon(o.getCoordinates())}var n=turf.buffer(a,t/1e3),i={};return i.feature=new r.geom.Polygon(n.geometry.coordinates),i.coordinates=n.geometry.coordinates,i}return null},d=function(){return new n.Map};e.exports={isPointsSamePosition:l,isPointInLines:s,getFeatureBuffer:c,map:d}},function(e,t){e.exports=window.lm},function(e,t){function a(){this._keys=new Array,this._vals=new Array,this.size=0}a.prototype.put=a.prototype.set=function(e,t){var a=!1,r=this.getIndex(e);return r==-1?(this._keys.push(e),this._vals.push(t),this.size+=1,a=!0):this._vals[r]=t,a},a.prototype.remove=a.prototype["delete"]=function(e){var t=!1;try{for(var a=0;a<this._keys.length;a++)if(this._keys[a]==e){this._keys.splice(a,1),this._vals.splice(a,1),this.size-=1;break}t=!0}catch(r){t=!1}return t},a.prototype.getIndex=function(e){var t=-1;try{for(var a=0;a<this._keys.length;a++)if(this._keys[a]==e){t=a;break}}catch(r){t=-1}return t},a.prototype.containsKey=a.prototype.has=function(e){var t=!1;try{for(var a=0;a<this._keys.length;a++)this._keys[a]==e&&(t=!0)}catch(r){t=!1}return t},a.prototype.get=function(e){try{for(var t=0;t<this._keys.length;t++)if(this._keys[t]==e)return this._vals[t]}catch(a){return null}},a.prototype.size=function(){return this._keys.length},a.prototype.isEmpty=function(){return 0==this._keys.length},a.prototype.clear=function(){var e=!0;try{this._keys=[],this._vals=[],this.size=0}catch(t){e=!1}return e},a.prototype.forEach=function(e){for(var t=this._keys.length,a=0;a<t;a++)e(this._vals[a],this._keys[a])},e.exports={Map:a}},function(e,t,a){var r=a(1),o=a(3),n={},i=function(e){e.type="click",n.hasOwnProperty(e.mapId)||(n[e.mapId]={}),n[e.mapId][e.layerId]=e.callbackfunc,r.BaseLayer.addCustomEvent({type:e.type,mapId:e.mapId,layerId:e.layerId,callbackfunc:function(t){if(!t)return!1;var a=t.feature,r=t.layer,i=r&&r.getOlMap(),l=i&&i.get("target");a&&r.get("businessType")===eGIS.Constant.BUSINESSTYPE.ICONCLUSTER;var s,c=t.e,d=a&&t.feature.getGeometry().getExtent(),u=d&&o.extent.getCenter(d),p=c&&eGIS.OlUtil.reTransform(c.coordinate);if(u&&eGIS.Constant.MAPPROPERTY.CURRENT_PROJECTION===eGIS.Constant.PROJ.EPSG_4326&&(s=eGIS.OlUtil.reTransform(u)),void 0!==typeof n[e.mapId][e.layerId]&&"function"==typeof n[e.mapId][e.layerId]){var m=function(){if(a){if(a.get("features")){var e=[];if(a.get("features").length>1){var t=a.get("features");t.forEach(function(t){e.push(t.getId())})}else e=a.get("features")[0].getId();return e}return a.getId()?a.getId():a.get("id")}},y=function(){if(a){if(a.get("features")){var e=[];if(a.get("features").length>1){var t=a.get("features");t.forEach(function(t){e.push(t.get("data"))})}else e=a.get("features")[0].get("data");return e}return a.get("data")}},f=n[l][r.get("layerId")];if(f){var g={e:c,layer:r,feature:a,data:y(),businessType:r&&r.get("businessType"),layerType:r&&r.get("businessType"),mapId:l,geoId:m(),featureId:m(),layerId:!!r&&r.get("layerId"),featureCenter:u,lonLat:s?s:[108,34],pixLonLat:p};f(g)}}}})},l={},s=function(e){e.type="rightClick",l.hasOwnProperty(e.mapId)||(l[e.mapId]={}),l[e.mapId][e.layerId]=e.callbackfunc,r.BaseLayer.addCustomEvent({type:e.type,mapId:e.mapId,layerId:e.layerId,callbackfunc:function(e){if(!e)return!1;var t=e.layer,a=t&&t.getOlMap(),r=a&&a.get("target"),n=e.feature,i=function(){if(n){if(n.get("features")){if(n.get("features").length>0){var e=n.get("features"),t=[];return e.forEach(function(e){t.push(e.getId())}),t}return}return n.getId()?n.getId():n.get("id")}},s=l[r][t.get("layerId")];if(s){var c={mapId:r,layerId:t.get("layerId"),layerType:t.get("businessType"),popupPosition:e.clickCenter,lonLat:eGIS.OlUtil.reTransform(o.extent.getCenter(n.getGeometry().getExtent())),geoId:i(),points:!!n.getProperties()&&!!n.getProperties().data&&n.getProperties().data.coordinates,features:n.get("features")?n.get("features"):n};s(c)}}})},c=null,d={},u={},p=function(e){e.type="mouseMove",d.hasOwnProperty(e.mapId)||(d[e.mapId]={}),u.hasOwnProperty(e.mapId)||(u[e.mapId]={}),d[e.mapId][e.layerId]=e.callbackfunc,u[e.mapId][e.layerId]=e.callbackfunc,r.BaseLayer.addCustomEvent({mapId:e.mapId,layerId:e.layerId,type:e.type,callbackfunc:function(e){if(!e)return!1;var t=e.e,a=e.layer,r=a&&a.getOlMap(),n=r&&r.get("target"),i=e.feature,l=!!a&&a.getSource();if(l&&l.hasOwnProperty("getSource")){var s=i.get("features"),p=!1;if(s.forEach(function(e){c.forEach(function(t){e&&t&&e.getId()===c.getId()&&(p=!0)})}),p)return null;c=s}else{if(i&&c&&i.getId()===c.getId())return null;c=i}var m=i&&i.getGeometry().getExtent(),y=m&&o.extent.getCenter(m),f=y&&eGIS.OlUtil.reTransform(y),g=t&&t.coordinate,h=!1;if(i&&i.set("eCoordinates",eGIS.OlUtil.reTransform(g)),i){var v=function(){var e=[];if(i.get("data"))e=i.get("data");else{var t=i.get("features");t&&(t.length>1?(h=!0,t.forEach(function(t){e.push(t.get("data"))})):e=t[0].get("data"))}return e},I=d[n][a.get("layerId")];I?I({centerCoordinate:eGIS.Util.gcjTransform(y),lonLat:eGIS.Util.gcj_decTransform(f),mapId:n,layerId:a.get("layerId"),layer:a,features:i.get("features")?i.get("features"):i,eCoordinate:i.get("eCoordinates"),tipCoordinates:i.get("tipCoordinates"),infor:v(),isCluster:h,position:eGIS.Util.gcj_decTransform(f)}):eGIS.Popup.removeSuspensionPopup(n)}else{var I=u[n][a.get("layerId")];I&&I({layer:a,features:e.feature}),eGIS.Popup.removeSuspensionPopup(n)}}})},m=function(e){var t=e.mapId,a=(e.layerId+"_"+t,r.BaseLayer.getLayer({layerId:e.layerId,mapId:e.mapId}));r.BaseLayer.clearFeatureOnLayer(a)},y={},f=function(e){if("function"==typeof e.callbackfunc){e.type="pointerdown",y.hasOwnProperty(e.mapId)||(y[e.mapId]={}),y[e.mapId][e.layerId]=e.callbackfunc;var t=eGIS.BaseLayer.getLayer(e);y[e.mapId][e.layerId]&&t.off(e.type),t.on(e.type,y[e.mapId][e.layerId])}},g=function(e){e.type="click",delete n[e.mapId][e.layerId],r.BaseLayer.removeCustomEvent(e)},h=function(e){e.type="rightClick",delete l[e.mapId][e.layerId],r.BaseLayer.removeCustomEvent(e)},v=function(e){e.type="mouseMove",delete customCallbackFunc[e.mapId][e.layerId],r.BaseLayer.removeCustomEvent(e)},I=function(e){e.type="pointerdown";var t=eGIS.BaseLayer.getLayer(e);t.off(e.type),delete y[e.mapId][e.layerId]};e.exports={registerClick:i,registerMouseHover:p,registerRightClick:s,registerPointerDown:f,removeAllFeatures:m,removeClick:g,removeRightClick:h,removeMouseHover:v,removePointerDown:I}},function(e,t,a){var r=a(1),o=function(e){var t=r.Map.getMapObj(e.mapId).getOlMap();return t.getPixelFromCoordinate(e.coordinate)},n=function(e){var t=r.Map.getMapObj(e.mapId).getOlMap();return t.getCoordinateFromPixel(e.pixel)};e.exports={getPixelFromCoordinate:o,getCoordinateFromPixel:n}},function(e,t,a){function r(e){var t=s.getMapObj(e).getOlMap();return t.getView().getMaxResolution()}function o(e){var t=s.getMapObj(e).getOlMap();return t.getView().getMinResolution()}function n(e){return s.getMapObj(e).getOlMap().getView().getResolution()}function i(e){var t=s.getMapObj(e);t&&t.off("singleclick"),t&&"function"==typeof t.clickcallback&&(t.clickcallback=void 0)}var l=a(1),s=l.Map,c=function(e,t,a){void 0!=e&&(void 0!=t&&"HUAWEI_MAP"==t?l.Constant.HWMapParam.proj==l.Constant.MAPPROPERTY.CURRENT_PROJECTION?(l.Constant.HWMapParam.mapId=e,l.Map.updateMap(l.Constant.HWMapParam)):(l.Map.removeMap([e]),l.Constant.HWMapParam.mapId=e,l.Map.createMap(l.Constant.HWMapParam)):l.Constant.wjMapParam.proj==l.Constant.MAPPROPERTY.CURRENT_PROJECTION?(l.Constant.wjMapParam.mapId=e,l.Map.updateMap(l.Constant.wjMapParam)):(l.Map.removeMap([e]),l.Constant.wjMapParam.mapId=e,l.Map.createMap(l.Constant.wjMapParam)),void 0!=a&&a())};e.exports={updateBaseMap:c,removeCustomSingleClick:i,getCurrentResolution:n,getMaxResolution:r,getMinResolution:o}},function(e,t,a){var r=a(1),o=a(3),n=r.DomUtil,i=r.Map,l=(r.Util,r.Util),s=r.OlUtil,c=r.Constant,d=[],u=function(e){var t=e.content,a=l.gcjTransform(e.position),r=s.transform(a),d=e.mapId;if(void 0!==d){var u="ol-susPopupContainer-id"+d,m=n.getDom(u);m&&m.parentNode.removeChild(m);var y=n.createDom({tagName:"div",attributes:{id:u,"class":"ol-susPopupContainer-class"}}),f=n.createDom({tagName:"a",attributes:{id:"ol-popupClose-id","class":"ol-popupClose-class",href:"javascript:void(0);"}}),g=n.createDom({tagName:"div",attributes:{id:"ol-susPopupContent-id"}});if(!t)return void console.warn("popup content invalid");"string"==typeof t?g.innerHTML=t:g.appendChild(t),g.style.minWidth="100px",y.appendChild(g),y.appendChild(f),document.getElementById(d).appendChild(y),p(d);var h=new o.Overlay({element:y,autoPan:!0,autoPanAnimation:{duration:c.POPUP_PROPERTY.PANDARATION},autoPanMargin:c.POPUP_PROPERTY.MARGIN});return h.set("type","suspensionPop"),i.getMapObj(d).getOlMap().addOverlay(h),y.style.display="block",f.style.position="absolute",f.style.top="2px",f.style.right="8px",f.onclick=function(){p(d)},h.setPosition(r),h}},p=function(e){var t=i.getMapObj(e).getOlMap();if(void 0!==t){var a=t.getOverlays();a.forEach(function(e,a){var r=e.get("type");void 0!==r&&"suspensionPop"===r&&t.removeOverlay(e)})}};e.exports={getPopups:function(){return d},addSuspensionPopup:u,removeSuspensionPopup:p}},function(e,t){function a(e){$(".copy-body")&&l([".copy-body","#canvasResult"]),e.fillColor=e.fillColor?e.fillColor:"rgba(255,255,255,.1)",e.strokeColor=e.strokeColor?e.strokeColor:"#0099FF",e.strokeWidth=e.strokeWidth?e.strokeWidth:2,"polygon"==e.type&&r(e),"circle"!=e.type&&"box"!=e.type||o(e)}function r(e){if(!s.cutPolygon){var t=eGIS.OlUtil.getLayer({mapId:e.mapId,layer_id:"tempPolygon"});t||eGIS.Polygon.addLayer({mapId:e.mapId,layerId:"tempPolygon",defaultVisibleLevel:3}),s.cutPolygon=!0,eGIS.Geometry.drawGeometry({mapId:e.mapId,type:eGIS.Geometry.DrawTypes.Polygon,isOpen:!0,showCloseIcon:!1,fillColor:e.fillColor,strokeColor:e.strokeColor,strokeWidth:0,showGeometry:!1,clickCallback:function(e){},endCallback:function(t){setTimeout(function(){targetUrl=html2canvas(document.body,{onrendered:function(a){for(var r=t.coordinates,o=[],d=[],u=[],p=[],m=0;m<r.length-1;m++){var y=eGIS.Transform.getPixelFromCoordinate({mapId:e.mapId,coordinate:eGIS.OlUtil.transform(r[m])});u.push(y),o.push(u[m][0]),d.push(u[m][1])}copyDomCanvas=a,document.body.appendChild(copyDomCanvas),o.sort(c),d.sort(c),$.each(u,function(e,t){o[o.length-1]==t[0]&&(p[0]=t[0]),d[d.length-1]==t[1]&&(p[1]=t[1])});var f=o[0]-o[o.length-1],g=d[0]-d[d.length-1];$("#canvasResult").remove(),$("body").append('<canvas id="canvasResult" width='+f+" height="+g+'style="display:none"></canvas>'),$("body").append('<div class="result" style="display:none"><a class="ok"></a></div>'),$(".result").css({top:200,left:300,color:"#fff","border-color":"#0099FF",position:"fixed","z-index":4,cursor:"pointer"}),$(".result a").css({color:"#fff"});var h=document.getElementById("canvasResult"),v=h.getContext("2d");v.lineWidth=2,v.beginPath(),n(u,v,p),v.closePath(),v.clip(),v.drawImage(copyDomCanvas,p[0]+document.getElementById(e.mapId).offsetLeft,p[1]+document.getElementById(e.mapId).offsetTop,f,g,0,0,f,g);var I=h.toDataURL("image/png");i($(".ok"),"mapScreenShot"+(new Date).getTime()+".png",I),e.callback&&e.callback(I),$(".ok")[0].click(),setTimeout(function(){l([copyDomCanvas,".result"]),$("body").css("cursor","default"),s.cutPolygon=!1},100)}})},600)}})}}function o(e){if(!s.cutRule){var t,a={},r="canvasPage",o=e.fillColor,n=e.strokeColor,c=e.strokeWidth;s.cutRule=!0,html2canvas(document.body,{onrendered:function(d){t=d,document.body.appendChild(t),this._calculateXY=function(e){return{x:e.clientX,y:e.clientY}};var u=this,p=0,m=0,y=!1,f="name"+(new Date).getTime(),g="<style> .copy-body {position: fixed;top: 0;left: 0;z-index:1}#"+r+" {position: fixed;top: 0;left: 0;z-index: 98;}";g+="#canvasWrapperId {position: fixed;top: 0;left: 0;z-index: 99;}#shot {display: inline-block;padding: 5px 15px;border: 1px solid #cccccc;border-radius: 5px;cursor: pointer;}",g+=".result {position: fixed;z-index: 4;cursor: pointer;}.result a {padding: 5px 15px;border: 1px solid;border-radius: 12px;margin-right: 5px;font-size: 12px;}</style>",$("#canvasResult").remove(),$("#"+r).remove(),$("head").append(g),$("body").css("cursor","crosshair").append("<canvas id="+r+" width="+d.width+" height="+d.height+"></canvas>"),$(t).addClass("copy-body"),$("#"+r).mousedown(function(t){a={},$(".result").remove(),$("#"+r).removeLayer(f),f+=1,p=u._calculateXY(t).x,m=u._calculateXY(t).y,y=!0,"circle"==e.type&&(a={type:"arc",strokeStyle:n,strokeWidth:c,fillStyle:o,name:f,fromCenter:!0,x:p,y:m,radius:1}),"box"==e.type&&(a={type:"rectangle",strokeStyle:n,strokeWidth:c,fillStyle:o,name:f,fromCenter:!1,x:p,y:m,width:1,height:1}),$("#"+r).addLayer(a)}).mousemove(function(t){if(y){$("#"+r).removeLayer(f);var o=u._calculateXY(t).x,n=u._calculateXY(t).y,i=o-p,l=n-m,s=i,c=l,d=Math.sqrt(s*s+c*c);"circle"==e.type&&(a.radius=d),"box"==e.type&&(a.width=i,a.height=l),$("#"+r).addLayer(a),$("#"+r).drawLayers()}}).mouseup(function(a){var o=u._calculateXY(a).x,n=u._calculateXY(a).y,c=Math.abs(o-p),d=Math.abs(n-m),f=c,g=d,h=Math.sqrt(f*f+g*g).toFixed(0);if(y=!1,$("body").append('<div class="result" style="display:none"><a class="ok"></a></div>'),$(".result").css({top:n-m<0?m+10:n+10,left:o-p<0?p-64:o-64,color:"#0099FF","border-color":"#0099FF"}),"box"==e.type){$("body").append('<canvas id="canvasResult" width='+c+" height="+d+' style="display:none"></canvas>');var v=document.getElementById("canvasResult"),I=v.getContext("2d");I.drawImage(t,o-p>0?p:o,n-m>0?m:n,c,d,0,0,c,d)}if("circle"==e.type){$("body").append('<canvas id="canvasResult" width='+(2*h+e.strokeWidth)+" height="+(2*h+e.strokeWidth)+' style="display:none;background:yellow;z-index:9999"></canvas>');var v=document.getElementById("canvasResult"),I=v.getContext("2d");I.arc(h,h,h,0,2*h*Math.PI),I.clip(),I.drawImage(t,o-p>0?p-h:p-h,n-m>0?m-h:m-h,2*h,2*h,0,0,2*h,2*h)}var S=v.toDataURL("image/png");i($(".ok"),"mapScreenShot"+(new Date).getTime()+".png",S),e.callback&&e.callback(S),setTimeout(function(){$(".ok")[0].click(),l([t,"#"+r,".result"]),$("body").css("cursor","default"),s.cutRule=!1},500)})}})}}function n(e,t,a){t.moveTo(e[0][0]-a[0],e[0][1]-a[1]);for(var r=1;r<e.length;r++){var o=e[r][0]-a[0],n=e[r][1]-a[1];t.lineTo(o,n)}}function i(e,t,a){e.attr({download:t,href:a})}function l(e){e&&(Array.isArray(e)?e.forEach(function(e){$(e).remove()}):console.error("resetObj must be a Array")),$("body").css("cursor","default")}var s={cutPolygon:!1,cutRule:!1},c=function(e,t){return e<t?1:e>t?-1:0};e.exports={screenShot:a,exportImage:commongis.ImageUtil.exportImage}},function(e,t,a){function r(e){if(!e||!h.isArray(e))return 0;var t=e[0],a=e[1];return t&&a?g.haversineDistance(n(t),n(a)):0}function o(e){if(!e||!h.isArray(e))return 0;for(var t=[],a=e.length,r=0;r<a;r++)t.push(n(e[r]));return g.geodesicArea(t)}function n(e){return h.isArray(e)&&2===e.length&&h.isFinite(e[0])&&h.isFinite(e[1])?[Number(e[0]),Number(e[1])]:h.isObject(e)&&h.isFinite(e.lon)&&h.isFinite(e.lat)?[Number(e.lon),Number(e.lat)]:h.isObject(e)&&h.isFinite(e.longitude)&&h.isFinite(e.latitude)?[Number(e.longitude),Number(e.latitude)]:null}function i(e,t,a,r,o,n,i,l){var s,c,d,u,p,m={x:null,y:null,onLine1:!1,onLine2:!1};return s=(l-n)*(a-e)-(i-o)*(r-t),0===s?null!==m.x&&null!==m.y&&m:(c=t-n,d=e-o,u=(i-o)*c-(l-n)*d,p=(a-e)*c-(r-t)*d,c=u/s,d=p/s,m.x=e+c*(a-e),m.y=t+c*(r-t),c>0&&c<1&&(m.onLine1=!0),d>0&&d<1&&(m.onLine2=!0),!(!m.onLine1||!m.onLine2)&&[m.x,m.y])}function l(e){var t={points:[],cross:!1};return e.forEach(function(a){e.forEach(function(e){for(var r=0;r<a.length-1;r++)for(var o=0;o<e.length-1;o++){var n=i(a[r][0],a[r][1],a[r+1][0],a[r+1][1],e[o][0],e[o][1],e[o+1][0],e[o+1][1]);n&&(t.cross=!0,t.points.push([n[0],n[1]]))}})}),t}function s(e){var t=0,a=0;e.forEach(function(e){t+=parseFloat(e[1]),a+=parseFloat(e[0])}),t/=e.length,a/=e.length;var r=[a,t];return r}function c(e){var t=new u.geom.Polygon([e]),a=t.getExtent(),r=u.extent.getCenter(a);return r}function d(e){if(!e||!h.isArray(e))return 0;for(var t=e.length,a=0,r=0;r<t-1;r++){var o=e[r],i=e[r+1];if(!o||!i)return 0;a+=g.haversineDistance(n(o),n(i))}return a}var u=a(3),p=commongis.Util,m=function(e,t,a,r,o){var n,i,l=a,s=5,c=o/s,d=s*Math.PI/180,u=Math.PI/2-(r+o/2)/180*Math.PI,p=[];p.push([e,t]);for(var m=0;m<c+1;m++)n=e+l*Math.cos(u),i=t+l*Math.sin(u),p.push([n,i]),u+=d;return p.push([e,t]),p},y=function(e,t,a,r,o){var n=[];n.push([e,t]);var i=a,l=Math.PI/2-(r+o/2)/180*Math.PI,s=e+i*Math.cos(l),c=t+i*Math.sin(l);n.push([s,c]),l=Math.PI/2-(r-o/2)/180*Math.PI;var d=e+i*Math.cos(l),u=t+i*Math.sin(l);return n.push([d,u]),n.push([e,t]),n},f=function(e,t,a,r,o){var n=a,i=[],l=Math.PI/2-(r+o/2)/180*Math.PI,s=e+n/2*Math.cos(l),c=t+n/2*Math.sin(l);l=Math.PI/2-(r-o/2)/180*Math.PI;var d=e+n/2*Math.cos(l),u=t+n/2*Math.sin(l);l=Math.PI/2-r/180*Math.PI;var p=e+n*Math.cos(l),m=t+n*Math.sin(l),y=e+n/2*Math.cos(l),f=t+n/2*Math.sin(l);return i.push([e,t]),i.push([y,f]),i.push([d,u]),i.push([p,m]),i.push([s,c]),i.push([y,f]),i.push([e,t]),i},g=new u.Sphere(6378137),h=p;e.exports={checkGeometryCross:l,createSector:m,createArrow:f,createTriangle:y,calcLength:r,calcArea:o,getGeomCenter:s,getGeomExtentCenter:c,calcTrackLength:d}},function(e,t,a){var r=a(1),o=a(3),n=r.layerCache,i=r.BaseLayer,l=r.Util,s=r.OlUtil,c=r.Constant,d="ADMIN_REGION";c.BUSINESSTYPE.ADMIN_REGION=d;var u=function(e){var t=e.mapId+"_"+e.layerId,a=null;a=n.containsKey(t)?n.get(t):i.createLayer(e),e.multiple&&a.set("multiple",e.multiple),a.set("businessType",c.BUSINESSTYPE.ADMIN_REGION),void 0!=e.minShowLevel&&a.set("minShowLevel",parseInt(e.minShowLevel)),void 0!=e.maxShowLevel&&a.set("maxShowLevel",parseInt(e.maxShowLevel)),void 0!==e.zindex&&a.setZIndex(e.zindex),p(e)},p=function(e){var t=[],a=e.datas;if(l.isValid(a)||a.length>0){a.forEach(function(e){var a=e.coordinates;a=l.multigcjTransform(a);var r=new o.geom.Polygon([a]);c.MAPPROPERTY.TRANSFORMIND&&r.transform(c.PROJ.EPSG_4326,c.PROJ.EPSG_3857);var n=o.extent.getCenter(r.getExtent()),i=new o.Feature({geometry:r,labelPoint:s.reTransform(n),businessType:eGIS.Constant.BUSINESSTYPE.ADMIN_REGION,data:e});i.setId(e.id);var d=new o.style.Style({fill:new o.style.Fill({color:e.fillColor||null}),stroke:new o.style.Stroke({color:e.strokeColor||null,width:e.strokeWidth||1}),text:new o.style.Text({text:e.label?e.label:"",fill:new o.style.Fill({color:e.labelFillColor||"black"}),font:"normal 14px Arial",stroke:new o.style.Stroke({color:"#ffffff",width:3})})});i.setStyle(d),t.push(i)});var r=n.get(e.mapId+"_"+e.layerId);void 0!=r&&r.getSource().addFeatures(t)}};e.exports={createLayer:u,setLayerData:p,addFeature:u}},function(e,t,a){var r=a(1),o=a(3),n=r.HashMap,i=r.BaseLayer,l=r.Util,s=r.OlUtil,c=r.Constant,d=r.layerCache,u=c.BUSINESSTYPE.BUBBLE="BUBBLE",p=function(e){var t=e.mapId+"_"+e.layerId,a=null;d.containsKey(t)?a=d.get(t):(i.createLayer(e),a=d.get(t)),e.multiple&&a.set("multiple",e.multiple),a.set("businessType",u);var r=void 0!==e.zindex?e.zindex:c.Z_INDEX.SITE;if(a.setZIndex(r),void 0!=e.minShowLevel&&a.set("minShowLevel",parseInt(e.minShowLevel)),void 0!=e.maxShowLevel&&a.set("maxShowLevel",parseInt(e.maxShowLevel)),void 0!==e.datas){var o=a.getSource();e.source=o,m(e)}},m=function(e){var t=[],a=e.datas,r=e.layerId+"_"+e.mapId,i=n.get(r);(l.isValid(a)||a.length>0)&&(a.forEach(function(e,a,r){var n=l.gcjTransform(e.coordinate);n=s.transform(n);var d=new o.Feature({geometry:new o.geom.Point(n),data:e,businessType:c.BUSINESSTYPE.BUBBLE});d.setId(e.id),d.set("id",e.id);var u=new o.style.Style({image:new o.style.Circle({radius:e.radius?e.radius:5,fill:new o.style.Fill({color:e.fillColor||"red"}),stroke:new o.style.Stroke({color:e.strokeColor||"#319FD3",width:e.strokeWidth||1})})});d.setStyle(u),d.set("vectorType",c.BUSINESSTYPE.BUBBLE),d.set("layer",i),d.set("data",e),d.set("defaultStyle",u),t.push(d)}),void 0!==e.source?e.source.addFeatures(t):i.getSource().addFeatures(t))};e.exports={addBubble:p,addLayer:p,setLayerData:m,clear:function(e){d.get(e.mapId+"_"+e.layerId)&&d.get(e.mapId+"_"+e.layerId).getSource()&&d.get(e.mapId+"_"+e.layerId).getSource().clear()}}},function(e,t,a){var r=a(1),o=a(3),n=r.BaseLayer,i=r.Util,l=r.OlUtil,s=r.Constant,c=r.layerCache;s.BUSINESSTYPE.BUBBLE_CIRCLE="BUBBLE_CIRCLE";var d=function(e){var t=e.mapId+"_"+e.layerId,a=null;c.containsKey(t)?a=c.get(t):(n.createLayer(e),a=c.get(t)),e.multiple&&a.set("multiple",e.multiple),a.set("businessType",s.BUSINESSTYPE.BUBBLE_CIRCLE),void 0!=e.minShowLevel&&a.set("minShowLevel",parseInt(e.minShowLevel)),void 0!=e.maxShowLevel&&a.set("maxShowLevel",parseInt(e.maxShowLevel));var r=a.getSource();e.source=r,void 0!==e.zindex&&a.setZIndex(e.zindex),u(e)},u=function(e){var t=e.datas,a=e.mapId+"_"+e.layerId,n=c.get(a),d=n.getSource();if(i.isValid(t)||t.length>0){var u=[];t.forEach(function(e){var t=i.gcjTransform(e.coordinate);t=l.transform(t);var a;a=r.Constant.MAPPROPERTY.TRANSFORMIND?e.radius:e.radius/o.OlProj.METERS_PER_UNIT.degrees;var n=new o.Feature({geometry:new o.geom.Circle(t,a),data:e,businessType:s.BUSINESSTYPE.BUBBLE_CIRCLE});n.setId(e.id);var c=new o.style.Style({fill:new o.style.Fill({color:e.fillColor||"#319FD3"}),stroke:new o.style.Stroke({color:e.strokeColor||"#ff0",width:e.strokeWidth||1})});n.setStyle(c),u.push(n)}),d.addFeatures(u)}};e.exports={addBubble:d,addLayer:d,setLayerData:u}},function(e,t,a){function r(e){return h.get(e).getOlMap()}function o(e,t){e&&e.getFeatures().forEach(function(a){a.get("type")===t&&e.removeFeature(a)})}function n(e,t){var a=s(e);a&&o(a.getSource(),t)}function i(e,t){var a=r(e),o=a.getOverlays().getArray().slice(0);if(o.forEach(function(e){var r=e.get("type");r&&r===t&&a.removeOverlay(e)}),f[e]){var n=f[e].indexOf(t);n>-1&&f[e].splice(n,1)}}function l(e,t){n(e,t),i(e,t)}function s(e){var t=g.get(e+"tempGeometryLayer_");if(!t){var a=new p.style.Style({fill:new p.style.Fill({color:"rgba(255, 255, 255, 0.2)"}),stroke:new p.style.Stroke({color:"#0099FF",width:3}),image:new p.style.Circle({radius:7,fill:new p.style.Fill({color:"#0099FF"})})}),r={layerId:"tempGeometryLayer",mapId:e,style:a,zindex:200};t=m.createLayer(r),t.set("type","tempGeometryLayer")}return t}function c(e){var t=e.type?e.type:"all",a=e.callback,r=[],o=y.getLayer({mapId:e.mapId,layer_id:e.mapId+"tempPolygon_"});o||u.Polygon.addLayer({mapId:e.mapId,layerId:"tempPolygon"}),u.Geometry.drawGeometry({mapId:e.mapId,type:u.Geometry.DrawTypes.Box,isOpen:!0,showCloseIcon:!1,endCallback:function(o){for(var n=[],i=0;i<o.coordinates[0].length;i++)n.push(p.OlProj.transform(o.coordinates[0][i],"EPSG:3857","EPSG:4326"));var s=new p.geom.Polygon([o.coordinates[0]]);if(s.getArea()>0){var c=s.getExtent(),d=m.getLayers(e.mapId);d.forEach(function(e){var a=e.get("businessType");if(a){var o=e.getSource();if("getFeaturesInExtent"in o){var n=[];"all"===t?n=o.getFeaturesInExtent(c):t===a&&(n=o.getFeaturesInExtent(c)),r=r.concat(n)}}}),a&&"function"==typeof a&&a({extext:c,features:r})}setTimeout(function(){l(o.mapId,o.actId)},1e3)}})}function d(e){var t=r(e.mapId),a=e.type,o=t.getLayers(),n=[];if("Circle"==a){var i=e.center;e.radius;o.forEach(function(e){var t=e.get("businessType");if(t){var a=(e.getSource(),e.getFeatures());a.forEach(function(e){var t=e.getGeometry().getCoordinate();eGIS.Util.calcDistanceBetweenLonLat(i,t)&&(n=n.concat(e))})}})}else"Polygon"==a&&o.forEach(function(e){console.log(e);var t=e.get("businessType");if(t){var a=e.getSource(),r=[];r=a.getFeaturesInExtent(_extent),n=n.concat(r)}});return n}var u=a(1),p=a(3),m=u.BaseLayer,y=(u.Util,u.OlUtil),f=(u.Constant,{}),g=(u.Map,u.layerCache),h=u.mapCache;e.exports={seachFeatures:c,searchFeaturesByGeom:d}},function(e,t,a){function r(e){return f.getMapObj(e).getOlMap()}function o(e,t){var a=r(e).getOverlays().getArray();return g.find(a,function(e){return e.get("name")===t})}function n(e,t,a){var r=e.getBoundingClientRect(),o=t-r.left,n=a-r.top;e.style.left=e.offsetLeft+o+"px",e.style.top=e.offsetTop+n+"px"}function i(e){isNaN(e.position[0])&&isNaN(e.position[1])||(this.setOptions(e),this.setElement())}function l(e){var t=e.mapId,a=r(t);if(a){var n=o(t,"popup-default");n&&a.removeOverlay(n);var l=new i(e),s=new m.Overlay({element:l.element,autoPan:!0,autoPanAnimation:{duration:v.POPUP_PROPERTY.PANDARATION},autoPanMargin:v.POPUP_PROPERTY.MARGIN});s.set("type","popups"),s.set("name","popup-default"),a.addOverlay(s);var c=g.gcjTransform(e.position);s.setPosition(I.transform(c)),s.popover=l,l.show()}}function s(e){var t=r(e);t&&c(e,"popups",function(e){e.popover&&e.popover.destroy()})}function c(e,t,a){var o=r(e).getOverlays().getArray().slice(0);o.forEach(function(o){o.get("type")===t&&(a&&a(o),r(e).removeOverlay(o))})}function d(e,t){var a=r(e);if(a){var n=o(e,t);n&&(n.popover&&n.popover.destroy(),a.removeOverlay(n))}}function u(e){e.data.forEach(function(t,a){var r,o;t.dominfo.coordinateX&&t.dominfo.coordinateY?(r=t.dominfo.coordinateX,o=t.dominfo.coordinateY):(r=(parseFloat(t.maxX)+parseFloat(t.minX))/2,o=(parseFloat(t.maxY)+parseFloat(t.minY))/2),p({element:t.dominfo.domelement,position:[r,o],mapId:e.mapId,id:t.id,offSet:t.dominfo.offset,domId:e.id,positioning:t.dominfo.positioning})})}function p(e){x.hasOwnProperty(e.mapId)||(x[e.mapId]={});var t=eGIS.Util,a=t.gcjTransform(e.position),r=eGIS.OlUtil.transform(a,!1),o=e.mapId,n=eGIS.Map,i=n.getMapObj(o).getOlMap(),l=(e.element,document.createElement("div")),s=$(e.element);return l.setAttribute("class","contextmenu"),l.setAttribute("id",e.domId+e.id),$.each(s,function(e,t){l.appendChild(t)}),document.getElementById(o).appendChild(l),_menuOverlay=new m.Overlay({element:document.getElementById(e.domId+e.id),positioning:e.positioning,position:r,autoPan:!0,offset:e.offSet,stopEvent:!1}),_menuOverlay.set("type","label"),_menuOverlay.setMap(i),i.addOverlay(_menuOverlay),x[e.mapId][e.id]=_menuOverlay,_menuOverlay}var m=a(3),y=a(1),f=y.Map,g=y.Util,h=y.DomUtil,v=y.Constant,I=y.OlUtil;i.prototype.setOptions=function(e){this.options=e,this.title=e.title?e.title:""},i.prototype.setElement=function(){var e=document.createElement("div");e.className="gisCovery-popup",e.style.minWidth="100px";var t=document.createElement("div");t.className="gisCovery-popup-header";var a=document.createElement("div");a.className="gisCovery-popup-title",a.innerHTML=this.title,t.appendChild(a);var r=document.createElement("div");r.className="gisCovery-popup-close",r.innerHTML="",t.appendChild(r);var o=document.createElement("div");o.className="gisCovery-popup-content",this.options.contentClass&&o.classList.add(this.options.contentClass),this.options.contentId&&(o.id=this.options.contentId),"string"==typeof this.options.content?o.innerHTML=this.options.content:o.appendChild(this.options.content);var n=document.createElement("div");n.className="gisCovery-popup-arrow",e.appendChild(t),e.appendChild(o),e.appendChild(n),this.headerElement=t,this.contentElement=o,this.arrowElement=n,this.element=e;var i=this;h.on(r,"click",function(){d(i.options.mapId,"popup-default")})},i.prototype.getPosition=function(e){return e=e||this.element.parentNode,e.getBoundingClientRect()},i.prototype.getCalculatedOffset=function(e,t,a,r){return"bottom"===e?{top:t.top+t.height,left:t.left+t.width/2-a/2}:"top"===e?{top:t.top-r,left:t.left+t.width/2-a/2}:"left"===e?{top:t.top+t.height/2-r/2,left:t.left-a}:{top:t.top+t.height/2-r/2,left:t.left+t.width}},i.prototype.show=function(){var e=this.getPosition(),t=this.element,a=t.offsetWidth,r=t.offsetHeight,o=this.getCalculatedOffset("top",e,a,r);n(t,o.left,o.top+5)},i.prototype.destroy=function(){this.element=null,this.headerElement=null,this.contentElement=null,this.arrowElement=null};var S=function(e,t){if("object"==typeof e&&e instanceof Array){var a=o(t,"popup-default");a.setOffset(e)}},C=function(e,t,a,r){var n=o(r,"popup-default");if(n&&(void 0===e?n.setPosition(e):(t&&(e=transfrom(e)),n.setPosition(e))),a){var i=mapView.getCenter(),l=g.getPointQuadrant(i,e);1===l?n.setPositioning("top-right"):2===l?n.setPositioning("top-left"):3===l?n.setPositioning("bottom-left"):4===l&&n.setPositioning("bottom-right")}},P=function(e,t){var a=o(t,"popup-default");a.setPositioning(e)},b=function(e){var t=o(e,"popup-default");return t},w=function(e){var t=o(e,"popup-default");return t.getElement()},x={},E=function(e){var t=eGIS.Map,a=t.getMapObj(e.mapId).getOlMap();void 0!==a&&x[e.mapId]&&x[e.mapId][e.id]&&(a.removeOverlay(x[e.mapId][e.id]),delete x[e.mapId][e.id])};e.exports={addPopup:l,removeAllPopup:s,setInnerHTML:i.prototype.setElement,setOffset:S,setPosition:C,setPositioning:P,getMapTips:b,getPopupElement:w,addDomOverlay:u,removeDomOverlay:E}},function(e,t){function a(e,t){var a,o,n,i,l,s,c,d,u=new r;return n=3*(e[1].x-e[0].x),o=3*(e[2].x-e[1].x)-n,a=e[3].x-e[0].x-n-o,s=3*(e[1].y-e[0].y),l=3*(e[2].y-e[1].y)-s,i=e[3].y-e[0].y-s-l,c=t*t,d=c*t,u.x=a*d+o*c+n*t+e[0].x,u.y=i*d+l*c+s*t+e[0].y,u}function r(e,t){this.x=e||0,this.y=t||0}function o(e,t,r){var o,n;for(o=1/(t-1),n=0;n<t;n++)r[n]=a(e,n*o)}var n=function(e,t){var a=e.coordinates.length;if(2===a){var n=[],i=e.coordinates[0],l=e.coordinates[1],s=e.radius[0],c=e.radius[1],d=e.azimuth[0],u=e.azimuth[1],p=lm.OlProj.fromLonLat(i),m=lm.OlProj.fromLonLat(l),y=Math.PI/2-d/180*Math.PI,f=Math.PI/2-u/180*Math.PI,g=p[0]+s*Math.cos(y),h=p[1]+s*Math.sin(y),v=m[0]+c*Math.cos(f),I=m[1]+c*Math.sin(f),S=lm.OlProj.fromLonLat(i),C=lm.OlProj.fromLonLat(l),P=[g,h],b=[v,I],w=[new r(S[0],S[1]),new r(P[0],P[1]),new r(b[0],b[1]),new r(C[0],C[1])],x=e.numberOfPoints,E=[];if(o(w,x,E),E.length>0)for(var k=0;k<E.length;k++)n.push(lm.OlProj.toLonLat([E[k].x,E[k].y]));var L={mapId:e.mapId,layerId:e.layerId,isBezier:e.isBezier,lineGeoId:e.lineGeoId,fillColor:e.fillColor?e.fillColor:"##208089",strokeColor:e.strokeColor?e.strokeColor:"##208089",strokeWidth:e.strokeWidth?e.strokeWidth:3,coordinates:n};eGIS.LineStraight.addLine(L,t)}};e.exports={addCurve:n}},function(e,t,a){function r(e){var t=[];return e.forEach(function(e){var a=s.transform(e);t.push(a);
}),t}function o(e,t,a){if(e){var r=e.get("map"),o=r.getTarget(),i=e.get("layer_id"),s=e.get("businessType");u.removeHighlight({mapId:o,layerId:i,hTypes:[t]});var c=u.getHLayer({mapId:o,layerId:i});if(t===l.HTYPE.CLICK){if(a.feature){var d=a.feature.get("arrow"),p=d,m=d.getId(),y=d.get("select"),f=a.feature.getId(),g=a.feature,h=a.feature.get("select"),v=a.feature.get("lineData"),I=new n.style.Style({stroke:new n.style.Stroke({width:h.strokeWidth,color:h.strokeColor}),text:new n.style.Text({text:void 0!==v?v.name:"",font:"12px Calibri,sans-serif",fill:new n.style.Fill({color:h.labelFillColor}),stroke:new n.style.Stroke({color:h.labelStrokeColor,width:h.strokeWidth})})}),S=new n.style.Style({image:new n.style.RegularShape({fill:new n.style.Fill({color:y.labelFillColor||"#208089"}),stroke:new n.style.Stroke({color:y.strokeColor||"#000",width:y.strokeWidth||1}),cursor:"point",points:3,radius:"EPSG:3857"===l.MAPPROPERTY.CURRENT_PROJECTION?y.arrowRadius:y.arrowRadius/ol.proj.METERS_PER_UNIT.degrees,rotation:y.rotation,angle:0})});p.setStyle(S),p.setId(m),p.set("mapId",o),p.set("layerId",i),p.set("layerType",s),p.set("hType",t),p.set("highLightFeatrue",!0),g.setStyle(I),g.setId(f),g.set("mapId",o),g.set("layerId",i),g.set("layerType",s),g.set("hType",t),g.set("highLightFeatrue",!0),g.set("arrow",p),c.getSource().addFeature(p),c.getSource().addFeature(g)}}else t===l.HTYPE.VECTOR&&a.geoIds.map(function(a){var r=e.getSource().getFeatureById(a),d=r.get("arrow"),u=d.getId();if(r&&d){var p=r.get("select"),m=d.get("select"),y=r.clone(),f=d.clone(),g=y.get("lineData"),h=g.fontStyle+" "+g.fontSize+" "+g.fontFamily,v=new n.style.Style({stroke:new n.style.Stroke({width:p.strokeWidth,color:p.strokeColor}),text:new n.style.Text({text:g.name||"",font:void 0!==h?h:"12px Calibri,sans-serif",fill:new n.style.Fill({color:p.labelFillColor}),stroke:new n.style.Stroke({color:p.labelStrokeColor,width:p.strokeWidth})})}),I=new n.style.Style({image:new n.style.RegularShape({fill:new n.style.Fill({color:m.labelFillColor||"#208089"}),stroke:new n.style.Stroke({color:m.strokeColor||"#000",width:m.strokeWidth||1}),cursor:"point",points:3,radius:"EPSG:3857"===l.MAPPROPERTY.CURRENT_PROJECTION?m.arrowRadius:m.arrowRadius/ol.proj.METERS_PER_UNIT.degrees,rotation:m.rotation,angle:0})});f.setStyle(I),f.setId(u),f.set("mapId",o),f.set("layerId",i),f.set("layerType",s),f.set("hType",t),f.set("highlightFeature",!0),y.setStyle(v),y.setId(a),y.set("mapId",o),y.set("layerId",i),y.set("layerType",s),y.set("hType",t),y.set("highlightFeature",!0),y.set("arrow",f),c.getSource().addFeature(y),c.getSource().addFeature(f)}})}}var n=a(3),i=(commongis.HashMap,commongis.mapCache),l=commongis.Constant,s=(commongis.Util,commongis.OlUtil),c=commongis.layerCache,d=commongis.BaseLayer,u=commongis.Highlight,p=function(e){var t=e.mapId,a=t+"_"+e.layerId,r=i.get(t),o=void 0===e.isShow||e.isShow;c.containsKey(a)?_layer=c.get(a):(d.createLayer(e),_layer=c.get(a)),e.multiple&&_layer.set("multiple",e.multiple),_layer.set("type",l.CUSTOMTYPE.LAYERTYPE),_layer.set("map",r),_layer.set("layerId",a),_layer.set("layer_id",e.layerId),1===e.isBezier?_layer.set("businessType",l.BUSINESSTYPE.BEZIERLINE):_layer.set("businessType",l.BUSINESSTYPE.STRAIGHTLINE),_layer.set("isShow",o),_layer.set("params.label",e.label);var n=void 0!==e.zindex?e.zindex:l.Z_INDEX.LINE;return _layer.setZIndex(n),void 0!=e.minShowLevel&&_layer.set("minShowLevel",parseInt(e.minShowLevel)),void 0!=e.maxShowLevel&&_layer.set("maxShowLevel",parseInt(e.maxShowLevel)),_layer},m=function(e,t){var a=e.lineGeoId,o=e.name,i=e.coordinates,s=e.strokeColor,c=e.strokeWidth,d=e.fillColor,u=e.labelStrokeColor,m=e.labelFillColor,y=p(e),f=y.getSource(),g=r(i),h=new n.geom.LineString(g),v={fillColor:d,strokeColor:"black",strokeWidth:c||3,labelFillColor:m||"black",labelStrokeColor:u||"#ffffff"},I=new n.Feature({geometry:h,lineData:e,businessType:1===e.isBezier?l.BUSINESSTYPE.BEZIERLINE:l.BUSINESSTYPE.STRAIGHTLINE,select:e.hightLight?e.hightLight:v});if(e.hightLight)for(var S in v)e.hightLight[S]?e.hightLight[S]:e.hightLight[S]=v[S];var C=new n.style.Style({stroke:new n.style.Stroke({color:s||"rgba(138,43,226,0.5)",width:c||3}),text:new n.style.Text({text:o,font:"12px Calibri,sans-serif",fill:new n.style.Fill({color:d||"rgba(138,43,226,0.5)"}),stroke:new n.style.Stroke({color:s||"rgba(138,43,226,0.5)",width:c||3})})});if(I.setStyle(C),I.set("layer",y),I.setId(a),1===e.isBezier?I.set("vectorType",l.BUSINESSTYPE.BEZIERLINE):I.set("vectorType",l.BUSINESSTYPE.STRAIGHTLINE),I.set("data",i),I.set("coordinates",g),f.addFeature(I),1===e.isBezier){if(!t)return e.coordinates;t(e.coordinates,I)}else t(I)};e.exports={addLine:m,highlight:o}},function(e,t,a){function r(e,t,a){var r=p.getMapObj(a).getOlMap(),o=r.getPixelFromCoordinate(e),n=r.getPixelFromCoordinate(t),i=o[0],l=o[1],s=n[0],c=n[1],d=7,u=s-i>=0?-1:1,m=c-l>=0?-1:1,y=Math.atan2(c-l,s-i),f=s+u*d*Math.abs(Math.cos(y)),g=c+m*d*Math.abs(Math.sin(y));return r.getCoordinateFromPixel([f,g])}function o(e,t){if(e&&e.getSource()){var a=e.getSource().getFeatures(),o=function(e,a){var o=e.getGeometry(),n=a.getGeometry(),i=e.get("coordinates"),l=r(i[0],i[1],t);o.setCoordinates([i[0],l]),n.setCoordinates(l)};!!a&&a.forEach(function(e){var t=e.get("arrow");t&&setTimeout(function(){o(e,t)},500)})}}function n(e,t){var a=!1;return e.forEach(function(e){e.get("layerId")&&e.get("layerId")===t&&(a=!0)}),a}function i(e){var t=e.mapId,a=p.getMapObj(t),r=e.targetLayerId,o=e.targetGeoId,i=e.sourceLayerId,s=e.sourceGeoId,c=e.layerId,u=e.lineGeoId,m=d.get(r+"_"+t),y=d.get(i+"_"+t);if(m&&y){var f=m.getSource().getFeatureById(o),g=y.getSource().getFeatureById(s);if(f&&g){var v=l.OlProj.toLonLat(l.extent.getCenter(f.getGeometry().getExtent())),I=l.OlProj.toLonLat(l.extent.getCenter(g.getGeometry().getExtent()));e.coordinates=[v,I],h(e),a.getLayers().on("change:length",function(){if(n(this,r+"_"+t)&&n(this,i+"_"+t));else{var e=d.get(c+"_"+t);if(e){var a=e.getSource().getFeatureById(u),o=e.getSource().getFeatureById(u+"_arrow");a&&e.getSource().removeFeature(a),o&&e.getSource().removeFeature(o)}}})}else console.warn("the feature is undefined")}else console.warn("the layer is undefined")}var l=a(3),s=a(1),c=s.Constant,d=s.HashMap,u=s.layerCache,p=s.Map,m=s.Util,y=s.OlUtil,f=(s.Event,s.Highlight,!1),g=function(e){if(f)return!1;var t=eGIS.Map.getMapObj(e).getOlMap();if(t){var a=t.getView();f=!0,a&&a.on("change:resolution",function(t){u.keys().forEach(function(t){var a=u.get(t);if(a&&a instanceof l.layer.VectorLayer&&a.get("businessType")){var r=a.get("businessType");r===c.BUSINESSTYPE.STRAIGHTLINE&&o(a,e)}})})}},h=function(e){e.layerId;e.coordinates=m.transformMultArray(m.extend([],e.coordinates)),1===e.isBezier?eGIS.Curve.addCurve(e,function(t,a){1==e.isArrow&&(e.controlCoordinate=t,e.isSetArrowPosition=!0,S(e,a))}):eGIS.LineStraight.addLine(e,function(t){1==e.isArrow&&(e.isSetArrowPosition=!0,S(e,t)),g(e.mapId)})},v=function(e,t){var a,r,o=Math.sqrt(Math.pow(e[0][0]-e[1][0],2)+Math.pow(e[0][1]-e[1][1],2));if(e[0][0]===e[1][0])a=e[0][0],r=e[0][1]<e[1][1]?o*t+e[0][1]:e[0][1]-o*t;else{var n=(e[0][1]-e[1][1])/(e[0][0]-e[1][0]),i=(e[0][1]+e[1][1]-n*(e[0][0]+e[1][0]))/2,l=o*t,s=Math.pow(2*n*(i-e[0][1])-2*e[0][0],2)-4*(1+n*n)*(Math.pow(e[0][0],2)+Math.pow(i-e[0][1],2)-l*l),c=2*e[0][0]-2*n*(i-e[0][1]);a=(c+Math.sqrt(s))/(2*(1+n*n)),e[0][0]<e[1][0]?a<e[0][0]&&(a=(c-Math.sqrt(s))/(2*(1+n*n))):a>e[0][0]&&(a=(c-Math.sqrt(s))/(2*(1+n*n))),r=n*a+i}return[a,r]},I=function(e,t){var a,r,o,n,i=[];if(2===e.length)r=v(e,t)[0],o=v(e,t)[1],i=y.reTransform(e[0]);else{var l=e.length;if(.5===t)r=e[l-1][0],o=e[l-1][1],i=y.reTransform(e[l-2]),n=l-2;else{var s=Math.round(l*t);s=s===l?s-1:s,r=e[s][0],o=e[s][1];var c=0===s?0:s-1;i=y.reTransform(e[c]),n=c}}a=0===t?e[0]:[r,o];var d=0===t?[i,ol.proj.toLonLat(e[1])]:[i,y.reTransform(a)];return{middlePointCoordinate:a,middleAndPrePointCoordinate:d,index:n}},S=function(e,t){for(var a,o,n,i=[],s=e.coordinates,c=null,d=null,p=[],m=[],f=0;f<s.length;f++)i.push(y.transform(s[f]));var g=i[i.length-2];if(e.isSetArrowPosition){var h=e.arrowPosition,v="undefined"==typeof h||h>1||h<0?.5:h;"undefined"==typeof e.controlCoordinate?a=I(i,v):(e.controlCoordinate.forEach(function(e){p.push(y.transform(e))}),a=I(p,v),e.controlCoordinate.forEach(function(e,t){t<=a.index&&m.push(e)})),o=e.isSetArrowPosition?m:e.controlCoordinate,n=e.isSetArrowPosition?a.middleAndPrePointCoordinate:e.coordinates,d=a.middlePointCoordinate}else d=i[i.length-1];var S=e.lineGeoId+"_arrow";if(1===e.isBezier)e.controlCoordinate&&(c=C(n,o));else{var P=r(g,d,e.mapId);t.getGeometry().setCoordinates([g,P]);var b=d[0]-g[0],w=d[1]-g[1];c=-Math.atan2(w,b)+Math.PI/2}var x=null,E={labelFillColor:e.fillColor,labelStrokeColor:e.labelStrokeColor,strokeColor:"black",strokeWidth:e.strokeWidth||1,arrowRadius:e.arrowRadius||8,rotation:c,angle:0};x=1===e.isBezier?new l.Feature({geometry:new l.geom.Point(a.middlePointCoordinate),select:e.hightLight?e.hightLight:E}):new l.Feature({geometry:new l.geom.Point(P),select:e.hightLight?e.hightLight:E});var k=new l.style.Style({image:new l.style.RegularShape({fill:new l.style.Fill({color:e.fillColor||"#208089"}),stroke:new l.style.Stroke({color:e.strokeColor||"#000",width:e.strokeWidth||1}),cursor:"point",points:3,radius:e.arrowRadius||8,rotation:c,angle:0})});x.setId(S),x.setStyle(k),1!==e.isBezier&&x.set("coordinates",P),t.set("arrow",x);var L=u.get(e.mapId+"_"+e.layerId);L&&L.getSource().addFeatures([x])},C=function(e,t){if(t.length>0){var a=e[e.length-1],r=[],o=t.length;r=1===t.length?t[0]:t[o-1];var n=a[0]-r[0],i=a[1]-r[1],l=-Math.atan2(i,n)+Math.PI/2;return l}},P=function(e){var t=e.get("data").cellType,a=e.get("data").radius,r=e.get("data").azimuth,o=[],n=e.getGeometry();if(n){var i=n.getCoordinates()[0],s=[];if("triangle"===t){for(var c=[],d=i.length,u=0;u<d;u++){for(var p=!0,y=u;y<i.length-1&&(p=!1,i[u]!=i[y+1]);y++);p&&(c=i[u])}for(var f=m.unique(i),u=0,p=!0;u<f.length;p?u++:u)f[u][0]===c[0]&&f[u][1]===c[1]?(f.splice(u,1),p=!1):p=!0;if(2===f.length){var g=(f[0][0]+f[1][0])/2,h=(f[0][1]+f[1][1])/2;s.push(g,h)}}else if("arrow"===t)s=i[3];else{var v=a,I=m.gcjTransform(e.get("data").coordinate),S=l.OlProj.fromLonLat(I),C=Math.PI/2-r/180*Math.PI,P=S[0]+v*Math.cos(C),b=S[1]+v*Math.sin(C);s.push(P,b)}o=l.OlProj.toLonLat(s);var w=m.gcj_decTransform(o);return w}},b=function(e){if(2===e.length){var t=l.OlProj.fromLonLat(e[0]),a=l.OlProj.fromLonLat(e[1]),r=a[0]-t[0],o=a[1]-t[1],n=180*Math.atan(r/o)/Math.PI;return n!==-90&&90!==n||(n*=-1),n+=o>0?270:90,n>360&&(n-=360),0===n&&(n=360),n}},w=function(e){if(e){for(var t=0,a=e,r=l.OlProj.fromLonLat(e[0]),o=l.OlProj.fromLonLat(e[1]),n=0,i=a.length-1;n<i;++n)t+=new ol.geom.LineString([r,o]).getLength();var s;return s=Math.round(1e3*t)/1e3+" m"}};e.exports={addLineType:h,clickShowAzimuth:b,showDistance:w,addLineByGeomId:i,getCellApex:P,setNewCoordinate:o}},function(e,t){function a(e,t){var a=[],o=null,n="undefined"==typeof t||t,i=e?e:"http://127.0.0.1:9080",l={};l.userType="web";var s=$.ajax({type:"post",url:i+"/egis/gisinitparameter/getparameter",dataType:"json",data:JSON.stringify(l),async:n,success:function(e){egisConfigParam=[];var t=e.mapParameter;$.each(t,function(e,t){t.params.extent&&t.params.origin&&t.params.resolutions&&(t.params.tileSize?("WMS_MAP"==t.params.mapType?tilegrid=new lm.TileGrid({extent:t.params.extent,origin:t.params.origin,resolutions:t.params.resolutions,tileSize:t.params.tileSize}):"WMTS_MAP"==t.params.mapType&&(tilegrid=new lm.Wmts({extent:t.params.extent,origin:t.params.origin,resolutions:t.params.resolutions,tileSize:t.params.tileSize,matrixIds:t.params.matrixIds})),delete t.params.tileSize):"WMS_MAP"==t.params.mapType?tilegrid=new lm.TileGrid({extent:t.params.extent,origin:t.params.origin,resolutions:t.params.resolutions}):"WMTS_MAP"==t.params.mapType&&(tilegrid=new lm.Wmts({extent:t.params.extent,origin:t.params.origin,resolutions:t.params.resolutions,matrixIds:t.params.matrixIds})),t.params.resolutions.length<t.params.maxZoom&&(t.params.resolutions=r(t.params.resolutions,t.params.maxZoom,t.params.minZoom)),t.params=$.extend(!0,{},t.params,{tilegrid:tilegrid})),1==t.configType&&egisConfigParam.push(t),"WUJIANG_MAP"==t.baseMapCode&&(eGIS.Constant.wjMapParam=t.params),"HUAWEI_MAP"==t.baseMapCode&&(eGIS.Constant.HWMapParam=t.params),2==t.configType&&(o=t.params,o.layerId=t.baseMapCode,o.layers&&o.mapName&&o.version&&(o.params={LAYERS:o.layers,MAPNAME:o.mapName,VERSION:o.version},delete o.layers,delete o.mapName,delete o.version,o.customAttribute={layerName:t.baseMapName},o.layerName=t.baseMapName,a.push(o))),eGIS.Constant.fixedLayers=a,eGIS.Constant.baseMapParams=egisConfigParam}),egisNewParam=egisConfigParam[0].params,eGIS.Constant.defaultMapParam=egisNewParam}});return s}var r=function(e,t,a){var r=e,o=r.length;if(o<11&&o<t){for(var n=r[r.length-1],i=t-a-o,l=[],s=0;s<=i;s++)n/=2,l.push(n);r=r.concat(l)}else{for(var n=r[r.length-1],i=t-o,l=[],s=0;s<=i;s++)n/=2,l.push(n);r=r.concat(l)}return r};e.exports={setParam:a}},function(e,t,a){var r=a(1),o=r.Map,n=function(e){var t=o.getMapObj(e.mapId);if(e.useControl){var a="";if(!t)return!1;if(void 0==eGIS.Constant.baseMapParams)eGIS.Network.setParam(e.url).then(function(t){new l({tipLabel:a,mapId:e.mapId,mapParams:eGIS.Constant.baseMapParams})});else{new l({tipLabel:a,mapId:e.mapId,mapParams:eGIS.Constant.baseMapParams})}}},i=function(e){var t=document.getElementById(e)||document.querySelector("."+e),a=document.querySelector(".layer-switcher");t.removeChild(a)},l=function(e){var t=e||{},a=t.tipLabel?t.tipLabel:"Legend";t.title||"noName";this.hiddenClassName="ol-unselectable layer-switcher",this.mapId=t.mapId,this.mapParams=t.mapParams;var r=document.createElement("div");r.className=this.hiddenClassName,this.shownClassName=this.hiddenClassName+" shown";var o=document.createElement("button");o.setAttribute("title",a),o.setAttribute("style","width:30,height:30"),r.appendChild(o),this.panel=document.createElement("div"),this.panel.className="panel";var n=document.createElement("ul");this.panel.appendChild(n),this.renderLayers_(this.mapParams,n),r.appendChild(this.panel);var i=this.getDomNode(t.mapId);i.appendChild(r),this.element=r;var l=this;o.onclick=function(e){e=e||window.event;e.target;"ol-unselectable layer-switcher shown"==l.element.className?l.hidePanel():l.showPanel()}};l.prototype.getDomNode=function(e){var e=document.getElementById(e)?document.getElementById(e):document.querySelector(e);return e},l.prototype.hidePanel=function(){this.element.className!=this.hiddenClassName&&(this.element.className=this.hiddenClassName)},l.prototype.showPanel=function(){this.element.className!=this.shownClassName&&(this.element.className=this.shownClassName)},l.prototype.renderLayers_=function(e,t){var a=this,r=[],o=document.createElement("li");o.className="group";var n=document.createElement("label"),i=document.createElement("ul");e&&e.forEach(function(e,t){r.push(e),e.isDefault?a.renderLayer_(e,i,!0):a.renderLayer_(e,i,!1)}),n.htmlFor="base",n.innerHTML="",o.appendChild(n),o.appendChild(i),t.appendChild(o)},l.prototype.renderLayer_=function(e,t,a){var r=document.createElement("label"),o=document.createElement("li");o.className="layer";var n=document.createElement("input");n.type="radio",n.name="base",n.id=e.baseMapCode,n.checked=a,a&&(n.checked=!0),n.onchange=function(t){t.target.checked=!0,e.params.proj===eGIS.Constant.MAPPROPERTY.CURRENT_PROJECTION?eGIS.Map.updateMap(e.params):e&&(eGIS.Map.removeMap([e.params.mapId]),eGIS.Map.createMap(e.params))},n.setAttribute("layerId",e.params.layerId),o.appendChild(n),r.htmlFor=e.baseMapCode,r.innerHTML=e.baseMapName,o.appendChild(r),t.appendChild(o)},e.exports={updateMapControl:n,removeMapControl:i}},function(e,t,a){var r=a(1),o=r.Map,n=r.Wms,i=function(e){var t=o.getMapObj(e.mapId),a=e.layerIds,r=eGIS.Constant.fixedLayers;t?r?a?a.forEach(function(e){r.forEach(function(t){e===t.layerId&&n.createWmsLayer(t)})}):r.forEach(function(e){n.createWmsLayer(e)}):eGIS.Network.setParam(e.url).then(function(e){r=eGIS.Constant.fixedLayers,a?a.forEach(function(e){r.forEach(function(t){e===t.layerId&&n.createWmsLayer(t)})}):r.forEach(function(e){n.createWmsLayer(e)})}):console.error("mapObj dosen't exist")};e.exports={createStaticLayer:i}},function(e,t,a){var r=a(3),o=a(1),n=o.HashMap,i=o.layerCache,l=o.Constant,s=o.Util,c=a(2),d=s.extend({},s,c),u=o.BaseLayer,p=o.OlUtil,m=d.map(),y=d.map();l.BUSINESSTYPE.TRACK_SHOW_LINE="TRACK_SHOW_LINE",l.BUSINESSTYPE.TRACK_SHOW="TRACK_SHOW";var f=function(e){var t=e.mapId,a=t+"_"+e.layerId,r=null;m.set(t,[]),y.set(t,[]),i.containsKey(a)?r=i.get(a):(u.createLayer(e),r=i.get(a)),void 0!==e.zindex&&r.setZIndex(e.zindex),e.source=r.getSource(),r.set("businessType",l.BUSINESSTYPE.TRACK_SHOW_LINE),e.datas.forEach(function(e){e.coordinates=g(e.coordinates,e.pointDistance)}),v(e),b(e)},g=function(e,t){var a;if(e.length<2)return[{coordinate:e[0],actualIndex:0}];for(var r in e)e[r]={coordinate:e[r],actualIndex:Number(r)};if(!t)return e;a=t;for(var o=[],n=0,i=e.length;n<i-1;n++){var l=[],s=[];l.push(e[n].coordinate,e[n+1].coordinate);var c=eGIS.Algorithm.calcLength(l),d=parseFloat(c/a);l.forEach(function(e){var t=h(e,"EPSG:4326","EPSG:3857");s.push(t)});var u=(s[1][0]-s[0][0])/(d+1),p=(s[1][1]-s[0][1])/(d+1);o.push(e[n]);for(var m=h(e[n].coordinate,"EPSG:4326","EPSG:3857")[0],y=h(e[n].coordinate,"EPSG:4326","EPSG:3857")[1],f=0;f<d;f++){var g=[];m+=u,y+=p,g.push(m,y),g=h(g,"EPSG:3857","EPSG:4326"),o.push({coordinate:g,actualIndex:-1})}n==i-2&&i>2&&o.push(e[n+1])}return o},h=function(e,t,a){var r=o.Transform.Transform.transform({coordinate:e,sourceProj:t,targetProj:a});return r},v=function(e){var t=e.datas,a=e.source;if(d.isValid(t))for(var o=0,n=t.length;o<n;o++){for(var i=[],s=d.transformMultArray(t[o].coordinates),c=t[o].style,u=0,m=s.length;u<m;u++){var y=p.transform([s[u].coordinate[0],s[u].coordinate[1]]);i.push(y)}var f=new r.Feature({geometry:new r.geom.LineString(i),businessType:l.BUSINESSTYPE.TRACK_SHOW_LINE});if(c&&c.lineStrokeColor){var g=new r.style.Style({stroke:new r.style.Stroke({color:c.lineStrokeColor,width:c.lineStrokeWidth?c.lineStrokeWidth:3})});f.setStyle(g)}if(a.addFeature(f),e.needArrow){var h=i.filter(function(e,t,a){return t>a.length-3}),v=h[1][0]-h[0][0],I=h[1][1]-h[0][1],S=-Math.atan2(I,v)+Math.PI/2,C=new r.style.Style({image:new r.style.RegularShape({fill:new r.style.Fill({color:c?c.lineStrokeColor:"blue"}),stroke:new r.style.Stroke({color:c?c.lineStrokeColor:"blue",width:1}),points:3,radius:c&&c.arrowRadius?c.arrowRadius:5,rotation:S,angle:0})}),P=new r.Feature({geometry:new r.geom.Point(h[1]),businessType:l.BUSINESSTYPE.TRACK_SHOW_LINE});P.setStyle(C),a.addFeature(P)}}},I=new Object,S=new Object,C=new Object,P=new Object,b=function(e){S[e.mapId.toString()]||(S[e.mapId.toString()]={}),P[e.mapId.toString()]||(P[e.mapId.toString()]={}),C[e.mapId.toString()]||(C[e.mapId.toString()]={}),C[e.mapId]["paramObj"+e.layerId]=e,y.get(e.mapId).pop(),y.get(e.mapId).push(C[e.mapId]);var t=e.datas,a=e.source,o=0;o=e.speedRate?500*e.speedRate:500;var i=e.isKeepTrack,s=(e.isLoop,e.mapId);if(d.isValid(t))for(var c=function(t,c,u,y,f,g){var h,v=s+"trackPoint"+u,C=void 0!==e.reverseTrack&&e.reverseTrack;h=I[""+u]?C?n.get(v):0:n.get(v)||0;var b,E,k=t.length,L=[],M=0,T=void 0!==e.vectorIcon&&e.vectorIcon,O=void 0!==e.changeRotation&&e.changeRotation;if(S[s].hasOwnProperty(u)&&S[s][u]&&S[s][u]!==R)for(var _ in S[s])clearInterval(S[s][u]);if(P[s].hasOwnProperty(u)&&P[s][u]&&P[s][u]!==R)for(var _ in P[s])clearTimeout(P[s][u]);var N=new r.Feature({businessType:l.BUSINESSTYPE.TRACK_SHOW}),R=setInterval(function(){if(h<k){var l=t[h],l=h<0?void 0:t[h].coordinate;if(!l){for(var m in S[s])clearInterval(S[s][u]);return}l.length>2&&(_timestamp=l[2]);var _=d.gcjTransform([l[0],l[1]]),G=p.transform(_),F=new r.geom.Point(G);N.set("data",g),N.setGeometry(F);var B=null;if(B=c?w(c,T):w(e.style,T),N.setStyle(B),i||(L.forEach(function(e){e.get("keepHistory")||a.removeFeature(e),e=null}),L=[]),i?N.set("keepHistory",!0):N.set("keepHistory",!1),T&&O&&t.length>1){if(h<t.length-1){var A=t[h].coordinate,U=t[h+1].coordinate,$=U[0]-A[0],D=U[1]-A[1],j=Math.atan2(D,$);b=j>=0?2*Math.PI-j:-1*j}else{var A=t[h-1].coordinate,U=t[h].coordinate,$=U[0]-A[0],D=U[1]-A[1],j=Math.atan2(D,$);b=j>=0?2*Math.PI-j:-1*j}N.getStyle().getImage().setRotation(b)}if(t[h].actualIndex>-1?N.set("featureIndex",t[h].actualIndex):N.set("featureIndex",-1),a.addFeature(N),L.push(N),h===k-1&&i&&clearInterval(R),C||y!==Number(N.get("featureIndex"))&&y!==h?(S[s][u.toString()]=R,I[u.toString()]=!1,N.set("isEnd",!1)):(S[s][u.toString()]=R,x(s,R,u),I[u.toString()]=!0,N.set("isEnd",!0)),N.get("featureIndex")!==-1&&f&&f({feature:N,infor:N&&N.get("data"),coordinate:!!N&&p.reTransform(N.getGeometry().getCoordinates())}),S[s][u.toString()]=R,n.put(v,h),M=0,h<k-1)var W=t[h].coordinate,H=t[h+1].coordinate;h<k-1&&W[0]-H[0]==0&&W[1]-H[1]==0&&(E=setTimeout(function(){i||(L.length>0&&L.forEach(function(e){e.get("keepHistory")||(a.removeFeature(e),e=null)}),L=[])},o/4*3),P[s][u.toString()]=E),C?h>y?x(s,R,u):h--:h>y?h=y:h++}},o);S[s][u.toString()]=R,m&&m.get(s).pop(),m&&m.get(s).push(S[s])},u=0,f=t.length;u<f;u++){var g=t[u],h=g.style||null,v=g.callbackfunc&&"function"==typeof g.callbackfunc?g.callbackfunc:void 0,b=g.coordinates.length-1;c(g.coordinates,h,g.uniqueIdentify,b,v,g)}},w=function(e,t){var a=null,o=null;return t?(e&&e.imageName&&(o=e.imageName.indexOf("data:image/png;base64")!==-1?e.imageName:l.GisResourceURL+e.imageName),a=new r.style.Style({image:new r.style.Icon({src:o,scale:e&&e.scale||1,opacity:e&&e.opacity||1,anchor:e&&e.anchor||[.5,.5],rotation:e&&e.rotation*Math.PI/180||0})})):a=new r.style.Style({image:new r.style.Circle({fill:new r.style.Fill({color:e&&e.fillColor||"#319FD3"}),radius:e&&e.radius||5,stroke:new r.style.Stroke({color:e&&e.strokeColor||"#ff0",width:e&&e.strokeWidth||1})})}),a},x=function(e,t,a){t&&a?m.size>0&&m.get(e)&&m.get(e).length>0&&m.get(e).forEach(function(e,r,o){t===o[r][a]&&clearInterval(o[r][a])}):m.size>0&&m.get(e)&&m.get(e).length>0&&m.get(e).forEach(function(t){for(var a in t)clearInterval(t[a]);for(var a in P[e])clearTimeout(P[e][a])})},E=function(e,t,a){x(e);var r={mapId:e,speedRate:t,reverseTrack:a};_(r)},k=function(e){n.keys().forEach(function(t){t.startsWith(e+"trackPoint")&&n.get(t)!==-1&&n.put(t,n.get(t)-1)}),E(e)},L=function(e){n.keys().forEach(function(t){t.startsWith(e+"trackPoint")&&n.put(t,n.get(t)+1)}),E(e)},M=function(e,t,a){x(e),n.keys().forEach(function(t){t.indexOf(e+"trackPoint")!==-1&&n.put(t,0)}),E(e,t,a)},T=function(e,t){x(e);var a={mapId:e,speedRate:t};_(a)},O=function(e,t){x(e);var a={mapId:e,reverseTrack:t};_(a)},_=function(e){var t=y.get(e.mapId),a=void 0!==t&&t[t.length-1];if(a)for(var r in a){var o=a[r].source.getFeatures();a[r].isKeepTrack||o.forEach(function(e){l.BUSINESSTYPE.TRACK_SHOW===e.get("businessType")&&(a[r].source.removeFeature(e),e=null)}),void 0!==e.reverseTrack&&(a[r].reverseTrack=e.reverseTrack),e.speedRate&&a[r].speedRate&&(a[r].speedRate=e.speedRate),b(a[r])}},N=function(e){var t=e.mapId;u.removeLayer({mapId:t,layerIds:e.layerIds});var a=eGIS.BaseLayer.getLayers(t),r=!0;a.some(function(e){if(e.get("businessType")===eGIS.Constant.BUSINESSTYPE.TRACK_SHOW_LINE)return r=!1,!1}),r&&(n.keys().forEach(function(e){e.indexOf(t+"trackPoint")!==-1&&n.remove(e)}),C[t]=null,C[t]={},S[t]=null,S[t]={},P[t]=null,P[t]={},m&&m.get(t)instanceof Array&&m.get(t).pop(),y&&m.get(t)instanceof Array&&y.get(t).pop())};e.exports={addTrackShow:f,pause:x,start:E,pre:k,next:L,playBackTrack:M,changeSpeedRate:T,reverseTrack:O,removeTrackShowLayer:N}},function(e,t,a){function r(e){var t,a=[],r=n.getLayer(e);if(!(e.polycoordinates instanceof Array))return a;t=turf.polygon([e.polycoordinates]);var o=r.getSource().getFeatures();return o&&o instanceof Array&&o.forEach(function(e){var r=e.get("features");r&&r instanceof Array?r.forEach(function(e){var r=e.getGeometry().getCoordinates(),o=turf.point(r);turf.inside(o,t)&&a.push(e)}):turf.inside(e.getGeometry().getCoordinates(),t)&&a.push(e)}),a}var o=(a(3),a(1)),n=o.BaseLayer;e.exports={getFeaturesByGeomfilter:r}},function(e,t){function a(e){function t(e,t,a,r){var o=new FileReader;"image"==t?o.readAsDataURL(e):"text"==t&&o.readAsText(e),o.onload=function(){if(void 0!=a&&"function"==typeof a){var e={};e.data=o.result,e.fileSuffix=r,a(e)}}}var a=e.domId,r=e.fileSuffixs,o=e.callbackfunc;document.ondragover=function(e){e.preventDefault()},document.ondrop=function(e){e.preventDefault()},document.getElementById(a).ondragover=function(e){e.preventDefault()},document.getElementById(a).ondrop=function(e){for(var a=e.dataTransfer.files,n=0;n<a.length;n++){var i=a[n],l=i.name.split(".")[i.name.split(".").length-1];if(r.indexOf(l)==-1)return;var s;s=/image\//.test(i.type)?"image":"text",t(i,s,o,l)}}}e.exports={dragFiles:a}},function(module,exports,__webpack_require__){function createEditorLayer(){var e="";return e+="<div id='dynamicLayers' class='dynamicLayers'><div class='policebusiness'></div><div class='vectorlayer'><div class='layerName'><label class='left layerlabel' >&nbsp;:</label><div class='left nameContent'><input type='text' class='nameContent' placeholder=''></div><div class='clear'></div></div><div class='layerId'><label class='left layerlabel'>ID&nbsp;:</label><div class='left nameContent'><input type='text' class='static' value='egis_dynamiclayer_' disabled='disabled'><input type='text' class='idContent' placeholder='newlayer1531877'></div><div class='clear'></div></div><div class='layertype'><label class='left layerlabel'>&nbsp;:</label><div class='left '><b class='horizen vectortype'><input type='checkbox' name='layertype' id ='vector'><b class='vectorinputbg'></b>&nbsp;<label for='vector'></label></b><b class='horizen icontype'><input type='checkbox' name='layertype' id ='icons'><b class='iconinputbg'></b>&nbsp;<label for='icons'></label></b></div><div class='clear'></div></div><div class='clusterStyle'><label class='left layerlabel'>&nbsp;:</label><div class='left '><b class='horizen'><input type='checkbox' name='isIcon' id='icon'>&nbsp;<label for='icon'></label></b><b class='horizen'><input type='checkbox' name='isIcon' id='iconCluster'>&nbsp;<label for='iconCluster'></label></b></div><div class='clear'></div></div><div class='diffStyle'><label class='layerlabel diffZoomHeader'>&nbsp;:</label><div class='setIconStyle'><div class='theme'></div><div class='diffZoom'><ul><li><div class='zoomContent'><input type='text' class='minZoom iconMinZoom0' > <b class='under_line'> -</b> <input type='text' class='maxZoom iconMaxZoom0'></div><div id='singleIcon0' class='singleIcon'></div></li></ul></div></div><div class='setVectorStyle' style='display: none'><div class='diffZoom'><ul><li><div class='zoomContent'><input type='text' class='minZoom vectorMinZoom0'><b class='under_line'> -</b> <input type='text' class='maxZoom vectorMaxZoom0'></div><div class='vectorStyle'><textarea class='editStyle' id = 'vectorStyle0'></textarea></div></li></ul></div></div><div class='selectbutton'><a class='delete'><i></i></a><a class='add'><i></i></a></div></div></div><div class='confirm'><div class='certainbtn'><b></b></div><div class='cancelbtn'><b></b></div></div></div>"}function setBusinessLayerStyle(e){var t=document.body,a=document.createElement("div"),r=createEditorLayer();$(a).append(r),$(t).append(a),$(".idContent").val("newlayer"+(new Date).getTime()),layerStyle(e),flag=!0,enableImgDrag()}function chooseStyle(type,param){var style=null,val=eval("("+param+")"),defaultStyle={Point:new lm.style.Style({image:new lm.style.Circle({fill:new lm.style.Fill({color:val.fillColor||"rbga(255,255,0,1)"}),radius:val.radius||10,stroke:new lm.style.Stroke({color:val.strokeColor||"#ff0",width:val.strokeWidth||1})})}),LineString:new lm.style.Style({stroke:new lm.style.Stroke({color:val.strokeColor||"#ff0",width:val.strokeWidth||2})}),Polygon:new lm.style.Style({fill:new lm.style.Fill({color:val.fillColor||""}),stroke:new lm.style.Stroke({color:val.strokeColor||"#0ff",width:val.strokeWidth||1})})};switch(type){case"Point":style=defaultStyle.Point;break;case"Polygon":style=defaultStyle.Polygon;break;case"LineString":style=defaultStyle.LineString}return style}function getInfoFromCsv(e){var t=e.split("\r\n"),a=t[0].split(","),r=a.indexOf("lon"),o=a.indexOf("lat"),n={};n.type="FeatureCollection";var i={type:"name",properties:{name:"urn:ogc:def:crs:OGC:1.3:CRS84"}};n.crs=i;for(var l=(a.length,[]),s=2;s<t.length;s++){var c=t[s].split(","),d={type:"Feature"};if("undefined"!=typeof c[r]&&"undefined"!=typeof c[o]&&!isNaN(parseFloat(c[r]))&&!isNaN(parseFloat(c[o]))){d.geometry={type:"Point",coordinates:[parseFloat(c[r]),parseFloat(c[o])]},d.properties={};for(var u=0;u<c.length;u++)u!=r&&u!=o&&(d.properties[a[u]]=c[u]);l.push(d),n.features=l}}return n}var commongis=__webpack_require__(1),lm=__webpack_require__(3),enableDragAndDropInteraction=function(e){var t={};t.domId=e,t.fileSuffixs=["csv","geojson"],t.callbackfunc=function(t){var a;"csv"==t.fileSuffix?a=getInfoFromCsv(t.data):"geojson"==t.fileSuffix&&(a=t.data);var r={data:a,mapId:e};setBusinessLayerStyle(r)},eGIS.DragAndDropFiles.dragFiles(t)},flag=!1,enableImgDrag=function(){enableDomImgDrag("singleIcon0")},enableDomImgDrag=function(e){var t={};t.domId=e,t.fileSuffixs=["png","jpg"],t.callbackfunc=function(e){var a=new Image;a.src=e.data,document.getElementById(t.domId).innerHTML="",document.getElementById(t.domId).append(a)},eGIS.DragAndDropFiles.dragFiles(t)},layerStyleCache={vector:{},iconCluster:{},icon:{}},layerStyle=function(e){if(!flag){var t={icon:eGIS.Icon.addIcon,iconCluster:eGIS.IconCluster.addLayer,point:eGIS.Point.addLayer,line:eGIS.BLine.addLayer,polygon:eGIS.Polygon.addLayer},a={icon:eGIS.Icon.setLayerData,iconCluster:eGIS.IconCluster.setLayerData,point:eGIS.Point.setLayerData,line:eGIS.BLine.setLayerData,polygon:eGIS.Polygon.setLayerData};$(function(){var r={iconIndex:0,vectorIndex:0};layerStyleCache.vector.style={},layerStyleCache.iconCluster.imageName=[],layerStyleCache.iconCluster.minZoom=[],layerStyleCache.iconCluster.maxZoom=[],$(document).on("change","#vector",function(){$(this)[0].checked?($("#iconCluster").attr("checked",!1),$("#iconCluster").attr("disabled",!0),$("#icons").attr("checked",!1),$("#icon").attr("checked",!1),$(".setVectorStyle").show(),$(".setIconStyle").hide(),layerStyleCache.vector.style.vectorStyle0=$("#vectorStyle0").val()):$("#icon").attr("checked",!1)}),$(document).on("change","#icons",function(){$(this)[0].checked&&($("#vector").attr("checked",!1),$("#iconCluster").attr("checked",!1),$("#iconCluster").attr("disabled",!1),$("#icon").attr("checked",!1),$(".setIconStyle").show(),$(".setVectorStyle").hide())}),$(document).on("change","#iconCluster",function(){$(this)[0].checked&&($("#icon").attr("checked",!1),layerStyleCache.iconCluster.clusterImage="#dynamiclayer_cluster_img img",layerStyleCache.iconCluster.minZoom.push(".iconMinZoom0"),layerStyleCache.iconCluster.maxZoom.push(".iconMaxZoom0"),layerStyleCache.iconCluster.imageName.push("#singleIcon0 img"))}),$(document).on("change","#icon",function(){$(this)[0].checked&&($("#iconCluster").attr("checked",!1),$(".imageName").html("&nbsp;:"),layerStyleCache.icon.imageName=[],layerStyleCache.icon.imageName.push("#singleIcon0 img"))}),$(document).on("click",".add",function(){if("none"!==$(".setVectorStyle")[0].style.display){r.vectorIndex++;var e="<div class='zoomContent'><input type='text' class='minZoom vectorMinZoom"+r.vectorIndex+"'><b class='under_line'> -</b> <input type='text' class='maxZoom vectorMaxZoom"+r.vectorIndex+"'></div><div class='vectorStyle'><textarea class='editStyle' id = vectorStyle"+r.vectorIndex+"></textarea>";$(".setVectorStyle ul").append("<li>"+e+"</li>"),layerStyleCache.vector.style["vectorStyle"+r.vectorIndex]=$("#vectorStyle"+r.vectorIndex).val()}if("none"!==$(".setIconStyle")[0].style.display){r.iconIndex++;var t="<div class='zoomContent'><input type='text' class='minZoom iconMinZoom"+r.iconIndex+"'> <b class='under_line'> -</b> <input type='text' class='maxZoom iconMaxZoom"+r.iconIndex+"'></div><div class='singleIcon' id =singleIcon"+r.iconIndex+"></div>";
$(".setIconStyle ul").append("<li>"+t+"</li>"),$("#iconCluster")[0].checked&&layerStyleCache.iconCluster.imageName.push("#singleIcon"+r.iconIndex+" img"),$("#icon")[0].checked&&layerStyleCache.icon.imageName.push("#singleIcon"+r.iconIndex+" img"),enableDomImgDrag("singleIcon"+r.iconIndex)}}),$(document).on("click",".delete",function(){var e;"none"!==$(".setVectorStyle")[0].style.display&&(e=$(".setVectorStyle li"),e.length>1&&(r.vectorIndex--,$(".setVectorStyle li:eq("+(e.length-1)+")").remove(),layerStyleCache.vector.style.pop())),"none"!==$(".setIconStyle")[0].style.display&&(e=$(".setIconStyle li"),e.length>1&&(r.iconIndex--,$(".setIconStyle li:eq("+(e.length-1)+")").remove(),$("#iconCluster")[0].checked&&layerStyleCache.iconCluster.imageName.pop(),$("#icon")[0].checked&&layerStyleCache.icon.imageName.pop()))}),$(document).on("click",".certainbtn b",function(){var r=$(".static").val()+$(".idContent").val(),o={vector:$("#vector")[0].checked&&$("#icon")[0].checked,icon:$("#icons")[0].checked&&$("#icon")[0].checked,iconCluster:$("#icons")[0].checked&&$("#iconCluster")[0].checked},n={mapId:e.mapId,layerId:r,isCluster:!1,minShowLevel:null,maxShowLevel:null,zindex:null,opacity:1};if(o.vector){n.style=styleFunction;var i=eGIS.BaseLayer.createLayer(n),l=(new lm.format.GeoJSON).readFeatures(e.data);i.getSource().addFeatures(l)}if(o.iconCluster){var s=[];e.data.features.forEach(function(e,t){var a=e.geometry.coordinates,r=$(layerStyleCache.iconCluster.imageName[0])[0].src;s.push({id:t,coordinate:a,imageName:r})});var c={mapId:e.mapId,layerId:r};t.iconCluster(c),c.datas=s,a.iconCluster(c)}if(o.icon){var s=[];e.data.features.forEach(function(e,t){var a=e.geometry.coordinates,r=$(layerStyleCache.icon.imageName[0])[0].src;s.push({id:t,coordinate:a,imageName:r})});var c={mapId:e.mapId,layerId:r};t.icon(c),c.datas=s,a.iconCluster(c)}$(".dynamicLayers").parent().remove()}),$(document).on("click",".cancelbtn b",function(){$(".dynamicLayers").parent().remove()}),$(document).on("change",".editStyle",function(){var e=$(this).attr("id");layerStyleCache.vector.style.hasOwnProperty(e)&&(layerStyleCache.vector.style[e]=$(this).val())})})}},styleFunction=function(e,t){var a=e.getStyleFunction();return a?a.call(e,t):layerStyleCache.vector.style.vectorStyle0?chooseStyle(e.getGeometry().getType(),layerStyleCache.vector.style.vectorStyle0):defaultStyle[e.getGeometry().getType()]};module.exports={enableDragAndDropInteraction:enableDragAndDropInteraction}},function(e,t){e.exports={version:"GIS2.5.2B011"}}]);
